{"ast":null,"code":"var _defineProperty = require(\"D:/VS_Code/EMTR/jgs-assist/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array-buffer.detached.js\");\nrequire(\"core-js/modules/es.array-buffer.transfer.js\");\nrequire(\"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\");\nrequire(\"core-js/modules/es.typed-array.to-reversed.js\");\nrequire(\"core-js/modules/es.typed-array.to-sorted.js\");\nrequire(\"core-js/modules/es.typed-array.with.js\");\nrequire(\"core-js/modules/esnext.iterator.constructor.js\");\nrequire(\"core-js/modules/esnext.iterator.every.js\");\nrequire(\"core-js/modules/esnext.iterator.filter.js\");\nrequire(\"core-js/modules/esnext.iterator.find.js\");\nrequire(\"core-js/modules/esnext.iterator.for-each.js\");\nrequire(\"core-js/modules/esnext.iterator.map.js\");\nrequire(\"core-js/modules/esnext.iterator.reduce.js\");\nrequire(\"core-js/modules/esnext.iterator.some.js\");\nrequire(\"core-js/modules/web.url-search-params.delete.js\");\nrequire(\"core-js/modules/web.url-search-params.has.js\");\nrequire(\"core-js/modules/web.url-search-params.size.js\");\n/* Tabulator v6.3.0 (c) Oliver Folkerd 2024 */\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).Tabulator = t();\n}(this, function () {\n  \"use strict\";\n\n  var _Class, _H, _Class2, _Class3, _Class4, _Class5, _Class6, _Class7, _Class8, _Class9, _Class10, _Class11, _Class12, _Class13, _Class14, _Class15, _Class16, _Class17, _Class18, _Class19, _Class20;\n  var e = {\n    debugEventsExternal: !1,\n    debugEventsInternal: !1,\n    debugInvalidOptions: !0,\n    debugInvalidComponentFuncs: !0,\n    debugInitialization: !0,\n    debugDeprecation: !0,\n    height: !1,\n    minHeight: !1,\n    maxHeight: !1,\n    columnHeaderVertAlign: \"top\",\n    popupContainer: !1,\n    columns: [],\n    columnDefaults: {},\n    rowHeader: !1,\n    data: !1,\n    autoColumns: !1,\n    autoColumnsDefinitions: !1,\n    nestedFieldSeparator: \".\",\n    footerElement: !1,\n    index: \"id\",\n    textDirection: \"auto\",\n    addRowPos: \"bottom\",\n    headerVisible: !0,\n    renderVertical: \"virtual\",\n    renderHorizontal: \"basic\",\n    renderVerticalBuffer: 0,\n    scrollToRowPosition: \"top\",\n    scrollToRowIfVisible: !0,\n    scrollToColumnPosition: \"left\",\n    scrollToColumnIfVisible: !0,\n    rowFormatter: !1,\n    rowFormatterPrint: null,\n    rowFormatterClipboard: null,\n    rowFormatterHtmlOutput: null,\n    rowHeight: null,\n    placeholder: !1,\n    dataLoader: !0,\n    dataLoaderLoading: !1,\n    dataLoaderError: !1,\n    dataLoaderErrorTimeout: 3e3,\n    dataSendParams: {},\n    dataReceiveParams: {},\n    dependencies: {}\n  };\n  class t {\n    constructor(e) {\n      this.table = e;\n    }\n    reloadData(e, t, i) {\n      return this.table.dataLoader.load(e, void 0, void 0, void 0, t, i);\n    }\n    langText() {\n      return this.table.modules.localize.getText(...arguments);\n    }\n    langBind() {\n      return this.table.modules.localize.bind(...arguments);\n    }\n    langLocale() {\n      return this.table.modules.localize.getLocale(...arguments);\n    }\n    commsConnections() {\n      return this.table.modules.comms.getConnections(...arguments);\n    }\n    commsSend() {\n      return this.table.modules.comms.send(...arguments);\n    }\n    layoutMode() {\n      return this.table.modules.layout.getMode();\n    }\n    layoutRefresh(e) {\n      return this.table.modules.layout.layout(e);\n    }\n    subscribe() {\n      return this.table.eventBus.subscribe(...arguments);\n    }\n    unsubscribe() {\n      return this.table.eventBus.unsubscribe(...arguments);\n    }\n    subscribed(e) {\n      return this.table.eventBus.subscribed(e);\n    }\n    subscriptionChange() {\n      return this.table.eventBus.subscriptionChange(...arguments);\n    }\n    dispatch() {\n      return this.table.eventBus.dispatch(...arguments);\n    }\n    chain() {\n      return this.table.eventBus.chain(...arguments);\n    }\n    confirm() {\n      return this.table.eventBus.confirm(...arguments);\n    }\n    dispatchExternal() {\n      return this.table.externalEvents.dispatch(...arguments);\n    }\n    subscribedExternal(e) {\n      return this.table.externalEvents.subscribed(e);\n    }\n    subscriptionChangeExternal() {\n      return this.table.externalEvents.subscriptionChange(...arguments);\n    }\n    options(e) {\n      return this.table.options[e];\n    }\n    setOption(e, t) {\n      return void 0 !== t && (this.table.options[e] = t), this.table.options[e];\n    }\n    deprecationCheck(e, t, i) {\n      return this.table.deprecationAdvisor.check(e, t, i);\n    }\n    deprecationCheckMsg(e, t) {\n      return this.table.deprecationAdvisor.checkMsg(e, t);\n    }\n    deprecationMsg(e) {\n      return this.table.deprecationAdvisor.msg(e);\n    }\n    module(e) {\n      return this.table.module(e);\n    }\n  }\n  class i {\n    constructor(e) {\n      return this._column = e, this.type = \"ColumnComponent\", new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._column.table.componentFunctionBinder.handle(\"column\", e._column, t);\n        }\n      });\n    }\n    getElement() {\n      return this._column.getElement();\n    }\n    getDefinition() {\n      return this._column.getDefinition();\n    }\n    getField() {\n      return this._column.getField();\n    }\n    getTitleDownload() {\n      return this._column.getTitleDownload();\n    }\n    getCells() {\n      var e = [];\n      return this._column.cells.forEach(function (t) {\n        e.push(t.getComponent());\n      }), e;\n    }\n    isVisible() {\n      return this._column.visible;\n    }\n    show() {\n      this._column.isGroup ? this._column.columns.forEach(function (e) {\n        e.show();\n      }) : this._column.show();\n    }\n    hide() {\n      this._column.isGroup ? this._column.columns.forEach(function (e) {\n        e.hide();\n      }) : this._column.hide();\n    }\n    toggle() {\n      this._column.visible ? this.hide() : this.show();\n    }\n    delete() {\n      return this._column.delete();\n    }\n    getSubColumns() {\n      var e = [];\n      return this._column.columns.length && this._column.columns.forEach(function (t) {\n        e.push(t.getComponent());\n      }), e;\n    }\n    getParentColumn() {\n      return this._column.getParentComponent();\n    }\n    _getSelf() {\n      return this._column;\n    }\n    scrollTo(e, t) {\n      return this._column.table.columnManager.scrollToColumn(this._column, e, t);\n    }\n    getTable() {\n      return this._column.table;\n    }\n    move(e, t) {\n      var i = this._column.table.columnManager.findColumn(e);\n      i ? this._column.table.columnManager.moveColumn(this._column, i, t) : console.warn(\"Move Error - No matching column found:\", i);\n    }\n    getNextColumn() {\n      var e = this._column.nextColumn();\n      return !!e && e.getComponent();\n    }\n    getPrevColumn() {\n      var e = this._column.prevColumn();\n      return !!e && e.getComponent();\n    }\n    updateDefinition(e) {\n      return this._column.updateDefinition(e);\n    }\n    getWidth() {\n      return this._column.getWidth();\n    }\n    setWidth(e) {\n      var t;\n      return t = !0 === e ? this._column.reinitializeWidth(!0) : this._column.setWidth(e), this._column.table.columnManager.rerenderColumns(!0), t;\n    }\n  }\n  var s = {\n    title: void 0,\n    field: void 0,\n    columns: void 0,\n    visible: void 0,\n    hozAlign: void 0,\n    vertAlign: void 0,\n    width: void 0,\n    minWidth: 40,\n    maxWidth: void 0,\n    maxInitialWidth: void 0,\n    cssClass: void 0,\n    variableHeight: void 0,\n    headerVertical: void 0,\n    headerHozAlign: void 0,\n    headerWordWrap: !1,\n    editableTitle: void 0\n  };\n  class o {\n    constructor(e) {\n      return this._cell = e, new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._cell.table.componentFunctionBinder.handle(\"cell\", e._cell, t);\n        }\n      });\n    }\n    getValue() {\n      return this._cell.getValue();\n    }\n    getOldValue() {\n      return this._cell.getOldValue();\n    }\n    getInitialValue() {\n      return this._cell.initialValue;\n    }\n    getElement() {\n      return this._cell.getElement();\n    }\n    getRow() {\n      return this._cell.row.getComponent();\n    }\n    getData(e) {\n      return this._cell.row.getData(e);\n    }\n    getType() {\n      return \"cell\";\n    }\n    getField() {\n      return this._cell.column.getField();\n    }\n    getColumn() {\n      return this._cell.column.getComponent();\n    }\n    setValue(e, t) {\n      void 0 === t && (t = !0), this._cell.setValue(e, t);\n    }\n    restoreOldValue() {\n      this._cell.setValueActual(this._cell.getOldValue());\n    }\n    restoreInitialValue() {\n      this._cell.setValueActual(this._cell.initialValue);\n    }\n    checkHeight() {\n      this._cell.checkHeight();\n    }\n    getTable() {\n      return this._cell.table;\n    }\n    _getSelf() {\n      return this._cell;\n    }\n  }\n  class n extends t {\n    constructor(e, t) {\n      super(e.table), this.table = e.table, this.column = e, this.row = t, this.element = null, this.value = null, this.initialValue, this.oldValue = null, this.modules = {}, this.height = null, this.width = null, this.minWidth = null, this.component = null, this.loaded = !1, this.build();\n    }\n    build() {\n      this.generateElement(), this.setWidth(), this._configureCell(), this.setValueActual(this.column.getFieldValue(this.row.data)), this.initialValue = this.value;\n    }\n    generateElement() {\n      this.element = document.createElement(\"div\"), this.element.className = \"tabulator-cell\", this.element.setAttribute(\"role\", \"gridcell\"), this.column.isRowHeader && this.element.classList.add(\"tabulator-row-header\");\n    }\n    _configureCell() {\n      var e = this.element,\n        t = this.column.getField();\n      (e.style.textAlign = this.column.hozAlign, this.column.vertAlign && (e.style.display = \"inline-flex\", e.style.alignItems = {\n        top: \"flex-start\",\n        bottom: \"flex-end\",\n        middle: \"center\"\n      }[this.column.vertAlign] || \"\", this.column.hozAlign && (e.style.justifyContent = {\n        left: \"flex-start\",\n        right: \"flex-end\",\n        center: \"center\"\n      }[this.column.hozAlign] || \"\")), t && e.setAttribute(\"tabulator-field\", t), this.column.definition.cssClass) && this.column.definition.cssClass.split(\" \").forEach(t => {\n        e.classList.add(t);\n      });\n      this.dispatch(\"cell-init\", this), this.column.visible || this.hide();\n    }\n    _generateContents() {\n      var e;\n      switch (typeof (e = this.chain(\"cell-format\", this, null, () => this.element.innerHTML = this.value))) {\n        case \"object\":\n          if (e instanceof Node) {\n            for (; this.element.firstChild;) this.element.removeChild(this.element.firstChild);\n            this.element.appendChild(e);\n          } else this.element.innerHTML = \"\", null != e && console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", e);\n          break;\n        case \"undefined\":\n          this.element.innerHTML = \"\";\n          break;\n        default:\n          this.element.innerHTML = e;\n      }\n    }\n    cellRendered() {\n      this.dispatch(\"cell-rendered\", this);\n    }\n    getElement(e) {\n      return this.loaded || (this.loaded = !0, e || this.layoutElement()), this.element;\n    }\n    getValue() {\n      return this.value;\n    }\n    getOldValue() {\n      return this.oldValue;\n    }\n    setValue(e, t, i) {\n      this.setValueProcessData(e, t, i) && (this.dispatch(\"cell-value-updated\", this), this.cellRendered(), this.column.definition.cellEdited && this.column.definition.cellEdited.call(this.table, this.getComponent()), this.dispatchExternal(\"cellEdited\", this.getComponent()), this.subscribedExternal(\"dataChanged\") && this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData()));\n    }\n    setValueProcessData(e, t, i) {\n      var s = !1;\n      return (this.value !== e || i) && (s = !0, t && (e = this.chain(\"cell-value-changing\", [this, e], null, e))), this.setValueActual(e), s && this.dispatch(\"cell-value-changed\", this), s;\n    }\n    setValueActual(e) {\n      this.oldValue = this.value, this.value = e, this.dispatch(\"cell-value-save-before\", this), this.column.setFieldValue(this.row.data, e), this.dispatch(\"cell-value-save-after\", this), this.loaded && this.layoutElement();\n    }\n    layoutElement() {\n      this._generateContents(), this.dispatch(\"cell-layout\", this);\n    }\n    setWidth() {\n      this.width = this.column.width, this.element.style.width = this.column.widthStyled;\n    }\n    clearWidth() {\n      this.width = \"\", this.element.style.width = \"\";\n    }\n    getWidth() {\n      return this.width || this.element.offsetWidth;\n    }\n    setMinWidth() {\n      this.minWidth = this.column.minWidth, this.element.style.minWidth = this.column.minWidthStyled;\n    }\n    setMaxWidth() {\n      this.maxWidth = this.column.maxWidth, this.element.style.maxWidth = this.column.maxWidthStyled;\n    }\n    checkHeight() {\n      this.row.reinitializeHeight();\n    }\n    clearHeight() {\n      this.element.style.height = \"\", this.height = null, this.dispatch(\"cell-height\", this, \"\");\n    }\n    setHeight() {\n      this.height = this.row.height, this.element.style.height = this.row.heightStyled, this.dispatch(\"cell-height\", this, this.row.heightStyled);\n    }\n    getHeight() {\n      return this.height || this.element.offsetHeight;\n    }\n    show() {\n      this.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n    }\n    hide() {\n      this.element.style.display = \"none\";\n    }\n    delete() {\n      this.dispatch(\"cell-delete\", this), !this.table.rowManager.redrawBlock && this.element.parentNode && this.element.parentNode.removeChild(this.element), this.element = !1, this.column.deleteCell(this), this.row.deleteCell(this), this.calcs = {};\n    }\n    getIndex() {\n      return this.row.getCellIndex(this);\n    }\n    getComponent() {\n      return this.component || (this.component = new o(this)), this.component;\n    }\n  }\n  class r extends t {\n    constructor(e, t, i) {\n      super(t.table), this.definition = e, this.parent = t, this.type = \"column\", this.columns = [], this.cells = [], this.isGroup = !1, this.isRowHeader = i, this.element = this.createElement(), this.contentElement = !1, this.titleHolderElement = !1, this.titleElement = !1, this.groupElement = this.createGroupElement(), this.hozAlign = \"\", this.vertAlign = \"\", this.field = \"\", this.fieldStructure = \"\", this.getFieldValue = \"\", this.setFieldValue = \"\", this.titleDownload = null, this.titleFormatterRendered = !1, this.mapDefinitions(), this.setField(this.definition.field), this.modules = {}, this.width = null, this.widthStyled = \"\", this.maxWidth = null, this.maxWidthStyled = \"\", this.maxInitialWidth = null, this.minWidth = null, this.minWidthStyled = \"\", this.widthFixed = !1, this.visible = !0, this.component = null, this.definition.columns ? (this.isGroup = !0, this.definition.columns.forEach((e, t) => {\n        var i = new r(e, this);\n        this.attachColumn(i);\n      }), this.checkColumnVisibility()) : t.registerColumnField(this), this._initialize();\n    }\n    createElement() {\n      var e = document.createElement(\"div\");\n      switch (e.classList.add(\"tabulator-col\"), e.setAttribute(\"role\", \"columnheader\"), e.setAttribute(\"aria-sort\", \"none\"), this.isRowHeader && e.classList.add(\"tabulator-row-header\"), this.table.options.columnHeaderVertAlign) {\n        case \"middle\":\n          e.style.justifyContent = \"center\";\n          break;\n        case \"bottom\":\n          e.style.justifyContent = \"flex-end\";\n      }\n      return e;\n    }\n    createGroupElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-col-group-cols\"), e;\n    }\n    mapDefinitions() {\n      var e = this.table.options.columnDefaults;\n      if (e) for (let t in e) void 0 === this.definition[t] && (this.definition[t] = e[t]);\n      this.definition = this.table.columnManager.optionsList.generate(r.defaultOptionList, this.definition);\n    }\n    checkDefinition() {\n      Object.keys(this.definition).forEach(e => {\n        -1 === r.defaultOptionList.indexOf(e) && console.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", e);\n      });\n    }\n    setField(e) {\n      this.field = e, this.fieldStructure = e ? this.table.options.nestedFieldSeparator ? e.split(this.table.options.nestedFieldSeparator) : [e] : [], this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData, this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n    }\n    registerColumnPosition(e) {\n      this.parent.registerColumnPosition(e);\n    }\n    registerColumnField(e) {\n      this.parent.registerColumnField(e);\n    }\n    reRegisterPosition() {\n      this.isGroup ? this.columns.forEach(function (e) {\n        e.reRegisterPosition();\n      }) : this.registerColumnPosition(this);\n    }\n    _initialize() {\n      for (var e = this.definition; this.element.firstChild;) this.element.removeChild(this.element.firstChild);\n      e.headerVertical && (this.element.classList.add(\"tabulator-col-vertical\"), \"flip\" === e.headerVertical && this.element.classList.add(\"tabulator-col-vertical-flip\")), this.contentElement = this._buildColumnHeaderContent(), this.element.appendChild(this.contentElement), this.isGroup ? this._buildGroupHeader() : this._buildColumnHeader(), this.dispatch(\"column-init\", this);\n    }\n    _buildColumnHeader() {\n      var e = this.definition;\n      (this.dispatch(\"column-layout\", this), void 0 !== e.visible && (e.visible ? this.show(!0) : this.hide(!0)), e.cssClass) && e.cssClass.split(\" \").forEach(e => {\n        this.element.classList.add(e);\n      });\n      e.field && this.element.setAttribute(\"tabulator-field\", e.field), this.setMinWidth(parseInt(e.minWidth)), e.maxInitialWidth && (this.maxInitialWidth = parseInt(e.maxInitialWidth)), e.maxWidth && this.setMaxWidth(parseInt(e.maxWidth)), this.reinitializeWidth(), this.hozAlign = this.definition.hozAlign, this.vertAlign = this.definition.vertAlign, this.titleElement.style.textAlign = this.definition.headerHozAlign;\n    }\n    _buildColumnHeaderContent() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-col-content\"), this.titleHolderElement = document.createElement(\"div\"), this.titleHolderElement.classList.add(\"tabulator-col-title-holder\"), e.appendChild(this.titleHolderElement), this.titleElement = this._buildColumnHeaderTitle(), this.titleHolderElement.appendChild(this.titleElement), e;\n    }\n    _buildColumnHeaderTitle() {\n      var e = this.definition,\n        t = document.createElement(\"div\");\n      if (t.classList.add(\"tabulator-col-title\"), e.headerWordWrap && t.classList.add(\"tabulator-col-title-wrap\"), e.editableTitle) {\n        var i = document.createElement(\"input\");\n        i.classList.add(\"tabulator-title-editor\"), i.addEventListener(\"click\", e => {\n          e.stopPropagation(), i.focus();\n        }), i.addEventListener(\"mousedown\", e => {\n          e.stopPropagation();\n        }), i.addEventListener(\"change\", () => {\n          e.title = i.value, this.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n        }), t.appendChild(i), e.field ? this.langBind(\"columns|\" + e.field, t => {\n          i.value = t || e.title || \"&nbsp;\";\n        }) : i.value = e.title || \"&nbsp;\";\n      } else e.field ? this.langBind(\"columns|\" + e.field, i => {\n        this._formatColumnHeaderTitle(t, i || e.title || \"&nbsp;\");\n      }) : this._formatColumnHeaderTitle(t, e.title || \"&nbsp;\");\n      return t;\n    }\n    _formatColumnHeaderTitle(e, t) {\n      var i = this.chain(\"column-format\", [this, t, e], null, () => t);\n      switch (typeof i) {\n        case \"object\":\n          i instanceof Node ? e.appendChild(i) : (e.innerHTML = \"\", console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", i));\n          break;\n        case \"undefined\":\n          e.innerHTML = \"\";\n          break;\n        default:\n          e.innerHTML = i;\n      }\n    }\n    _buildGroupHeader() {\n      (this.element.classList.add(\"tabulator-col-group\"), this.element.setAttribute(\"role\", \"columngroup\"), this.element.setAttribute(\"aria-title\", this.definition.title), this.definition.cssClass) && this.definition.cssClass.split(\" \").forEach(e => {\n        this.element.classList.add(e);\n      });\n      this.titleElement.style.textAlign = this.definition.headerHozAlign, this.element.appendChild(this.groupElement);\n    }\n    _getFlatData(e) {\n      return e[this.field];\n    }\n    _getNestedData(e) {\n      var t,\n        i = e,\n        s = this.fieldStructure,\n        o = s.length;\n      for (let e = 0; e < o && (t = i = i[s[e]], i); e++);\n      return t;\n    }\n    _setFlatData(e, t) {\n      this.field && (e[this.field] = t);\n    }\n    _setNestedData(e, t) {\n      var i = e,\n        s = this.fieldStructure,\n        o = s.length;\n      for (let e = 0; e < o; e++) if (e == o - 1) i[s[e]] = t;else {\n        if (!i[s[e]]) {\n          if (void 0 === t) break;\n          i[s[e]] = {};\n        }\n        i = i[s[e]];\n      }\n    }\n    attachColumn(e) {\n      this.groupElement ? (this.columns.push(e), this.groupElement.appendChild(e.getElement()), e.columnRendered()) : console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n    }\n    verticalAlign(e, t) {\n      var i = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : t || this.parent.getHeadersElement().clientHeight;\n      this.element.style.height = i + \"px\", this.dispatch(\"column-height\", this, this.element.style.height), this.isGroup && (this.groupElement.style.minHeight = i - this.contentElement.offsetHeight + \"px\"), this.columns.forEach(function (t) {\n        t.verticalAlign(e);\n      });\n    }\n    clearVerticalAlign() {\n      this.element.style.paddingTop = \"\", this.element.style.height = \"\", this.element.style.minHeight = \"\", this.groupElement.style.minHeight = \"\", this.columns.forEach(function (e) {\n        e.clearVerticalAlign();\n      }), this.dispatch(\"column-height\", this, \"\");\n    }\n    getElement() {\n      return this.element;\n    }\n    getGroupElement() {\n      return this.groupElement;\n    }\n    getField() {\n      return this.field;\n    }\n    getTitleDownload() {\n      return this.titleDownload;\n    }\n    getFirstColumn() {\n      return this.isGroup ? !!this.columns.length && this.columns[0].getFirstColumn() : this;\n    }\n    getLastColumn() {\n      return this.isGroup ? !!this.columns.length && this.columns[this.columns.length - 1].getLastColumn() : this;\n    }\n    getColumns(e) {\n      var t = [];\n      return e ? this.columns.forEach(e => {\n        t.push(e), t = t.concat(e.getColumns(!0));\n      }) : t = this.columns, t;\n    }\n    getCells() {\n      return this.cells;\n    }\n    getTopColumn() {\n      return this.parent.isGroup ? this.parent.getTopColumn() : this;\n    }\n    getDefinition(e) {\n      var t = [];\n      return this.isGroup && e && (this.columns.forEach(function (e) {\n        t.push(e.getDefinition(!0));\n      }), this.definition.columns = t), this.definition;\n    }\n    checkColumnVisibility() {\n      var e = !1;\n      this.columns.forEach(function (t) {\n        t.visible && (e = !0);\n      }), e ? (this.show(), this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), !1)) : this.hide();\n    }\n    show(e, t) {\n      this.visible || (this.visible = !0, this.element.style.display = \"\", this.parent.isGroup && this.parent.checkColumnVisibility(), this.cells.forEach(function (e) {\n        e.show();\n      }), this.isGroup || null !== this.width || this.reinitializeWidth(), this.table.columnManager.verticalAlignHeaders(), this.dispatch(\"column-show\", this, t), e || this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), !0), this.parent.isGroup && this.parent.matchChildWidths(), this.silent || this.table.columnManager.rerenderColumns());\n    }\n    hide(e, t) {\n      this.visible && (this.visible = !1, this.element.style.display = \"none\", this.table.columnManager.verticalAlignHeaders(), this.parent.isGroup && this.parent.checkColumnVisibility(), this.cells.forEach(function (e) {\n        e.hide();\n      }), this.dispatch(\"column-hide\", this, t), e || this.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), !1), this.parent.isGroup && this.parent.matchChildWidths(), this.silent || this.table.columnManager.rerenderColumns());\n    }\n    matchChildWidths() {\n      var e = 0;\n      this.contentElement && this.columns.length && (this.columns.forEach(function (t) {\n        t.visible && (e += t.getWidth());\n      }), this.contentElement.style.maxWidth = e - 1 + \"px\", this.table.initialized && (this.element.style.width = e + \"px\"), this.parent.isGroup && this.parent.matchChildWidths());\n    }\n    removeChild(e) {\n      var t = this.columns.indexOf(e);\n      t > -1 && this.columns.splice(t, 1), this.columns.length || this.delete();\n    }\n    setWidth(e) {\n      this.widthFixed = !0, this.setWidthActual(e);\n    }\n    setWidthActual(e) {\n      isNaN(e) && (e = Math.floor(this.table.element.clientWidth / 100 * parseInt(e))), e = Math.max(this.minWidth, e), this.maxWidth && (e = Math.min(this.maxWidth, e)), this.width = e, this.widthStyled = e ? e + \"px\" : \"\", this.element.style.width = this.widthStyled, this.isGroup || this.cells.forEach(function (e) {\n        e.setWidth();\n      }), this.parent.isGroup && this.parent.matchChildWidths(), this.dispatch(\"column-width\", this), this.subscribedExternal(\"columnWidth\") && this.dispatchExternal(\"columnWidth\", this.getComponent());\n    }\n    checkCellHeights() {\n      var e = [];\n      this.cells.forEach(function (t) {\n        t.row.heightInitialized && (null !== t.row.getElement().offsetParent ? (e.push(t.row), t.row.clearCellHeight()) : t.row.heightInitialized = !1);\n      }), e.forEach(function (e) {\n        e.calcHeight();\n      }), e.forEach(function (e) {\n        e.setCellHeight();\n      });\n    }\n    getWidth() {\n      var e = 0;\n      return this.isGroup ? this.columns.forEach(function (t) {\n        t.visible && (e += t.getWidth());\n      }) : e = this.width, e;\n    }\n    getLeftOffset() {\n      var e = this.element.offsetLeft;\n      return this.parent.isGroup && (e += this.parent.getLeftOffset()), e;\n    }\n    getHeight() {\n      return Math.ceil(this.element.getBoundingClientRect().height);\n    }\n    setMinWidth(e) {\n      this.maxWidth && e > this.maxWidth && (e = this.maxWidth, console.warn(\"the minWidth (\" + e + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\" + this.maxWidthStyled + \")\")), this.minWidth = e, this.minWidthStyled = e ? e + \"px\" : \"\", this.element.style.minWidth = this.minWidthStyled, this.cells.forEach(function (e) {\n        e.setMinWidth();\n      });\n    }\n    setMaxWidth(e) {\n      this.minWidth && e < this.minWidth && (e = this.minWidth, console.warn(\"the maxWidth (\" + e + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\" + this.minWidthStyled + \")\")), this.maxWidth = e, this.maxWidthStyled = e ? e + \"px\" : \"\", this.element.style.maxWidth = this.maxWidthStyled, this.cells.forEach(function (e) {\n        e.setMaxWidth();\n      });\n    }\n    delete() {\n      return new Promise((e, t) => {\n        this.isGroup && this.columns.forEach(function (e) {\n          e.delete();\n        }), this.dispatch(\"column-delete\", this);\n        var i = this.cells.length;\n        for (let e = 0; e < i; e++) this.cells[0].delete();\n        this.element.parentNode && this.element.parentNode.removeChild(this.element), this.element = !1, this.contentElement = !1, this.titleElement = !1, this.groupElement = !1, this.parent.isGroup && this.parent.removeChild(this), this.table.columnManager.deregisterColumn(this), this.table.columnManager.rerenderColumns(!0), this.dispatch(\"column-deleted\", this), e();\n      });\n    }\n    columnRendered() {\n      this.titleFormatterRendered && this.titleFormatterRendered(), this.dispatch(\"column-rendered\", this);\n    }\n    generateCell(e) {\n      var t = new n(this, e);\n      return this.cells.push(t), t;\n    }\n    nextColumn() {\n      var e = this.table.columnManager.findColumnIndex(this);\n      return e > -1 && this._nextVisibleColumn(e + 1);\n    }\n    _nextVisibleColumn(e) {\n      var t = this.table.columnManager.getColumnByIndex(e);\n      return !t || t.visible ? t : this._nextVisibleColumn(e + 1);\n    }\n    prevColumn() {\n      var e = this.table.columnManager.findColumnIndex(this);\n      return e > -1 && this._prevVisibleColumn(e - 1);\n    }\n    _prevVisibleColumn(e) {\n      var t = this.table.columnManager.getColumnByIndex(e);\n      return !t || t.visible ? t : this._prevVisibleColumn(e - 1);\n    }\n    reinitializeWidth(e) {\n      this.widthFixed = !1, void 0 === this.definition.width || e || this.setWidth(this.definition.width), this.dispatch(\"column-width-fit-before\", this), this.fitToData(e), this.dispatch(\"column-width-fit-after\", this);\n    }\n    fitToData(e) {\n      if (!this.isGroup) {\n        this.widthFixed || (this.element.style.width = \"\", this.cells.forEach(e => {\n          e.clearWidth();\n        }));\n        var t = this.element.offsetWidth;\n        if ((!this.width || !this.widthFixed) && (this.cells.forEach(e => {\n          var i = e.getWidth();\n          i > t && (t = i);\n        }), t)) {\n          var i = t + 1;\n          this.maxInitialWidth && !e && (i = Math.min(i, this.maxInitialWidth)), this.setWidthActual(i);\n        }\n      }\n    }\n    updateDefinition(e) {\n      var t;\n      return this.isGroup || this.parent.isGroup ? (console.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\"), Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\")) : (t = Object.assign({}, this.getDefinition()), t = Object.assign(t, e), this.table.columnManager.addColumn(t, !1, this).then(e => (t.field == this.field && (this.field = !1), this.delete().then(() => e.getComponent()))));\n    }\n    deleteCell(e) {\n      var t = this.cells.indexOf(e);\n      t > -1 && this.cells.splice(t, 1);\n    }\n    getComponent() {\n      return this.component || (this.component = new i(this)), this.component;\n    }\n    getPosition() {\n      return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;\n    }\n    getParentComponent() {\n      return this.parent instanceof r && this.parent.getComponent();\n    }\n  }\n  _defineProperty(r, \"defaultOptionList\", s);\n  class a {\n    static elVisible(e) {\n      return !(e.offsetWidth <= 0 && e.offsetHeight <= 0);\n    }\n    static elOffset(e) {\n      var t = e.getBoundingClientRect();\n      return {\n        top: t.top + window.pageYOffset - document.documentElement.clientTop,\n        left: t.left + window.pageXOffset - document.documentElement.clientLeft\n      };\n    }\n    static retrieveNestedData(e, t, i) {\n      var s,\n        o = e ? t.split(e) : [t],\n        n = o.length;\n      for (let e = 0; e < n && (s = i = i[o[e]], i); e++);\n      return s;\n    }\n    static deepClone(e, t, i = []) {\n      var s = {}.__proto__,\n        o = [].__proto__;\n      for (var n in t || (t = Object.assign(Array.isArray(e) ? [] : {}, e)), e) {\n        let r,\n          a,\n          l = e[n];\n        null == l || \"object\" != typeof l || l.__proto__ !== s && l.__proto__ !== o || (r = i.findIndex(e => e.subject === l), r > -1 ? t[n] = i[r].copy : (a = Object.assign(Array.isArray(l) ? [] : {}, l), i.unshift({\n          subject: l,\n          copy: a\n        }), t[n] = this.deepClone(l, a, i)));\n      }\n      return t;\n    }\n  }\n  class l {\n    constructor(e, t, i = {}) {\n      this.table = e, this.msgType = t, this.registeredDefaults = Object.assign({}, i);\n    }\n    register(e, t) {\n      this.registeredDefaults[e] = t;\n    }\n    generate(e, t = {}) {\n      var i = Object.assign({}, this.registeredDefaults),\n        s = this.table.options.debugInvalidOptions || !0 === t.debugInvalidOptions;\n      Object.assign(i, e);\n      for (let e in t) i.hasOwnProperty(e) || (s && console.warn(\"Invalid \" + this.msgType + \" option:\", e), i[e] = t.key);\n      for (let e in i) e in t ? i[e] = t[e] : Array.isArray(i[e]) ? i[e] = Object.assign([], i[e]) : \"object\" == typeof i[e] && null !== i[e] ? i[e] = Object.assign({}, i[e]) : void 0 === i[e] && delete i[e];\n      return i;\n    }\n  }\n  class h extends t {\n    constructor(e) {\n      super(e), this.elementVertical = e.rowManager.element, this.elementHorizontal = e.columnManager.element, this.tableElement = e.rowManager.tableElement, this.verticalFillMode = \"fit\";\n    }\n    initialize() {}\n    clearRows() {}\n    clearColumns() {}\n    reinitializeColumnWidths(e) {}\n    renderRows() {}\n    renderColumns() {}\n    rerenderRows(e) {\n      e && e();\n    }\n    rerenderColumns(e, t) {}\n    renderRowCells(e) {}\n    rerenderRowCells(e, t) {}\n    scrollColumns(e, t) {}\n    scrollRows(e, t) {}\n    resize() {}\n    scrollToRow(e) {}\n    scrollToRowNearestTop(e) {}\n    visibleRows(e) {\n      return [];\n    }\n    rows() {\n      return this.table.rowManager.getDisplayRows();\n    }\n    styleRow(e, t) {\n      var i = e.getElement();\n      t % 2 ? (i.classList.add(\"tabulator-row-even\"), i.classList.remove(\"tabulator-row-odd\")) : (i.classList.add(\"tabulator-row-odd\"), i.classList.remove(\"tabulator-row-even\"));\n    }\n    clear() {\n      this.clearRows(), this.clearColumns();\n    }\n    render() {\n      this.renderRows(), this.renderColumns();\n    }\n    rerender(e) {\n      this.rerenderRows(), this.rerenderColumns();\n    }\n    scrollToRowPosition(e, t, i) {\n      var s = this.rows().indexOf(e),\n        o = e.getElement(),\n        n = 0;\n      return new Promise((r, l) => {\n        if (s > -1) {\n          if (void 0 === i && (i = this.table.options.scrollToRowIfVisible), !i && a.elVisible(o) && (n = a.elOffset(o).top - a.elOffset(this.elementVertical).top) > 0 && n < this.elementVertical.clientHeight - o.offsetHeight) return r(), !1;\n          switch (void 0 === t && (t = this.table.options.scrollToRowPosition), \"nearest\" === t && (t = this.scrollToRowNearestTop(e) ? \"top\" : \"bottom\"), this.scrollToRow(e), t) {\n            case \"middle\":\n            case \"center\":\n              this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight ? this.elementVertical.scrollTop = this.elementVertical.scrollTop + (o.offsetTop - this.elementVertical.scrollTop) - (this.elementVertical.scrollHeight - o.offsetTop) / 2 : this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight / 2;\n              break;\n            case \"bottom\":\n              this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight ? this.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - o.offsetTop) + o.offsetHeight : this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + o.offsetHeight;\n              break;\n            case \"top\":\n              this.elementVertical.scrollTop = o.offsetTop;\n          }\n          r();\n        } else console.warn(\"Scroll Error - Row not visible\"), l(\"Scroll Error - Row not visible\");\n      });\n    }\n  }\n  class d extends h {\n    constructor(e) {\n      super(e);\n    }\n    renderRowCells(e, t) {\n      const i = document.createDocumentFragment();\n      e.cells.forEach(e => {\n        i.appendChild(e.getElement());\n      }), e.element.appendChild(i), t || e.cells.forEach(e => {\n        e.cellRendered();\n      });\n    }\n    reinitializeColumnWidths(e) {\n      e.forEach(function (e) {\n        e.reinitializeWidth();\n      });\n    }\n  }\n  class c extends h {\n    constructor(e) {\n      super(e), this.leftCol = 0, this.rightCol = 0, this.scrollLeft = 0, this.vDomScrollPosLeft = 0, this.vDomScrollPosRight = 0, this.vDomPadLeft = 0, this.vDomPadRight = 0, this.fitDataColAvg = 0, this.windowBuffer = 200, this.visibleRows = null, this.initialized = !1, this.isFitData = !1, this.columns = [];\n    }\n    initialize() {\n      this.compatibilityCheck(), this.layoutCheck(), this.vertScrollListen();\n    }\n    compatibilityCheck() {\n      \"fitDataTable\" == this.options(\"layout\") && console.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\"), this.options(\"responsiveLayout\") && console.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\"), this.options(\"rtl\") && console.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n    }\n    layoutCheck() {\n      this.isFitData = this.options(\"layout\").startsWith(\"fitData\");\n    }\n    vertScrollListen() {\n      this.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this)), this.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n    }\n    clearVisRowCache() {\n      this.visibleRows = null;\n    }\n    renderColumns(e, t) {\n      this.dataChange();\n    }\n    scrollColumns(e, t) {\n      this.scrollLeft != e && (this.scrollLeft = e, this.scroll(e - (this.vDomScrollPosLeft + this.windowBuffer)));\n    }\n    calcWindowBuffer() {\n      var e = this.elementVertical.clientWidth;\n      this.table.columnManager.columnsByIndex.forEach(t => {\n        if (t.visible) {\n          var i = t.getWidth();\n          i > e && (e = i);\n        }\n      }), this.windowBuffer = 2 * e;\n    }\n    rerenderColumns(e, t) {\n      var i = {\n          cols: this.columns,\n          leftCol: this.leftCol,\n          rightCol: this.rightCol\n        },\n        s = 0;\n      e && !this.initialized || (this.clear(), this.calcWindowBuffer(), this.scrollLeft = this.elementVertical.scrollLeft, this.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer, this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer, this.table.columnManager.columnsByIndex.forEach(e => {\n        var t,\n          i = {};\n        e.visible && (e.modules.frozen || (t = e.getWidth(), i.leftPos = s, i.rightPos = s + t, i.width = t, this.isFitData && (i.fitDataCheck = !e.modules.vdomHoz || e.modules.vdomHoz.fitDataCheck), s + t > this.vDomScrollPosLeft && s < this.vDomScrollPosRight ? (-1 == this.leftCol && (this.leftCol = this.columns.length, this.vDomPadLeft = s), this.rightCol = this.columns.length) : -1 !== this.leftCol && (this.vDomPadRight += t), this.columns.push(e), e.modules.vdomHoz = i, s += t));\n      }), this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\", this.tableElement.style.paddingRight = this.vDomPadRight + \"px\", this.initialized = !0, t || e && !this.reinitChanged(i) || this.reinitializeRows(), this.elementVertical.scrollLeft = this.scrollLeft);\n    }\n    renderRowCells(e) {\n      if (this.initialized) this.initializeRow(e);else {\n        const t = document.createDocumentFragment();\n        e.cells.forEach(e => {\n          t.appendChild(e.getElement());\n        }), e.element.appendChild(t), e.cells.forEach(e => {\n          e.cellRendered();\n        });\n      }\n    }\n    rerenderRowCells(e, t) {\n      this.reinitializeRow(e, t);\n    }\n    reinitializeColumnWidths(e) {\n      for (let e = this.leftCol; e <= this.rightCol; e++) this.columns[e].reinitializeWidth();\n    }\n    deinitialize() {\n      this.initialized = !1;\n    }\n    clear() {\n      this.columns = [], this.leftCol = -1, this.rightCol = 0, this.vDomScrollPosLeft = 0, this.vDomScrollPosRight = 0, this.vDomPadLeft = 0, this.vDomPadRight = 0;\n    }\n    dataChange() {\n      var e,\n        t,\n        i = !1;\n      if (this.isFitData) {\n        if (this.table.columnManager.columnsByIndex.forEach(e => {\n          !e.definition.width && e.visible && (i = !0);\n        }), i && this.table.rowManager.getDisplayRows().length && (this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer, e = this.chain(\"rows-sample\", [1], [], () => this.table.rowManager.getDisplayRows())[0])) {\n          t = e.getElement(), e.generateCells(), this.tableElement.appendChild(t);\n          for (let i = 0; i < e.cells.length; i++) {\n            let s = e.cells[i];\n            t.appendChild(s.getElement()), s.column.reinitializeWidth();\n          }\n          t.parentNode.removeChild(t), this.rerenderColumns(!1, !0);\n        }\n      } else \"fitColumns\" === this.options(\"layout\") && (this.layoutRefresh(), this.rerenderColumns(!1, !0));\n    }\n    reinitChanged(e) {\n      var t = !0;\n      return e.cols.length !== this.columns.length || e.leftCol !== this.leftCol || e.rightCol !== this.rightCol || (e.cols.forEach((e, i) => {\n        e !== this.columns[i] && (t = !1);\n      }), !t);\n    }\n    reinitializeRows() {\n      var e = this.getVisibleRows(),\n        t = this.table.rowManager.getRows().filter(t => !e.includes(t));\n      e.forEach(e => {\n        this.reinitializeRow(e, !0);\n      }), t.forEach(e => {\n        e.deinitialize();\n      });\n    }\n    getVisibleRows() {\n      return this.visibleRows || (this.visibleRows = this.table.rowManager.getVisibleRows()), this.visibleRows;\n    }\n    scroll(e) {\n      this.vDomScrollPosLeft += e, this.vDomScrollPosRight += e, Math.abs(e) > this.windowBuffer / 2 ? this.rerenderColumns() : e > 0 ? (this.addColRight(), this.removeColLeft()) : (this.addColLeft(), this.removeColRight());\n    }\n    colPositionAdjust(e, t, i) {\n      for (let s = e; s < t; s++) {\n        let e = this.columns[s];\n        e.modules.vdomHoz.leftPos += i, e.modules.vdomHoz.rightPos += i;\n      }\n    }\n    addColRight() {\n      for (var e = !1, t = !0; t;) {\n        let i = this.columns[this.rightCol + 1];\n        i && i.modules.vdomHoz.leftPos <= this.vDomScrollPosRight ? (e = !0, this.getVisibleRows().forEach(e => {\n          if (\"group\" !== e.type) {\n            var t = e.getCell(i);\n            e.getElement().insertBefore(t.getElement(), e.getCell(this.columns[this.rightCol]).getElement().nextSibling), t.cellRendered();\n          }\n        }), this.fitDataColActualWidthCheck(i), this.rightCol++, this.getVisibleRows().forEach(e => {\n          \"group\" !== e.type && (e.modules.vdomHoz.rightCol = this.rightCol);\n        }), this.rightCol >= this.columns.length - 1 ? this.vDomPadRight = 0 : this.vDomPadRight -= i.getWidth()) : t = !1;\n      }\n      e && (this.tableElement.style.paddingRight = this.vDomPadRight + \"px\");\n    }\n    addColLeft() {\n      for (var e = !1, t = !0; t;) {\n        let i = this.columns[this.leftCol - 1];\n        if (i) {\n          if (i.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\n            e = !0, this.getVisibleRows().forEach(e => {\n              if (\"group\" !== e.type) {\n                var t = e.getCell(i);\n                e.getElement().insertBefore(t.getElement(), e.getCell(this.columns[this.leftCol]).getElement()), t.cellRendered();\n              }\n            }), this.leftCol--, this.getVisibleRows().forEach(e => {\n              \"group\" !== e.type && (e.modules.vdomHoz.leftCol = this.leftCol);\n            }), this.leftCol <= 0 ? this.vDomPadLeft = 0 : this.vDomPadLeft -= i.getWidth();\n            let t = this.fitDataColActualWidthCheck(i);\n            t && (this.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + t, this.vDomPadRight -= t);\n          } else t = !1;\n        } else t = !1;\n      }\n      e && (this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\");\n    }\n    removeColRight() {\n      for (var e = !1, t = !0; t;) {\n        let i = this.columns[this.rightCol];\n        i && i.modules.vdomHoz.leftPos > this.vDomScrollPosRight ? (e = !0, this.getVisibleRows().forEach(e => {\n          if (\"group\" !== e.type) {\n            var t = e.getCell(i);\n            try {\n              e.getElement().removeChild(t.getElement());\n            } catch (e) {\n              console.warn(\"Could not removeColRight\", e.message);\n            }\n          }\n        }), this.vDomPadRight += i.getWidth(), this.rightCol--, this.getVisibleRows().forEach(e => {\n          \"group\" !== e.type && (e.modules.vdomHoz.rightCol = this.rightCol);\n        })) : t = !1;\n      }\n      e && (this.tableElement.style.paddingRight = this.vDomPadRight + \"px\");\n    }\n    removeColLeft() {\n      for (var e = !1, t = !0; t;) {\n        let i = this.columns[this.leftCol];\n        i && i.modules.vdomHoz.rightPos < this.vDomScrollPosLeft ? (e = !0, this.getVisibleRows().forEach(e => {\n          if (\"group\" !== e.type) {\n            var t = e.getCell(i);\n            try {\n              e.getElement().removeChild(t.getElement());\n            } catch (e) {\n              console.warn(\"Could not removeColLeft\", e.message);\n            }\n          }\n        }), this.vDomPadLeft += i.getWidth(), this.leftCol++, this.getVisibleRows().forEach(e => {\n          \"group\" !== e.type && (e.modules.vdomHoz.leftCol = this.leftCol);\n        })) : t = !1;\n      }\n      e && (this.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\");\n    }\n    fitDataColActualWidthCheck(e) {\n      var t, i;\n      return e.modules.vdomHoz.fitDataCheck && (e.reinitializeWidth(), (i = (t = e.getWidth()) - e.modules.vdomHoz.width) && (e.modules.vdomHoz.rightPos += i, e.modules.vdomHoz.width = t, this.colPositionAdjust(this.columns.indexOf(e) + 1, this.columns.length, i)), e.modules.vdomHoz.fitDataCheck = !1), i;\n    }\n    initializeRow(e) {\n      if (\"group\" !== e.type) {\n        e.modules.vdomHoz = {\n          leftCol: this.leftCol,\n          rightCol: this.rightCol\n        }, this.table.modules.frozenColumns && this.table.modules.frozenColumns.leftColumns.forEach(t => {\n          this.appendCell(e, t);\n        });\n        for (let t = this.leftCol; t <= this.rightCol; t++) this.appendCell(e, this.columns[t]);\n        this.table.modules.frozenColumns && this.table.modules.frozenColumns.rightColumns.forEach(t => {\n          this.appendCell(e, t);\n        });\n      }\n    }\n    appendCell(e, t) {\n      if (t && t.visible) {\n        let i = e.getCell(t);\n        e.getElement().appendChild(i.getElement()), i.cellRendered();\n      }\n    }\n    reinitializeRow(e, t) {\n      if (\"group\" !== e.type && (t || !e.modules.vdomHoz || e.modules.vdomHoz.leftCol !== this.leftCol || e.modules.vdomHoz.rightCol !== this.rightCol)) {\n        for (var i = e.getElement(); i.firstChild;) i.removeChild(i.firstChild);\n        this.initializeRow(e);\n      }\n    }\n  }\n  class u extends t {\n    constructor(e) {\n      super(e), this.blockHozScrollEvent = !1, this.headersElement = null, this.contentsElement = null, this.rowHeader = null, this.element = null, this.columns = [], this.columnsByIndex = [], this.columnsByField = {}, this.scrollLeft = 0, this.optionsList = new l(this.table, \"column definition\", s), this.redrawBlock = !1, this.redrawBlockUpdate = null, this.renderer = null;\n    }\n    initialize() {\n      this.initializeRenderer(), this.headersElement = this.createHeadersElement(), this.contentsElement = this.createHeaderContentsElement(), this.element = this.createHeaderElement(), this.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild), this.element.insertBefore(this.contentsElement, this.element.firstChild), this.initializeScrollWheelWatcher(), this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this)), this.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n    }\n    padVerticalScrollbar(e) {\n      this.table.rtl ? this.headersElement.style.marginLeft = e + \"px\" : this.headersElement.style.marginRight = e + \"px\";\n    }\n    initializeRenderer() {\n      var e,\n        t = {\n          virtual: c,\n          basic: d\n        };\n      (e = \"string\" == typeof this.table.options.renderHorizontal ? t[this.table.options.renderHorizontal] : this.table.options.renderHorizontal) ? (this.renderer = new e(this.table, this.element, this.tableElement), this.renderer.initialize()) : console.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n    }\n    createHeadersElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-headers\"), e.setAttribute(\"role\", \"row\"), e;\n    }\n    createHeaderContentsElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-header-contents\"), e.setAttribute(\"role\", \"rowgroup\"), e;\n    }\n    createHeaderElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-header\"), e.setAttribute(\"role\", \"rowgroup\"), this.table.options.headerVisible || e.classList.add(\"tabulator-header-hidden\"), e;\n    }\n    getElement() {\n      return this.element;\n    }\n    getContentsElement() {\n      return this.contentsElement;\n    }\n    getHeadersElement() {\n      return this.headersElement;\n    }\n    scrollHorizontal(e) {\n      this.contentsElement.scrollLeft = e, this.scrollLeft = e, this.renderer.scrollColumns(e);\n    }\n    initializeScrollWheelWatcher() {\n      this.contentsElement.addEventListener(\"wheel\", e => {\n        var t;\n        e.deltaX && (t = this.contentsElement.scrollLeft + e.deltaX, this.table.rowManager.scrollHorizontal(t), this.table.columnManager.scrollHorizontal(t));\n      });\n    }\n    generateColumnsFromRowData(e) {\n      var t = [],\n        i = {},\n        s = \"full\" === this.table.options.autoColumns ? e : [e[0]],\n        o = this.table.options.autoColumnsDefinitions;\n      if (e && e.length) {\n        if (s.forEach(e => {\n          Object.keys(e).forEach((s, o) => {\n            let n,\n              r = e[s];\n            i[s] ? !0 !== i[s] && void 0 !== r && (i[s].sorter = this.calculateSorterFromValue(r), i[s] = !0) : (n = {\n              field: s,\n              title: s,\n              sorter: this.calculateSorterFromValue(r)\n            }, t.splice(o, 0, n), i[s] = void 0 !== r || n);\n          });\n        }), o) switch (typeof o) {\n          case \"function\":\n            this.table.options.columns = o.call(this.table, t);\n            break;\n          case \"object\":\n            Array.isArray(o) ? t.forEach(e => {\n              var t = o.find(t => t.field === e.field);\n              t && Object.assign(e, t);\n            }) : t.forEach(e => {\n              o[e.field] && Object.assign(e, o[e.field]);\n            }), this.table.options.columns = t;\n        } else this.table.options.columns = t;\n        this.setColumns(this.table.options.columns);\n      }\n    }\n    calculateSorterFromValue(e) {\n      var t;\n      switch (typeof e) {\n        case \"undefined\":\n          t = \"string\";\n          break;\n        case \"boolean\":\n          t = \"boolean\";\n          break;\n        case \"number\":\n          t = \"number\";\n          break;\n        case \"object\":\n          t = Array.isArray(e) ? \"array\" : \"string\";\n          break;\n        default:\n          t = isNaN(e) || \"\" === e ? e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i) ? \"alphanum\" : \"string\" : \"number\";\n      }\n      return t;\n    }\n    setColumns(e, t) {\n      for (; this.headersElement.firstChild;) this.headersElement.removeChild(this.headersElement.firstChild);\n      this.columns = [], this.columnsByIndex = [], this.columnsByField = {}, this.dispatch(\"columns-loading\"), this.dispatchExternal(\"columnsLoading\"), this.table.options.rowHeader && (this.rowHeader = new r(!0 === this.table.options.rowHeader ? {} : this.table.options.rowHeader, this, !0), this.columns.push(this.rowHeader), this.headersElement.appendChild(this.rowHeader.getElement()), this.rowHeader.columnRendered()), e.forEach((e, t) => {\n        this._addColumn(e);\n      }), this._reIndexColumns(), this.dispatch(\"columns-loaded\"), this.subscribedExternal(\"columnsLoaded\") && this.dispatchExternal(\"columnsLoaded\", this.getComponents()), this.rerenderColumns(!1, !0), this.redraw(!0);\n    }\n    _addColumn(e, t, i) {\n      var s = new r(e, this),\n        o = s.getElement(),\n        n = i ? this.findColumnIndex(i) : i;\n      if (!t || !this.rowHeader || i && i !== this.rowHeader || (t = !1, i = this.rowHeader, n = 0), i && n > -1) {\n        var a = i.getTopColumn(),\n          l = this.columns.indexOf(a),\n          h = a.getElement();\n        t ? (this.columns.splice(l, 0, s), h.parentNode.insertBefore(o, h)) : (this.columns.splice(l + 1, 0, s), h.parentNode.insertBefore(o, h.nextSibling));\n      } else t ? (this.columns.unshift(s), this.headersElement.insertBefore(s.getElement(), this.headersElement.firstChild)) : (this.columns.push(s), this.headersElement.appendChild(s.getElement()));\n      return s.columnRendered(), s;\n    }\n    registerColumnField(e) {\n      e.definition.field && (this.columnsByField[e.definition.field] = e);\n    }\n    registerColumnPosition(e) {\n      this.columnsByIndex.push(e);\n    }\n    _reIndexColumns() {\n      this.columnsByIndex = [], this.columns.forEach(function (e) {\n        e.reRegisterPosition();\n      });\n    }\n    verticalAlignHeaders() {\n      var e = 0;\n      this.redrawBlock || (this.headersElement.style.height = \"\", this.columns.forEach(e => {\n        e.clearVerticalAlign();\n      }), this.columns.forEach(t => {\n        var i = t.getHeight();\n        i > e && (e = i);\n      }), this.headersElement.style.height = e + \"px\", this.columns.forEach(t => {\n        t.verticalAlign(this.table.options.columnHeaderVertAlign, e);\n      }), this.table.rowManager.adjustTableSize());\n    }\n    findColumn(e) {\n      var t;\n      if (\"object\" != typeof e) return this.columnsByField[e] || !1;\n      if (e instanceof r) return e;\n      if (e instanceof i) return e._getSelf() || !1;\n      if (\"undefined\" != typeof HTMLElement && e instanceof HTMLElement) {\n        return t = [], this.columns.forEach(e => {\n          t.push(e), t = t.concat(e.getColumns(!0));\n        }), t.find(t => t.element === e) || !1;\n      }\n      return !1;\n    }\n    getColumnByField(e) {\n      return this.columnsByField[e];\n    }\n    getColumnsByFieldRoot(e) {\n      var t = [];\n      return Object.keys(this.columnsByField).forEach(i => {\n        (this.table.options.nestedFieldSeparator ? i.split(this.table.options.nestedFieldSeparator)[0] : i) === e && t.push(this.columnsByField[i]);\n      }), t;\n    }\n    getColumnByIndex(e) {\n      return this.columnsByIndex[e];\n    }\n    getFirstVisibleColumn() {\n      var e = this.columnsByIndex.findIndex(e => e.visible);\n      return e > -1 && this.columnsByIndex[e];\n    }\n    getVisibleColumnsByIndex() {\n      return this.columnsByIndex.filter(e => e.visible);\n    }\n    getColumns() {\n      return this.columns;\n    }\n    findColumnIndex(e) {\n      return this.columnsByIndex.findIndex(t => e === t);\n    }\n    getRealColumns() {\n      return this.columnsByIndex;\n    }\n    traverse(e) {\n      this.columnsByIndex.forEach((t, i) => {\n        e(t, i);\n      });\n    }\n    getDefinitions(e) {\n      var t = [];\n      return this.columnsByIndex.forEach(i => {\n        (!e || e && i.visible) && t.push(i.getDefinition());\n      }), t;\n    }\n    getDefinitionTree() {\n      var e = [];\n      return this.columns.forEach(t => {\n        e.push(t.getDefinition(!0));\n      }), e;\n    }\n    getComponents(e) {\n      var t = [];\n      return (e ? this.columns : this.columnsByIndex).forEach(e => {\n        t.push(e.getComponent());\n      }), t;\n    }\n    getWidth() {\n      var e = 0;\n      return this.columnsByIndex.forEach(t => {\n        t.visible && (e += t.getWidth());\n      }), e;\n    }\n    moveColumn(e, t, i) {\n      t.element.parentNode.insertBefore(e.element, t.element), i && t.element.parentNode.insertBefore(t.element, e.element), this.moveColumnActual(e, t, i), this.verticalAlignHeaders(), this.table.rowManager.reinitialize();\n    }\n    moveColumnActual(e, t, i) {\n      e.parent.isGroup ? this._moveColumnInArray(e.parent.columns, e, t, i) : this._moveColumnInArray(this.columns, e, t, i), this._moveColumnInArray(this.columnsByIndex, e, t, i, !0), this.rerenderColumns(!0), this.dispatch(\"column-moved\", e, t, i), this.subscribedExternal(\"columnMoved\") && this.dispatchExternal(\"columnMoved\", e.getComponent(), this.table.columnManager.getComponents());\n    }\n    _moveColumnInArray(e, t, i, s, o) {\n      var n,\n        r = e.indexOf(t);\n      r > -1 && (e.splice(r, 1), (n = e.indexOf(i)) > -1 ? s && (n += 1) : n = r, e.splice(n, 0, t), o && (this.chain(\"column-moving-rows\", [t, i, s], null, []) || []).concat(this.table.rowManager.rows).forEach(function (e) {\n        if (e.cells.length) {\n          var t = e.cells.splice(r, 1)[0];\n          e.cells.splice(n, 0, t);\n        }\n      }));\n    }\n    scrollToColumn(e, t, i) {\n      var s = 0,\n        o = e.getLeftOffset(),\n        n = 0,\n        r = e.getElement();\n      return new Promise((a, l) => {\n        if (void 0 === t && (t = this.table.options.scrollToColumnPosition), void 0 === i && (i = this.table.options.scrollToColumnIfVisible), e.visible) {\n          switch (t) {\n            case \"middle\":\n            case \"center\":\n              n = -this.element.clientWidth / 2;\n              break;\n            case \"right\":\n              n = r.clientWidth - this.headersElement.clientWidth;\n          }\n          if (!i && o > 0 && o + r.offsetWidth < this.element.clientWidth) return !1;\n          s = o + n, s = Math.max(Math.min(s, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth), 0), this.table.rowManager.scrollHorizontal(s), this.scrollHorizontal(s), a();\n        } else console.warn(\"Scroll Error - Column not visible\"), l(\"Scroll Error - Column not visible\");\n      });\n    }\n    generateCells(e) {\n      var t = [];\n      return this.columnsByIndex.forEach(i => {\n        t.push(i.generateCell(e));\n      }), t;\n    }\n    getFlexBaseWidth() {\n      var e = this.table.element.clientWidth,\n        t = 0;\n      return this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight && (e -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth), this.columnsByIndex.forEach(function (i) {\n        var s, o, n;\n        i.visible && (s = i.definition.width || 0, o = parseInt(i.minWidth), n = \"string\" == typeof s ? s.indexOf(\"%\") > -1 ? e / 100 * parseInt(s) : parseInt(s) : s, t += n > o ? n : o);\n      }), t;\n    }\n    addColumn(e, t, i) {\n      return new Promise((s, o) => {\n        var n = this._addColumn(e, t, i);\n        this._reIndexColumns(), this.dispatch(\"column-add\", e, t, i), \"fitColumns\" != this.layoutMode() && n.reinitializeWidth(), this.redraw(!0), this.table.rowManager.reinitialize(), this.rerenderColumns(), s(n);\n      });\n    }\n    deregisterColumn(e) {\n      var t,\n        i = e.getField();\n      i && delete this.columnsByField[i], (t = this.columnsByIndex.indexOf(e)) > -1 && this.columnsByIndex.splice(t, 1), (t = this.columns.indexOf(e)) > -1 && this.columns.splice(t, 1), this.verticalAlignHeaders(), this.redraw();\n    }\n    rerenderColumns(e, t) {\n      this.redrawBlock ? (!1 === e || !0 === e && null === this.redrawBlockUpdate) && (this.redrawBlockUpdate = e) : this.renderer.rerenderColumns(e, t);\n    }\n    blockRedraw() {\n      this.redrawBlock = !0, this.redrawBlockUpdate = null;\n    }\n    restoreRedraw() {\n      this.redrawBlock = !1, this.verticalAlignHeaders(), this.renderer.rerenderColumns(this.redrawBlockUpdate);\n    }\n    redraw(e) {\n      a.elVisible(this.element) && this.verticalAlignHeaders(), e && (this.table.rowManager.resetScroll(), this.table.rowManager.reinitialize()), this.confirm(\"table-redrawing\", e) || this.layoutRefresh(e), this.dispatch(\"table-redraw\", e), this.table.footerManager.redraw();\n    }\n  }\n  class m {\n    constructor(e) {\n      return this._row = e, new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._row.table.componentFunctionBinder.handle(\"row\", e._row, t);\n        }\n      });\n    }\n    getData(e) {\n      return this._row.getData(e);\n    }\n    getElement() {\n      return this._row.getElement();\n    }\n    getCells() {\n      var e = [];\n      return this._row.getCells().forEach(function (t) {\n        e.push(t.getComponent());\n      }), e;\n    }\n    getCell(e) {\n      var t = this._row.getCell(e);\n      return !!t && t.getComponent();\n    }\n    getIndex() {\n      return this._row.getData(\"data\")[this._row.table.options.index];\n    }\n    getPosition() {\n      return this._row.getPosition();\n    }\n    watchPosition(e) {\n      return this._row.watchPosition(e);\n    }\n    delete() {\n      return this._row.delete();\n    }\n    scrollTo(e, t) {\n      return this._row.table.rowManager.scrollToRow(this._row, e, t);\n    }\n    move(e, t) {\n      this._row.moveToRow(e, t);\n    }\n    update(e) {\n      return this._row.updateData(e);\n    }\n    normalizeHeight() {\n      this._row.normalizeHeight(!0);\n    }\n    _getSelf() {\n      return this._row;\n    }\n    reformat() {\n      return this._row.reinitialize();\n    }\n    getTable() {\n      return this._row.table;\n    }\n    getNextRow() {\n      var e = this._row.nextRow();\n      return e ? e.getComponent() : e;\n    }\n    getPrevRow() {\n      var e = this._row.prevRow();\n      return e ? e.getComponent() : e;\n    }\n  }\n  class p extends t {\n    constructor(e, t, i = \"row\") {\n      super(t.table), this.parent = t, this.data = {}, this.type = i, this.element = !1, this.modules = {}, this.cells = [], this.height = 0, this.heightStyled = \"\", this.manualHeight = !1, this.outerHeight = 0, this.initialized = !1, this.heightInitialized = !1, this.position = 0, this.positionWatchers = [], this.component = null, this.created = !1, this.setData(e);\n    }\n    create() {\n      this.created || (this.created = !0, this.generateElement());\n    }\n    createElement() {\n      var e = document.createElement(\"div\");\n      e.classList.add(\"tabulator-row\"), e.setAttribute(\"role\", \"row\"), this.element = e;\n    }\n    getElement() {\n      return this.create(), this.element;\n    }\n    detachElement() {\n      this.element && this.element.parentNode && this.element.parentNode.removeChild(this.element);\n    }\n    generateElement() {\n      this.createElement(), this.dispatch(\"row-init\", this);\n    }\n    generateCells() {\n      this.cells = this.table.columnManager.generateCells(this);\n    }\n    initialize(e, t) {\n      if (this.create(), !this.initialized || e) {\n        for (this.deleteCells(); this.element.firstChild;) this.element.removeChild(this.element.firstChild);\n        this.dispatch(\"row-layout-before\", this), this.generateCells(), this.initialized = !0, this.table.columnManager.renderer.renderRowCells(this, t), e && this.normalizeHeight(), this.dispatch(\"row-layout\", this), this.table.options.rowFormatter && this.table.options.rowFormatter(this.getComponent()), this.dispatch(\"row-layout-after\", this);\n      } else this.table.columnManager.renderer.rerenderRowCells(this, t);\n    }\n    rendered() {\n      this.cells.forEach(e => {\n        e.cellRendered();\n      });\n    }\n    reinitializeHeight() {\n      this.heightInitialized = !1, this.element && null !== this.element.offsetParent && this.normalizeHeight(!0);\n    }\n    deinitialize() {\n      this.initialized = !1;\n    }\n    deinitializeHeight() {\n      this.heightInitialized = !1;\n    }\n    reinitialize(e) {\n      this.initialized = !1, this.heightInitialized = !1, this.manualHeight || (this.height = 0, this.heightStyled = \"\"), this.element && null !== this.element.offsetParent && this.initialize(!0), this.dispatch(\"row-relayout\", this);\n    }\n    calcHeight(e) {\n      var t = 0,\n        i = 0;\n      this.table.options.rowHeight ? this.height = this.table.options.rowHeight : (i = this.calcMinHeight(), t = this.calcMaxHeight(), this.height = e ? Math.max(t, i) : this.manualHeight ? this.height : Math.max(t, i)), this.heightStyled = this.height ? this.height + \"px\" : \"\", this.outerHeight = this.element.offsetHeight;\n    }\n    calcMinHeight() {\n      return this.table.options.resizableRows ? this.element.clientHeight : 0;\n    }\n    calcMaxHeight() {\n      var e = 0;\n      return this.cells.forEach(function (t) {\n        var i = t.getHeight();\n        i > e && (e = i);\n      }), e;\n    }\n    setCellHeight() {\n      this.cells.forEach(function (e) {\n        e.setHeight();\n      }), this.heightInitialized = !0;\n    }\n    clearCellHeight() {\n      this.cells.forEach(function (e) {\n        e.clearHeight();\n      });\n    }\n    normalizeHeight(e) {\n      e && !this.table.options.rowHeight && this.clearCellHeight(), this.calcHeight(e), this.setCellHeight();\n    }\n    setHeight(e, t) {\n      (this.height != e || t) && (this.manualHeight = !0, this.height = e, this.heightStyled = e ? e + \"px\" : \"\", this.setCellHeight(), this.outerHeight = this.element.offsetHeight, this.subscribedExternal(\"rowHeight\") && this.dispatchExternal(\"rowHeight\", this.getComponent()));\n    }\n    getHeight() {\n      return this.outerHeight;\n    }\n    getWidth() {\n      return this.element.offsetWidth;\n    }\n    deleteCell(e) {\n      var t = this.cells.indexOf(e);\n      t > -1 && this.cells.splice(t, 1);\n    }\n    setData(e) {\n      this.data = this.chain(\"row-data-init-before\", [this, e], void 0, e), this.dispatch(\"row-data-init-after\", this);\n    }\n    updateData(e) {\n      var t,\n        i = this.element && a.elVisible(this.element),\n        s = {};\n      return new Promise((o, n) => {\n        \"string\" == typeof e && (e = JSON.parse(e)), this.dispatch(\"row-data-save-before\", this), this.subscribed(\"row-data-changing\") && (s = Object.assign(s, this.data), s = Object.assign(s, e)), t = this.chain(\"row-data-changing\", [this, s, e], null, e);\n        for (let e in t) this.data[e] = t[e];\n        this.dispatch(\"row-data-save-after\", this);\n        for (let s in e) {\n          this.table.columnManager.getColumnsByFieldRoot(s).forEach(e => {\n            let s = this.getCell(e.getField());\n            if (s) {\n              let o = e.getFieldValue(t);\n              s.getValue() !== o && (s.setValueProcessData(o), i && s.cellRendered());\n            }\n          });\n        }\n        i ? (this.normalizeHeight(!0), this.table.options.rowFormatter && this.table.options.rowFormatter(this.getComponent())) : (this.initialized = !1, this.height = 0, this.heightStyled = \"\"), this.dispatch(\"row-data-changed\", this, i, e), this.dispatchExternal(\"rowUpdated\", this.getComponent()), this.subscribedExternal(\"dataChanged\") && this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData()), o();\n      });\n    }\n    getData(e) {\n      return e ? this.chain(\"row-data-retrieve\", [this, e], null, this.data) : this.data;\n    }\n    getCell(e) {\n      return e = this.table.columnManager.findColumn(e), this.initialized || 0 !== this.cells.length || this.generateCells(), this.cells.find(function (t) {\n        return t.column === e;\n      });\n    }\n    getCellIndex(e) {\n      return this.cells.findIndex(function (t) {\n        return t === e;\n      });\n    }\n    findCell(e) {\n      return this.cells.find(t => t.element === e);\n    }\n    getCells() {\n      return this.initialized || 0 !== this.cells.length || this.generateCells(), this.cells;\n    }\n    nextRow() {\n      return this.table.rowManager.nextDisplayRow(this, !0) || !1;\n    }\n    prevRow() {\n      return this.table.rowManager.prevDisplayRow(this, !0) || !1;\n    }\n    moveToRow(e, t) {\n      var i = this.table.rowManager.findRow(e);\n      i ? (this.table.rowManager.moveRowActual(this, i, !t), this.table.rowManager.refreshActiveData(\"display\", !1, !0)) : console.warn(\"Move Error - No matching row found:\", e);\n    }\n    delete() {\n      return this.dispatch(\"row-delete\", this), this.deleteActual(), Promise.resolve();\n    }\n    deleteActual(e) {\n      this.detachModules(), this.table.rowManager.deleteRow(this, e), this.deleteCells(), this.initialized = !1, this.heightInitialized = !1, this.element = !1, this.dispatch(\"row-deleted\", this);\n    }\n    detachModules() {\n      this.dispatch(\"row-deleting\", this);\n    }\n    deleteCells() {\n      var e = this.cells.length;\n      for (let t = 0; t < e; t++) this.cells[0].delete();\n    }\n    wipe() {\n      if (this.detachModules(), this.deleteCells(), this.element) {\n        for (; this.element.firstChild;) this.element.removeChild(this.element.firstChild);\n        this.element.parentNode && this.element.parentNode.removeChild(this.element);\n      }\n      this.element = !1, this.modules = {};\n    }\n    isDisplayed() {\n      return this.table.rowManager.getDisplayRows().includes(this);\n    }\n    getPosition() {\n      return !!this.isDisplayed() && this.position;\n    }\n    setPosition(e) {\n      e != this.position && (this.position = e, this.positionWatchers.forEach(e => {\n        e(this.position);\n      }));\n    }\n    watchPosition(e) {\n      this.positionWatchers.push(e), e(this.position);\n    }\n    getGroup() {\n      return this.modules.group || !1;\n    }\n    getComponent() {\n      return this.component || (this.component = new m(this)), this.component;\n    }\n  }\n  class g extends h {\n    constructor(e) {\n      super(e), this.verticalFillMode = \"fill\", this.scrollTop = 0, this.scrollLeft = 0, this.scrollTop = 0, this.scrollLeft = 0;\n    }\n    clearRows() {\n      for (var e = this.tableElement; e.firstChild;) e.removeChild(e.firstChild);\n      e.scrollTop = 0, e.scrollLeft = 0, e.style.minWidth = \"\", e.style.minHeight = \"\", e.style.display = \"\", e.style.visibility = \"\";\n    }\n    renderRows() {\n      var e = this.tableElement,\n        t = !0,\n        i = document.createDocumentFragment(),\n        s = this.rows();\n      s.forEach((e, s) => {\n        this.styleRow(e, s), e.initialize(!1, !0), \"group\" !== e.type && (t = !1), i.appendChild(e.getElement());\n      }), e.appendChild(i), s.forEach(e => {\n        e.rendered(), e.heightInitialized || e.calcHeight(!0);\n      }), s.forEach(e => {\n        e.heightInitialized || e.setCellHeight();\n      }), e.style.minWidth = t ? this.table.columnManager.getWidth() + \"px\" : \"\";\n    }\n    rerenderRows(e) {\n      this.clearRows(), e && e(), this.renderRows(), this.rows().length || this.table.rowManager.tableEmpty();\n    }\n    scrollToRowNearestTop(e) {\n      var t = a.elOffset(e.getElement()).top;\n      return !(Math.abs(this.elementVertical.scrollTop - t) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - t));\n    }\n    scrollToRow(e) {\n      var t = e.getElement();\n      this.elementVertical.scrollTop = a.elOffset(t).top - a.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n    }\n    visibleRows(e) {\n      return this.rows();\n    }\n  }\n  class b extends h {\n    constructor(e) {\n      super(e), this.verticalFillMode = \"fill\", this.scrollTop = 0, this.scrollLeft = 0, this.vDomRowHeight = 20, this.vDomTop = 0, this.vDomBottom = 0, this.vDomScrollPosTop = 0, this.vDomScrollPosBottom = 0, this.vDomTopPad = 0, this.vDomBottomPad = 0, this.vDomMaxRenderChain = 90, this.vDomWindowBuffer = 0, this.vDomWindowMinTotalRows = 20, this.vDomWindowMinMarginRows = 5, this.vDomTopNewRows = [], this.vDomBottomNewRows = [];\n    }\n    clearRows() {\n      for (var e = this.tableElement; e.firstChild;) e.removeChild(e.firstChild);\n      e.style.paddingTop = \"\", e.style.paddingBottom = \"\", e.style.minHeight = \"\", e.style.display = \"\", e.style.visibility = \"\", this.elementVertical.scrollTop = 0, this.elementVertical.scrollLeft = 0, this.scrollTop = 0, this.scrollLeft = 0, this.vDomTop = 0, this.vDomBottom = 0, this.vDomTopPad = 0, this.vDomBottomPad = 0, this.vDomScrollPosTop = 0, this.vDomScrollPosBottom = 0;\n    }\n    renderRows() {\n      this._virtualRenderFill();\n    }\n    rerenderRows(e) {\n      for (var t = this.elementVertical.scrollTop, i = !1, s = !1, o = this.table.rowManager.scrollLeft, n = this.rows(), r = this.vDomTop; r <= this.vDomBottom; r++) if (n[r]) {\n        var a = t - n[r].getElement().offsetTop;\n        if (!(!1 === s || Math.abs(a) < s)) break;\n        s = a, i = r;\n      }\n      n.forEach(e => {\n        e.deinitializeHeight();\n      }), e && e(), this.rows().length ? this._virtualRenderFill(!1 === i ? this.rows.length - 1 : i, !0, s || 0) : (this.clear(), this.table.rowManager.tableEmpty()), this.scrollColumns(o);\n    }\n    scrollColumns(e) {\n      this.table.rowManager.scrollHorizontal(e);\n    }\n    scrollRows(e, t) {\n      var i = e - this.vDomScrollPosTop,\n        s = e - this.vDomScrollPosBottom,\n        o = 2 * this.vDomWindowBuffer,\n        n = this.rows();\n      if (this.scrollTop = e, -i > o || s > o) {\n        var r = this.table.rowManager.scrollLeft;\n        this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop / this.elementVertical.scrollHeight * n.length)), this.scrollColumns(r);\n      } else t ? (i < 0 && this._addTopRow(n, -i), s < 0 && (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer ? this._removeBottomRow(n, -s) : this.vDomScrollPosBottom = this.scrollTop)) : (s >= 0 && this._addBottomRow(n, s), i >= 0 && (this.scrollTop > this.vDomWindowBuffer ? this._removeTopRow(n, i) : this.vDomScrollPosTop = this.scrollTop));\n    }\n    resize() {\n      this.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n    }\n    scrollToRowNearestTop(e) {\n      var t = this.rows().indexOf(e);\n      return !(Math.abs(this.vDomTop - t) > Math.abs(this.vDomBottom - t));\n    }\n    scrollToRow(e) {\n      var t = this.rows().indexOf(e);\n      t > -1 && this._virtualRenderFill(t, !0);\n    }\n    visibleRows(e) {\n      var t = this.elementVertical.scrollTop,\n        i = this.elementVertical.clientHeight + t,\n        s = !1,\n        o = 0,\n        n = 0,\n        r = this.rows();\n      if (e) o = this.vDomTop, n = this.vDomBottom;else for (var a = this.vDomTop; a <= this.vDomBottom; a++) if (r[a]) if (s) {\n        if (!(i - r[a].getElement().offsetTop >= 0)) break;\n        n = a;\n      } else if (t - r[a].getElement().offsetTop >= 0) o = a;else {\n        if (s = !0, !(i - r[a].getElement().offsetTop >= 0)) break;\n        n = a;\n      }\n      return r.slice(o, n + 1);\n    }\n    _virtualRenderFill(e, t, i) {\n      var s,\n        o,\n        n = this.tableElement,\n        r = this.elementVertical,\n        l = 0,\n        h = 0,\n        d = 0,\n        c = 0,\n        u = 0,\n        m = 0,\n        p = this.rows(),\n        g = p.length,\n        b = 0,\n        f = [],\n        v = 0,\n        w = 0,\n        C = this.table.rowManager.fixedHeight,\n        E = this.elementVertical.clientHeight,\n        y = this.table.options.rowHeight,\n        R = !0;\n      if (i = i || 0, e = e || 0) {\n        for (; n.firstChild;) n.removeChild(n.firstChild);\n        (c = (g - e + 1) * this.vDomRowHeight) < E && (e -= Math.ceil((E - c) / this.vDomRowHeight)) < 0 && (e = 0), e -= l = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight), this.vDomWindowMinMarginRows), e);\n      } else this.clear();\n      if (g && a.elVisible(this.elementVertical)) {\n        for (this.vDomTop = e, this.vDomBottom = e - 1, C || this.table.options.maxHeight ? (y && (w = E / y + this.vDomWindowBuffer / y), w = Math.max(this.vDomWindowMinTotalRows, Math.ceil(w))) : w = g; (w == g || h <= E + this.vDomWindowBuffer || v < this.vDomWindowMinTotalRows) && this.vDomBottom < g - 1;) {\n          for (f = [], o = document.createDocumentFragment(), m = 0; m < w && this.vDomBottom < g - 1;) s = p[b = this.vDomBottom + 1], this.styleRow(s, b), s.initialize(!1, !0), s.heightInitialized || this.table.options.rowHeight || s.clearCellHeight(), o.appendChild(s.getElement()), f.push(s), this.vDomBottom++, m++;\n          if (!f.length) break;\n          n.appendChild(o), f.forEach(e => {\n            e.rendered(), e.heightInitialized || e.calcHeight(!0);\n          }), f.forEach(e => {\n            e.heightInitialized || e.setCellHeight();\n          }), f.forEach(e => {\n            d = e.getHeight(), v < l ? u += d : h += d, d > this.vDomWindowBuffer && (this.vDomWindowBuffer = 2 * d), v++;\n          }), R = this.table.rowManager.adjustTableSize(), E = this.elementVertical.clientHeight, R && (C || this.table.options.maxHeight) && (y = h / v, w = Math.max(this.vDomWindowMinTotalRows, Math.ceil(E / y + this.vDomWindowBuffer / y)));\n        }\n        e ? (this.vDomTopPad = t ? this.vDomRowHeight * this.vDomTop + i : this.scrollTop - u, this.vDomBottomPad = this.vDomBottom == g - 1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - h - u, 0)) : (this.vDomTopPad = 0, this.vDomRowHeight = Math.floor((h + u) / v), this.vDomBottomPad = this.vDomRowHeight * (g - this.vDomBottom - 1), this.vDomScrollHeight = u + h + this.vDomBottomPad - E), n.style.paddingTop = this.vDomTopPad + \"px\", n.style.paddingBottom = this.vDomBottomPad + \"px\", t && (this.scrollTop = this.vDomTopPad + u + i - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - E : 0)), this.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - E), this.elementVertical.scrollWidth > this.elementVertical.clientWidth && t && (this.scrollTop += this.elementVertical.offsetHeight - E), this.vDomScrollPosTop = this.scrollTop, this.vDomScrollPosBottom = this.scrollTop, r.scrollTop = this.scrollTop, this.dispatch(\"render-virtual-fill\");\n      }\n    }\n    _addTopRow(e, t) {\n      for (var i = this.tableElement, s = [], o = 0, n = this.vDomTop - 1, r = 0, a = !0; a;) if (this.vDomTop) {\n        let l,\n          h,\n          d = e[n];\n        d && r < this.vDomMaxRenderChain ? (l = d.getHeight() || this.vDomRowHeight, h = d.initialized, t >= l ? (this.styleRow(d, n), i.insertBefore(d.getElement(), i.firstChild), d.initialized && d.heightInitialized || s.push(d), d.initialize(), h || (l = d.getElement().offsetHeight, l > this.vDomWindowBuffer && (this.vDomWindowBuffer = 2 * l)), t -= l, o += l, this.vDomTop--, n--, r++) : a = !1) : a = !1;\n      } else a = !1;\n      for (let e of s) e.clearCellHeight();\n      this._quickNormalizeRowHeight(s), o && (this.vDomTopPad -= o, this.vDomTopPad < 0 && (this.vDomTopPad = n * this.vDomRowHeight), n < 1 && (this.vDomTopPad = 0), i.style.paddingTop = this.vDomTopPad + \"px\", this.vDomScrollPosTop -= o);\n    }\n    _removeTopRow(e, t) {\n      for (var i = [], s = 0, o = 0, n = !0; n;) {\n        let r,\n          a = e[this.vDomTop];\n        a && o < this.vDomMaxRenderChain ? (r = a.getHeight() || this.vDomRowHeight, t >= r ? (this.vDomTop++, t -= r, s += r, i.push(a), o++) : n = !1) : n = !1;\n      }\n      for (let e of i) {\n        let t = e.getElement();\n        t.parentNode && t.parentNode.removeChild(t);\n      }\n      s && (this.vDomTopPad += s, this.tableElement.style.paddingTop = this.vDomTopPad + \"px\", this.vDomScrollPosTop += this.vDomTop ? s : s + this.vDomWindowBuffer);\n    }\n    _addBottomRow(e, t) {\n      for (var i = this.tableElement, s = [], o = 0, n = this.vDomBottom + 1, r = 0, a = !0; a;) {\n        let l,\n          h,\n          d = e[n];\n        d && r < this.vDomMaxRenderChain ? (l = d.getHeight() || this.vDomRowHeight, h = d.initialized, t >= l ? (this.styleRow(d, n), i.appendChild(d.getElement()), d.initialized && d.heightInitialized || s.push(d), d.initialize(), h || (l = d.getElement().offsetHeight, l > this.vDomWindowBuffer && (this.vDomWindowBuffer = 2 * l)), t -= l, o += l, this.vDomBottom++, n++, r++) : a = !1) : a = !1;\n      }\n      for (let e of s) e.clearCellHeight();\n      this._quickNormalizeRowHeight(s), o && (this.vDomBottomPad -= o, (this.vDomBottomPad < 0 || n == e.length - 1) && (this.vDomBottomPad = 0), i.style.paddingBottom = this.vDomBottomPad + \"px\", this.vDomScrollPosBottom += o);\n    }\n    _removeBottomRow(e, t) {\n      for (var i = [], s = 0, o = 0, n = !0; n;) {\n        let r,\n          a = e[this.vDomBottom];\n        a && o < this.vDomMaxRenderChain ? (r = a.getHeight() || this.vDomRowHeight, t >= r ? (this.vDomBottom--, t -= r, s += r, i.push(a), o++) : n = !1) : n = !1;\n      }\n      for (let e of i) {\n        let t = e.getElement();\n        t.parentNode && t.parentNode.removeChild(t);\n      }\n      s && (this.vDomBottomPad += s, this.vDomBottomPad < 0 && (this.vDomBottomPad = 0), this.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\", this.vDomScrollPosBottom -= s);\n    }\n    _quickNormalizeRowHeight(e) {\n      for (let t of e) t.calcHeight();\n      for (let t of e) t.setCellHeight();\n    }\n  }\n  class f extends t {\n    constructor(e) {\n      super(e), this.element = this.createHolderElement(), this.tableElement = this.createTableElement(), this.heightFixer = this.createTableElement(), this.placeholder = null, this.placeholderContents = null, this.firstRender = !1, this.renderMode = \"virtual\", this.fixedHeight = !1, this.rows = [], this.activeRowsPipeline = [], this.activeRows = [], this.activeRowsCount = 0, this.displayRows = [], this.displayRowsCount = 0, this.scrollTop = 0, this.scrollLeft = 0, this.redrawBlock = !1, this.redrawBlockRestoreConfig = !1, this.redrawBlockRenderInPosition = !1, this.dataPipeline = [], this.displayPipeline = [], this.scrollbarWidth = 0, this.renderer = null;\n    }\n    createHolderElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-tableholder\"), e.setAttribute(\"tabindex\", 0), e;\n    }\n    createTableElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-table\"), e.setAttribute(\"role\", \"rowgroup\"), e;\n    }\n    initializePlaceholder() {\n      var e = this.table.options.placeholder;\n      if (\"function\" == typeof e && (e = e.call(this.table)), e = this.chain(\"placeholder\", [e], e, e) || e) {\n        let t = document.createElement(\"div\");\n        if (t.classList.add(\"tabulator-placeholder\"), \"string\" == typeof e) {\n          let i = document.createElement(\"div\");\n          i.classList.add(\"tabulator-placeholder-contents\"), i.innerHTML = e, t.appendChild(i), this.placeholderContents = i;\n        } else \"undefined\" != typeof HTMLElement && e instanceof HTMLElement ? (t.appendChild(e), this.placeholderContents = e) : (console.warn(\"Invalid placeholder provided, must be string or HTML Element\", e), this.el = null);\n        this.placeholder = t;\n      }\n    }\n    getElement() {\n      return this.element;\n    }\n    getTableElement() {\n      return this.tableElement;\n    }\n    initialize() {\n      this.initializePlaceholder(), this.initializeRenderer(), this.element.appendChild(this.tableElement), this.firstRender = !0, this.element.addEventListener(\"scroll\", () => {\n        var e = this.element.scrollLeft,\n          t = this.scrollLeft > e,\n          i = this.element.scrollTop,\n          s = this.scrollTop > i;\n        this.scrollLeft != e && (this.scrollLeft = e, this.dispatch(\"scroll-horizontal\", e, t), this.dispatchExternal(\"scrollHorizontal\", e, t), this._positionPlaceholder()), this.scrollTop != i && (this.scrollTop = i, this.renderer.scrollRows(i, s), this.dispatch(\"scroll-vertical\", i, s), this.dispatchExternal(\"scrollVertical\", i, s));\n      });\n    }\n    findRow(e) {\n      if (\"object\" != typeof e) {\n        if (void 0 === e) return !1;\n        return this.rows.find(t => t.data[this.table.options.index] == e) || !1;\n      }\n      if (e instanceof p) return e;\n      if (e instanceof m) return e._getSelf() || !1;\n      if (\"undefined\" != typeof HTMLElement && e instanceof HTMLElement) {\n        return this.rows.find(t => t.getElement() === e) || !1;\n      }\n      return !1;\n    }\n    getRowFromDataObject(e) {\n      return this.rows.find(t => t.data === e) || !1;\n    }\n    getRowFromPosition(e) {\n      return this.getDisplayRows().find(t => \"row\" === t.type && t.getPosition() === e && t.isDisplayed());\n    }\n    scrollToRow(e, t, i) {\n      return this.renderer.scrollToRowPosition(e, t, i);\n    }\n    setData(e, t, i) {\n      return new Promise((s, o) => {\n        t && this.getDisplayRows().length ? this.table.options.pagination ? this._setDataActual(e, !0) : this.reRenderInPosition(() => {\n          this._setDataActual(e);\n        }) : (this.table.options.autoColumns && i && this.table.initialized && this.table.columnManager.generateColumnsFromRowData(e), this.resetScroll(), this._setDataActual(e)), s();\n      });\n    }\n    _setDataActual(e, t) {\n      this.dispatchExternal(\"dataProcessing\", e), this._wipeElements(), Array.isArray(e) ? (this.dispatch(\"data-processing\", e), e.forEach((e, t) => {\n        if (e && \"object\" == typeof e) {\n          var i = new p(e, this);\n          this.rows.push(i);\n        } else console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", e);\n      }), this.refreshActiveData(!1, !1, t), this.dispatch(\"data-processed\", e), this.dispatchExternal(\"dataProcessed\", e)) : console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof e, \"\\nData:     \", e);\n    }\n    _wipeElements() {\n      this.dispatch(\"rows-wipe\"), this.destroy(), this.adjustTableSize(), this.dispatch(\"rows-wiped\");\n    }\n    destroy() {\n      this.rows.forEach(e => {\n        e.wipe();\n      }), this.rows = [], this.activeRows = [], this.activeRowsPipeline = [], this.activeRowsCount = 0, this.displayRows = [], this.displayRowsCount = 0;\n    }\n    deleteRow(e, t) {\n      var i = this.rows.indexOf(e),\n        s = this.activeRows.indexOf(e);\n      s > -1 && this.activeRows.splice(s, 1), i > -1 && this.rows.splice(i, 1), this.setActiveRows(this.activeRows), this.displayRowIterator(t => {\n        var i = t.indexOf(e);\n        i > -1 && t.splice(i, 1);\n      }), t || this.reRenderInPosition(), this.regenerateRowPositions(), this.dispatchExternal(\"rowDeleted\", e.getComponent()), this.displayRowsCount || this.tableEmpty(), this.subscribedExternal(\"dataChanged\") && this.dispatchExternal(\"dataChanged\", this.getData());\n    }\n    addRow(e, t, i, s) {\n      return this.addRowActual(e, t, i, s);\n    }\n    addRows(e, t, i, s) {\n      var o = [];\n      return new Promise((n, r) => {\n        t = this.findAddRowPos(t), Array.isArray(e) || (e = [e]), (void 0 === i && t || void 0 !== i && !t) && e.reverse(), e.forEach((e, s) => {\n          var n = this.addRow(e, t, i, !0);\n          o.push(n), this.dispatch(\"row-added\", n, e, t, i);\n        }), this.refreshActiveData(!!s && \"displayPipeline\", !1, !0), this.regenerateRowPositions(), this.displayRowsCount && this._clearPlaceholder(), n(o);\n      });\n    }\n    findAddRowPos(e) {\n      return void 0 === e && (e = this.table.options.addRowPos), \"pos\" === e && (e = !0), \"bottom\" === e && (e = !1), e;\n    }\n    addRowActual(e, t, i, s) {\n      var o,\n        n,\n        r = e instanceof p ? e : new p(e || {}, this),\n        a = this.findAddRowPos(t),\n        l = -1;\n      return i || (n = this.chain(\"row-adding-position\", [r, a], null, {\n        index: i,\n        top: a\n      }), i = n.index, a = n.top), void 0 !== i && (i = this.findRow(i)), (i = this.chain(\"row-adding-index\", [r, i, a], null, i)) && (l = this.rows.indexOf(i)), i && l > -1 ? (o = this.activeRows.indexOf(i), this.displayRowIterator(function (e) {\n        var t = e.indexOf(i);\n        t > -1 && e.splice(a ? t : t + 1, 0, r);\n      }), o > -1 && this.activeRows.splice(a ? o : o + 1, 0, r), this.rows.splice(a ? l : l + 1, 0, r)) : a ? (this.displayRowIterator(function (e) {\n        e.unshift(r);\n      }), this.activeRows.unshift(r), this.rows.unshift(r)) : (this.displayRowIterator(function (e) {\n        e.push(r);\n      }), this.activeRows.push(r), this.rows.push(r)), this.setActiveRows(this.activeRows), this.dispatchExternal(\"rowAdded\", r.getComponent()), this.subscribedExternal(\"dataChanged\") && this.dispatchExternal(\"dataChanged\", this.table.rowManager.getData()), s || this.reRenderInPosition(), r;\n    }\n    moveRow(e, t, i) {\n      this.dispatch(\"row-move\", e, t, i), this.moveRowActual(e, t, i), this.regenerateRowPositions(), this.dispatch(\"row-moved\", e, t, i), this.dispatchExternal(\"rowMoved\", e.getComponent());\n    }\n    moveRowActual(e, t, i) {\n      this.moveRowInArray(this.rows, e, t, i), this.moveRowInArray(this.activeRows, e, t, i), this.displayRowIterator(s => {\n        this.moveRowInArray(s, e, t, i);\n      }), this.dispatch(\"row-moving\", e, t, i);\n    }\n    moveRowInArray(e, t, i, s) {\n      var o, n, r;\n      if (t !== i && ((o = e.indexOf(t)) > -1 && (e.splice(o, 1), (n = e.indexOf(i)) > -1 ? s ? e.splice(n + 1, 0, t) : e.splice(n, 0, t) : e.splice(o, 0, t)), e === this.getDisplayRows())) {\n        r = n > o ? n : o + 1;\n        for (let t = o < n ? o : n; t <= r; t++) e[t] && this.styleRow(e[t], t);\n      }\n    }\n    clearData() {\n      this.setData([]);\n    }\n    getRowIndex(e) {\n      return this.findRowIndex(e, this.rows);\n    }\n    getDisplayRowIndex(e) {\n      var t = this.getDisplayRows().indexOf(e);\n      return t > -1 && t;\n    }\n    nextDisplayRow(e, t) {\n      var i = this.getDisplayRowIndex(e),\n        s = !1;\n      return !1 !== i && i < this.displayRowsCount - 1 && (s = this.getDisplayRows()[i + 1]), !s || s instanceof p && \"row\" == s.type ? s : this.nextDisplayRow(s, t);\n    }\n    prevDisplayRow(e, t) {\n      var i = this.getDisplayRowIndex(e),\n        s = !1;\n      return i && (s = this.getDisplayRows()[i - 1]), !t || !s || s instanceof p && \"row\" == s.type ? s : this.prevDisplayRow(s, t);\n    }\n    findRowIndex(e, t) {\n      var i;\n      return !!((e = this.findRow(e)) && (i = t.indexOf(e)) > -1) && i;\n    }\n    getData(e, t) {\n      var i = [];\n      return this.getRows(e).forEach(function (e) {\n        \"row\" == e.type && i.push(e.getData(t || \"data\"));\n      }), i;\n    }\n    getComponents(e) {\n      var t = [];\n      return this.getRows(e).forEach(function (e) {\n        t.push(e.getComponent());\n      }), t;\n    }\n    getDataCount(e) {\n      return this.getRows(e).length;\n    }\n    scrollHorizontal(e) {\n      this.scrollLeft = e, this.element.scrollLeft = e, this.dispatch(\"scroll-horizontal\", e);\n    }\n    registerDataPipelineHandler(e, t) {\n      void 0 !== t ? (this.dataPipeline.push({\n        handler: e,\n        priority: t\n      }), this.dataPipeline.sort((e, t) => e.priority - t.priority)) : console.error(\"Data pipeline handlers must have a priority in order to be registered\");\n    }\n    registerDisplayPipelineHandler(e, t) {\n      void 0 !== t ? (this.displayPipeline.push({\n        handler: e,\n        priority: t\n      }), this.displayPipeline.sort((e, t) => e.priority - t.priority)) : console.error(\"Display pipeline handlers must have a priority in order to be registered\");\n    }\n    refreshActiveData(e, t, i) {\n      var s = this.table,\n        o = \"\",\n        n = 0,\n        r = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n      if (!this.table.destroyed) {\n        if (\"function\" == typeof e) {\n          if ((n = this.dataPipeline.findIndex(t => t.handler === e)) > -1) o = \"dataPipeline\", t && (n == this.dataPipeline.length - 1 ? o = \"display\" : n++);else {\n            if (!((n = this.displayPipeline.findIndex(t => t.handler === e)) > -1)) return void console.error(\"Unable to refresh data, invalid handler provided\", e);\n            o = \"displayPipeline\", t && (n == this.displayPipeline.length - 1 ? o = \"end\" : n++);\n          }\n        } else o = e || \"all\", n = 0;\n        if (this.redrawBlock) return void ((!this.redrawBlockRestoreConfig || this.redrawBlockRestoreConfig && (this.redrawBlockRestoreConfig.stage === o && n < this.redrawBlockRestoreConfig.index || r.indexOf(o) < r.indexOf(this.redrawBlockRestoreConfig.stage))) && (this.redrawBlockRestoreConfig = {\n          handler: e,\n          skipStage: t,\n          renderInPosition: i,\n          stage: o,\n          index: n\n        }));\n        a.elVisible(this.element) ? i ? this.reRenderInPosition(this.refreshPipelines.bind(this, e, o, n, i)) : (this.refreshPipelines(e, o, n, i), e || this.table.columnManager.renderer.renderColumns(), this.renderTable(), s.options.layoutColumnsOnNewData && this.table.columnManager.redraw(!0)) : this.refreshPipelines(e, o, n, i), this.dispatch(\"data-refreshed\");\n      }\n    }\n    refreshPipelines(e, t, i, s) {\n      switch (this.dispatch(\"data-refreshing\"), e && this.activeRowsPipeline[0] || (this.activeRowsPipeline[0] = this.rows.slice(0)), t) {\n        case \"all\":\n        case \"dataPipeline\":\n          for (let e = i; e < this.dataPipeline.length; e++) {\n            let t = this.dataPipeline[e].handler(this.activeRowsPipeline[e].slice(0));\n            this.activeRowsPipeline[e + 1] = t || this.activeRowsPipeline[e].slice(0);\n          }\n          this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n        case \"display\":\n          i = 0, this.resetDisplayRows();\n        case \"displayPipeline\":\n          for (let e = i; e < this.displayPipeline.length; e++) {\n            let t = this.displayPipeline[e].handler((e ? this.getDisplayRows(e - 1) : this.activeRows).slice(0), s);\n            this.setDisplayRows(t || this.getDisplayRows(e - 1).slice(0), e);\n          }\n        case \"end\":\n          this.regenerateRowPositions();\n      }\n      this.getDisplayRows().length && this._clearPlaceholder();\n    }\n    regenerateRowPositions() {\n      var e = this.getDisplayRows(),\n        t = 1;\n      e.forEach(e => {\n        \"row\" === e.type && (e.setPosition(t), t++);\n      });\n    }\n    setActiveRows(e) {\n      this.activeRows = this.activeRows = Object.assign([], e), this.activeRowsCount = this.activeRows.length;\n    }\n    resetDisplayRows() {\n      this.displayRows = [], this.displayRows.push(this.activeRows.slice(0)), this.displayRowsCount = this.displayRows[0].length;\n    }\n    setDisplayRows(e, t) {\n      this.displayRows[t] = e, t == this.displayRows.length - 1 && (this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length);\n    }\n    getDisplayRows(e) {\n      return void 0 === e ? this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [] : this.displayRows[e] || [];\n    }\n    getVisibleRows(e, t) {\n      var i = Object.assign([], this.renderer.visibleRows(!t));\n      return e && (i = this.chain(\"rows-visible\", [t], i, i)), i;\n    }\n    displayRowIterator(e) {\n      this.activeRowsPipeline.forEach(e), this.displayRows.forEach(e), this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n    }\n    getRows(e) {\n      var t = [];\n      switch (e) {\n        case \"active\":\n          t = this.activeRows;\n          break;\n        case \"display\":\n          t = this.table.rowManager.getDisplayRows();\n          break;\n        case \"visible\":\n          t = this.getVisibleRows(!1, !0);\n          break;\n        default:\n          t = this.chain(\"rows-retrieve\", e, null, this.rows) || this.rows;\n      }\n      return t;\n    }\n    reRenderInPosition(e) {\n      this.redrawBlock ? e ? e() : this.redrawBlockRenderInPosition = !0 : (this.dispatchExternal(\"renderStarted\"), this.renderer.rerenderRows(e), this.fixedHeight || this.adjustTableSize(), this.scrollBarCheck(), this.dispatchExternal(\"renderComplete\"));\n    }\n    scrollBarCheck() {\n      var e = 0;\n      this.element.scrollHeight > this.element.clientHeight && (e = this.element.offsetWidth - this.element.clientWidth), e !== this.scrollbarWidth && (this.scrollbarWidth = e, this.dispatch(\"scrollbar-vertical\", e));\n    }\n    initializeRenderer() {\n      var e,\n        t = {\n          virtual: b,\n          basic: g\n        };\n      (e = \"string\" == typeof this.table.options.renderVertical ? t[this.table.options.renderVertical] : this.table.options.renderVertical) ? (this.renderMode = this.table.options.renderVertical, this.renderer = new e(this.table, this.element, this.tableElement), this.renderer.initialize(), !this.table.element.clientHeight && !this.table.options.height || this.table.options.minHeight && this.table.options.maxHeight ? this.fixedHeight = !1 : this.fixedHeight = !0) : console.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n    }\n    getRenderMode() {\n      return this.renderMode;\n    }\n    renderTable() {\n      this.dispatchExternal(\"renderStarted\"), this.element.scrollTop = 0, this._clearTable(), this.displayRowsCount ? (this.renderer.renderRows(), this.firstRender && (this.firstRender = !1, this.fixedHeight || this.adjustTableSize(), this.layoutRefresh(!0))) : this.renderEmptyScroll(), this.fixedHeight || this.adjustTableSize(), this.dispatch(\"table-layout\"), this.displayRowsCount || this._showPlaceholder(), this.scrollBarCheck(), this.dispatchExternal(\"renderComplete\");\n    }\n    renderEmptyScroll() {\n      this.placeholder ? this.tableElement.style.display = \"none\" : this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n    }\n    _clearTable() {\n      this._clearPlaceholder(), this.scrollTop = 0, this.scrollLeft = 0, this.renderer.clearRows();\n    }\n    tableEmpty() {\n      this.renderEmptyScroll(), this._showPlaceholder();\n    }\n    checkPlaceholder() {\n      this.displayRowsCount ? this._clearPlaceholder() : this.tableEmpty();\n    }\n    _showPlaceholder() {\n      this.placeholder && (this.placeholder && this.placeholder.parentNode && this.placeholder.parentNode.removeChild(this.placeholder), this.initializePlaceholder(), this.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode), this.getElement().appendChild(this.placeholder), this._positionPlaceholder(), this.adjustTableSize());\n    }\n    _clearPlaceholder() {\n      this.placeholder && this.placeholder.parentNode && this.placeholder.parentNode.removeChild(this.placeholder), this.tableElement.style.minWidth = \"\", this.tableElement.style.display = \"\";\n    }\n    _positionPlaceholder() {\n      this.placeholder && this.placeholder.parentNode && (this.placeholder.style.width = this.table.columnManager.getWidth() + \"px\", this.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\", this.placeholderContents.style.marginLeft = this.scrollLeft + \"px\");\n    }\n    styleRow(e, t) {\n      var i = e.getElement();\n      t % 2 ? (i.classList.add(\"tabulator-row-even\"), i.classList.remove(\"tabulator-row-odd\")) : (i.classList.add(\"tabulator-row-odd\"), i.classList.remove(\"tabulator-row-even\"));\n    }\n    normalizeHeight(e) {\n      this.activeRows.forEach(function (t) {\n        t.normalizeHeight(e);\n      });\n    }\n    adjustTableSize() {\n      let e,\n        t = this.element.clientHeight,\n        i = !1;\n      if (\"fill\" === this.renderer.verticalFillMode) {\n        let s = Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n        if (this.fixedHeight) {\n          e = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n          const t = \"calc(100% - \" + s + \"px)\";\n          this.element.style.minHeight = e || \"calc(100% - \" + s + \"px)\", this.element.style.height = t, this.element.style.maxHeight = t;\n        } else this.element.style.height = \"\", this.element.style.height = this.table.element.clientHeight - s + \"px\", this.element.scrollTop = this.scrollTop;\n        this.renderer.resize(), this.fixedHeight || t == this.element.clientHeight || (i = !0, this.subscribed(\"table-resize\") ? this.dispatch(\"table-resize\") : this.redraw()), this.scrollBarCheck();\n      }\n      return this._positionPlaceholder(), i;\n    }\n    reinitialize() {\n      this.rows.forEach(function (e) {\n        e.reinitialize(!0);\n      });\n    }\n    blockRedraw() {\n      this.redrawBlock = !0, this.redrawBlockRestoreConfig = !1;\n    }\n    restoreRedraw() {\n      this.redrawBlock = !1, this.redrawBlockRestoreConfig ? (this.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition), this.redrawBlockRestoreConfig = !1) : this.redrawBlockRenderInPosition && this.reRenderInPosition(), this.redrawBlockRenderInPosition = !1;\n    }\n    redraw(e) {\n      this.adjustTableSize(), this.table.tableWidth = this.table.element.clientWidth, e ? this.renderTable() : (this.reRenderInPosition(), this.scrollHorizontal(this.scrollLeft));\n    }\n    resetScroll() {\n      if (this.element.scrollLeft = 0, this.element.scrollTop = 0, \"ie\" === this.table.browser) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(\"scroll\", !1, !0), this.element.dispatchEvent(e);\n      } else this.element.dispatchEvent(new Event(\"scroll\"));\n    }\n  }\n  class v extends t {\n    constructor(e) {\n      super(e), this.active = !1, this.element = this.createElement(), this.containerElement = this.createContainerElement(), this.external = !1;\n    }\n    initialize() {\n      this.initializeElement();\n    }\n    createElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-footer\"), e;\n    }\n    createContainerElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-footer-contents\"), this.element.appendChild(e), e;\n    }\n    initializeElement() {\n      if (this.table.options.footerElement) if (\"string\" == typeof this.table.options.footerElement) \"<\" === this.table.options.footerElement[0] ? this.containerElement.innerHTML = this.table.options.footerElement : (this.external = !0, this.containerElement = document.querySelector(this.table.options.footerElement));else this.element = this.table.options.footerElement;\n    }\n    getElement() {\n      return this.element;\n    }\n    append(e) {\n      this.activate(), this.containerElement.appendChild(e), this.table.rowManager.adjustTableSize();\n    }\n    prepend(e) {\n      this.activate(), this.element.insertBefore(e, this.element.firstChild), this.table.rowManager.adjustTableSize();\n    }\n    remove(e) {\n      e.parentNode.removeChild(e), this.deactivate();\n    }\n    deactivate(e) {\n      this.element.firstChild && !e || (this.external || this.element.parentNode.removeChild(this.element), this.active = !1);\n    }\n    activate() {\n      this.active || (this.active = !0, this.external || (this.table.element.appendChild(this.getElement()), this.table.element.style.display = \"\"));\n    }\n    redraw() {\n      this.dispatch(\"footer-redraw\");\n    }\n  }\n  class w extends t {\n    constructor(e) {\n      super(e), this.el = null, this.abortClasses = [\"tabulator-headers\", \"tabulator-table\"], this.previousTargets = {}, this.listeners = [\"click\", \"dblclick\", \"contextmenu\", \"mouseenter\", \"mouseleave\", \"mouseover\", \"mouseout\", \"mousemove\", \"mouseup\", \"mousedown\", \"touchstart\", \"touchend\"], this.componentMap = {\n        \"tabulator-cell\": \"cell\",\n        \"tabulator-row\": \"row\",\n        \"tabulator-group\": \"group\",\n        \"tabulator-col\": \"column\"\n      }, this.pseudoTrackers = {\n        row: {\n          subscriber: null,\n          target: null\n        },\n        cell: {\n          subscriber: null,\n          target: null\n        },\n        group: {\n          subscriber: null,\n          target: null\n        },\n        column: {\n          subscriber: null,\n          target: null\n        }\n      }, this.pseudoTracking = !1;\n    }\n    initialize() {\n      this.el = this.table.element, this.buildListenerMap(), this.bindSubscriptionWatchers();\n    }\n    buildListenerMap() {\n      var e = {};\n      this.listeners.forEach(t => {\n        e[t] = {\n          handler: null,\n          components: []\n        };\n      }), this.listeners = e;\n    }\n    bindPseudoEvents() {\n      Object.keys(this.pseudoTrackers).forEach(e => {\n        this.pseudoTrackers[e].subscriber = this.pseudoMouseEnter.bind(this, e), this.subscribe(e + \"-mouseover\", this.pseudoTrackers[e].subscriber);\n      }), this.pseudoTracking = !0;\n    }\n    pseudoMouseEnter(e, t, i) {\n      this.pseudoTrackers[e].target !== i && (this.pseudoTrackers[e].target && this.dispatch(e + \"-mouseleave\", t, this.pseudoTrackers[e].target), this.pseudoMouseLeave(e, t), this.pseudoTrackers[e].target = i, this.dispatch(e + \"-mouseenter\", t, i));\n    }\n    pseudoMouseLeave(e, t) {\n      var i = Object.keys(this.pseudoTrackers),\n        s = {\n          row: [\"cell\"],\n          cell: [\"row\"]\n        };\n      (i = i.filter(t => {\n        var i = s[e];\n        return t !== e && (!i || i && !i.includes(t));\n      })).forEach(e => {\n        var i = this.pseudoTrackers[e].target;\n        this.pseudoTrackers[e].target && (this.dispatch(e + \"-mouseleave\", t, i), this.pseudoTrackers[e].target = null);\n      });\n    }\n    bindSubscriptionWatchers() {\n      var e = Object.keys(this.listeners),\n        t = Object.values(this.componentMap);\n      for (let i of t) for (let t of e) {\n        let e = i + \"-\" + t;\n        this.subscriptionChange(e, this.subscriptionChanged.bind(this, i, t));\n      }\n      this.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n    }\n    subscriptionChanged(e, t, i) {\n      var s = this.listeners[t].components,\n        o = s.indexOf(e),\n        n = !1;\n      i ? -1 === o && (s.push(e), n = !0) : this.subscribed(e + \"-\" + t) || o > -1 && (s.splice(o, 1), n = !0), \"mouseenter\" !== t && \"mouseleave\" !== t || this.pseudoTracking || this.bindPseudoEvents(), n && this.updateEventListeners();\n    }\n    updateEventListeners() {\n      for (let e in this.listeners) {\n        let t = this.listeners[e];\n        t.components.length ? t.handler || (t.handler = this.track.bind(this, e), this.el.addEventListener(e, t.handler)) : t.handler && (this.el.removeEventListener(e, t.handler), t.handler = null);\n      }\n    }\n    track(e, t) {\n      var i = t.composedPath && t.composedPath() || t.path,\n        s = this.findTargets(i);\n      s = this.bindComponents(e, s), this.triggerEvents(e, t, s), !this.pseudoTracking || \"mouseover\" != e && \"mouseleave\" != e || Object.keys(s).length || this.pseudoMouseLeave(\"none\", t);\n    }\n    findTargets(e) {\n      var t = {};\n      let i = Object.keys(this.componentMap);\n      for (let s of e) {\n        let e = s.classList ? [...s.classList] : [];\n        if (e.filter(e => this.abortClasses.includes(e)).length) break;\n        let o = e.filter(e => i.includes(e));\n        for (let e of o) t[this.componentMap[e]] || (t[this.componentMap[e]] = s);\n      }\n      return t.group && t.group === t.row && delete t.row, t;\n    }\n    bindComponents(e, t) {\n      var i = Object.keys(t).reverse(),\n        s = this.listeners[e],\n        o = {},\n        n = {};\n      for (let e of i) {\n        let i,\n          r = t[e],\n          a = this.previousTargets[e];\n        if (a && a.target === r) i = a.component;else switch (e) {\n          case \"row\":\n          case \"group\":\n            if (s.components.includes(\"row\") || s.components.includes(\"cell\") || s.components.includes(\"group\")) {\n              i = this.table.rowManager.getVisibleRows(!0).find(e => e.getElement() === r), t.row && t.row.parentNode && t.row.parentNode.closest(\".tabulator-row\") && (t[e] = !1);\n            }\n            break;\n          case \"column\":\n            s.components.includes(\"column\") && (i = this.table.columnManager.findColumn(r));\n            break;\n          case \"cell\":\n            s.components.includes(\"cell\") && (o.row instanceof p ? i = o.row.findCell(r) : t.row && console.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\"));\n        }\n        i && (o[e] = i, n[e] = {\n          target: r,\n          component: i\n        });\n      }\n      return this.previousTargets = n, o;\n    }\n    triggerEvents(e, t, i) {\n      var s = this.listeners[e];\n      for (let o in i) i[o] && s.components.includes(o) && this.dispatch(o + \"-\" + e, t, i[o]);\n    }\n    clearWatchers() {\n      for (let e in this.listeners) {\n        let t = this.listeners[e];\n        t.handler && (this.el.removeEventListener(e, t.handler), t.handler = null);\n      }\n    }\n  }\n  class C {\n    constructor(e) {\n      this.table = e, this.bindings = {};\n    }\n    bind(e, t, i) {\n      this.bindings[e] || (this.bindings[e] = {}), this.bindings[e][t] ? console.warn(\"Unable to bind component handler, a matching function name is already bound\", e, t, i) : this.bindings[e][t] = i;\n    }\n    handle(e, t, i) {\n      if (this.bindings[e] && this.bindings[e][i] && \"function\" == typeof this.bindings[e][i].bind) return this.bindings[e][i].bind(null, t);\n      \"then\" === i || \"string\" != typeof i || i.startsWith(\"_\") || this.table.options.debugInvalidComponentFuncs && console.error(\"The \" + e + \" component does not have a \" + i + \" function, have you checked that you have the correct Tabulator module installed?\");\n    }\n  }\n  class E extends t {\n    constructor(e) {\n      super(e), this.requestOrder = 0, this.loading = !1;\n    }\n    initialize() {}\n    load(e, t, i, s, o, n) {\n      var r = ++this.requestOrder;\n      return this.table.destroyed ? Promise.resolve() : (this.dispatchExternal(\"dataLoading\", e), !e || 0 != e.indexOf(\"{\") && 0 != e.indexOf(\"[\") || (e = JSON.parse(e)), this.confirm(\"data-loading\", [e, t, i, o]) ? (this.loading = !0, o || this.alertLoader(), t = this.chain(\"data-params\", [e, i, o], t || {}, t || {}), t = this.mapParams(t, this.table.options.dataSendParams), this.chain(\"data-load\", [e, t, i, o], !1, Promise.resolve([])).then(e => {\n        if (this.table.destroyed) console.warn(\"Data Load Response Blocked - Table has been destroyed\");else {\n          Array.isArray(e) || \"object\" != typeof e || (e = this.mapParams(e, this.objectInvert(this.table.options.dataReceiveParams)));\n          var t = this.chain(\"data-loaded\", [e], null, e);\n          r == this.requestOrder ? (this.clearAlert(), !1 !== t && (this.dispatchExternal(\"dataLoaded\", t), this.table.rowManager.setData(t, s, void 0 === n ? !s : n))) : console.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n        }\n      }).catch(e => {\n        console.error(\"Data Load Error: \", e), this.dispatchExternal(\"dataLoadError\", e), o || this.alertError(), setTimeout(() => {\n          this.clearAlert();\n        }, this.table.options.dataLoaderErrorTimeout);\n      }).finally(() => {\n        this.loading = !1;\n      })) : (this.dispatchExternal(\"dataLoaded\", e), e || (e = []), this.table.rowManager.setData(e, s, void 0 === n ? !s : n), Promise.resolve()));\n    }\n    mapParams(e, t) {\n      var i = {};\n      for (let s in e) i[t.hasOwnProperty(s) ? t[s] : s] = e[s];\n      return i;\n    }\n    objectInvert(e) {\n      var t = {};\n      for (let i in e) t[e[i]] = i;\n      return t;\n    }\n    blockActiveLoad() {\n      this.requestOrder++;\n    }\n    alertLoader() {\n      (\"function\" == typeof this.table.options.dataLoader ? this.table.options.dataLoader() : this.table.options.dataLoader) && this.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n    }\n    alertError() {\n      this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n    }\n    clearAlert() {\n      this.table.alertManager.clear();\n    }\n  }\n  class y {\n    constructor(e, t, i) {\n      this.table = e, this.events = {}, this.optionsList = t || {}, this.subscriptionNotifiers = {}, this.dispatch = i ? this._debugDispatch.bind(this) : this._dispatch.bind(this), this.debug = i;\n    }\n    subscriptionChange(e, t) {\n      this.subscriptionNotifiers[e] || (this.subscriptionNotifiers[e] = []), this.subscriptionNotifiers[e].push(t), this.subscribed(e) && this._notifySubscriptionChange(e, !0);\n    }\n    subscribe(e, t) {\n      this.events[e] || (this.events[e] = []), this.events[e].push(t), this._notifySubscriptionChange(e, !0);\n    }\n    unsubscribe(e, t) {\n      var i;\n      if (this.events[e]) {\n        if (t) {\n          if (!((i = this.events[e].findIndex(e => e === t)) > -1)) return void console.warn(\"Cannot remove event, no matching event found:\", e, t);\n          this.events[e].splice(i, 1);\n        } else delete this.events[e];\n        this._notifySubscriptionChange(e, !1);\n      } else console.warn(\"Cannot remove event, no events set on:\", e);\n    }\n    subscribed(e) {\n      return this.events[e] && this.events[e].length;\n    }\n    _notifySubscriptionChange(e, t) {\n      var i = this.subscriptionNotifiers[e];\n      i && i.forEach(e => {\n        e(t);\n      });\n    }\n    _dispatch() {\n      var e,\n        t = Array.from(arguments),\n        i = t.shift();\n      return this.events[i] && this.events[i].forEach((i, s) => {\n        let o = i.apply(this.table, t);\n        s || (e = o);\n      }), e;\n    }\n    _debugDispatch() {\n      var e = Array.from(arguments),\n        t = e[0];\n      return e[0] = \"ExternalEvent:\" + e[0], (!0 === this.debug || this.debug.includes(t)) && console.log(...e), this._dispatch(...arguments);\n    }\n  }\n  class R {\n    constructor(e) {\n      this.events = {}, this.subscriptionNotifiers = {}, this.dispatch = e ? this._debugDispatch.bind(this) : this._dispatch.bind(this), this.chain = e ? this._debugChain.bind(this) : this._chain.bind(this), this.confirm = e ? this._debugConfirm.bind(this) : this._confirm.bind(this), this.debug = e;\n    }\n    subscriptionChange(e, t) {\n      this.subscriptionNotifiers[e] || (this.subscriptionNotifiers[e] = []), this.subscriptionNotifiers[e].push(t), this.subscribed(e) && this._notifySubscriptionChange(e, !0);\n    }\n    subscribe(e, t, i = 1e4) {\n      this.events[e] || (this.events[e] = []), this.events[e].push({\n        callback: t,\n        priority: i\n      }), this.events[e].sort((e, t) => e.priority - t.priority), this._notifySubscriptionChange(e, !0);\n    }\n    unsubscribe(e, t) {\n      var i;\n      if (this.events[e]) {\n        if (t) {\n          if (!((i = this.events[e].findIndex(e => e.callback === t)) > -1)) return void console.warn(\"Cannot remove event, no matching event found:\", e, t);\n          this.events[e].splice(i, 1);\n        }\n        this._notifySubscriptionChange(e, !1);\n      } else console.warn(\"Cannot remove event, no events set on:\", e);\n    }\n    subscribed(e) {\n      return this.events[e] && this.events[e].length;\n    }\n    _chain(e, t, i, s) {\n      var o = i;\n      return Array.isArray(t) || (t = [t]), this.subscribed(e) ? (this.events[e].forEach((e, i) => {\n        o = e.callback.apply(this, t.concat([o]));\n      }), o) : \"function\" == typeof s ? s() : s;\n    }\n    _confirm(e, t) {\n      var i = !1;\n      return Array.isArray(t) || (t = [t]), this.subscribed(e) && this.events[e].forEach((e, s) => {\n        e.callback.apply(this, t) && (i = !0);\n      }), i;\n    }\n    _notifySubscriptionChange(e, t) {\n      var i = this.subscriptionNotifiers[e];\n      i && i.forEach(e => {\n        e(t);\n      });\n    }\n    _dispatch() {\n      var e = Array.from(arguments),\n        t = e.shift();\n      this.events[t] && this.events[t].forEach(t => {\n        t.callback.apply(this, e);\n      });\n    }\n    _debugDispatch() {\n      var e = Array.from(arguments),\n        t = e[0];\n      return e[0] = \"InternalEvent:\" + t, (!0 === this.debug || this.debug.includes(t)) && console.log(...e), this._dispatch(...arguments);\n    }\n    _debugChain() {\n      var e = Array.from(arguments),\n        t = e[0];\n      return e[0] = \"InternalEvent:\" + t, (!0 === this.debug || this.debug.includes(t)) && console.log(...e), this._chain(...arguments);\n    }\n    _debugConfirm() {\n      var e = Array.from(arguments),\n        t = e[0];\n      return e[0] = \"InternalEvent:\" + t, (!0 === this.debug || this.debug.includes(t)) && console.log(...e), this._confirm(...arguments);\n    }\n  }\n  class x extends t {\n    constructor(e) {\n      super(e);\n    }\n    _warnUser() {\n      this.options(\"debugDeprecation\") && console.warn(...arguments);\n    }\n    check(e, t, i) {\n      var s = \"\";\n      return void 0 === this.options(e) || (s = \"Deprecated Setup Option - Use of the %c\" + e + \"%c option is now deprecated\", t ? (s = s + \", Please use the %c\" + t + \"%c option instead\", this._warnUser(s, \"font-weight: bold;\", \"font-weight: normal;\", \"font-weight: bold;\", \"font-weight: normal;\"), i && (this.table.options[t] = this.table.options[e])) : this._warnUser(s, \"font-weight: bold;\", \"font-weight: normal;\"), !1);\n    }\n    checkMsg(e, t) {\n      return void 0 === this.options(e) || (this._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + e + \" %c option is now deprecated, \" + t, \"font-weight: normal;\", \"font-weight: bold;\", \"font-weight: normal;\"), !1);\n    }\n    msg(e) {\n      this._warnUser(e);\n    }\n  }\n  class T extends t {\n    constructor(e) {\n      super(e), this.deps = {}, this.props = {};\n    }\n    initialize() {\n      this.deps = Object.assign({}, this.options(\"dependencies\"));\n    }\n    lookup(e, t, i) {\n      if (!Array.isArray(e)) return t ? this.lookupProp(e, t, i) : this.lookupKey(e, i);\n      for (const i of e) {\n        var s = this.lookup(i, t, !0);\n        if (s) break;\n      }\n      if (s) return s;\n      this.error(e);\n    }\n    lookupProp(e, t, i) {\n      var s;\n      return this.props[e] && this.props[e][t] ? this.props[e][t] : (s = this.lookupKey(e, i)) ? (this.props[e] || (this.props[e] = {}), this.props[e][t] = s[t] || s, this.props[e][t]) : void 0;\n    }\n    lookupKey(e, t) {\n      var i;\n      return this.deps[e] ? i = this.deps[e] : window[e] ? (this.deps[e] = window[e], i = this.deps[e]) : t || this.error(e), i;\n    }\n    error(e) {\n      console.error(\"Unable to find dependency\", e, \"Please check documentation and ensure you have imported the required library into your project\");\n    }\n  }\n  let k = class e extends t {\n    constructor(e, t, i) {\n      super(e), this.element = t, this.container = this._lookupContainer(), this.parent = i, this.reversedX = !1, this.childPopup = null, this.blurable = !1, this.blurCallback = null, this.blurEventsBound = !1, this.renderedCallback = null, this.visible = !1, this.hideable = !0, this.element.classList.add(\"tabulator-popup-container\"), this.blurEvent = this.hide.bind(this, !1), this.escEvent = this._escapeCheck.bind(this), this.destroyBinding = this.tableDestroyed.bind(this), this.destroyed = !1;\n    }\n    tableDestroyed() {\n      this.destroyed = !0, this.hide(!0);\n    }\n    _lookupContainer() {\n      var e = this.table.options.popupContainer;\n      return \"string\" == typeof e ? (e = document.querySelector(e)) || console.warn(\"Menu Error - no container element found matching selector:\", this.table.options.popupContainer, \"(defaulting to document body)\") : !0 === e && (e = this.table.element), e && !this._checkContainerIsParent(e) && (e = !1, console.warn(\"Menu Error - container element does not contain this table:\", this.table.options.popupContainer, \"(defaulting to document body)\")), e || (e = document.body), e;\n    }\n    _checkContainerIsParent(e, t = this.table.element) {\n      return e === t || !!t.parentNode && this._checkContainerIsParent(e, t.parentNode);\n    }\n    renderCallback(e) {\n      this.renderedCallback = e;\n    }\n    containerEventCoords(e) {\n      var t = !(e instanceof MouseEvent),\n        i = t ? e.touches[0].pageX : e.pageX,\n        s = t ? e.touches[0].pageY : e.pageY;\n      if (this.container !== document.body) {\n        let e = a.elOffset(this.container);\n        i -= e.left, s -= e.top;\n      }\n      return {\n        x: i,\n        y: s\n      };\n    }\n    elementPositionCoords(e, t = \"right\") {\n      var i,\n        s,\n        o,\n        n = a.elOffset(e);\n      switch (this.container !== document.body && (i = a.elOffset(this.container), n.left -= i.left, n.top -= i.top), t) {\n        case \"right\":\n          s = n.left + e.offsetWidth, o = n.top - 1;\n          break;\n        case \"bottom\":\n          s = n.left, o = n.top + e.offsetHeight;\n          break;\n        case \"left\":\n          s = n.left, o = n.top - 1;\n          break;\n        case \"top\":\n          s = n.left, o = n.top;\n          break;\n        case \"center\":\n          s = n.left + e.offsetWidth / 2, o = n.top + e.offsetHeight / 2;\n      }\n      return {\n        x: s,\n        y: o,\n        offset: n\n      };\n    }\n    show(e, t) {\n      var i, s, o, n, r;\n      return this.destroyed || this.table.destroyed || (e instanceof HTMLElement ? (o = e, n = (r = this.elementPositionCoords(e, t)).offset, i = r.x, s = r.y) : \"number\" == typeof e ? (n = {\n        top: 0,\n        left: 0\n      }, i = e, s = t) : (i = (r = this.containerEventCoords(e)).x, s = r.y, this.reversedX = !1), this.element.style.top = s + \"px\", this.element.style.left = i + \"px\", this.container.appendChild(this.element), \"function\" == typeof this.renderedCallback && this.renderedCallback(), this._fitToScreen(i, s, o, n, t), this.visible = !0, this.subscribe(\"table-destroy\", this.destroyBinding), this.element.addEventListener(\"mousedown\", e => {\n        e.stopPropagation();\n      })), this;\n    }\n    _fitToScreen(e, t, i, s, o) {\n      var n = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n      (e + this.element.offsetWidth >= this.container.offsetWidth || this.reversedX) && (this.element.style.left = \"\", this.element.style.right = i ? this.container.offsetWidth - s.left + \"px\" : this.container.offsetWidth - e + \"px\", this.reversedX = !0);\n      let r = Math.max(this.container.offsetHeight, n ? this.container.scrollHeight : 0);\n      if (t + this.element.offsetHeight > r) if (i) {\n        if (\"bottom\" === o) this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight - i.offsetHeight - 1 + \"px\";else this.element.style.top = parseInt(this.element.style.top) - this.element.offsetHeight + i.offsetHeight + 1 + \"px\";\n      } else this.element.style.height = r + \"px\";\n    }\n    isVisible() {\n      return this.visible;\n    }\n    hideOnBlur(e) {\n      return this.blurable = !0, this.visible && (setTimeout(() => {\n        this.visible && (this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent), this.subscribe(\"cell-editing\", this.blurEvent), document.body.addEventListener(\"click\", this.blurEvent), document.body.addEventListener(\"contextmenu\", this.blurEvent), document.body.addEventListener(\"mousedown\", this.blurEvent), window.addEventListener(\"resize\", this.blurEvent), document.body.addEventListener(\"keydown\", this.escEvent), this.blurEventsBound = !0);\n      }, 100), this.blurCallback = e), this;\n    }\n    _escapeCheck(e) {\n      27 == e.keyCode && this.hide();\n    }\n    blockHide() {\n      this.hideable = !1;\n    }\n    restoreHide() {\n      this.hideable = !0;\n    }\n    hide(e = !1) {\n      return this.visible && this.hideable && (this.blurable && this.blurEventsBound && (document.body.removeEventListener(\"keydown\", this.escEvent), document.body.removeEventListener(\"click\", this.blurEvent), document.body.removeEventListener(\"contextmenu\", this.blurEvent), document.body.removeEventListener(\"mousedown\", this.blurEvent), window.removeEventListener(\"resize\", this.blurEvent), this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent), this.unsubscribe(\"cell-editing\", this.blurEvent), this.blurEventsBound = !1), this.childPopup && this.childPopup.hide(), this.parent && (this.parent.childPopup = null), this.element.parentNode && this.element.parentNode.removeChild(this.element), this.visible = !1, this.blurCallback && !e && this.blurCallback(), this.unsubscribe(\"table-destroy\", this.destroyBinding)), this;\n    }\n    child(t) {\n      return this.childPopup && this.childPopup.hide(), this.childPopup = new e(this.table, t, this), this.childPopup;\n    }\n  };\n  class M extends t {\n    constructor(e, t) {\n      super(e), this._handler = null;\n    }\n    initialize() {}\n    registerTableOption(e, t) {\n      this.table.optionsList.register(e, t);\n    }\n    registerColumnOption(e, t) {\n      this.table.columnManager.optionsList.register(e, t);\n    }\n    registerTableFunction(e, t) {\n      void 0 === this.table[e] ? this.table[e] = (...i) => (this.table.initGuard(e), t(...i)) : console.warn(\"Unable to bind table function, name already in use\", e);\n    }\n    registerComponentFunction(e, t, i) {\n      return this.table.componentFunctionBinder.bind(e, t, i);\n    }\n    registerDataHandler(e, t) {\n      this.table.rowManager.registerDataPipelineHandler(e, t), this._handler = e;\n    }\n    registerDisplayHandler(e, t) {\n      this.table.rowManager.registerDisplayPipelineHandler(e, t), this._handler = e;\n    }\n    displayRows(e) {\n      var t,\n        i = this.table.rowManager.displayRows.length - 1;\n      if (this._handler && (t = this.table.rowManager.displayPipeline.findIndex(e => e.handler === this._handler)) > -1 && (i = t), e && (i += e), this._handler) return i > -1 ? this.table.rowManager.getDisplayRows(i) : this.activeRows();\n    }\n    activeRows() {\n      return this.table.rowManager.activeRows;\n    }\n    refreshData(e, t) {\n      t || (t = this._handler), t && this.table.rowManager.refreshActiveData(t, !1, e);\n    }\n    footerAppend(e) {\n      return this.table.footerManager.append(e);\n    }\n    footerPrepend(e) {\n      return this.table.footerManager.prepend(e);\n    }\n    footerRemove(e) {\n      return this.table.footerManager.remove(e);\n    }\n    popup(e, t) {\n      return new k(this.table, e, t);\n    }\n    alert(e, t) {\n      return this.table.alertManager.alert(e, t);\n    }\n    clearAlert() {\n      return this.table.alertManager.clear();\n    }\n  }\n  function L(e, t) {\n    e.forEach(function (e) {\n      e.reinitializeWidth();\n    }), this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", !0) && this.table.modules.responsiveLayout.update();\n  }\n  var S = {\n    fitData: function (e, t) {\n      t && this.table.columnManager.renderer.reinitializeColumnWidths(e), this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", !0) && this.table.modules.responsiveLayout.update();\n    },\n    fitDataFill: L,\n    fitDataTable: L,\n    fitDataStretch: function (e, t) {\n      var i = 0,\n        s = this.table.rowManager.element.clientWidth,\n        o = 0,\n        n = !1;\n      e.forEach((e, t) => {\n        e.widthFixed || e.reinitializeWidth(), (this.table.options.responsiveLayout ? e.modules.responsive.visible : e.visible) && (n = e), e.visible && (i += e.getWidth());\n      }), n ? (o = s - i + n.getWidth(), this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", !0) && (n.setWidth(0), this.table.modules.responsiveLayout.update()), o > 0 ? n.setWidth(o) : n.reinitializeWidth()) : this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", !0) && this.table.modules.responsiveLayout.update();\n    },\n    fitColumns: function (e, t) {\n      var i,\n        s,\n        o = this.table.rowManager.element.getBoundingClientRect().width,\n        n = 0,\n        r = 0,\n        a = 0,\n        l = [],\n        h = [],\n        d = 0,\n        c = 0;\n      function u(e) {\n        return \"string\" == typeof e ? e.indexOf(\"%\") > -1 ? o / 100 * parseInt(e) : parseInt(e) : e;\n      }\n      function m(e, t, i, s) {\n        var o = [],\n          n = 0,\n          r = 0,\n          l = 0,\n          h = a,\n          d = 0,\n          c = 0,\n          p = [];\n        function g(e) {\n          return i * (e.column.definition.widthGrow || 1);\n        }\n        function b(e) {\n          return u(e.width) - i * (e.column.definition.widthShrink || 0);\n        }\n        return e.forEach(function (e, n) {\n          var r = s ? b(e) : g(e);\n          e.column.minWidth >= r ? o.push(e) : e.column.maxWidth && e.column.maxWidth < r ? (e.width = e.column.maxWidth, t -= e.column.maxWidth, (h -= s ? e.column.definition.widthShrink || 1 : e.column.definition.widthGrow || 1) && (i = Math.floor(t / h))) : (p.push(e), c += s ? e.column.definition.widthShrink || 1 : e.column.definition.widthGrow || 1);\n        }), o.length ? (o.forEach(function (e) {\n          n += s ? e.width - e.column.minWidth : e.column.minWidth, e.width = e.column.minWidth;\n        }), r = t - n, l = c ? Math.floor(r / c) : r, d = m(p, r, l, s)) : (d = c ? t - Math.floor(t / c) * c : t, p.forEach(function (e) {\n          e.width = s ? b(e) : g(e);\n        })), d;\n      }\n      this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", !0) && this.table.modules.responsiveLayout.update(), this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight && (o -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth), e.forEach(function (e) {\n        var t, i, s;\n        e.visible && (t = e.definition.width, i = parseInt(e.minWidth), t ? (s = u(t), n += s > i ? s : i, e.definition.widthShrink && (h.push({\n          column: e,\n          width: s > i ? s : i\n        }), d += e.definition.widthShrink)) : (l.push({\n          column: e,\n          width: 0\n        }), a += e.definition.widthGrow || 1));\n      }), r = o - n, i = Math.floor(r / a), c = m(l, r, i, !1), l.length && c > 0 && (l[l.length - 1].width += c), l.forEach(function (e) {\n        r -= e.width;\n      }), (s = Math.abs(c) + r) > 0 && d && (c = m(h, s, Math.floor(s / d), !0)), c && h.length && (h[h.length - 1].width -= c), l.forEach(function (e) {\n        e.column.setWidth(e.width);\n      }), h.forEach(function (e) {\n        e.column.setWidth(e.width);\n      });\n    }\n  };\n  class D extends M {\n    constructor(e) {\n      super(e, \"layout\"), this.mode = null, this.registerTableOption(\"layout\", \"fitData\"), this.registerTableOption(\"layoutColumnsOnNewData\", !1), this.registerColumnOption(\"widthGrow\"), this.registerColumnOption(\"widthShrink\");\n    }\n    initialize() {\n      var e = this.table.options.layout;\n      D.modes[e] ? this.mode = e : (console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + e), this.mode = \"fitData\"), this.table.element.setAttribute(\"tabulator-layout\", this.mode), this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n    }\n    initializeColumn(e) {\n      e.definition.widthGrow && (e.definition.widthGrow = Number(e.definition.widthGrow)), e.definition.widthShrink && (e.definition.widthShrink = Number(e.definition.widthShrink));\n    }\n    getMode() {\n      return this.mode;\n    }\n    layout(e) {\n      var t = this.table.columnManager.columnsByIndex.find(e => e.definition.variableHeight || \"textarea\" === e.definition.formatter);\n      this.dispatch(\"layout-refreshing\"), D.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, e), t && this.table.rowManager.normalizeHeight(!0), this.dispatch(\"layout-refreshed\");\n    }\n  }\n  _defineProperty(D, \"moduleName\", \"layout\");\n  _defineProperty(D, \"modes\", S);\n  var z = {\n    default: {\n      groups: {\n        item: \"item\",\n        items: \"items\"\n      },\n      columns: {},\n      data: {\n        loading: \"Loading\",\n        error: \"Error\"\n      },\n      pagination: {\n        page_size: \"Page Size\",\n        page_title: \"Show Page\",\n        first: \"First\",\n        first_title: \"First Page\",\n        last: \"Last\",\n        last_title: \"Last Page\",\n        prev: \"Prev\",\n        prev_title: \"Prev Page\",\n        next: \"Next\",\n        next_title: \"Next Page\",\n        all: \"All\",\n        counter: {\n          showing: \"Showing\",\n          of: \"of\",\n          rows: \"rows\",\n          pages: \"pages\"\n        }\n      },\n      headerFilters: {\n        default: \"filter column...\",\n        columns: {}\n      }\n    }\n  };\n  class P extends M {\n    constructor(e) {\n      super(e), this.locale = \"default\", this.lang = !1, this.bindings = {}, this.langList = {}, this.registerTableOption(\"locale\", !1), this.registerTableOption(\"langs\", {});\n    }\n    initialize() {\n      this.langList = a.deepClone(P.langs), !1 !== this.table.options.columnDefaults.headerFilterPlaceholder && this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n      for (let e in this.table.options.langs) this.installLang(e, this.table.options.langs[e]);\n      this.setLocale(this.table.options.locale), this.registerTableFunction(\"setLocale\", this.setLocale.bind(this)), this.registerTableFunction(\"getLocale\", this.getLocale.bind(this)), this.registerTableFunction(\"getLang\", this.getLang.bind(this));\n    }\n    setHeaderFilterPlaceholder(e) {\n      this.langList.default.headerFilters.default = e;\n    }\n    installLang(e, t) {\n      this.langList[e] ? this._setLangProp(this.langList[e], t) : this.langList[e] = t;\n    }\n    _setLangProp(e, t) {\n      for (let i in t) e[i] && \"object\" == typeof e[i] ? this._setLangProp(e[i], t[i]) : e[i] = t[i];\n    }\n    setLocale(e) {\n      if (!0 === (e = e || \"default\") && navigator.language && (e = navigator.language.toLowerCase()), e && !this.langList[e]) {\n        let t = e.split(\"-\")[0];\n        this.langList[t] ? (console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", e, t), e = t) : (console.warn(\"Localization Error - Matching locale not found, using default: \", e), e = \"default\");\n      }\n      this.locale = e, this.lang = a.deepClone(this.langList.default || {}), \"default\" != e && function e(t, i) {\n        for (var s in t) \"object\" == typeof t[s] ? (i[s] || (i[s] = {}), e(t[s], i[s])) : i[s] = t[s];\n      }(this.langList[e], this.lang), this.dispatchExternal(\"localized\", this.locale, this.lang), this._executeBindings();\n    }\n    getLocale(e) {\n      return this.locale;\n    }\n    getLang(e) {\n      return e ? this.langList[e] : this.lang;\n    }\n    getText(e, t) {\n      var i = (t ? e + \"|\" + t : e).split(\"|\");\n      return this._getLangElement(i, this.locale) || \"\";\n    }\n    _getLangElement(e, t) {\n      var i = this.lang;\n      return e.forEach(function (e) {\n        var t;\n        i && (t = i[e], i = void 0 !== t && t);\n      }), i;\n    }\n    bind(e, t) {\n      this.bindings[e] || (this.bindings[e] = []), this.bindings[e].push(t), t(this.getText(e), this.lang);\n    }\n    _executeBindings() {\n      for (let e in this.bindings) this.bindings[e].forEach(t => {\n        t(this.getText(e), this.lang);\n      });\n    }\n  }\n  _defineProperty(P, \"moduleName\", \"localize\");\n  _defineProperty(P, \"langs\", z);\n  var F = Object.freeze({\n    __proto__: null,\n    CommsModule: (_Class = class CommsModule extends M {\n      constructor(e) {\n        super(e);\n      }\n      initialize() {\n        this.registerTableFunction(\"tableComms\", this.receive.bind(this));\n      }\n      getConnections(e) {\n        var t = [];\n        return this.table.constructor.registry.lookupTable(e).forEach(e => {\n          this.table !== e && t.push(e);\n        }), t;\n      }\n      send(e, t, i, s) {\n        var o = this.getConnections(e);\n        o.forEach(e => {\n          e.tableComms(this.table.element, t, i, s);\n        }), !o.length && e && console.warn(\"Table Connection Error - No tables matching selector found\", e);\n      }\n      receive(e, t, i, s) {\n        if (this.table.modExists(t)) return this.table.modules[t].commsReceived(e, i, s);\n        console.warn(\"Inter-table Comms Error - no such module:\", t);\n      }\n    }, _defineProperty(_Class, \"moduleName\", \"comms\"), _Class),\n    LayoutModule: D,\n    LocalizeModule: P\n  });\n  class H {\n    static findTable(e) {\n      var t = H.registry.lookupTable(e, !0);\n      return !(Array.isArray(t) && !t.length) && t;\n    }\n  }\n  _H = H;\n  _defineProperty(H, \"registry\", {\n    tables: [],\n    register(e) {\n      _H.registry.tables.push(e);\n    },\n    deregister(e) {\n      var t = _H.registry.tables.indexOf(e);\n      t > -1 && _H.registry.tables.splice(t, 1);\n    },\n    lookupTable(e, t) {\n      var i,\n        s,\n        o = [];\n      if (\"string\" == typeof e) {\n        if ((i = document.querySelectorAll(e)).length) for (var n = 0; n < i.length; n++) (s = _H.registry.matchElement(i[n])) && o.push(s);\n      } else \"undefined\" != typeof HTMLElement && e instanceof HTMLElement || e instanceof _H ? (s = _H.registry.matchElement(e)) && o.push(s) : Array.isArray(e) ? e.forEach(function (e) {\n        o = o.concat(_H.registry.lookupTable(e));\n      }) : t || console.warn(\"Table Connection Error - Invalid Selector\", e);\n      return o;\n    },\n    matchElement: e => _H.registry.tables.find(function (t) {\n      return e instanceof _H ? t === e : t.element === e;\n    })\n  });\n  class _ extends H {\n    constructor() {\n      super();\n    }\n    static initializeModuleBinder(e) {\n      _.modulesRegistered || (_.modulesRegistered = !0, _._registerModules(F, !0), e && _._registerModules(e));\n    }\n    static _extendModule(e, t, i) {\n      if (_.moduleBindings[e]) {\n        var s = _.moduleBindings[e][t];\n        if (s) {\n          if (\"object\" == typeof i) for (let e in i) s[e] = i[e];else console.warn(\"Module Error - Invalid value type, it must be an object\");\n        } else console.warn(\"Module Error - property does not exist:\", t);\n      } else console.warn(\"Module Error - module does not exist:\", e);\n    }\n    static _registerModules(e, t) {\n      var i = Object.values(e);\n      t && i.forEach(e => {\n        e.prototype.moduleCore = !0;\n      }), _._registerModule(i);\n    }\n    static _registerModule(e) {\n      Array.isArray(e) || (e = [e]), e.forEach(e => {\n        _._registerModuleBinding(e), _._registerModuleExtensions(e);\n      });\n    }\n    static _registerModuleBinding(e) {\n      e.moduleName ? _.moduleBindings[e.moduleName] = e : console.error(\"Unable to bind module, no moduleName defined\", e.moduleName);\n    }\n    static _registerModuleExtensions(e) {\n      var t = e.moduleExtensions;\n      if (e.moduleExtensions) for (let e in t) {\n        let i = t[e];\n        if (_.moduleBindings[e]) for (let t in i) _._extendModule(e, t, i[t]);else {\n          _.moduleExtensions[e] || (_.moduleExtensions[e] = {});\n          for (let t in i) _.moduleExtensions[e][t] || (_.moduleExtensions[e][t] = {}), Object.assign(_.moduleExtensions[e][t], i[t]);\n        }\n      }\n      _._extendModuleFromQueue(e);\n    }\n    static _extendModuleFromQueue(e) {\n      var t = _.moduleExtensions[e.moduleName];\n      if (t) for (let i in t) _._extendModule(e.moduleName, i, t[i]);\n    }\n    _bindModules() {\n      var e = [],\n        t = [],\n        i = [];\n      for (var s in this.modules = {}, _.moduleBindings) {\n        let o = _.moduleBindings[s],\n          n = new o(this);\n        this.modules[s] = n, o.prototype.moduleCore ? this.modulesCore.push(n) : o.moduleInitOrder ? o.moduleInitOrder < 0 ? e.push(n) : t.push(n) : i.push(n);\n      }\n      e.sort((e, t) => e.moduleInitOrder > t.moduleInitOrder ? 1 : -1), t.sort((e, t) => e.moduleInitOrder > t.moduleInitOrder ? 1 : -1), this.modulesRegular = e.concat(i.concat(t));\n    }\n  }\n  _defineProperty(_, \"moduleBindings\", {});\n  _defineProperty(_, \"moduleExtensions\", {});\n  _defineProperty(_, \"modulesRegistered\", !1);\n  _defineProperty(_, \"defaultModules\", !1);\n  class O extends t {\n    constructor(e) {\n      super(e), this.element = this._createAlertElement(), this.msgElement = this._createMsgElement(), this.type = null, this.element.appendChild(this.msgElement);\n    }\n    _createAlertElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-alert\"), e;\n    }\n    _createMsgElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-alert-msg\"), e.setAttribute(\"role\", \"alert\"), e;\n    }\n    _typeClass() {\n      return \"tabulator-alert-state-\" + this.type;\n    }\n    alert(e, t = \"msg\") {\n      if (e) {\n        for (this.clear(), this.dispatch(\"alert-show\", t), this.type = t; this.msgElement.firstChild;) this.msgElement.removeChild(this.msgElement.firstChild);\n        this.msgElement.classList.add(this._typeClass()), \"function\" == typeof e && (e = e()), e instanceof HTMLElement ? this.msgElement.appendChild(e) : this.msgElement.innerHTML = e, this.table.element.appendChild(this.element);\n      }\n    }\n    clear() {\n      this.dispatch(\"alert-hide\", this.type), this.element.parentNode && this.element.parentNode.removeChild(this.element), this.msgElement.classList.remove(this._typeClass());\n    }\n  }\n  class A extends _ {\n    static extendModule() {\n      A.initializeModuleBinder(), A._extendModule(...arguments);\n    }\n    static registerModule() {\n      A.initializeModuleBinder(), A._registerModule(...arguments);\n    }\n    constructor(e, t, i) {\n      super(), A.initializeModuleBinder(i), this.options = {}, this.columnManager = null, this.rowManager = null, this.footerManager = null, this.alertManager = null, this.vdomHoz = null, this.externalEvents = null, this.eventBus = null, this.interactionMonitor = !1, this.browser = \"\", this.browserSlow = !1, this.browserMobile = !1, this.rtl = !1, this.originalElement = null, this.componentFunctionBinder = new C(this), this.dataLoader = !1, this.modules = {}, this.modulesCore = [], this.modulesRegular = [], this.deprecationAdvisor = new x(this), this.optionsList = new l(this, \"table constructor\"), this.dependencyRegistry = new T(this), this.initialized = !1, this.destroyed = !1, this.initializeElement(e) && (this.initializeCoreSystems(t), setTimeout(() => {\n        this._create();\n      })), this.constructor.registry.register(this);\n    }\n    initializeElement(e) {\n      return \"undefined\" != typeof HTMLElement && e instanceof HTMLElement ? (this.element = e, !0) : \"string\" == typeof e ? (this.element = document.querySelector(e), !!this.element || (console.error(\"Tabulator Creation Error - no element found matching selector: \", e), !1)) : (console.error(\"Tabulator Creation Error - Invalid element provided:\", e), !1);\n    }\n    initializeCoreSystems(e) {\n      this.columnManager = new u(this), this.rowManager = new f(this), this.footerManager = new v(this), this.dataLoader = new E(this), this.alertManager = new O(this), this._bindModules(), this.options = this.optionsList.generate(A.defaultOptions, e), this._clearObjectPointers(), this._mapDeprecatedFunctionality(), this.externalEvents = new y(this, this.options, this.options.debugEventsExternal), this.eventBus = new R(this.options.debugEventsInternal), this.interactionMonitor = new w(this), this.dataLoader.initialize(), this.footerManager.initialize(), this.dependencyRegistry.initialize();\n    }\n    _mapDeprecatedFunctionality() {}\n    _clearSelection() {\n      this.element.classList.add(\"tabulator-block-select\"), window.getSelection ? window.getSelection().empty ? window.getSelection().empty() : window.getSelection().removeAllRanges && window.getSelection().removeAllRanges() : document.selection && document.selection.empty(), this.element.classList.remove(\"tabulator-block-select\");\n    }\n    _create() {\n      this.externalEvents.dispatch(\"tableBuilding\"), this.eventBus.dispatch(\"table-building\"), this._rtlCheck(), this._buildElement(), this._initializeTable(), this.initialized = !0, this._loadInitialData().finally(() => {\n        this.eventBus.dispatch(\"table-initialized\"), this.externalEvents.dispatch(\"tableBuilt\");\n      });\n    }\n    _rtlCheck() {\n      var e = window.getComputedStyle(this.element);\n      switch (this.options.textDirection) {\n        case \"auto\":\n          if (\"rtl\" !== e.direction) break;\n        case \"rtl\":\n          this.element.classList.add(\"tabulator-rtl\"), this.rtl = !0;\n          break;\n        case \"ltr\":\n          this.element.classList.add(\"tabulator-ltr\");\n        default:\n          this.rtl = !1;\n      }\n    }\n    _clearObjectPointers() {\n      this.options.columns = this.options.columns.slice(0), Array.isArray(this.options.data) && !this.options.reactiveData && (this.options.data = this.options.data.slice(0));\n    }\n    _buildElement() {\n      var e,\n        t = this.element,\n        i = this.options;\n      if (\"TABLE\" === t.tagName) {\n        this.originalElement = this.element, e = document.createElement(\"div\");\n        var s = t.attributes;\n        for (var o in s) \"object\" == typeof s[o] && e.setAttribute(s[o].name, s[o].value);\n        t.parentNode.replaceChild(e, t), this.element = t = e;\n      }\n      for (t.classList.add(\"tabulator\"), t.setAttribute(\"role\", \"grid\"); t.firstChild;) t.removeChild(t.firstChild);\n      i.height && (i.height = isNaN(i.height) ? i.height : i.height + \"px\", t.style.height = i.height), !1 !== i.minHeight && (i.minHeight = isNaN(i.minHeight) ? i.minHeight : i.minHeight + \"px\", t.style.minHeight = i.minHeight), !1 !== i.maxHeight && (i.maxHeight = isNaN(i.maxHeight) ? i.maxHeight : i.maxHeight + \"px\", t.style.maxHeight = i.maxHeight);\n    }\n    _initializeTable() {\n      var e = this.element,\n        t = this.options;\n      this.interactionMonitor.initialize(), this.columnManager.initialize(), this.rowManager.initialize(), this._detectBrowser(), this.modulesCore.forEach(e => {\n        e.initialize();\n      }), e.appendChild(this.columnManager.getElement()), e.appendChild(this.rowManager.getElement()), t.footerElement && this.footerManager.activate(), t.autoColumns && t.data && this.columnManager.generateColumnsFromRowData(this.options.data), this.modulesRegular.forEach(e => {\n        e.initialize();\n      }), this.columnManager.setColumns(t.columns), this.eventBus.dispatch(\"table-built\");\n    }\n    _loadInitialData() {\n      return this.dataLoader.load(this.options.data).finally(() => {\n        this.columnManager.verticalAlignHeaders();\n      });\n    }\n    destroy() {\n      var e = this.element;\n      for (this.destroyed = !0, this.constructor.registry.deregister(this), this.eventBus.dispatch(\"table-destroy\"), this.rowManager.destroy(); e.firstChild;) e.removeChild(e.firstChild);\n      e.classList.remove(\"tabulator\"), this.externalEvents.dispatch(\"tableDestroyed\");\n    }\n    _detectBrowser() {\n      var e = navigator.userAgent || navigator.vendor || window.opera;\n      e.indexOf(\"Trident\") > -1 ? (this.browser = \"ie\", this.browserSlow = !0) : e.indexOf(\"Edge\") > -1 ? (this.browser = \"edge\", this.browserSlow = !0) : e.indexOf(\"Firefox\") > -1 ? (this.browser = \"firefox\", this.browserSlow = !1) : e.indexOf(\"Mac OS\") > -1 ? (this.browser = \"safari\", this.browserSlow = !1) : (this.browser = \"other\", this.browserSlow = !1), this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0, 4));\n    }\n    initGuard(e, t) {\n      var i, s;\n      return this.options.debugInitialization && !this.initialized && (e || (e = \" \" == (s = \"Error\" == (i = new Error().stack.split(\"\\n\"))[0] ? i[2] : i[1])[0] ? s.trim().split(\" \")[1].split(\".\")[1] : s.trim().split(\"@\")[0]), console.warn(\"Table Not Initialized - Calling the \" + e + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (t ? \" \" + t : \"\"))), this.initialized;\n    }\n    blockRedraw() {\n      this.initGuard(), this.eventBus.dispatch(\"redraw-blocking\"), this.rowManager.blockRedraw(), this.columnManager.blockRedraw(), this.eventBus.dispatch(\"redraw-blocked\");\n    }\n    restoreRedraw() {\n      this.initGuard(), this.eventBus.dispatch(\"redraw-restoring\"), this.rowManager.restoreRedraw(), this.columnManager.restoreRedraw(), this.eventBus.dispatch(\"redraw-restored\");\n    }\n    setData(e, t, i) {\n      return this.initGuard(!1, \"To set initial data please use the 'data' property in the table constructor.\"), this.dataLoader.load(e, t, i, !1);\n    }\n    clearData() {\n      this.initGuard(), this.dataLoader.blockActiveLoad(), this.rowManager.clearData();\n    }\n    getData(e) {\n      return this.rowManager.getData(e);\n    }\n    getDataCount(e) {\n      return this.rowManager.getDataCount(e);\n    }\n    replaceData(e, t, i) {\n      return this.initGuard(), this.dataLoader.load(e, t, i, !0, !0);\n    }\n    updateData(e) {\n      var t = 0;\n      return this.initGuard(), new Promise((i, s) => {\n        this.dataLoader.blockActiveLoad(), \"string\" == typeof e && (e = JSON.parse(e)), e && e.length > 0 ? e.forEach(e => {\n          var o = this.rowManager.findRow(e[this.options.index]);\n          o ? (t++, o.updateData(e).then(() => {\n            --t || i();\n          }).catch(t => {\n            s(\"Update Error - Unable to update row\", e, t);\n          })) : s(\"Update Error - Unable to find row\", e);\n        }) : (console.warn(\"Update Error - No data provided\"), s(\"Update Error - No data provided\"));\n      });\n    }\n    addData(e, t, i) {\n      return this.initGuard(), new Promise((s, o) => {\n        this.dataLoader.blockActiveLoad(), \"string\" == typeof e && (e = JSON.parse(e)), e ? this.rowManager.addRows(e, t, i).then(e => {\n          var t = [];\n          e.forEach(function (e) {\n            t.push(e.getComponent());\n          }), s(t);\n        }) : (console.warn(\"Update Error - No data provided\"), o(\"Update Error - No data provided\"));\n      });\n    }\n    updateOrAddData(e) {\n      var t = [],\n        i = 0;\n      return this.initGuard(), new Promise((s, o) => {\n        this.dataLoader.blockActiveLoad(), \"string\" == typeof e && (e = JSON.parse(e)), e && e.length > 0 ? e.forEach(e => {\n          var o = this.rowManager.findRow(e[this.options.index]);\n          i++, o ? o.updateData(e).then(() => {\n            i--, t.push(o.getComponent()), i || s(t);\n          }) : this.rowManager.addRows(e).then(e => {\n            i--, t.push(e[0].getComponent()), i || s(t);\n          });\n        }) : (console.warn(\"Update Error - No data provided\"), o(\"Update Error - No data provided\"));\n      });\n    }\n    getRow(e) {\n      var t = this.rowManager.findRow(e);\n      return t ? t.getComponent() : (console.warn(\"Find Error - No matching row found:\", e), !1);\n    }\n    getRowFromPosition(e) {\n      var t = this.rowManager.getRowFromPosition(e);\n      return t ? t.getComponent() : (console.warn(\"Find Error - No matching row found:\", e), !1);\n    }\n    deleteRow(e) {\n      var t = [];\n      this.initGuard(), Array.isArray(e) || (e = [e]);\n      for (let i of e) {\n        let e = this.rowManager.findRow(i, !0);\n        if (!e) return console.error(\"Delete Error - No matching row found:\", i), Promise.reject(\"Delete Error - No matching row found\");\n        t.push(e);\n      }\n      return t.sort((e, t) => this.rowManager.rows.indexOf(e) > this.rowManager.rows.indexOf(t) ? 1 : -1), t.forEach(e => {\n        e.delete();\n      }), this.rowManager.reRenderInPosition(), Promise.resolve();\n    }\n    addRow(e, t, i) {\n      return this.initGuard(), \"string\" == typeof e && (e = JSON.parse(e)), this.rowManager.addRows(e, t, i, !0).then(e => e[0].getComponent());\n    }\n    updateOrAddRow(e, t) {\n      var i = this.rowManager.findRow(e);\n      return this.initGuard(), \"string\" == typeof t && (t = JSON.parse(t)), i ? i.updateData(t).then(() => i.getComponent()) : this.rowManager.addRows(t).then(e => e[0].getComponent());\n    }\n    updateRow(e, t) {\n      var i = this.rowManager.findRow(e);\n      return this.initGuard(), \"string\" == typeof t && (t = JSON.parse(t)), i ? i.updateData(t).then(() => Promise.resolve(i.getComponent())) : (console.warn(\"Update Error - No matching row found:\", e), Promise.reject(\"Update Error - No matching row found\"));\n    }\n    scrollToRow(e, t, i) {\n      var s = this.rowManager.findRow(e);\n      return s ? this.rowManager.scrollToRow(s, t, i) : (console.warn(\"Scroll Error - No matching row found:\", e), Promise.reject(\"Scroll Error - No matching row found\"));\n    }\n    moveRow(e, t, i) {\n      var s = this.rowManager.findRow(e);\n      this.initGuard(), s ? s.moveToRow(t, i) : console.warn(\"Move Error - No matching row found:\", e);\n    }\n    getRows(e) {\n      return this.rowManager.getComponents(e);\n    }\n    getRowPosition(e) {\n      var t = this.rowManager.findRow(e);\n      return t ? t.getPosition() : (console.warn(\"Position Error - No matching row found:\", e), !1);\n    }\n    setColumns(e) {\n      this.initGuard(!1, \"To set initial columns please use the 'columns' property in the table constructor\"), this.columnManager.setColumns(e);\n    }\n    getColumns(e) {\n      return this.columnManager.getComponents(e);\n    }\n    getColumn(e) {\n      var t = this.columnManager.findColumn(e);\n      return t ? t.getComponent() : (console.warn(\"Find Error - No matching column found:\", e), !1);\n    }\n    getColumnDefinitions() {\n      return this.columnManager.getDefinitionTree();\n    }\n    showColumn(e) {\n      var t = this.columnManager.findColumn(e);\n      if (this.initGuard(), !t) return console.warn(\"Column Show Error - No matching column found:\", e), !1;\n      t.show();\n    }\n    hideColumn(e) {\n      var t = this.columnManager.findColumn(e);\n      if (this.initGuard(), !t) return console.warn(\"Column Hide Error - No matching column found:\", e), !1;\n      t.hide();\n    }\n    toggleColumn(e) {\n      var t = this.columnManager.findColumn(e);\n      if (this.initGuard(), !t) return console.warn(\"Column Visibility Toggle Error - No matching column found:\", e), !1;\n      t.visible ? t.hide() : t.show();\n    }\n    addColumn(e, t, i) {\n      var s = this.columnManager.findColumn(i);\n      return this.initGuard(), this.columnManager.addColumn(e, t, s).then(e => e.getComponent());\n    }\n    deleteColumn(e) {\n      var t = this.columnManager.findColumn(e);\n      return this.initGuard(), t ? t.delete() : (console.warn(\"Column Delete Error - No matching column found:\", e), Promise.reject());\n    }\n    updateColumnDefinition(e, t) {\n      var i = this.columnManager.findColumn(e);\n      return this.initGuard(), i ? i.updateDefinition(t) : (console.warn(\"Column Update Error - No matching column found:\", e), Promise.reject());\n    }\n    moveColumn(e, t, i) {\n      var s = this.columnManager.findColumn(e),\n        o = this.columnManager.findColumn(t);\n      this.initGuard(), s ? o ? this.columnManager.moveColumn(s, o, i) : console.warn(\"Move Error - No matching column found:\", o) : console.warn(\"Move Error - No matching column found:\", e);\n    }\n    scrollToColumn(e, t, i) {\n      return new Promise((s, o) => {\n        var n = this.columnManager.findColumn(e);\n        return n ? this.columnManager.scrollToColumn(n, t, i) : (console.warn(\"Scroll Error - No matching column found:\", e), Promise.reject(\"Scroll Error - No matching column found\"));\n      });\n    }\n    redraw(e) {\n      this.initGuard(), this.columnManager.redraw(e), this.rowManager.redraw(e);\n    }\n    setHeight(e) {\n      this.options.height = isNaN(e) ? e : e + \"px\", this.element.style.height = this.options.height, this.rowManager.initializeRenderer(), this.rowManager.redraw(!0);\n    }\n    on(e, t) {\n      this.externalEvents.subscribe(e, t);\n    }\n    off(e, t) {\n      this.externalEvents.unsubscribe(e, t);\n    }\n    dispatchEvent() {\n      Array.from(arguments).shift(), this.externalEvents.dispatch(...arguments);\n    }\n    alert(e, t) {\n      this.initGuard(), this.alertManager.alert(e, t);\n    }\n    clearAlert() {\n      this.initGuard(), this.alertManager.clear();\n    }\n    modExists(e, t) {\n      return !!this.modules[e] || (t && console.error(\"Tabulator Module Not Installed: \" + e), !1);\n    }\n    module(e) {\n      var t = this.modules[e];\n      return t || console.error(\"Tabulator module not installed: \" + e), t;\n    }\n  }\n  _defineProperty(A, \"defaultOptions\", e);\n  var B = {\n    rownum: function (e, t, i, s, o, n) {\n      return n.getPosition();\n    }\n  };\n  class V extends M {\n    constructor(e) {\n      super(e), this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"], this.registerColumnOption(\"accessor\"), this.registerColumnOption(\"accessorParams\"), this.registerColumnOption(\"accessorData\"), this.registerColumnOption(\"accessorDataParams\"), this.registerColumnOption(\"accessorDownload\"), this.registerColumnOption(\"accessorDownloadParams\"), this.registerColumnOption(\"accessorClipboard\"), this.registerColumnOption(\"accessorClipboardParams\"), this.registerColumnOption(\"accessorPrint\"), this.registerColumnOption(\"accessorPrintParams\"), this.registerColumnOption(\"accessorHtmlOutput\"), this.registerColumnOption(\"accessorHtmlOutputParams\");\n    }\n    initialize() {\n      this.subscribe(\"column-layout\", this.initializeColumn.bind(this)), this.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n    }\n    initializeColumn(e) {\n      var t = !1,\n        i = {};\n      this.allowedTypes.forEach(s => {\n        var o,\n          n = \"accessor\" + (s.charAt(0).toUpperCase() + s.slice(1));\n        e.definition[n] && (o = this.lookupAccessor(e.definition[n])) && (t = !0, i[n] = {\n          accessor: o,\n          params: e.definition[n + \"Params\"] || {}\n        });\n      }), t && (e.modules.accessor = i);\n    }\n    lookupAccessor(e) {\n      var t = !1;\n      switch (typeof e) {\n        case \"string\":\n          V.accessors[e] ? t = V.accessors[e] : console.warn(\"Accessor Error - No such accessor found, ignoring: \", e);\n          break;\n        case \"function\":\n          t = e;\n      }\n      return t;\n    }\n    transformRow(e, t) {\n      var i = \"accessor\" + (t.charAt(0).toUpperCase() + t.slice(1)),\n        s = e.getComponent(),\n        o = a.deepClone(e.data || {});\n      return this.table.columnManager.traverse(function (e) {\n        var n, r, a, l;\n        e.modules.accessor && (r = e.modules.accessor[i] || e.modules.accessor.accessor || !1) && \"undefined\" != (n = e.getFieldValue(o)) && (l = e.getComponent(), a = \"function\" == typeof r.params ? r.params(n, o, t, l, s) : r.params, e.setFieldValue(o, r.accessor(n, o, t, a, l, s)));\n      }), o;\n    }\n  }\n  _defineProperty(V, \"moduleName\", \"accessor\");\n  _defineProperty(V, \"accessors\", B);\n  var I = {\n    method: \"GET\"\n  };\n  function N(e, t) {\n    var i = [];\n    if (t = t || \"\", Array.isArray(e)) e.forEach((e, s) => {\n      i = i.concat(N(e, t ? t + \"[\" + s + \"]\" : s));\n    });else if (\"object\" == typeof e) for (var s in e) i = i.concat(N(e[s], t ? t + \"[\" + s + \"]\" : s));else i.push({\n      key: t,\n      value: e\n    });\n    return i;\n  }\n  function W(e) {\n    var t = N(e),\n      i = [];\n    return t.forEach(function (e) {\n      i.push(encodeURIComponent(e.key) + \"=\" + encodeURIComponent(e.value));\n    }), i.join(\"&\");\n  }\n  function j(e, t, i) {\n    return e && i && Object.keys(i).length && (t.method && \"get\" != t.method.toLowerCase() || (t.method = \"get\", e += (e.includes(\"?\") ? \"&\" : \"?\") + W(i))), e;\n  }\n  function G(e, t, i) {\n    var s;\n    return new Promise((o, n) => {\n      if (e = this.urlGenerator.call(this.table, e, t, i), \"GET\" != t.method.toUpperCase()) if (s = \"object\" == typeof this.table.options.ajaxContentType ? this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType]) {\n        for (var r in s.headers) t.headers || (t.headers = {}), void 0 === t.headers[r] && (t.headers[r] = s.headers[r]);\n        t.body = s.body.call(this, e, t, i);\n      } else console.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n      e ? (void 0 === t.headers && (t.headers = {}), void 0 === t.headers.Accept && (t.headers.Accept = \"application/json\"), void 0 === t.headers[\"X-Requested-With\"] && (t.headers[\"X-Requested-With\"] = \"XMLHttpRequest\"), void 0 === t.mode && (t.mode = \"cors\"), \"cors\" == t.mode ? (void 0 === t.headers.Origin && (t.headers.Origin = window.location.origin), void 0 === t.credentials && (t.credentials = \"same-origin\")) : void 0 === t.credentials && (t.credentials = \"include\"), fetch(e, t).then(e => {\n        e.ok ? e.json().then(e => {\n          o(e);\n        }).catch(e => {\n          n(e), console.warn(\"Ajax Load Error - Invalid JSON returned\", e);\n        }) : (console.error(\"Ajax Load Error - Connection Error: \" + e.status, e.statusText), n(e));\n      }).catch(e => {\n        console.error(\"Ajax Load Error - Connection Error: \", e), n(e);\n      })) : (console.warn(\"Ajax Load Error - No URL Set\"), o([]));\n    });\n  }\n  function U(e, t) {\n    var i = [];\n    if (t = t || \"\", Array.isArray(e)) e.forEach((e, s) => {\n      i = i.concat(U(e, t ? t + \"[\" + s + \"]\" : s));\n    });else if (\"object\" == typeof e) for (var s in e) i = i.concat(U(e[s], t ? t + \"[\" + s + \"]\" : s));else i.push({\n      key: t,\n      value: e\n    });\n    return i;\n  }\n  var J = {\n    json: {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: function (e, t, i) {\n        return JSON.stringify(i);\n      }\n    },\n    form: {\n      headers: {},\n      body: function (e, t, i) {\n        var s = U(i),\n          o = new FormData();\n        return s.forEach(function (e) {\n          o.append(e.key, e.value);\n        }), o;\n      }\n    }\n  };\n  class X extends M {\n    constructor(e) {\n      super(e), this.config = {}, this.url = \"\", this.urlGenerator = !1, this.params = !1, this.loaderPromise = !1, this.registerTableOption(\"ajaxURL\", !1), this.registerTableOption(\"ajaxURLGenerator\", !1), this.registerTableOption(\"ajaxParams\", {}), this.registerTableOption(\"ajaxConfig\", \"get\"), this.registerTableOption(\"ajaxContentType\", \"form\"), this.registerTableOption(\"ajaxRequestFunc\", !1), this.registerTableOption(\"ajaxRequesting\", function () {}), this.registerTableOption(\"ajaxResponse\", !1), this.contentTypeFormatters = X.contentTypeFormatters;\n    }\n    initialize() {\n      this.loaderPromise = this.table.options.ajaxRequestFunc || X.defaultLoaderPromise, this.urlGenerator = this.table.options.ajaxURLGenerator || X.defaultURLGenerator, this.table.options.ajaxURL && this.setUrl(this.table.options.ajaxURL), this.setDefaultConfig(this.table.options.ajaxConfig), this.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this)), this.subscribe(\"data-loading\", this.requestDataCheck.bind(this)), this.subscribe(\"data-params\", this.requestParams.bind(this)), this.subscribe(\"data-load\", this.requestData.bind(this));\n    }\n    requestParams(e, t, i, s) {\n      var o = this.table.options.ajaxParams;\n      return o && (\"function\" == typeof o && (o = o.call(this.table)), s = Object.assign(Object.assign({}, o), s)), s;\n    }\n    requestDataCheck(e, t, i, s) {\n      return !((e || !this.url) && \"string\" != typeof e);\n    }\n    requestData(e, t, i, s, o) {\n      var n;\n      return !o && this.requestDataCheck(e) ? (e && this.setUrl(e), n = this.generateConfig(i), this.sendRequest(this.url, t, n)) : o;\n    }\n    setDefaultConfig(e = {}) {\n      this.config = Object.assign({}, X.defaultConfig), \"string\" == typeof e ? this.config.method = e : Object.assign(this.config, e);\n    }\n    generateConfig(e = {}) {\n      var t = Object.assign({}, this.config);\n      return \"string\" == typeof e ? t.method = e : Object.assign(t, e), t;\n    }\n    setUrl(e) {\n      this.url = e;\n    }\n    getUrl() {\n      return this.url;\n    }\n    sendRequest(e, t, i) {\n      return !1 !== this.table.options.ajaxRequesting.call(this.table, e, t) ? this.loaderPromise(e, i, t).then(i => (this.table.options.ajaxResponse && (i = this.table.options.ajaxResponse.call(this.table, e, t, i)), i)) : Promise.reject();\n    }\n  }\n  _defineProperty(X, \"moduleName\", \"ajax\");\n  _defineProperty(X, \"defaultConfig\", I);\n  _defineProperty(X, \"defaultURLGenerator\", j);\n  _defineProperty(X, \"defaultLoaderPromise\", G);\n  _defineProperty(X, \"contentTypeFormatters\", J);\n  var q = {\n      replace: function (e) {\n        return this.table.setData(e);\n      },\n      update: function (e) {\n        return this.table.updateOrAddData(e);\n      },\n      insert: function (e) {\n        return this.table.addData(e);\n      }\n    },\n    K = {\n      table: function (e) {\n        var t = [],\n          i = !0,\n          s = this.table.columnManager.columns,\n          o = [],\n          n = [];\n        return (e = e.split(\"\\n\")).forEach(function (e) {\n          t.push(e.split(\"\\t\"));\n        }), !(!t.length || 1 === t.length && t[0].length < 2) && (t[0].forEach(function (e) {\n          var t = s.find(function (t) {\n            return e && t.definition.title && e.trim() && t.definition.title.trim() === e.trim();\n          });\n          t ? o.push(t) : i = !1;\n        }), i || (i = !0, o = [], t[0].forEach(function (e) {\n          var t = s.find(function (t) {\n            return e && t.field && e.trim() && t.field.trim() === e.trim();\n          });\n          t ? o.push(t) : i = !1;\n        }), i || (o = this.table.columnManager.columnsByIndex)), i && t.shift(), t.forEach(function (e) {\n          var t = {};\n          e.forEach(function (e, i) {\n            o[i] && (t[o[i].field] = e);\n          }), n.push(t);\n        }), n);\n      }\n    },\n    Y = {\n      keybindings: {\n        bindings: {\n          copyToClipboard: [\"ctrl + 67\", \"meta + 67\"]\n        },\n        actions: {\n          copyToClipboard: function (e) {\n            this.table.modules.edit.currentCell || this.table.modExists(\"clipboard\", !0) && this.table.modules.clipboard.copy(!1, !0);\n          }\n        }\n      }\n    };\n  class $ extends M {\n    constructor(e) {\n      super(e), this.mode = !0, this.pasteParser = function () {}, this.pasteAction = function () {}, this.customSelection = !1, this.rowRange = !1, this.blocked = !0, this.registerTableOption(\"clipboard\", !1), this.registerTableOption(\"clipboardCopyStyled\", !0), this.registerTableOption(\"clipboardCopyConfig\", !1), this.registerTableOption(\"clipboardCopyFormatter\", !1), this.registerTableOption(\"clipboardCopyRowRange\", \"active\"), this.registerTableOption(\"clipboardPasteParser\", \"table\"), this.registerTableOption(\"clipboardPasteAction\", \"insert\"), this.registerColumnOption(\"clipboard\"), this.registerColumnOption(\"titleClipboard\");\n    }\n    initialize() {\n      this.mode = this.table.options.clipboard, this.rowRange = this.table.options.clipboardCopyRowRange, !0 !== this.mode && \"copy\" !== this.mode || this.table.element.addEventListener(\"copy\", e => {\n        var t, i, s;\n        this.blocked || (e.preventDefault(), this.customSelection ? (t = this.customSelection, this.table.options.clipboardCopyFormatter && (t = this.table.options.clipboardCopyFormatter(\"plain\", t))) : (s = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\"), t = (i = this.table.modules.export.generateHTMLTable(s)) ? this.generatePlainContent(s) : \"\", this.table.options.clipboardCopyFormatter && (t = this.table.options.clipboardCopyFormatter(\"plain\", t), i = this.table.options.clipboardCopyFormatter(\"html\", i))), window.clipboardData && window.clipboardData.setData ? window.clipboardData.setData(\"Text\", t) : e.clipboardData && e.clipboardData.setData ? (e.clipboardData.setData(\"text/plain\", t), i && e.clipboardData.setData(\"text/html\", i)) : e.originalEvent && e.originalEvent.clipboardData.setData && (e.originalEvent.clipboardData.setData(\"text/plain\", t), i && e.originalEvent.clipboardData.setData(\"text/html\", i)), this.dispatchExternal(\"clipboardCopied\", t, i), this.reset());\n      }), !0 !== this.mode && \"paste\" !== this.mode || this.table.element.addEventListener(\"paste\", e => {\n        this.paste(e);\n      }), this.setPasteParser(this.table.options.clipboardPasteParser), this.setPasteAction(this.table.options.clipboardPasteAction), this.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n    }\n    reset() {\n      this.blocked = !0, this.customSelection = !1;\n    }\n    generatePlainContent(e) {\n      var t = [];\n      return e.forEach(e => {\n        var i = [];\n        e.columns.forEach(t => {\n          var s = \"\";\n          if (t) if (\"group\" === e.type && (t.value = t.component.getKey()), null === t.value) s = \"\";else switch (typeof t.value) {\n            case \"object\":\n              s = JSON.stringify(t.value);\n              break;\n            case \"undefined\":\n              s = \"\";\n              break;\n            default:\n              s = t.value;\n          }\n          i.push(s);\n        }), t.push(i.join(\"\\t\"));\n      }), t.join(\"\\n\");\n    }\n    copy(e, t) {\n      var i, s;\n      this.blocked = !1, this.customSelection = !1, !0 !== this.mode && \"copy\" !== this.mode || (this.rowRange = e || this.table.options.clipboardCopyRowRange, void 0 !== window.getSelection && void 0 !== document.createRange ? ((e = document.createRange()).selectNodeContents(this.table.element), (i = window.getSelection()).toString() && t && (this.customSelection = i.toString()), i.removeAllRanges(), i.addRange(e)) : void 0 !== document.selection && void 0 !== document.body.createTextRange && ((s = document.body.createTextRange()).moveToElementText(this.table.element), s.select()), document.execCommand(\"copy\"), i && i.removeAllRanges());\n    }\n    setPasteAction(e) {\n      switch (typeof e) {\n        case \"string\":\n          this.pasteAction = $.pasteActions[e], this.pasteAction || console.warn(\"Clipboard Error - No such paste action found:\", e);\n          break;\n        case \"function\":\n          this.pasteAction = e;\n      }\n    }\n    setPasteParser(e) {\n      switch (typeof e) {\n        case \"string\":\n          this.pasteParser = $.pasteParsers[e], this.pasteParser || console.warn(\"Clipboard Error - No such paste parser found:\", e);\n          break;\n        case \"function\":\n          this.pasteParser = e;\n      }\n    }\n    paste(e) {\n      var t, i, s;\n      this.checkPasteOrigin(e) && (t = this.getPasteData(e), (i = this.pasteParser.call(this, t)) ? (e.preventDefault(), this.table.modExists(\"mutator\") && (i = this.mutateData(i)), s = this.pasteAction.call(this, i), this.dispatchExternal(\"clipboardPasted\", t, i, s)) : this.dispatchExternal(\"clipboardPasteError\", t));\n    }\n    mutateData(e) {\n      var t = [];\n      return Array.isArray(e) ? e.forEach(e => {\n        t.push(this.table.modules.mutator.transformRow(e, \"clipboard\"));\n      }) : t = e, t;\n    }\n    checkPasteOrigin(e) {\n      var t = !0;\n      return !this.confirm(\"clipboard-paste\", [e]) && [\"DIV\", \"SPAN\"].includes(e.target.tagName) || (t = !1), t;\n    }\n    getPasteData(e) {\n      var t;\n      return window.clipboardData && window.clipboardData.getData ? t = window.clipboardData.getData(\"Text\") : e.clipboardData && e.clipboardData.getData ? t = e.clipboardData.getData(\"text/plain\") : e.originalEvent && e.originalEvent.clipboardData.getData && (t = e.originalEvent.clipboardData.getData(\"text/plain\")), t;\n    }\n  }\n  _defineProperty($, \"moduleName\", \"clipboard\");\n  _defineProperty($, \"moduleExtensions\", Y);\n  _defineProperty($, \"pasteActions\", q);\n  _defineProperty($, \"pasteParsers\", K);\n  class Q {\n    constructor(e) {\n      return this._row = e, new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._row.table.componentFunctionBinder.handle(\"row\", e._row, t);\n        }\n      });\n    }\n    getData(e) {\n      return this._row.getData(e);\n    }\n    getElement() {\n      return this._row.getElement();\n    }\n    getTable() {\n      return this._row.table;\n    }\n    getCells() {\n      var e = [];\n      return this._row.getCells().forEach(function (t) {\n        e.push(t.getComponent());\n      }), e;\n    }\n    getCell(e) {\n      var t = this._row.getCell(e);\n      return !!t && t.getComponent();\n    }\n    _getSelf() {\n      return this._row;\n    }\n  }\n  var Z = {\n    avg: function (e, t, i) {\n      var s = 0,\n        o = void 0 !== i.precision ? i.precision : 2;\n      return e.length && (s = e.reduce(function (e, t) {\n        return Number(e) + Number(t);\n      }), s /= e.length, s = !1 !== o ? s.toFixed(o) : s), parseFloat(s).toString();\n    },\n    max: function (e, t, i) {\n      var s = null,\n        o = void 0 !== i.precision && i.precision;\n      return e.forEach(function (e) {\n        ((e = Number(e)) > s || null === s) && (s = e);\n      }), null !== s ? !1 !== o ? s.toFixed(o) : s : \"\";\n    },\n    min: function (e, t, i) {\n      var s = null,\n        o = void 0 !== i.precision && i.precision;\n      return e.forEach(function (e) {\n        ((e = Number(e)) < s || null === s) && (s = e);\n      }), null !== s ? !1 !== o ? s.toFixed(o) : s : \"\";\n    },\n    sum: function (e, t, i) {\n      var s = 0,\n        o = void 0 !== i.precision && i.precision;\n      return e.length && e.forEach(function (e) {\n        e = Number(e), s += isNaN(e) ? 0 : Number(e);\n      }), !1 !== o ? s.toFixed(o) : s;\n    },\n    concat: function (e, t, i) {\n      var s = 0;\n      return e.length && (s = e.reduce(function (e, t) {\n        return String(e) + String(t);\n      })), s;\n    },\n    count: function (e, t, i) {\n      var s = 0;\n      return e.length && e.forEach(function (e) {\n        e && s++;\n      }), s;\n    },\n    unique: function (e, t, i) {\n      return e.filter((t, i) => (e || 0 === t) && e.indexOf(t) === i).length;\n    }\n  };\n  class ee extends M {\n    constructor(e) {\n      super(e), this.topCalcs = [], this.botCalcs = [], this.genColumn = !1, this.topElement = this.createElement(), this.botElement = this.createElement(), this.topRow = !1, this.botRow = !1, this.topInitialized = !1, this.botInitialized = !1, this.blocked = !1, this.recalcAfterBlock = !1, this.registerTableOption(\"columnCalcs\", !0), this.registerColumnOption(\"topCalc\"), this.registerColumnOption(\"topCalcParams\"), this.registerColumnOption(\"topCalcFormatter\"), this.registerColumnOption(\"topCalcFormatterParams\"), this.registerColumnOption(\"bottomCalc\"), this.registerColumnOption(\"bottomCalcParams\"), this.registerColumnOption(\"bottomCalcFormatter\"), this.registerColumnOption(\"bottomCalcFormatterParams\");\n    }\n    createElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-calcs-holder\"), e;\n    }\n    initialize() {\n      this.genColumn = new r({\n        field: \"value\"\n      }, this), this.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this)), this.subscribe(\"column-init\", this.initializeColumnCheck.bind(this)), this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this)), this.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this)), this.subscribe(\"row-added\", this.rowsUpdated.bind(this)), this.subscribe(\"column-moved\", this.recalcActiveRows.bind(this)), this.subscribe(\"column-add\", this.recalcActiveRows.bind(this)), this.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this)), this.subscribe(\"table-redraw\", this.tableRedraw.bind(this)), this.subscribe(\"rows-visible\", this.visibleRows.bind(this)), this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this)), this.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this)), this.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this)), this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this)), this.registerTableFunction(\"getCalcResults\", this.getResults.bind(this)), this.registerTableFunction(\"recalc\", this.userRecalc.bind(this)), this.resizeHolderWidth();\n    }\n    resizeHolderWidth() {\n      this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n    }\n    tableRedraw(e) {\n      this.recalc(this.table.rowManager.activeRows), e && this.redraw();\n    }\n    blockRedraw() {\n      this.blocked = !0, this.recalcAfterBlock = !1;\n    }\n    restoreRedraw() {\n      this.blocked = !1, this.recalcAfterBlock && (this.recalcAfterBlock = !1, this.recalcActiveRowsRefresh());\n    }\n    userRecalc() {\n      this.recalc(this.table.rowManager.activeRows);\n    }\n    blockCheck() {\n      return this.blocked && (this.recalcAfterBlock = !0), this.blocked;\n    }\n    visibleRows(e, t) {\n      return this.topRow && t.unshift(this.topRow), this.botRow && t.push(this.botRow), t;\n    }\n    rowsUpdated(e) {\n      this.table.options.groupBy ? this.recalcRowGroup(e) : this.recalcActiveRows();\n    }\n    recalcActiveRowsRefresh() {\n      this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree ? this.recalcAll() : this.recalcActiveRows();\n    }\n    recalcActiveRows() {\n      this.recalc(this.table.rowManager.activeRows);\n    }\n    cellValueChanged(e) {\n      (e.column.definition.topCalc || e.column.definition.bottomCalc) && (this.table.options.groupBy ? (\"table\" != this.table.options.columnCalcs && \"both\" != this.table.options.columnCalcs || this.recalcActiveRows(), \"table\" != this.table.options.columnCalcs && this.recalcRowGroup(e.row)) : this.recalcActiveRows());\n    }\n    initializeColumnCheck(e) {\n      (e.definition.topCalc || e.definition.bottomCalc) && this.initializeColumn(e);\n    }\n    initializeColumn(e) {\n      var t = e.definition,\n        i = {\n          topCalcParams: t.topCalcParams || {},\n          botCalcParams: t.bottomCalcParams || {}\n        };\n      if (t.topCalc) {\n        switch (typeof t.topCalc) {\n          case \"string\":\n            ee.calculations[t.topCalc] ? i.topCalc = ee.calculations[t.topCalc] : console.warn(\"Column Calc Error - No such calculation found, ignoring: \", t.topCalc);\n            break;\n          case \"function\":\n            i.topCalc = t.topCalc;\n        }\n        i.topCalc && (e.modules.columnCalcs = i, this.topCalcs.push(e), \"group\" != this.table.options.columnCalcs && this.initializeTopRow());\n      }\n      if (t.bottomCalc) {\n        switch (typeof t.bottomCalc) {\n          case \"string\":\n            ee.calculations[t.bottomCalc] ? i.botCalc = ee.calculations[t.bottomCalc] : console.warn(\"Column Calc Error - No such calculation found, ignoring: \", t.bottomCalc);\n            break;\n          case \"function\":\n            i.botCalc = t.bottomCalc;\n        }\n        i.botCalc && (e.modules.columnCalcs = i, this.botCalcs.push(e), \"group\" != this.table.options.columnCalcs && this.initializeBottomRow());\n      }\n    }\n    registerColumnField() {}\n    removeCalcs() {\n      var e = !1;\n      this.topInitialized && (this.topInitialized = !1, this.topElement.parentNode.removeChild(this.topElement), e = !0), this.botInitialized && (this.botInitialized = !1, this.footerRemove(this.botElement), e = !0), e && this.table.rowManager.adjustTableSize();\n    }\n    reinitializeCalcs() {\n      this.topCalcs.length && this.initializeTopRow(), this.botCalcs.length && this.initializeBottomRow();\n    }\n    initializeTopRow() {\n      var e = document.createDocumentFragment();\n      this.topInitialized || (e.appendChild(document.createElement(\"br\")), e.appendChild(this.topElement), this.table.columnManager.getContentsElement().insertBefore(e, this.table.columnManager.headersElement.nextSibling), this.topInitialized = !0);\n    }\n    initializeBottomRow() {\n      this.botInitialized || (this.footerPrepend(this.botElement), this.botInitialized = !0);\n    }\n    scrollHorizontal(e) {\n      this.botInitialized && this.botRow && (this.botElement.scrollLeft = e);\n    }\n    recalc(e) {\n      var t, i;\n      if (!this.blockCheck() && (this.topInitialized || this.botInitialized)) {\n        if (t = this.rowsToData(e), this.topInitialized) {\n          for (this.topRow && this.topRow.deleteCells(), i = this.generateRow(\"top\", t), this.topRow = i; this.topElement.firstChild;) this.topElement.removeChild(this.topElement.firstChild);\n          this.topElement.appendChild(i.getElement()), i.initialize(!0);\n        }\n        if (this.botInitialized) {\n          for (this.botRow && this.botRow.deleteCells(), i = this.generateRow(\"bottom\", t), this.botRow = i; this.botElement.firstChild;) this.botElement.removeChild(this.botElement.firstChild);\n          this.botElement.appendChild(i.getElement()), i.initialize(!0);\n        }\n        this.table.rowManager.adjustTableSize(), this.table.modExists(\"frozenColumns\") && this.table.modules.frozenColumns.layout();\n      }\n    }\n    recalcRowGroup(e) {\n      this.recalcGroup(this.table.modules.groupRows.getRowGroup(e));\n    }\n    recalcAll() {\n      (this.topCalcs.length || this.botCalcs.length) && (\"group\" !== this.table.options.columnCalcs && this.recalcActiveRows(), this.table.options.groupBy && \"table\" !== this.table.options.columnCalcs && this.table.modules.groupRows.getChildGroups().forEach(e => {\n        this.recalcGroup(e);\n      }));\n    }\n    recalcGroup(e) {\n      var t, i;\n      this.blockCheck() || e && e.calcs && (e.calcs.bottom && (t = this.rowsToData(e.rows), i = this.generateRowData(\"bottom\", t), e.calcs.bottom.updateData(i), e.calcs.bottom.reinitialize()), e.calcs.top && (t = this.rowsToData(e.rows), i = this.generateRowData(\"top\", t), e.calcs.top.updateData(i), e.calcs.top.reinitialize()));\n    }\n    generateTopRow(e) {\n      return this.generateRow(\"top\", this.rowsToData(e));\n    }\n    generateBottomRow(e) {\n      return this.generateRow(\"bottom\", this.rowsToData(e));\n    }\n    rowsToData(e) {\n      var t = [],\n        i = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs,\n        s = this.table.modules.dataTree;\n      return e.forEach(e => {\n        t.push(e.getData()), i && e.modules.dataTree?.open && this.rowsToData(s.getFilteredTreeChildren(e)).forEach(i => {\n          t.push(e);\n        });\n      }), t;\n    }\n    generateRow(e, t) {\n      var i,\n        s = this.generateRowData(e, t);\n      return this.table.modExists(\"mutator\") && this.table.modules.mutator.disable(), i = new p(s, this, \"calc\"), this.table.modExists(\"mutator\") && this.table.modules.mutator.enable(), i.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + e), i.component = !1, i.getComponent = () => (i.component || (i.component = new Q(i)), i.component), i.generateCells = () => {\n        var t = [];\n        this.table.columnManager.columnsByIndex.forEach(s => {\n          this.genColumn.setField(s.getField()), this.genColumn.hozAlign = s.hozAlign, s.definition[e + \"CalcFormatter\"] && this.table.modExists(\"format\") ? this.genColumn.modules.format = {\n            formatter: this.table.modules.format.lookupFormatter(s.definition[e + \"CalcFormatter\"]),\n            params: s.definition[e + \"CalcFormatterParams\"] || {}\n          } : this.genColumn.modules.format = {\n            formatter: this.table.modules.format.lookupFormatter(\"plaintext\"),\n            params: {}\n          }, this.genColumn.definition.cssClass = s.definition.cssClass;\n          var o = new n(this.genColumn, i);\n          o.getElement(), o.column = s, o.setWidth(), s.cells.push(o), t.push(o), s.visible || o.hide();\n        }), i.cells = t;\n      }, i;\n    }\n    generateRowData(e, t) {\n      var i,\n        s,\n        o = {},\n        n = \"top\" == e ? this.topCalcs : this.botCalcs,\n        r = \"top\" == e ? \"topCalc\" : \"botCalc\";\n      return n.forEach(function (e) {\n        var n = [];\n        e.modules.columnCalcs && e.modules.columnCalcs[r] && (t.forEach(function (t) {\n          n.push(e.getFieldValue(t));\n        }), s = r + \"Params\", i = \"function\" == typeof e.modules.columnCalcs[s] ? e.modules.columnCalcs[s](n, t) : e.modules.columnCalcs[s], e.setFieldValue(o, e.modules.columnCalcs[r](n, t, i)));\n      }), o;\n    }\n    hasTopCalcs() {\n      return !!this.topCalcs.length;\n    }\n    hasBottomCalcs() {\n      return !!this.botCalcs.length;\n    }\n    redraw() {\n      this.topRow && this.topRow.normalizeHeight(!0), this.botRow && this.botRow.normalizeHeight(!0);\n    }\n    getResults() {\n      var e = {};\n      return this.table.options.groupBy && this.table.modExists(\"groupRows\") ? this.table.modules.groupRows.getGroups(!0).forEach(t => {\n        e[t.getKey()] = this.getGroupResults(t);\n      }) : e = {\n        top: this.topRow ? this.topRow.getData() : {},\n        bottom: this.botRow ? this.botRow.getData() : {}\n      }, e;\n    }\n    getGroupResults(e) {\n      var t = e._getSelf(),\n        i = e.getSubGroups(),\n        s = {};\n      return i.forEach(e => {\n        s[e.getKey()] = this.getGroupResults(e);\n      }), {\n        top: t.calcs.top ? t.calcs.top.getData() : {},\n        bottom: t.calcs.bottom ? t.calcs.bottom.getData() : {},\n        groups: s\n      };\n    }\n    adjustForScrollbar(e) {\n      this.botRow && (this.table.rtl ? this.botElement.style.paddingLeft = e + \"px\" : this.botElement.style.paddingRight = e + \"px\");\n    }\n  }\n  _defineProperty(ee, \"moduleName\", \"columnCalcs\");\n  _defineProperty(ee, \"calculations\", Z);\n  var te = {\n    csv: function (e, t = {}, i) {\n      var s = t.delimiter ? t.delimiter : \",\",\n        o = [],\n        n = [];\n      e.forEach(e => {\n        var t = [];\n        switch (e.type) {\n          case \"group\":\n            console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n            break;\n          case \"calc\":\n            console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n            break;\n          case \"header\":\n            e.columns.forEach((e, t) => {\n              e && 1 === e.depth && (n[t] = void 0 === e.value || null === e.value ? \"\" : '\"' + String(e.value).split('\"').join('\"\"') + '\"');\n            });\n            break;\n          case \"row\":\n            e.columns.forEach(e => {\n              if (e) {\n                switch (typeof e.value) {\n                  case \"object\":\n                    e.value = null !== e.value ? JSON.stringify(e.value) : \"\";\n                    break;\n                  case \"undefined\":\n                    e.value = \"\";\n                }\n                t.push('\"' + String(e.value).split('\"').join('\"\"') + '\"');\n              }\n            }), o.push(t.join(s));\n        }\n      }), n.length && o.unshift(n.join(s)), o = o.join(\"\\n\"), t.bom && (o = \"\\ufeff\" + o), i(o, \"text/csv\");\n    },\n    json: function (e, t, i) {\n      var s = [];\n      e.forEach(e => {\n        var t = {};\n        switch (e.type) {\n          case \"header\":\n            break;\n          case \"group\":\n            console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n            break;\n          case \"calc\":\n            console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n            break;\n          case \"row\":\n            e.columns.forEach(e => {\n              e && (t[e.component.getTitleDownload() || e.component.getField()] = e.value);\n            }), s.push(t);\n        }\n      }), i(s = JSON.stringify(s, null, \"\\t\"), \"application/json\");\n    },\n    jsonLines: function (e, t, i) {\n      const s = [];\n      e.forEach(e => {\n        const t = {};\n        switch (e.type) {\n          case \"header\":\n            break;\n          case \"group\":\n            console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n            break;\n          case \"calc\":\n            console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n            break;\n          case \"row\":\n            e.columns.forEach(e => {\n              e && (t[e.component.getTitleDownload() || e.component.getField()] = e.value);\n            }), s.push(JSON.stringify(t));\n        }\n      }), i(s.join(\"\\n\"), \"application/x-ndjson\");\n    },\n    pdf: function (e, t = {}, i) {\n      var s,\n        o,\n        n = [],\n        r = [],\n        a = {},\n        l = t.rowGroupStyles || {\n          fontStyle: \"bold\",\n          fontSize: 12,\n          cellPadding: 6,\n          fillColor: 220\n        },\n        h = t.rowCalcStyles || {\n          fontStyle: \"bold\",\n          fontSize: 10,\n          cellPadding: 4,\n          fillColor: 232\n        },\n        d = t.jsPDF || {},\n        c = t.title ? t.title : \"\";\n      function u(e, t) {\n        var i = [];\n        return e.columns.forEach(e => {\n          var s;\n          if (e) {\n            switch (typeof e.value) {\n              case \"object\":\n                e.value = null !== e.value ? JSON.stringify(e.value) : \"\";\n                break;\n              case \"undefined\":\n                e.value = \"\";\n            }\n            s = {\n              content: e.value,\n              colSpan: e.width,\n              rowSpan: e.height\n            }, t && (s.styles = t), i.push(s);\n          }\n        }), i;\n      }\n      d.orientation || (d.orientation = t.orientation || \"landscape\"), d.unit || (d.unit = \"pt\"), e.forEach(e => {\n        switch (e.type) {\n          case \"header\":\n            n.push(u(e));\n            break;\n          case \"group\":\n            r.push(u(e, l));\n            break;\n          case \"calc\":\n            r.push(u(e, h));\n            break;\n          case \"row\":\n            r.push(u(e));\n        }\n      }), s = this.dependencyRegistry.lookup(\"jspdf\", \"jsPDF\"), o = new s(d), t.autoTable && (a = \"function\" == typeof t.autoTable ? t.autoTable(o) || {} : t.autoTable), c && (a.didDrawPage = function (e) {\n        o.text(c, 40, 30);\n      }), a.head = n, a.body = r, o.autoTable(a), t.documentProcessing && t.documentProcessing(o), i(o.output(\"arraybuffer\"), \"application/pdf\");\n    },\n    xlsx: function (e, i, s) {\n      var o = i.sheetName || \"Sheet1\",\n        n = this.dependencyRegistry.lookup(\"XLSX\"),\n        r = n.utils.book_new(),\n        a = new t(this),\n        l = !(\"compress\" in i) || i.compress,\n        h = i.writeOptions || {\n          bookType: \"xlsx\",\n          bookSST: !0,\n          compression: l\n        };\n      function d() {\n        var t = [],\n          i = [],\n          s = {},\n          o = {\n            s: {\n              c: 0,\n              r: 0\n            },\n            e: {\n              c: e[0] ? e[0].columns.reduce((e, t) => e + (t && t.width ? t.width : 1), 0) : 0,\n              r: e.length\n            }\n          };\n        return e.forEach((e, s) => {\n          var o = [];\n          e.columns.forEach(function (e, t) {\n            e ? (o.push(e.value instanceof Date || \"object\" != typeof e.value ? e.value : JSON.stringify(e.value)), (e.width > 1 || e.height > -1) && (e.height > 1 || e.width > 1) && i.push({\n              s: {\n                r: s,\n                c: t\n              },\n              e: {\n                r: s + e.height - 1,\n                c: t + e.width - 1\n              }\n            })) : o.push(\"\");\n          }), t.push(o);\n        }), n.utils.sheet_add_aoa(s, t), s[\"!ref\"] = n.utils.encode_range(o), i.length && (s[\"!merges\"] = i), s;\n      }\n      if (h.type = \"binary\", r.SheetNames = [], r.Sheets = {}, i.sheetOnly) s(d());else {\n        if (i.sheets) for (var c in i.sheets) !0 === i.sheets[c] ? (r.SheetNames.push(c), r.Sheets[c] = d()) : (r.SheetNames.push(c), a.commsSend(i.sheets[c], \"download\", \"intercept\", {\n          type: \"xlsx\",\n          options: {\n            sheetOnly: !0\n          },\n          active: this.active,\n          intercept: function (e) {\n            r.Sheets[c] = e;\n          }\n        }));else r.SheetNames.push(o), r.Sheets[o] = d();\n        i.documentProcessing && (r = i.documentProcessing(r)), s(function (e) {\n          for (var t = new ArrayBuffer(e.length), i = new Uint8Array(t), s = 0; s != e.length; ++s) i[s] = 255 & e.charCodeAt(s);\n          return t;\n        }(n.write(r, h)), \"application/octet-stream\");\n      }\n    },\n    html: function (e, t, i) {\n      this.modExists(\"export\", !0) && i(this.modules.export.generateHTMLTable(e), \"text/html\");\n    }\n  };\n  class ie extends M {\n    constructor(e) {\n      super(e), this.registerTableOption(\"downloadEncoder\", function (e, t) {\n        return new Blob([e], {\n          type: t\n        });\n      }), this.registerTableOption(\"downloadConfig\", {}), this.registerTableOption(\"downloadRowRange\", \"active\"), this.registerColumnOption(\"download\"), this.registerColumnOption(\"titleDownload\");\n    }\n    initialize() {\n      this.deprecatedOptionsCheck(), this.registerTableFunction(\"download\", this.download.bind(this)), this.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n    }\n    deprecatedOptionsCheck() {}\n    downloadToTab(e, t, i, s) {\n      this.download(e, t, i, s, !0);\n    }\n    download(e, t, i, s, o) {\n      var n = !1;\n      if (\"function\" == typeof e ? n = e : ie.downloaders[e] ? n = ie.downloaders[e] : console.warn(\"Download Error - No such download type found: \", e), n) {\n        var r = this.generateExportList(s);\n        n.call(this.table, r, i || {}, function (i, s) {\n          o ? !0 === o ? this.triggerDownload(i, s, e, t, !0) : o(i) : this.triggerDownload(i, s, e, t);\n        }.bind(this));\n      }\n    }\n    generateExportList(e) {\n      var t = this.table.modules.export.generateExportList(this.table.options.downloadConfig, !1, e || this.table.options.downloadRowRange, \"download\"),\n        i = this.table.options.groupHeaderDownload;\n      return i && !Array.isArray(i) && (i = [i]), t.forEach(e => {\n        var t;\n        \"group\" === e.type && (t = e.columns[0], i && i[e.indent] && (t.value = i[e.indent](t.value, e.component._group.getRowCount(), e.component._group.getData(), e.component)));\n      }), t;\n    }\n    triggerDownload(e, t, i, s, o) {\n      var n = document.createElement(\"a\"),\n        r = this.table.options.downloadEncoder(e, t);\n      r && (o ? window.open(window.URL.createObjectURL(r)) : (s = s || \"Tabulator.\" + (\"function\" == typeof i ? \"txt\" : i), navigator.msSaveOrOpenBlob ? navigator.msSaveOrOpenBlob(r, s) : (n.setAttribute(\"href\", window.URL.createObjectURL(r)), n.setAttribute(\"download\", s), n.style.display = \"none\", document.body.appendChild(n), n.click(), document.body.removeChild(n))), this.dispatchExternal(\"downloadComplete\"));\n    }\n    commsReceived(e, t, i) {\n      if (\"intercept\" === t) this.download(i.type, \"\", i.options, i.active, i.intercept);\n    }\n  }\n  _defineProperty(ie, \"moduleName\", \"download\");\n  _defineProperty(ie, \"downloaders\", te);\n  function se(e, t) {\n    var i = t.mask,\n      s = void 0 !== t.maskLetterChar ? t.maskLetterChar : \"A\",\n      o = void 0 !== t.maskNumberChar ? t.maskNumberChar : \"9\",\n      n = void 0 !== t.maskWildcardChar ? t.maskWildcardChar : \"*\";\n    function r(t) {\n      var a = i[t];\n      void 0 !== a && a !== n && a !== s && a !== o && (e.value = e.value + \"\" + a, r(t + 1));\n    }\n    e.addEventListener(\"keydown\", t => {\n      var r = e.value.length,\n        a = t.key;\n      if (t.keyCode > 46 && !t.ctrlKey && !t.metaKey) {\n        if (r >= i.length) return t.preventDefault(), t.stopPropagation(), !1;\n        switch (i[r]) {\n          case s:\n            if (a.toUpperCase() == a.toLowerCase()) return t.preventDefault(), t.stopPropagation(), !1;\n            break;\n          case o:\n            if (isNaN(a)) return t.preventDefault(), t.stopPropagation(), !1;\n            break;\n          case n:\n            break;\n          default:\n            if (a !== i[r]) return t.preventDefault(), t.stopPropagation(), !1;\n        }\n      }\n    }), e.addEventListener(\"keyup\", i => {\n      i.keyCode > 46 && t.maskAutoFill && r(e.value.length);\n    }), e.placeholder || (e.placeholder = i), t.maskAutoFill && r(e.value.length);\n  }\n  let oe = class {\n    constructor(e, t, i, s, o, n) {\n      this.edit = e, this.table = e.table, this.cell = t, this.params = this._initializeParams(n), this.data = [], this.displayItems = [], this.currentItems = [], this.focusedItem = null, this.input = this._createInputElement(), this.listEl = this._createListElement(), this.initialValues = null, this.isFilter = \"header\" === t.getType(), this.filterTimeout = null, this.filtered = !1, this.typing = !1, this.values = [], this.popup = null, this.listIteration = 0, this.lastAction = \"\", this.filterTerm = \"\", this.blurable = !0, this.actions = {\n        success: s,\n        cancel: o\n      }, this._deprecatedOptionsCheck(), this._initializeValue(), i(this._onRendered.bind(this));\n    }\n    _deprecatedOptionsCheck() {}\n    _initializeValue() {\n      var e = this.cell.getValue();\n      void 0 === e && void 0 !== this.params.defaultValue && (e = this.params.defaultValue), this.initialValues = this.params.multiselect ? e : [e], this.isFilter && (this.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\", this.headerFilterInitialListGen());\n    }\n    _onRendered() {\n      var e = this.cell.getElement();\n      function t(e) {\n        e.stopPropagation();\n      }\n      this.isFilter || (this.input.style.height = \"100%\", this.input.focus({\n        preventScroll: !0\n      })), e.addEventListener(\"click\", t), setTimeout(() => {\n        e.removeEventListener(\"click\", t);\n      }, 1e3), this.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n    }\n    _createListElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-edit-list\"), e.addEventListener(\"mousedown\", this._preventBlur.bind(this)), e.addEventListener(\"keydown\", this._inputKeyDown.bind(this)), e;\n    }\n    _setListWidth() {\n      var e = this.isFilter ? this.input : this.cell.getElement();\n      this.listEl.style.minWidth = e.offsetWidth + \"px\", this.params.maxWidth && (!0 === this.params.maxWidth ? this.listEl.style.maxWidth = e.offsetWidth + \"px\" : \"number\" == typeof this.params.maxWidth ? this.listEl.style.maxWidth = this.params.maxWidth + \"px\" : this.listEl.style.maxWidth = this.params.maxWidth);\n    }\n    _createInputElement() {\n      var e = this.params.elementAttributes,\n        t = document.createElement(\"input\");\n      if (t.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\"), t.style.padding = \"4px\", t.style.width = \"100%\", t.style.boxSizing = \"border-box\", this.params.autocomplete || (t.style.cursor = \"default\", t.style.caretColor = \"transparent\"), e && \"object\" == typeof e) for (let i in e) \"+\" == i.charAt(0) ? (i = i.slice(1), t.setAttribute(i, t.getAttribute(i) + e[\"+\" + i])) : t.setAttribute(i, e[i]);\n      return this.params.mask && se(t, this.params), this._bindInputEvents(t), t;\n    }\n    _initializeParams(e) {\n      var t,\n        i = [\"values\", \"valuesURL\", \"valuesLookup\"];\n      return (e = Object.assign({}, e)).verticalNavigation = e.verticalNavigation || \"editor\", e.placeholderLoading = void 0 === e.placeholderLoading ? \"Searching ...\" : e.placeholderLoading, e.placeholderEmpty = void 0 === e.placeholderEmpty ? \"No Results Found\" : e.placeholderEmpty, e.filterDelay = void 0 === e.filterDelay ? 300 : e.filterDelay, e.emptyValue = Object.keys(e).includes(\"emptyValue\") ? e.emptyValue : \"\", (t = Object.keys(e).filter(e => i.includes(e)).length) ? t > 1 && console.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\") : console.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\"), e.autocomplete ? e.multiselect && (e.multiselect = !1, console.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\")) : (e.freetext && (e.freetext = !1, console.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\")), e.filterFunc && (e.filterFunc = !1, console.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\")), e.filterRemote && (e.filterRemote = !1, console.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\")), e.mask && (e.mask = !1, console.warn(\"list editor config error - mask option is only available when autocomplete is enabled\")), e.allowEmpty && (e.allowEmpty = !1, console.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\")), e.listOnEmpty && (e.listOnEmpty = !1, console.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\"))), e.filterRemote && \"function\" != typeof e.valuesLookup && !e.valuesURL && (e.filterRemote = !1, console.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\")), e;\n    }\n    _bindInputEvents(e) {\n      e.addEventListener(\"focus\", this._inputFocus.bind(this)), e.addEventListener(\"click\", this._inputClick.bind(this)), e.addEventListener(\"blur\", this._inputBlur.bind(this)), e.addEventListener(\"keydown\", this._inputKeyDown.bind(this)), e.addEventListener(\"search\", this._inputSearch.bind(this)), this.params.autocomplete && e.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n    }\n    _inputFocus(e) {\n      this.rebuildOptionsList();\n    }\n    _filter() {\n      this.params.filterRemote ? (clearTimeout(this.filterTimeout), this.filterTimeout = setTimeout(() => {\n        this.rebuildOptionsList();\n      }, this.params.filterDelay)) : this._filterList();\n    }\n    _inputClick(e) {\n      e.stopPropagation();\n    }\n    _inputBlur(e) {\n      this.blurable && (this.popup ? this.popup.hide() : this._resolveValue(!0));\n    }\n    _inputSearch() {\n      this._clearChoices();\n    }\n    _inputKeyDown(e) {\n      switch (e.keyCode) {\n        case 38:\n          this._keyUp(e);\n          break;\n        case 40:\n          this._keyDown(e);\n          break;\n        case 37:\n        case 39:\n          this._keySide(e);\n          break;\n        case 13:\n          this._keyEnter();\n          break;\n        case 27:\n          this._keyEsc();\n          break;\n        case 36:\n        case 35:\n          this._keyHomeEnd(e);\n          break;\n        case 9:\n          this._keyTab(e);\n          break;\n        default:\n          this._keySelectLetter(e);\n      }\n    }\n    _inputKeyUp(e) {\n      switch (e.keyCode) {\n        case 38:\n        case 37:\n        case 39:\n        case 40:\n        case 13:\n        case 27:\n          break;\n        default:\n          this._keyAutoCompLetter(e);\n      }\n    }\n    _preventPopupBlur() {\n      this.popup && this.popup.blockHide(), setTimeout(() => {\n        this.popup && this.popup.restoreHide();\n      }, 10);\n    }\n    _preventBlur() {\n      this.blurable = !1, setTimeout(() => {\n        this.blurable = !0;\n      }, 10);\n    }\n    _keyTab(e) {\n      this.params.autocomplete && \"typing\" === this.lastAction ? this._resolveValue(!0) : this.focusedItem && this._chooseItem(this.focusedItem, !0);\n    }\n    _keyUp(e) {\n      var t = this.displayItems.indexOf(this.focusedItem);\n      (\"editor\" == this.params.verticalNavigation || \"hybrid\" == this.params.verticalNavigation && t) && (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault(), t > 0 && this._focusItem(this.displayItems[t - 1]));\n    }\n    _keyDown(e) {\n      var t = this.displayItems.indexOf(this.focusedItem);\n      (\"editor\" == this.params.verticalNavigation || \"hybrid\" == this.params.verticalNavigation && t < this.displayItems.length - 1) && (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault(), t < this.displayItems.length - 1 && (-1 == t ? this._focusItem(this.displayItems[0]) : this._focusItem(this.displayItems[t + 1])));\n    }\n    _keySide(e) {\n      this.params.autocomplete || (e.stopImmediatePropagation(), e.stopPropagation(), e.preventDefault());\n    }\n    _keyEnter(e) {\n      this.params.autocomplete && \"typing\" === this.lastAction ? this._resolveValue(!0) : this.focusedItem && this._chooseItem(this.focusedItem);\n    }\n    _keyEsc(e) {\n      this._cancel();\n    }\n    _keyHomeEnd(e) {\n      this.params.autocomplete && e.stopImmediatePropagation();\n    }\n    _keySelectLetter(e) {\n      this.params.autocomplete || (e.preventDefault(), e.keyCode >= 38 && e.keyCode <= 90 && this._scrollToValue(e.keyCode));\n    }\n    _keyAutoCompLetter(e) {\n      this._filter(), this.lastAction = \"typing\", this.typing = !0;\n    }\n    _scrollToValue(e) {\n      clearTimeout(this.filterTimeout);\n      var t = String.fromCharCode(e).toLowerCase();\n      this.filterTerm += t.toLowerCase();\n      var i = this.displayItems.find(e => void 0 !== e.label && e.label.toLowerCase().startsWith(this.filterTerm));\n      i && this._focusItem(i), this.filterTimeout = setTimeout(() => {\n        this.filterTerm = \"\";\n      }, 800);\n    }\n    _focusItem(e) {\n      this.lastAction = \"focus\", this.focusedItem && this.focusedItem.element && this.focusedItem.element.classList.remove(\"focused\"), this.focusedItem = e, e && e.element && (e.element.classList.add(\"focused\"), e.element.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\",\n        inline: \"start\"\n      }));\n    }\n    headerFilterInitialListGen() {\n      this._generateOptions(!0);\n    }\n    rebuildOptionsList() {\n      this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e => {\n        Number.isInteger(e) || console.error(\"List generation error\", e);\n      });\n    }\n    _filterList() {\n      this._buildList(this._filterOptions()), this._showList();\n    }\n    _generateOptions(e) {\n      var t = [],\n        i = ++this.listIteration;\n      return this.filtered = !1, this.params.values ? t = this.params.values : this.params.valuesURL ? t = this._ajaxRequest(this.params.valuesURL, this.input.value) : \"function\" == typeof this.params.valuesLookup ? t = this.params.valuesLookup(this.cell, this.input.value) : this.params.valuesLookup && (t = this._uniqueColumnValues(this.params.valuesLookupField)), t instanceof Promise ? (e || this._addPlaceholder(this.params.placeholderLoading), t.then().then(e => this.listIteration === i ? this._parseList(e) : Promise.reject(i))) : Promise.resolve(this._parseList(t));\n    }\n    _addPlaceholder(e) {\n      var t = document.createElement(\"div\");\n      \"function\" == typeof e && (e = e(this.cell.getComponent(), this.listEl)), e && (this._clearList(), e instanceof HTMLElement ? t = e : (t.classList.add(\"tabulator-edit-list-placeholder\"), t.innerHTML = e), this.listEl.appendChild(t), this._showList());\n    }\n    _ajaxRequest(e, t) {\n      return e = j(e, {}, this.params.filterRemote ? {\n        term: t\n      } : {}), fetch(e).then(e => e.ok ? e.json().catch(e => (console.warn(\"List Ajax Load Error - Invalid JSON returned\", e), Promise.reject(e))) : (console.error(\"List Ajax Load Error - Connection Error: \" + e.status, e.statusText), Promise.reject(e))).catch(e => (console.error(\"List Ajax Load Error - Connection Error: \", e), Promise.reject(e)));\n    }\n    _uniqueColumnValues(e) {\n      var t,\n        i = {},\n        s = this.table.getData(this.params.valuesLookup);\n      return (t = e ? this.table.columnManager.getColumnByField(e) : this.cell.getColumn()._getSelf()) ? s.forEach(e => {\n        var s = t.getFieldValue(e);\n        this._emptyValueCheck(s) || (this.params.multiselect && Array.isArray(s) ? s.forEach(e => {\n          this._emptyValueCheck(e) || (i[e] = !0);\n        }) : i[s] = !0);\n      }) : (console.warn(\"unable to find matching column to create select lookup list:\", e), i = []), Object.keys(i);\n    }\n    _emptyValueCheck(e) {\n      return null == e || \"\" === e;\n    }\n    _parseList(e) {\n      var t = [];\n      return Array.isArray(e) || (e = Object.entries(e).map(([e, t]) => ({\n        label: t,\n        value: e\n      }))), e.forEach(e => {\n        \"object\" != typeof e && (e = {\n          label: e,\n          value: e\n        }), this._parseListItem(e, t, 0);\n      }), !this.currentItems.length && this.params.freetext && (this.input.value = this.initialValues, this.typing = !0, this.lastAction = \"typing\"), this.data = t, t;\n    }\n    _parseListItem(e, t, i) {\n      var s = {};\n      e.options ? s = this._parseListGroup(e, i + 1) : (s = {\n        label: e.label,\n        value: e.value,\n        itemParams: e.itemParams,\n        elementAttributes: e.elementAttributes,\n        element: !1,\n        selected: !1,\n        visible: !0,\n        level: i,\n        original: e\n      }, this.initialValues && this.initialValues.indexOf(e.value) > -1 && this._chooseItem(s, !0)), t.push(s);\n    }\n    _parseListGroup(e, t) {\n      var i = {\n        label: e.label,\n        group: !0,\n        itemParams: e.itemParams,\n        elementAttributes: e.elementAttributes,\n        element: !1,\n        visible: !0,\n        level: t,\n        options: [],\n        original: e\n      };\n      return e.options.forEach(e => {\n        this._parseListItem(e, i.options, t);\n      }), i;\n    }\n    _sortOptions(e) {\n      var t;\n      return this.params.sort && (t = \"function\" == typeof this.params.sort ? this.params.sort : this._defaultSortFunction.bind(this), this._sortGroup(t, e)), e;\n    }\n    _sortGroup(e, t) {\n      t.sort((t, i) => e(t.label, i.label, t.value, i.value, t.original, i.original)), t.forEach(t => {\n        t.group && this._sortGroup(e, t.options);\n      });\n    }\n    _defaultSortFunction(e, t) {\n      var i,\n        s,\n        o,\n        n,\n        r,\n        a = 0,\n        l = /(\\d+)|(\\D+)/g,\n        h = /\\d/,\n        d = 0;\n      if (\"desc\" === this.params.sort && ([e, t] = [t, e]), e || 0 === e) {\n        if (t || 0 === t) {\n          if (isFinite(e) && isFinite(t)) return e - t;\n          if ((i = String(e).toLowerCase()) === (s = String(t).toLowerCase())) return 0;\n          if (!h.test(i) || !h.test(s)) return i > s ? 1 : -1;\n          for (i = i.match(l), s = s.match(l), r = i.length > s.length ? s.length : i.length; a < r;) if ((o = i[a]) !== (n = s[a++])) return isFinite(o) && isFinite(n) ? (\"0\" === o.charAt(0) && (o = \".\" + o), \"0\" === n.charAt(0) && (n = \".\" + n), o - n) : o > n ? 1 : -1;\n          return i.length > s.length;\n        }\n        d = 1;\n      } else d = t || 0 === t ? -1 : 0;\n      return d;\n    }\n    _filterOptions() {\n      var e = this.params.filterFunc || this._defaultFilterFunc,\n        t = this.input.value;\n      return t ? (this.filtered = !0, this.data.forEach(i => {\n        this._filterItem(e, t, i);\n      })) : this.filtered = !1, this.data;\n    }\n    _filterItem(e, t, i) {\n      var s = !1;\n      return i.group ? (i.options.forEach(i => {\n        this._filterItem(e, t, i) && (s = !0);\n      }), i.visible = s) : i.visible = e(t, i.label, i.value, i.original), i.visible;\n    }\n    _defaultFilterFunc(e, t, i, s) {\n      return e = String(e).toLowerCase(), null != t && (String(t).toLowerCase().indexOf(e) > -1 || String(i).toLowerCase().indexOf(e) > -1);\n    }\n    _clearList() {\n      for (; this.listEl.firstChild;) this.listEl.removeChild(this.listEl.firstChild);\n      this.displayItems = [];\n    }\n    _buildList(e) {\n      this._clearList(), e.forEach(e => {\n        this._buildItem(e);\n      }), this.displayItems.length || this._addPlaceholder(this.params.placeholderEmpty);\n    }\n    _buildItem(e) {\n      var t,\n        i = e.element;\n      if (!this.filtered || e.visible) {\n        if (!i) {\n          if ((i = document.createElement(\"div\")).tabIndex = 0, (t = this.params.itemFormatter ? this.params.itemFormatter(e.label, e.value, e.original, i) : e.label) instanceof HTMLElement ? i.appendChild(t) : i.innerHTML = t, e.group ? i.classList.add(\"tabulator-edit-list-group\") : i.classList.add(\"tabulator-edit-list-item\"), i.classList.add(\"tabulator-edit-list-group-level-\" + e.level), e.elementAttributes && \"object\" == typeof e.elementAttributes) for (let t in e.elementAttributes) \"+\" == t.charAt(0) ? (t = t.slice(1), i.setAttribute(t, this.input.getAttribute(t) + e.elementAttributes[\"+\" + t])) : i.setAttribute(t, e.elementAttributes[t]);\n          e.group ? i.addEventListener(\"click\", this._groupClick.bind(this, e)) : i.addEventListener(\"click\", this._itemClick.bind(this, e)), i.addEventListener(\"mousedown\", this._preventBlur.bind(this)), e.element = i;\n        }\n        this._styleItem(e), this.listEl.appendChild(i), e.group ? e.options.forEach(e => {\n          this._buildItem(e);\n        }) : this.displayItems.push(e);\n      }\n    }\n    _showList() {\n      var e = this.popup && this.popup.isVisible();\n      if (this.input.parentNode) {\n        if (this.params.autocomplete && \"\" === this.input.value && !this.params.listOnEmpty) return void (this.popup && this.popup.hide(!0));\n        this._setListWidth(), this.popup || (this.popup = this.edit.popup(this.listEl)), this.popup.show(this.cell.getElement(), \"bottom\"), e || setTimeout(() => {\n          this.popup.hideOnBlur(this._resolveValue.bind(this, !0));\n        }, 10);\n      }\n    }\n    _styleItem(e) {\n      e && e.element && (e.selected ? e.element.classList.add(\"active\") : e.element.classList.remove(\"active\"));\n    }\n    _itemClick(e, t) {\n      t.stopPropagation(), this._chooseItem(e);\n    }\n    _groupClick(e, t) {\n      t.stopPropagation();\n    }\n    _cancel() {\n      this.popup.hide(!0), this.actions.cancel();\n    }\n    _clearChoices() {\n      this.typing = !0, this.currentItems.forEach(e => {\n        e.selected = !1, this._styleItem(e);\n      }), this.currentItems = [], this.focusedItem = null;\n    }\n    _chooseItem(e, t) {\n      var i;\n      this.typing = !1, this.params.multiselect ? ((i = this.currentItems.indexOf(e)) > -1 ? (this.currentItems.splice(i, 1), e.selected = !1) : (this.currentItems.push(e), e.selected = !0), this.input.value = this.currentItems.map(e => e.label).join(\",\"), this._styleItem(e)) : (this.currentItems = [e], e.selected = !0, this.input.value = e.label, this._styleItem(e), t || this._resolveValue()), this._focusItem(e);\n    }\n    _resolveValue(e) {\n      var t, i;\n      if (this.popup && this.popup.hide(!0), this.params.multiselect) t = this.currentItems.map(e => e.value);else if (e && this.params.autocomplete && this.typing) {\n        if (!(this.params.freetext || this.params.allowEmpty && \"\" === this.input.value)) return void this.actions.cancel();\n        t = this.input.value;\n      } else t = this.currentItems[0] ? this.currentItems[0].value : null == (i = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues) || \"\" === i ? i : this.params.emptyValue;\n      \"\" === t && (t = this.params.emptyValue), this.actions.success(t), this.isFilter && (this.initialValues = t && !Array.isArray(t) ? [t] : t, this.currentItems = []);\n    }\n  };\n  var ne = {\n    input: function (e, t, i, s, o) {\n      var n = e.getValue(),\n        r = document.createElement(\"input\");\n      if (r.setAttribute(\"type\", o.search ? \"search\" : \"text\"), r.style.padding = \"4px\", r.style.width = \"100%\", r.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), r.setAttribute(e, r.getAttribute(e) + o.elementAttributes[\"+\" + e])) : r.setAttribute(e, o.elementAttributes[e]);\n      function a(e) {\n        null == n && \"\" !== r.value || r.value !== n ? i(r.value) && (n = r.value) : s();\n      }\n      return r.value = void 0 !== n ? n : \"\", t(function () {\n        \"cell\" === e.getType() && (r.focus({\n          preventScroll: !0\n        }), r.style.height = \"100%\", o.selectContents && r.select());\n      }), r.addEventListener(\"change\", a), r.addEventListener(\"blur\", a), r.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            a();\n            break;\n          case 27:\n            s();\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n        }\n      }), o.mask && se(r, o), r;\n    },\n    textarea: function (e, t, i, s, o) {\n      var n = e.getValue(),\n        r = o.verticalNavigation || \"hybrid\",\n        a = String(null != n ? n : \"\"),\n        l = document.createElement(\"textarea\"),\n        h = 0;\n      if (l.style.display = \"block\", l.style.padding = \"2px\", l.style.height = \"100%\", l.style.width = \"100%\", l.style.boxSizing = \"border-box\", l.style.whiteSpace = \"pre-wrap\", l.style.resize = \"none\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), l.setAttribute(e, l.getAttribute(e) + o.elementAttributes[\"+\" + e])) : l.setAttribute(e, o.elementAttributes[e]);\n      function d(t) {\n        null == n && \"\" !== l.value || l.value !== n ? (i(l.value) && (n = l.value), setTimeout(function () {\n          e.getRow().normalizeHeight();\n        }, 300)) : s();\n      }\n      return l.value = a, t(function () {\n        \"cell\" === e.getType() && (l.focus({\n          preventScroll: !0\n        }), l.style.height = \"100%\", l.scrollHeight, l.style.height = l.scrollHeight + \"px\", e.getRow().normalizeHeight(), o.selectContents && l.select());\n      }), l.addEventListener(\"change\", d), l.addEventListener(\"blur\", d), l.addEventListener(\"keyup\", function () {\n        l.style.height = \"\";\n        var t = l.scrollHeight;\n        l.style.height = t + \"px\", t != h && (h = t, e.getRow().normalizeHeight());\n      }), l.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            e.shiftKey && o.shiftEnterSubmit && d();\n            break;\n          case 27:\n            s();\n            break;\n          case 38:\n            (\"editor\" == r || \"hybrid\" == r && l.selectionStart) && (e.stopImmediatePropagation(), e.stopPropagation());\n            break;\n          case 40:\n            (\"editor\" == r || \"hybrid\" == r && l.selectionStart !== l.value.length) && (e.stopImmediatePropagation(), e.stopPropagation());\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n        }\n      }), o.mask && se(l, o), l;\n    },\n    number: function (e, t, i, s, o) {\n      var n = e.getValue(),\n        r = o.verticalNavigation || \"editor\",\n        a = document.createElement(\"input\");\n      if (a.setAttribute(\"type\", \"number\"), void 0 !== o.max && a.setAttribute(\"max\", o.max), void 0 !== o.min && a.setAttribute(\"min\", o.min), void 0 !== o.step && a.setAttribute(\"step\", o.step), a.style.padding = \"4px\", a.style.width = \"100%\", a.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), a.setAttribute(e, a.getAttribute(e) + o.elementAttributes[\"+\" + e])) : a.setAttribute(e, o.elementAttributes[e]);\n      a.value = n;\n      var l = function (e) {\n        h();\n      };\n      function h() {\n        var e = a.value;\n        isNaN(e) || \"\" === e || (e = Number(e)), e !== n ? i(e) && (n = e) : s();\n      }\n      return t(function () {\n        \"cell\" === e.getType() && (a.removeEventListener(\"blur\", l), a.focus({\n          preventScroll: !0\n        }), a.style.height = \"100%\", a.addEventListener(\"blur\", l), o.selectContents && a.select());\n      }), a.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            h();\n            break;\n          case 27:\n            s();\n            break;\n          case 38:\n          case 40:\n            \"editor\" == r && (e.stopImmediatePropagation(), e.stopPropagation());\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n        }\n      }), o.mask && se(a, o), a;\n    },\n    range: function (e, t, i, s, o) {\n      var n = e.getValue(),\n        r = document.createElement(\"input\");\n      if (r.setAttribute(\"type\", \"range\"), void 0 !== o.max && r.setAttribute(\"max\", o.max), void 0 !== o.min && r.setAttribute(\"min\", o.min), void 0 !== o.step && r.setAttribute(\"step\", o.step), r.style.padding = \"4px\", r.style.width = \"100%\", r.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), r.setAttribute(e, r.getAttribute(e) + o.elementAttributes[\"+\" + e])) : r.setAttribute(e, o.elementAttributes[e]);\n      function a() {\n        var e = r.value;\n        isNaN(e) || \"\" === e || (e = Number(e)), e != n ? i(e) && (n = e) : s();\n      }\n      return r.value = n, t(function () {\n        \"cell\" === e.getType() && (r.focus({\n          preventScroll: !0\n        }), r.style.height = \"100%\");\n      }), r.addEventListener(\"blur\", function (e) {\n        a();\n      }), r.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            a();\n            break;\n          case 27:\n            s();\n        }\n      }), r;\n    },\n    date: function (e, t, i, s, o) {\n      var n = o.format,\n        r = o.verticalNavigation || \"editor\",\n        a = n ? window.DateTime || luxon.DateTime : null,\n        l = e.getValue(),\n        h = document.createElement(\"input\");\n      function d(e) {\n        return (a.isDateTime(e) ? e : \"iso\" === n ? a.fromISO(String(e)) : a.fromFormat(String(e), n)).toFormat(\"yyyy-MM-dd\");\n      }\n      if (h.type = \"date\", h.style.padding = \"4px\", h.style.width = \"100%\", h.style.boxSizing = \"border-box\", o.max && h.setAttribute(\"max\", n ? d(o.max) : o.max), o.min && h.setAttribute(\"min\", n ? d(o.min) : o.min), o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), h.setAttribute(e, h.getAttribute(e) + o.elementAttributes[\"+\" + e])) : h.setAttribute(e, o.elementAttributes[e]);\n      function c() {\n        var e,\n          t = h.value;\n        if (null == l && \"\" !== t || t !== l) {\n          if (t && n) switch (e = a.fromFormat(String(t), \"yyyy-MM-dd\"), n) {\n            case !0:\n              t = e;\n              break;\n            case \"iso\":\n              t = e.toISO();\n              break;\n            default:\n              t = e.toFormat(n);\n          }\n          i(t) && (l = h.value);\n        } else s();\n      }\n      return l = void 0 !== l ? l : \"\", n && (a ? l = d(l) : console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")), h.value = l, t(function () {\n        \"cell\" === e.getType() && (h.focus({\n          preventScroll: !0\n        }), h.style.height = \"100%\", o.selectContents && h.select());\n      }), h.addEventListener(\"blur\", function (e) {\n        (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== h) && c();\n      }), h.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            c();\n            break;\n          case 27:\n            s();\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n            break;\n          case 38:\n          case 40:\n            \"editor\" == r && (e.stopImmediatePropagation(), e.stopPropagation());\n        }\n      }), h;\n    },\n    time: function (e, t, i, s, o) {\n      var n,\n        r = o.format,\n        a = o.verticalNavigation || \"editor\",\n        l = r ? window.DateTime || luxon.DateTime : null,\n        h = e.getValue(),\n        d = document.createElement(\"input\");\n      if (d.type = \"time\", d.style.padding = \"4px\", d.style.width = \"100%\", d.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), d.setAttribute(e, d.getAttribute(e) + o.elementAttributes[\"+\" + e])) : d.setAttribute(e, o.elementAttributes[e]);\n      function c() {\n        var e,\n          t = d.value;\n        if (null == h && \"\" !== t || t !== h) {\n          if (t && r) switch (e = l.fromFormat(String(t), \"hh:mm\"), r) {\n            case !0:\n              t = e;\n              break;\n            case \"iso\":\n              t = e.toISO();\n              break;\n            default:\n              t = e.toFormat(r);\n          }\n          i(t) && (h = d.value);\n        } else s();\n      }\n      return h = void 0 !== h ? h : \"\", r && (l ? (n = l.isDateTime(h) ? h : \"iso\" === r ? l.fromISO(String(h)) : l.fromFormat(String(h), r), h = n.toFormat(\"HH:mm\")) : console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")), d.value = h, t(function () {\n        \"cell\" == e.getType() && (d.focus({\n          preventScroll: !0\n        }), d.style.height = \"100%\", o.selectContents && d.select());\n      }), d.addEventListener(\"blur\", function (e) {\n        (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== d) && c();\n      }), d.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            c();\n            break;\n          case 27:\n            s();\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n            break;\n          case 38:\n          case 40:\n            \"editor\" == a && (e.stopImmediatePropagation(), e.stopPropagation());\n        }\n      }), d;\n    },\n    datetime: function (e, t, i, s, o) {\n      var n,\n        r = o.format,\n        a = o.verticalNavigation || \"editor\",\n        l = r ? this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\") : null,\n        h = e.getValue(),\n        d = document.createElement(\"input\");\n      if (d.type = \"datetime-local\", d.style.padding = \"4px\", d.style.width = \"100%\", d.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), d.setAttribute(e, d.getAttribute(e) + o.elementAttributes[\"+\" + e])) : d.setAttribute(e, o.elementAttributes[e]);\n      function c() {\n        var e,\n          t = d.value;\n        if (null == h && \"\" !== t || t !== h) {\n          if (t && r) switch (e = l.fromISO(String(t)), r) {\n            case !0:\n              t = e;\n              break;\n            case \"iso\":\n              t = e.toISO();\n              break;\n            default:\n              t = e.toFormat(r);\n          }\n          i(t) && (h = d.value);\n        } else s();\n      }\n      return h = void 0 !== h ? h : \"\", r && (l ? (n = l.isDateTime(h) ? h : \"iso\" === r ? l.fromISO(String(h)) : l.fromFormat(String(h), r), h = n.toFormat(\"yyyy-MM-dd\") + \"T\" + n.toFormat(\"HH:mm\")) : console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")), d.value = h, t(function () {\n        \"cell\" === e.getType() && (d.focus({\n          preventScroll: !0\n        }), d.style.height = \"100%\", o.selectContents && d.select());\n      }), d.addEventListener(\"blur\", function (e) {\n        (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== d) && c();\n      }), d.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            c();\n            break;\n          case 27:\n            s();\n            break;\n          case 35:\n          case 36:\n            e.stopPropagation();\n            break;\n          case 38:\n          case 40:\n            \"editor\" == a && (e.stopImmediatePropagation(), e.stopPropagation());\n        }\n      }), d;\n    },\n    list: function (e, t, i, s, o) {\n      return new oe(this, e, t, i, s, o).input;\n    },\n    star: function (e, t, i, s, o) {\n      var n = this,\n        r = e.getElement(),\n        a = e.getValue(),\n        l = r.getElementsByTagName(\"svg\").length || 5,\n        h = r.getElementsByTagName(\"svg\")[0] ? r.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n        d = [],\n        c = document.createElement(\"div\"),\n        u = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      function m(e) {\n        d.forEach(function (t, i) {\n          i < e ? (\"ie\" == n.table.browser ? t.setAttribute(\"class\", \"tabulator-star-active\") : t.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\"), t.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>') : (\"ie\" == n.table.browser ? t.setAttribute(\"class\", \"tabulator-star-inactive\") : t.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\"), t.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>');\n        });\n      }\n      function p(e) {\n        var t = document.createElement(\"span\"),\n          s = u.cloneNode(!0);\n        d.push(s), t.addEventListener(\"mouseenter\", function (t) {\n          t.stopPropagation(), t.stopImmediatePropagation(), m(e);\n        }), t.addEventListener(\"mousemove\", function (e) {\n          e.stopPropagation(), e.stopImmediatePropagation();\n        }), t.addEventListener(\"click\", function (t) {\n          t.stopPropagation(), t.stopImmediatePropagation(), i(e), r.blur();\n        }), t.appendChild(s), c.appendChild(t);\n      }\n      function g(e) {\n        a = e, m(e);\n      }\n      if (r.style.whiteSpace = \"nowrap\", r.style.overflow = \"hidden\", r.style.textOverflow = \"ellipsis\", c.style.verticalAlign = \"middle\", c.style.display = \"inline-block\", c.style.padding = \"4px\", u.setAttribute(\"width\", h), u.setAttribute(\"height\", h), u.setAttribute(\"viewBox\", \"0 0 512 512\"), u.setAttribute(\"xml:space\", \"preserve\"), u.style.padding = \"0 1px\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), c.setAttribute(e, c.getAttribute(e) + o.elementAttributes[\"+\" + e])) : c.setAttribute(e, o.elementAttributes[e]);\n      for (var b = 1; b <= l; b++) p(b);\n      return m(a = Math.min(parseInt(a), l)), c.addEventListener(\"mousemove\", function (e) {\n        m(0);\n      }), c.addEventListener(\"click\", function (e) {\n        i(0);\n      }), r.addEventListener(\"blur\", function (e) {\n        s();\n      }), r.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            g(a + 1);\n            break;\n          case 37:\n            g(a - 1);\n            break;\n          case 13:\n            i(a);\n            break;\n          case 27:\n            s();\n        }\n      }), c;\n    },\n    progress: function (e, t, i, s, o) {\n      var n,\n        r,\n        a = e.getElement(),\n        l = void 0 === o.max ? a.getElementsByTagName(\"div\")[0] && a.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : o.max,\n        h = void 0 === o.min ? a.getElementsByTagName(\"div\")[0] && a.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : o.min,\n        d = (l - h) / 100,\n        c = e.getValue() || 0,\n        u = document.createElement(\"div\"),\n        m = document.createElement(\"div\");\n      function p() {\n        var e = window.getComputedStyle(a, null),\n          t = d * Math.round(m.offsetWidth / ((a.clientWidth - parseInt(e.getPropertyValue(\"padding-left\")) - parseInt(e.getPropertyValue(\"padding-right\"))) / 100)) + h;\n        i(t), a.setAttribute(\"aria-valuenow\", t), a.setAttribute(\"aria-label\", c);\n      }\n      if (u.style.position = \"absolute\", u.style.right = \"0\", u.style.top = \"0\", u.style.bottom = \"0\", u.style.width = \"5px\", u.classList.add(\"tabulator-progress-handle\"), m.style.display = \"inline-block\", m.style.position = \"relative\", m.style.height = \"100%\", m.style.backgroundColor = \"#488CE9\", m.style.maxWidth = \"100%\", m.style.minWidth = \"0%\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), m.setAttribute(e, m.getAttribute(e) + o.elementAttributes[\"+\" + e])) : m.setAttribute(e, o.elementAttributes[e]);\n      return a.style.padding = \"4px 4px\", c = Math.min(parseFloat(c), l), c = Math.max(parseFloat(c), h), c = Math.round((c - h) / d), m.style.width = c + \"%\", a.setAttribute(\"aria-valuemin\", h), a.setAttribute(\"aria-valuemax\", l), m.appendChild(u), u.addEventListener(\"mousedown\", function (e) {\n        n = e.screenX, r = m.offsetWidth;\n      }), u.addEventListener(\"mouseover\", function () {\n        u.style.cursor = \"ew-resize\";\n      }), a.addEventListener(\"mousemove\", function (e) {\n        n && (m.style.width = r + e.screenX - n + \"px\");\n      }), a.addEventListener(\"mouseup\", function (e) {\n        n && (e.stopPropagation(), e.stopImmediatePropagation(), n = !1, r = !1, p());\n      }), a.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            e.preventDefault(), m.style.width = m.clientWidth + a.clientWidth / 100 + \"px\";\n            break;\n          case 37:\n            e.preventDefault(), m.style.width = m.clientWidth - a.clientWidth / 100 + \"px\";\n            break;\n          case 9:\n          case 13:\n            p();\n            break;\n          case 27:\n            s();\n        }\n      }), a.addEventListener(\"blur\", function () {\n        s();\n      }), m;\n    },\n    tickCross: function (e, t, i, s, o) {\n      var n = e.getValue(),\n        r = document.createElement(\"input\"),\n        a = o.tristate,\n        l = void 0 === o.indeterminateValue ? null : o.indeterminateValue,\n        h = !1,\n        d = Object.keys(o).includes(\"trueValue\"),\n        c = Object.keys(o).includes(\"falseValue\");\n      if (r.setAttribute(\"type\", \"checkbox\"), r.style.marginTop = \"5px\", r.style.boxSizing = \"border-box\", o.elementAttributes && \"object\" == typeof o.elementAttributes) for (let e in o.elementAttributes) \"+\" == e.charAt(0) ? (e = e.slice(1), r.setAttribute(e, r.getAttribute(e) + o.elementAttributes[\"+\" + e])) : r.setAttribute(e, o.elementAttributes[e]);\n      function u(e) {\n        var t = r.checked;\n        return d && t ? t = o.trueValue : c && !t && (t = o.falseValue), a ? e ? h ? l : t : r.checked && !h ? (r.checked = !1, r.indeterminate = !0, h = !0, l) : (h = !1, t) : t;\n      }\n      return r.value = n, !a || void 0 !== n && n !== l && \"\" !== n || (h = !0, r.indeterminate = !0), \"firefox\" != this.table.browser && \"safari\" != this.table.browser && t(function () {\n        \"cell\" === e.getType() && r.focus({\n          preventScroll: !0\n        });\n      }), r.checked = d ? n === o.trueValue : !0 === n || \"true\" === n || \"True\" === n || 1 === n, r.addEventListener(\"change\", function (e) {\n        i(u());\n      }), r.addEventListener(\"blur\", function (e) {\n        i(u(!0));\n      }), r.addEventListener(\"keydown\", function (e) {\n        13 == e.keyCode && i(u()), 27 == e.keyCode && s();\n      }), r;\n    },\n    adaptable: function (e, t, i, s, o) {\n      var n,\n        r,\n        a = e._getSelf().column;\n      return n = o.editorLookup ? o.editorLookup(e) : function (e) {\n        var t = e.getValue(),\n          i = \"input\";\n        switch (typeof t) {\n          case \"number\":\n            i = \"number\";\n            break;\n          case \"boolean\":\n            i = \"tickCross\";\n            break;\n          case \"string\":\n            t.includes(\"\\n\") && (i = \"textarea\");\n        }\n        return i;\n      }(e), o.paramsLookup && (r = \"function\" == typeof o.paramsLookup ? o.paramsLookup(n, e) : o.paramsLookup[n]), this.table.modules.edit.lookupEditor(n, a).call(this, e, t, i, s, r || {});\n    }\n  };\n  class re extends M {\n    constructor(e) {\n      super(e), this.currentCell = !1, this.mouseClick = !1, this.recursionBlock = !1, this.invalidEdit = !1, this.editedCells = [], this.convertEmptyValues = !1, this.editors = re.editors, this.registerTableOption(\"editTriggerEvent\", \"focus\"), this.registerTableOption(\"editorEmptyValue\"), this.registerTableOption(\"editorEmptyValueFunc\", this.emptyValueCheck.bind(this)), this.registerColumnOption(\"editable\"), this.registerColumnOption(\"editor\"), this.registerColumnOption(\"editorParams\"), this.registerColumnOption(\"editorEmptyValue\"), this.registerColumnOption(\"editorEmptyValueFunc\"), this.registerColumnOption(\"cellEditing\"), this.registerColumnOption(\"cellEdited\"), this.registerColumnOption(\"cellEditCancelled\"), this.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this)), this.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this)), this.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this)), this.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this)), this.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this)), this.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this)), this.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this)), this.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this)), this.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this)), this.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this)), this.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this)), this.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this)), this.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this)), this.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this)), this.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this)), this.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this)), this.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this)), this.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n    }\n    initialize() {\n      this.subscribe(\"cell-init\", this.bindEditor.bind(this)), this.subscribe(\"cell-delete\", this.clearEdited.bind(this)), this.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this)), this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this)), this.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this)), this.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this)), this.subscribe(\"row-layout\", this.rowEditableCheck.bind(this)), this.subscribe(\"data-refreshing\", this.cancelEdit.bind(this)), this.subscribe(\"clipboard-paste\", this.pasteBlocker.bind(this)), this.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, void 0)), this.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this)), this.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, void 0)), this.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, void 0)), Object.keys(this.table.options).includes(\"editorEmptyValue\") && (this.convertEmptyValues = !0);\n    }\n    pasteBlocker(e) {\n      if (this.currentCell) return !0;\n    }\n    keybindingNavigateNext(e) {\n      var t = this.currentCell,\n        i = this.options(\"tabEndNewRow\");\n      t && (this.navigateNext(t, e) || i && (t.getElement().firstChild.blur(), this.invalidEdit || (i = !0 === i ? this.table.addRow({}) : \"function\" == typeof i ? this.table.addRow(i(t.row.getComponent())) : this.table.addRow(Object.assign({}, i))).then(() => {\n        setTimeout(() => {\n          t.getComponent().navigateNext();\n        });\n      })));\n    }\n    cellIsEdited(e) {\n      return !!e.modules.edit && e.modules.edit.edited;\n    }\n    cellCancelEdit(e) {\n      e === this.currentCell ? this.table.modules.edit.cancelEdit() : console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n    }\n    updateCellClass(e) {\n      this.allowEdit(e) ? e.getElement().classList.add(\"tabulator-editable\") : e.getElement().classList.remove(\"tabulator-editable\");\n    }\n    clearCellEdited(e) {\n      e || (e = this.table.modules.edit.getEditedCells()), Array.isArray(e) || (e = [e]), e.forEach(e => {\n        this.table.modules.edit.clearEdited(e._getSelf());\n      });\n    }\n    navigatePrev(e = this.currentCell, t) {\n      var i, s;\n      if (e) {\n        if (t && t.preventDefault(), i = this.navigateLeft()) return !0;\n        if ((s = this.table.rowManager.prevDisplayRow(e.row, !0)) && (i = this.findPrevEditableCell(s, s.cells.length))) return i.getComponent().edit(), !0;\n      }\n      return !1;\n    }\n    navigateNext(e = this.currentCell, t) {\n      var i, s;\n      if (e) {\n        if (t && t.preventDefault(), i = this.navigateRight()) return !0;\n        if ((s = this.table.rowManager.nextDisplayRow(e.row, !0)) && (i = this.findNextEditableCell(s, -1))) return i.getComponent().edit(), !0;\n      }\n      return !1;\n    }\n    navigateLeft(e = this.currentCell, t) {\n      var i, s;\n      return !!(e && (t && t.preventDefault(), i = e.getIndex(), s = this.findPrevEditableCell(e.row, i))) && (s.getComponent().edit(), !0);\n    }\n    navigateRight(e = this.currentCell, t) {\n      var i, s;\n      return !!(e && (t && t.preventDefault(), i = e.getIndex(), s = this.findNextEditableCell(e.row, i))) && (s.getComponent().edit(), !0);\n    }\n    navigateUp(e = this.currentCell, t) {\n      var i, s;\n      return !!(e && (t && t.preventDefault(), i = e.getIndex(), s = this.table.rowManager.prevDisplayRow(e.row, !0))) && (s.cells[i].getComponent().edit(), !0);\n    }\n    navigateDown(e = this.currentCell, t) {\n      var i, s;\n      return !!(e && (t && t.preventDefault(), i = e.getIndex(), s = this.table.rowManager.nextDisplayRow(e.row, !0))) && (s.cells[i].getComponent().edit(), !0);\n    }\n    findNextEditableCell(e, t) {\n      var i = !1;\n      if (t < e.cells.length - 1) for (var s = t + 1; s < e.cells.length; s++) {\n        let t = e.cells[s];\n        if (t.column.modules.edit && a.elVisible(t.getElement())) {\n          if (this.allowEdit(t)) {\n            i = t;\n            break;\n          }\n        }\n      }\n      return i;\n    }\n    findPrevEditableCell(e, t) {\n      var i = !1;\n      if (t > 0) for (var s = t - 1; s >= 0; s--) {\n        let t = e.cells[s];\n        if (t.column.modules.edit && a.elVisible(t.getElement())) {\n          if (this.allowEdit(t)) {\n            i = t;\n            break;\n          }\n        }\n      }\n      return i;\n    }\n    initializeColumnCheck(e) {\n      void 0 !== e.definition.editor && this.initializeColumn(e);\n    }\n    columnDeleteCheck(e) {\n      this.currentCell && this.currentCell.column === e && this.cancelEdit();\n    }\n    rowDeleteCheck(e) {\n      this.currentCell && this.currentCell.row === e && this.cancelEdit();\n    }\n    rowEditableCheck(e) {\n      e.getCells().forEach(e => {\n        e.column.modules.edit && \"function\" == typeof e.column.modules.edit.check && this.updateCellClass(e);\n      });\n    }\n    initializeColumn(e) {\n      var t = Object.keys(e.definition).includes(\"editorEmptyValue\"),\n        i = {\n          editor: !1,\n          blocked: !1,\n          check: e.definition.editable,\n          params: e.definition.editorParams || {},\n          convertEmptyValues: t,\n          editorEmptyValue: e.definition.editorEmptyValue,\n          editorEmptyValueFunc: e.definition.editorEmptyValueFunc\n        };\n      i.editor = this.lookupEditor(e.definition.editor, e), i.editor && (e.modules.edit = i);\n    }\n    lookupEditor(e, t) {\n      var i;\n      switch (typeof e) {\n        case \"string\":\n          this.editors[e] ? i = this.editors[e] : console.warn(\"Editor Error - No such editor found: \", e);\n          break;\n        case \"function\":\n          i = e;\n          break;\n        case \"boolean\":\n          !0 === e && (\"function\" != typeof t.definition.formatter ? i = this.editors[t.definition.formatter] ? this.editors[t.definition.formatter] : this.editors.input : console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", t.definition.formatter));\n      }\n      return i;\n    }\n    getCurrentCell() {\n      return !!this.currentCell && this.currentCell.getComponent();\n    }\n    clearEditor(e) {\n      var t,\n        i = this.currentCell;\n      if (this.invalidEdit = !1, i) {\n        for (this.currentCell = !1, t = i.getElement(), this.dispatch(\"edit-editor-clear\", i, e), t.classList.remove(\"tabulator-editing\"); t.firstChild;) t.removeChild(t.firstChild);\n        i.row.getElement().classList.remove(\"tabulator-editing\"), i.table.element.classList.remove(\"tabulator-editing\");\n      }\n    }\n    cancelEdit() {\n      if (this.currentCell) {\n        var e = this.currentCell,\n          t = this.currentCell.getComponent();\n        this.clearEditor(!0), e.setValueActual(e.getValue()), e.cellRendered(), (\"textarea\" == e.column.definition.editor || e.column.definition.variableHeight) && e.row.normalizeHeight(!0), e.column.definition.cellEditCancelled && e.column.definition.cellEditCancelled.call(this.table, t), this.dispatch(\"edit-cancelled\", e), this.dispatchExternal(\"cellEditCancelled\", t);\n      }\n    }\n    bindEditor(e) {\n      if (e.column.modules.edit) {\n        var t = this,\n          i = e.getElement(!0);\n        this.updateCellClass(e), i.setAttribute(\"tabindex\", 0), i.addEventListener(\"mousedown\", function (e) {\n          2 === e.button ? e.preventDefault() : t.mouseClick = !0;\n        }), \"dblclick\" === this.options(\"editTriggerEvent\") && i.addEventListener(\"dblclick\", function (s) {\n          i.classList.contains(\"tabulator-editing\") || (i.focus({\n            preventScroll: !0\n          }), t.edit(e, s, !1));\n        }), \"focus\" !== this.options(\"editTriggerEvent\") && \"click\" !== this.options(\"editTriggerEvent\") || i.addEventListener(\"click\", function (s) {\n          i.classList.contains(\"tabulator-editing\") || (i.focus({\n            preventScroll: !0\n          }), t.edit(e, s, !1));\n        }), \"focus\" === this.options(\"editTriggerEvent\") && i.addEventListener(\"focus\", function (i) {\n          t.recursionBlock || t.edit(e, i, !1);\n        });\n      }\n    }\n    focusCellNoEvent(e, t) {\n      this.recursionBlock = !0, t && \"ie\" === this.table.browser || e.getElement().focus({\n        preventScroll: !0\n      }), this.recursionBlock = !1;\n    }\n    editCell(e, t) {\n      this.focusCellNoEvent(e), this.edit(e, !1, t);\n    }\n    focusScrollAdjust(e) {\n      if (\"virtual\" == this.table.rowManager.getRenderMode()) {\n        var t = this.table.rowManager.element.scrollTop,\n          i = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n          s = e.row.getElement();\n        s.offsetTop < t ? this.table.rowManager.element.scrollTop -= t - s.offsetTop : s.offsetTop + s.offsetHeight > i && (this.table.rowManager.element.scrollTop += s.offsetTop + s.offsetHeight - i);\n        var o = this.table.rowManager.element.scrollLeft,\n          n = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n          r = e.getElement();\n        this.table.modExists(\"frozenColumns\") && (o += parseInt(this.table.modules.frozenColumns.leftMargin || 0), n -= parseInt(this.table.modules.frozenColumns.rightMargin || 0)), \"virtual\" === this.table.options.renderHorizontal && (o -= parseInt(this.table.columnManager.renderer.vDomPadLeft), n -= parseInt(this.table.columnManager.renderer.vDomPadLeft)), r.offsetLeft < o ? this.table.rowManager.element.scrollLeft -= o - r.offsetLeft : r.offsetLeft + r.offsetWidth > n && (this.table.rowManager.element.scrollLeft += r.offsetLeft + r.offsetWidth - n);\n      }\n    }\n    allowEdit(e) {\n      var t = !!e.column.modules.edit;\n      if (e.column.modules.edit) switch (typeof e.column.modules.edit.check) {\n        case \"function\":\n          e.row.initialized && (t = e.column.modules.edit.check(e.getComponent()));\n          break;\n        case \"string\":\n          t = !!e.row.data[e.column.modules.edit.check];\n          break;\n        case \"boolean\":\n          t = e.column.modules.edit.check;\n      }\n      return t;\n    }\n    edit(e, t, i) {\n      var s,\n        o,\n        n,\n        r = this,\n        a = function () {},\n        l = e.getElement(),\n        h = !1;\n      if (!this.currentCell) {\n        if (e.column.modules.edit.blocked) return this.mouseClick = !1, this.blur(l), !1;\n        if (t && t.stopPropagation(), this.allowEdit(e) || i) {\n          if (r.cancelEdit(), r.currentCell = e, this.focusScrollAdjust(e), o = e.getComponent(), this.mouseClick && (this.mouseClick = !1, e.column.definition.cellClick && e.column.definition.cellClick.call(this.table, t, o)), e.column.definition.cellEditing && e.column.definition.cellEditing.call(this.table, o), this.dispatch(\"cell-editing\", e), this.dispatchExternal(\"cellEditing\", o), n = \"function\" == typeof e.column.modules.edit.params ? e.column.modules.edit.params(o) : e.column.modules.edit.params, s = e.column.modules.edit.editor.call(r, o, function (e) {\n            a = e;\n          }, function (t) {\n            if (r.currentCell === e && !h) {\n              var i = r.chain(\"edit-success\", [e, t], !0, !0);\n              return !0 === i || \"highlight\" === r.table.options.validationMode ? (h = !0, r.clearEditor(), e.modules.edit || (e.modules.edit = {}), e.modules.edit.edited = !0, -1 == r.editedCells.indexOf(e) && r.editedCells.push(e), t = r.transformEmptyValues(t, e), e.setValue(t, !0), !0 === i) : (h = !0, r.invalidEdit = !0, r.focusCellNoEvent(e, !0), a(), setTimeout(() => {\n                h = !1;\n              }, 10), !1);\n            }\n          }, function () {\n            r.currentCell !== e || h || r.cancelEdit();\n          }, n), !this.currentCell || !1 === s) return this.blur(l), !1;\n          if (!(s instanceof Node)) return console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", s), this.blur(l), !1;\n          for (l.classList.add(\"tabulator-editing\"), e.row.getElement().classList.add(\"tabulator-editing\"), e.table.element.classList.add(\"tabulator-editing\"); l.firstChild;) l.removeChild(l.firstChild);\n          l.appendChild(s), a();\n          for (var d = l.children, c = 0; c < d.length; c++) d[c].addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n          });\n          return !0;\n        }\n        return this.mouseClick = !1, this.blur(l), !1;\n      }\n      this.invalidEdit || this.currentCell === e || this.cancelEdit();\n    }\n    emptyValueCheck(e) {\n      return \"\" === e || null == e;\n    }\n    transformEmptyValues(e, t) {\n      var i,\n        s = t.column.modules.edit;\n      return (s.convertEmptyValues || this.convertEmptyValues) && (i = s.editorEmptyValueFunc || this.options(\"editorEmptyValueFunc\")) && i(e) && (e = s.convertEmptyValues ? s.editorEmptyValue : this.options(\"editorEmptyValue\")), e;\n    }\n    blur(e) {\n      this.confirm(\"edit-blur\", [e]) || e.blur();\n    }\n    getEditedCells() {\n      var e = [];\n      return this.editedCells.forEach(t => {\n        e.push(t.getComponent());\n      }), e;\n    }\n    clearEdited(e) {\n      var t;\n      e.modules.edit && e.modules.edit.edited && (e.modules.edit.edited = !1, this.dispatch(\"edit-edited-clear\", e)), (t = this.editedCells.indexOf(e)) > -1 && this.editedCells.splice(t, 1);\n    }\n  }\n  _defineProperty(re, \"moduleName\", \"edit\");\n  _defineProperty(re, \"editors\", ne);\n  class ae {\n    constructor(e, t, i, s) {\n      this.type = e, this.columns = t, this.component = i || !1, this.indent = s || 0;\n    }\n  }\n  class le {\n    constructor(e, t, i, s, o) {\n      this.value = e, this.component = t || !1, this.width = i, this.height = s, this.depth = o;\n    }\n  }\n  var he = {},\n    de = {\n      visible: function () {\n        return this.rowManager.getVisibleRows(!1, !0);\n      },\n      all: function () {\n        return this.rowManager.rows;\n      },\n      selected: function () {\n        return this.modules.selectRow.selectedRows;\n      },\n      active: function () {\n        return this.options.pagination ? this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2) : this.rowManager.getDisplayRows();\n      }\n    };\n  class ce extends M {\n    constructor(e) {\n      super(e), this.config = {}, this.cloneTableStyle = !0, this.colVisProp = \"\", this.colVisPropAttach = \"\", this.registerTableOption(\"htmlOutputConfig\", !1), this.registerColumnOption(\"htmlOutput\"), this.registerColumnOption(\"titleHtmlOutput\");\n    }\n    initialize() {\n      this.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n    }\n    generateExportList(e, t, i, s) {\n      var o, n, r, a;\n      return this.cloneTableStyle = t, this.config = e || {}, this.colVisProp = s, this.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1), (a = ce.columnLookups[i]) && (r = (r = a.call(this.table)).filter(e => this.columnVisCheck(e))), o = !1 !== this.config.columnHeaders ? this.headersToExportRows(this.generateColumnGroupHeaders(r)) : [], r && (r = r.map(e => e.getComponent())), n = this.bodyToExportRows(this.rowLookup(i), r), o.concat(n);\n    }\n    generateTable(e, t, i, s) {\n      var o = this.generateExportList(e, t, i, s);\n      return this.generateTableElement(o);\n    }\n    rowLookup(e) {\n      var t,\n        i = [];\n      return \"function\" == typeof e ? e.call(this.table).forEach(e => {\n        (e = this.table.rowManager.findRow(e)) && i.push(e);\n      }) : (t = ce.rowLookups[e] || ce.rowLookups.active, i = t.call(this.table)), Object.assign([], i);\n    }\n    generateColumnGroupHeaders(e) {\n      var t = [];\n      return e || (e = !1 !== this.config.columnGroups ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex), e.forEach(e => {\n        var i = this.processColumnGroup(e);\n        i && t.push(i);\n      }), t;\n    }\n    processColumnGroup(e) {\n      var t = e.columns,\n        i = 0,\n        s = {\n          title: e.definition[\"title\" + this.colVisPropAttach] || e.definition.title,\n          column: e,\n          depth: 1\n        };\n      if (t.length) {\n        if (s.subGroups = [], s.width = 0, t.forEach(e => {\n          var t = this.processColumnGroup(e);\n          t && (s.width += t.width, s.subGroups.push(t), t.depth > i && (i = t.depth));\n        }), s.depth += i, !s.width) return !1;\n      } else {\n        if (!this.columnVisCheck(e)) return !1;\n        s.width = 1;\n      }\n      return s;\n    }\n    columnVisCheck(e) {\n      var t = e.definition[this.colVisProp];\n      return (!1 !== this.config.rowHeaders || !e.isRowHeader) && (\"function\" == typeof t && (t = t.call(this.table, e.getComponent())), !1 === t || !0 === t ? t : e.visible && e.field);\n    }\n    headersToExportRows(e) {\n      var t = [],\n        i = 0,\n        s = [];\n      function o(e, s) {\n        var n = i - s;\n        if (void 0 === t[s] && (t[s] = []), e.height = e.subGroups ? 1 : n - e.depth + 1, t[s].push(e), e.height > 1) for (let i = 1; i < e.height; i++) void 0 === t[s + i] && (t[s + i] = []), t[s + i].push(!1);\n        if (e.width > 1) for (let i = 1; i < e.width; i++) t[s].push(!1);\n        e.subGroups && e.subGroups.forEach(function (e) {\n          o(e, s + 1);\n        });\n      }\n      return e.forEach(function (e) {\n        e.depth > i && (i = e.depth);\n      }), e.forEach(function (e) {\n        o(e, 0);\n      }), t.forEach(e => {\n        var t = [];\n        e.forEach(e => {\n          if (e) {\n            let i = void 0 === e.title ? \"\" : e.title;\n            t.push(new le(i, e.column.getComponent(), e.width, e.height, e.depth));\n          } else t.push(null);\n        }), s.push(new ae(\"header\", t));\n      }), s;\n    }\n    bodyToExportRows(e, t = []) {\n      var i = [];\n      return 0 === t.length && this.table.columnManager.columnsByIndex.forEach(e => {\n        this.columnVisCheck(e) && t.push(e.getComponent());\n      }), !1 !== this.config.columnCalcs && this.table.modExists(\"columnCalcs\") && (this.table.modules.columnCalcs.topInitialized && e.unshift(this.table.modules.columnCalcs.topRow), this.table.modules.columnCalcs.botInitialized && e.push(this.table.modules.columnCalcs.botRow)), (e = e.filter(e => {\n        switch (e.type) {\n          case \"group\":\n            return !1 !== this.config.rowGroups;\n          case \"calc\":\n            return !1 !== this.config.columnCalcs;\n          case \"row\":\n            return !(this.table.options.dataTree && !1 === this.config.dataTree && e.modules.dataTree.parent);\n        }\n        return !0;\n      })).forEach((e, s) => {\n        var o = e.getData(this.colVisProp),\n          n = [],\n          r = 0;\n        switch (e.type) {\n          case \"group\":\n            r = e.level, n.push(new le(e.key, e.getComponent(), t.length, 1));\n            break;\n          case \"calc\":\n          case \"row\":\n            t.forEach(e => {\n              n.push(new le(e._column.getFieldValue(o), e, 1, 1));\n            }), this.table.options.dataTree && !1 !== this.config.dataTree && (r = e.modules.dataTree.index);\n        }\n        i.push(new ae(e.type, n, e.getComponent(), r));\n      }), i;\n    }\n    generateTableElement(e) {\n      var t = document.createElement(\"table\"),\n        i = document.createElement(\"thead\"),\n        s = document.createElement(\"tbody\"),\n        o = this.lookupTableStyles(),\n        n = this.table.options[\"rowFormatter\" + this.colVisPropAttach],\n        r = {};\n      return r.rowFormatter = null !== n ? n : this.table.options.rowFormatter, this.table.options.dataTree && !1 !== this.config.dataTree && this.table.modExists(\"columnCalcs\") && (r.treeElementField = this.table.modules.dataTree.elementField), r.groupHeader = this.table.options[\"groupHeader\" + this.colVisPropAttach], r.groupHeader && !Array.isArray(r.groupHeader) && (r.groupHeader = [r.groupHeader]), t.classList.add(\"tabulator-print-table\"), this.mapElementStyles(this.table.columnManager.getHeadersElement(), i, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]), e.length > 1e3 && console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\"), e.forEach((e, t) => {\n        let n;\n        switch (e.type) {\n          case \"header\":\n            i.appendChild(this.generateHeaderElement(e, r, o));\n            break;\n          case \"group\":\n            s.appendChild(this.generateGroupElement(e, r, o));\n            break;\n          case \"calc\":\n            s.appendChild(this.generateCalcElement(e, r, o));\n            break;\n          case \"row\":\n            n = this.generateRowElement(e, r, o), this.mapElementStyles(t % 2 && o.evenRow ? o.evenRow : o.oddRow, n, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]), s.appendChild(n);\n        }\n      }), i.innerHTML && t.appendChild(i), t.appendChild(s), this.mapElementStyles(this.table.element, t, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]), t;\n    }\n    lookupTableStyles() {\n      var e = {};\n      return this.cloneTableStyle && window.getComputedStyle && (e.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\"), e.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\"), e.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\"), e.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\"), e.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0], e.firstRow && (e.styleCells = e.firstRow.getElementsByClassName(\"tabulator-cell\"), e.styleRowHeader = e.firstRow.getElementsByClassName(\"tabulator-row-header\")[0], e.firstCell = e.styleCells[0], e.lastCell = e.styleCells[e.styleCells.length - 1])), e;\n    }\n    generateHeaderElement(e, t, i) {\n      var s = document.createElement(\"tr\");\n      return e.columns.forEach(e => {\n        if (e) {\n          var t = document.createElement(\"th\"),\n            i = e.component._column.definition.cssClass ? e.component._column.definition.cssClass.split(\" \") : [];\n          t.colSpan = e.width, t.rowSpan = e.height, t.innerHTML = e.value, this.cloneTableStyle && (t.style.boxSizing = \"border-box\"), i.forEach(function (e) {\n            t.classList.add(e);\n          }), this.mapElementStyles(e.component.getElement(), t, [\"text-align\", \"border-left\", \"border-right\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]), this.mapElementStyles(e.component._column.contentElement, t, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]), e.component._column.visible ? this.mapElementStyles(e.component.getElement(), t, [\"width\"]) : e.component._column.definition.width && (t.style.width = e.component._column.definition.width + \"px\"), e.component._column.parent && e.component._column.parent.isGroup ? this.mapElementStyles(e.component._column.parent.groupElement, t, [\"border-top\"]) : this.mapElementStyles(e.component.getElement(), t, [\"border-top\"]), e.component._column.isGroup ? this.mapElementStyles(e.component.getElement(), t, [\"border-bottom\"]) : this.mapElementStyles(this.table.columnManager.getElement(), t, [\"border-bottom\"]), s.appendChild(t);\n        }\n      }), s;\n    }\n    generateGroupElement(e, t, i) {\n      var s = document.createElement(\"tr\"),\n        o = document.createElement(\"td\"),\n        n = e.columns[0];\n      return s.classList.add(\"tabulator-print-table-row\"), t.groupHeader && t.groupHeader[e.indent] ? n.value = t.groupHeader[e.indent](n.value, e.component._group.getRowCount(), e.component._group.getData(), e.component) : !1 !== t.groupHeader && (n.value = e.component._group.generator(n.value, e.component._group.getRowCount(), e.component._group.getData(), e.component)), o.colSpan = n.width, o.innerHTML = n.value, s.classList.add(\"tabulator-print-table-group\"), s.classList.add(\"tabulator-group-level-\" + e.indent), n.component.isVisible() && s.classList.add(\"tabulator-group-visible\"), this.mapElementStyles(i.firstGroup, s, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]), this.mapElementStyles(i.firstGroup, o, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]), s.appendChild(o), s;\n    }\n    generateCalcElement(e, t, i) {\n      var s = this.generateRowElement(e, t, i);\n      return s.classList.add(\"tabulator-print-table-calcs\"), this.mapElementStyles(i.calcRow, s, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]), s;\n    }\n    generateRowElement(e, t, i) {\n      var s = document.createElement(\"tr\");\n      if (s.classList.add(\"tabulator-print-table-row\"), e.columns.forEach((o, n) => {\n        if (o) {\n          var r,\n            a,\n            l = document.createElement(\"td\"),\n            h = o.component._column,\n            d = this.table,\n            c = d.columnManager.findColumnIndex(h),\n            u = o.value,\n            m = {\n              modules: {},\n              getValue: function () {\n                return u;\n              },\n              getField: function () {\n                return h.definition.field;\n              },\n              getElement: function () {\n                return l;\n              },\n              getType: function () {\n                return \"cell\";\n              },\n              getColumn: function () {\n                return h.getComponent();\n              },\n              getData: function () {\n                return e.component.getData();\n              },\n              getRow: function () {\n                return e.component;\n              },\n              getTable: function () {\n                return d;\n              },\n              getComponent: function () {\n                return m;\n              },\n              column: h\n            };\n          if ((h.definition.cssClass ? h.definition.cssClass.split(\" \") : []).forEach(function (e) {\n            l.classList.add(e);\n          }), this.table.modExists(\"format\") && !1 !== this.config.formatCells) u = this.table.modules.format.formatExportValue(m, this.colVisProp);else switch (typeof u) {\n            case \"object\":\n              u = null !== u ? JSON.stringify(u) : \"\";\n              break;\n            case \"undefined\":\n              u = \"\";\n          }\n          u instanceof Node ? l.appendChild(u) : l.innerHTML = u, a = [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"], h.isRowHeader ? (r = i.styleRowHeader, a.push(\"background-color\")) : r = i.styleCells && i.styleCells[c] ? i.styleCells[c] : i.firstCell, r && (this.mapElementStyles(r, l, a), h.definition.align && (l.style.textAlign = h.definition.align)), this.table.options.dataTree && !1 !== this.config.dataTree && (t.treeElementField && t.treeElementField == h.field || !t.treeElementField && 0 == n) && (e.component._row.modules.dataTree.controlEl && l.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0), l.firstChild), e.component._row.modules.dataTree.branchEl && l.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0), l.firstChild)), s.appendChild(l), m.modules.format && m.modules.format.renderedCallback && m.modules.format.renderedCallback();\n        }\n      }), t.rowFormatter && \"row\" === e.type && !1 !== this.config.formatCells) {\n        Object.assign(e.component).getElement = function () {\n          return s;\n        }, t.rowFormatter(e.component);\n      }\n      return s;\n    }\n    generateHTMLTable(e) {\n      var t = document.createElement(\"div\");\n      return t.appendChild(this.generateTableElement(e)), t.innerHTML;\n    }\n    getHtml(e, t, i, s) {\n      var o = this.generateExportList(i || this.table.options.htmlOutputConfig, t, e, s || \"htmlOutput\");\n      return this.generateHTMLTable(o);\n    }\n    mapElementStyles(e, t, i) {\n      if (this.cloneTableStyle && e && t) {\n        var s = {\n          \"background-color\": \"backgroundColor\",\n          color: \"fontColor\",\n          width: \"width\",\n          \"font-weight\": \"fontWeight\",\n          \"font-family\": \"fontFamily\",\n          \"font-size\": \"fontSize\",\n          \"text-align\": \"textAlign\",\n          \"border-top\": \"borderTop\",\n          \"border-left\": \"borderLeft\",\n          \"border-right\": \"borderRight\",\n          \"border-bottom\": \"borderBottom\",\n          \"padding-top\": \"paddingTop\",\n          \"padding-left\": \"paddingLeft\",\n          \"padding-right\": \"paddingRight\",\n          \"padding-bottom\": \"paddingBottom\"\n        };\n        if (window.getComputedStyle) {\n          var o = window.getComputedStyle(e);\n          i.forEach(function (e) {\n            t.style[s[e]] || (t.style[s[e]] = o.getPropertyValue(e));\n          });\n        }\n      }\n    }\n  }\n  _defineProperty(ce, \"moduleName\", \"export\");\n  _defineProperty(ce, \"columnLookups\", he);\n  _defineProperty(ce, \"rowLookups\", de);\n  var ue = {\n    \"=\": function (e, t, i, s) {\n      return t == e;\n    },\n    \"<\": function (e, t, i, s) {\n      return t < e;\n    },\n    \"<=\": function (e, t, i, s) {\n      return t <= e;\n    },\n    \">\": function (e, t, i, s) {\n      return t > e;\n    },\n    \">=\": function (e, t, i, s) {\n      return t >= e;\n    },\n    \"!=\": function (e, t, i, s) {\n      return t != e;\n    },\n    regex: function (e, t, i, s) {\n      return \"string\" == typeof e && (e = new RegExp(e)), e.test(t);\n    },\n    like: function (e, t, i, s) {\n      return null == e ? t === e : null != t && String(t).toLowerCase().indexOf(e.toLowerCase()) > -1;\n    },\n    keywords: function (e, t, i, s) {\n      var o = e.toLowerCase().split(void 0 === s.separator ? \" \" : s.separator),\n        n = String(null == t ? \"\" : t).toLowerCase(),\n        r = [];\n      return o.forEach(e => {\n        n.includes(e) && r.push(!0);\n      }), s.matchAll ? r.length === o.length : !!r.length;\n    },\n    starts: function (e, t, i, s) {\n      return null == e ? t === e : null != t && String(t).toLowerCase().startsWith(e.toLowerCase());\n    },\n    ends: function (e, t, i, s) {\n      return null == e ? t === e : null != t && String(t).toLowerCase().endsWith(e.toLowerCase());\n    },\n    in: function (e, t, i, s) {\n      return Array.isArray(e) ? !e.length || e.indexOf(t) > -1 : (console.warn(\"Filter Error - filter value is not an array:\", e), !1);\n    }\n  };\n  class me extends M {\n    constructor(e) {\n      super(e), this.filterList = [], this.headerFilters = {}, this.headerFilterColumns = [], this.prevHeaderFilterChangeCheck = \"\", this.prevHeaderFilterChangeCheck = \"{}\", this.changed = !1, this.tableInitialized = !1, this.registerTableOption(\"filterMode\", \"local\"), this.registerTableOption(\"initialFilter\", !1), this.registerTableOption(\"initialHeaderFilter\", !1), this.registerTableOption(\"headerFilterLiveFilterDelay\", 300), this.registerTableOption(\"placeholderHeaderFilter\", !1), this.registerColumnOption(\"headerFilter\"), this.registerColumnOption(\"headerFilterPlaceholder\"), this.registerColumnOption(\"headerFilterParams\"), this.registerColumnOption(\"headerFilterEmptyCheck\"), this.registerColumnOption(\"headerFilterFunc\"), this.registerColumnOption(\"headerFilterFuncParams\"), this.registerColumnOption(\"headerFilterLiveFilter\"), this.registerTableFunction(\"searchRows\", this.searchRows.bind(this)), this.registerTableFunction(\"searchData\", this.searchData.bind(this)), this.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this)), this.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this)), this.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this)), this.registerTableFunction(\"getFilters\", this.getFilters.bind(this)), this.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this)), this.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this)), this.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this)), this.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this)), this.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this)), this.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this)), this.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this)), this.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this)), this.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this)), this.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this)), this.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n    }\n    initialize() {\n      this.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this)), this.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this)), this.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this)), this.subscribe(\"table-built\", this.tableBuilt.bind(this)), this.subscribe(\"placeholder\", this.generatePlaceholder.bind(this)), \"remote\" === this.table.options.filterMode && this.subscribe(\"data-params\", this.remoteFilterParams.bind(this)), this.registerDataHandler(this.filter.bind(this), 10);\n    }\n    tableBuilt() {\n      this.table.options.initialFilter && this.setFilter(this.table.options.initialFilter), this.table.options.initialHeaderFilter && this.table.options.initialHeaderFilter.forEach(e => {\n        var t = this.table.columnManager.findColumn(e.field);\n        if (!t) return console.warn(\"Column Filter Error - No matching column found:\", e.field), !1;\n        this.setHeaderFilterValue(t, e.value);\n      }), this.tableInitialized = !0;\n    }\n    remoteFilterParams(e, t, i, s) {\n      return s.filter = this.getFilters(!0, !0), s;\n    }\n    generatePlaceholder(e) {\n      if (this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length) return this.table.options.placeholderHeaderFilter;\n    }\n    userSetFilter(e, t, i, s) {\n      this.setFilter(e, t, i, s), this.refreshFilter();\n    }\n    userRefreshFilter() {\n      this.refreshFilter();\n    }\n    userAddFilter(e, t, i, s) {\n      this.addFilter(e, t, i, s), this.refreshFilter();\n    }\n    userSetHeaderFilterFocus(e) {\n      var t = this.table.columnManager.findColumn(e);\n      if (!t) return console.warn(\"Column Filter Focus Error - No matching column found:\", e), !1;\n      this.setHeaderFilterFocus(t);\n    }\n    userGetHeaderFilterValue(e) {\n      var t = this.table.columnManager.findColumn(e);\n      if (t) return this.getHeaderFilterValue(t);\n      console.warn(\"Column Filter Error - No matching column found:\", e);\n    }\n    userSetHeaderFilterValue(e, t) {\n      var i = this.table.columnManager.findColumn(e);\n      if (!i) return console.warn(\"Column Filter Error - No matching column found:\", e), !1;\n      this.setHeaderFilterValue(i, t);\n    }\n    userRemoveFilter(e, t, i) {\n      this.removeFilter(e, t, i), this.refreshFilter();\n    }\n    userClearFilter(e) {\n      this.clearFilter(e), this.refreshFilter();\n    }\n    userClearHeaderFilter() {\n      this.clearHeaderFilter(), this.refreshFilter();\n    }\n    searchRows(e, t, i) {\n      return this.search(\"rows\", e, t, i);\n    }\n    searchData(e, t, i) {\n      return this.search(\"data\", e, t, i);\n    }\n    initializeColumnHeaderFilter(e) {\n      e.definition.headerFilter && this.initializeColumn(e);\n    }\n    initializeColumn(e, t) {\n      var i = this,\n        s = e.getField();\n      e.modules.filter = {\n        success: function (t) {\n          var o,\n            n = \"input\" == e.modules.filter.tagType && \"text\" == e.modules.filter.attrType || \"textarea\" == e.modules.filter.tagType ? \"partial\" : \"match\",\n            r = \"\",\n            a = \"\";\n          if (void 0 === e.modules.filter.prevSuccess || e.modules.filter.prevSuccess !== t) {\n            if (e.modules.filter.prevSuccess = t, e.modules.filter.emptyFunc(t)) delete i.headerFilters[s];else {\n              switch (e.modules.filter.value = t, typeof e.definition.headerFilterFunc) {\n                case \"string\":\n                  me.filters[e.definition.headerFilterFunc] ? (r = e.definition.headerFilterFunc, o = function (i) {\n                    var s = e.definition.headerFilterFuncParams || {},\n                      o = e.getFieldValue(i);\n                    return s = \"function\" == typeof s ? s(t, o, i) : s, me.filters[e.definition.headerFilterFunc](t, o, i, s);\n                  }) : console.warn(\"Header Filter Error - Matching filter function not found: \", e.definition.headerFilterFunc);\n                  break;\n                case \"function\":\n                  r = o = function (i) {\n                    var s = e.definition.headerFilterFuncParams || {},\n                      o = e.getFieldValue(i);\n                    return s = \"function\" == typeof s ? s(t, o, i) : s, e.definition.headerFilterFunc(t, o, i, s);\n                  };\n              }\n              if (!o) if (\"partial\" === n) o = function (i) {\n                var s = e.getFieldValue(i);\n                return null != s && String(s).toLowerCase().indexOf(String(t).toLowerCase()) > -1;\n              }, r = \"like\";else o = function (i) {\n                return e.getFieldValue(i) == t;\n              }, r = \"=\";\n              i.headerFilters[s] = {\n                value: t,\n                func: o,\n                type: r\n              };\n            }\n            e.modules.filter.value = t, a = JSON.stringify(i.headerFilters), i.prevHeaderFilterChangeCheck !== a && (i.prevHeaderFilterChangeCheck = a, i.trackChanges(), i.refreshFilter());\n          }\n          return !0;\n        },\n        attrType: !1,\n        tagType: !1,\n        emptyFunc: !1\n      }, this.generateHeaderFilterElement(e);\n    }\n    generateHeaderFilterElement(e, t, i) {\n      var s,\n        o,\n        n,\n        r,\n        a,\n        l,\n        h,\n        d,\n        c = this,\n        u = e.modules.filter.success,\n        m = e.getField();\n      if (e.modules.filter.value = t, e.modules.filter.headerElement && e.modules.filter.headerElement.parentNode && e.contentElement.removeChild(e.modules.filter.headerElement.parentNode), m) {\n        switch (e.modules.filter.emptyFunc = e.definition.headerFilterEmptyCheck || function (e) {\n          return !e && 0 !== e;\n        }, (s = document.createElement(\"div\")).classList.add(\"tabulator-header-filter\"), typeof e.definition.headerFilter) {\n          case \"string\":\n            c.table.modules.edit.editors[e.definition.headerFilter] ? (o = c.table.modules.edit.editors[e.definition.headerFilter], \"tick\" !== e.definition.headerFilter && \"tickCross\" !== e.definition.headerFilter || e.definition.headerFilterEmptyCheck || (e.modules.filter.emptyFunc = function (e) {\n              return !0 !== e && !1 !== e;\n            })) : console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", e.definition.editor);\n            break;\n          case \"function\":\n            o = e.definition.headerFilter;\n            break;\n          case \"boolean\":\n            e.modules.edit && e.modules.edit.editor ? o = e.modules.edit.editor : e.definition.formatter && c.table.modules.edit.editors[e.definition.formatter] ? (o = c.table.modules.edit.editors[e.definition.formatter], \"tick\" !== e.definition.formatter && \"tickCross\" !== e.definition.formatter || e.definition.headerFilterEmptyCheck || (e.modules.filter.emptyFunc = function (e) {\n              return !0 !== e && !1 !== e;\n            })) : o = c.table.modules.edit.editors.input;\n        }\n        if (o) {\n          if (r = {\n            getValue: function () {\n              return void 0 !== t ? t : \"\";\n            },\n            getField: function () {\n              return e.definition.field;\n            },\n            getElement: function () {\n              return s;\n            },\n            getColumn: function () {\n              return e.getComponent();\n            },\n            getTable: () => this.table,\n            getType: () => \"header\",\n            getRow: function () {\n              return {\n                normalizeHeight: function () {}\n              };\n            }\n          }, h = \"function\" == typeof (h = e.definition.headerFilterParams || {}) ? h.call(c.table, r) : h, !(n = o.call(this.table.modules.edit, r, function (e) {\n            d = e;\n          }, u, function () {}, h))) return void console.warn(\"Filter Error - Cannot add filter to \" + m + \" column, editor returned a value of false\");\n          if (!(n instanceof Node)) return void console.warn(\"Filter Error - Cannot add filter to \" + m + \" column, editor should return an instance of Node, the editor returned:\", n);\n          c.langBind(\"headerFilters|columns|\" + e.definition.field, function (t) {\n            n.setAttribute(\"placeholder\", void 0 !== t && t ? t : e.definition.headerFilterPlaceholder || c.langText(\"headerFilters|default\"));\n          }), n.addEventListener(\"click\", function (e) {\n            e.stopPropagation(), n.focus();\n          }), n.addEventListener(\"focus\", e => {\n            var t = this.table.columnManager.contentsElement.scrollLeft;\n            t !== this.table.rowManager.element.scrollLeft && (this.table.rowManager.scrollHorizontal(t), this.table.columnManager.scrollHorizontal(t));\n          }), a = !1, l = function (e) {\n            a && clearTimeout(a), a = setTimeout(function () {\n              u(n.value);\n            }, c.table.options.headerFilterLiveFilterDelay);\n          }, e.modules.filter.headerElement = n, e.modules.filter.attrType = n.hasAttribute(\"type\") ? n.getAttribute(\"type\").toLowerCase() : \"\", e.modules.filter.tagType = n.tagName.toLowerCase(), !1 !== e.definition.headerFilterLiveFilter && (\"autocomplete\" !== e.definition.headerFilter && \"tickCross\" !== e.definition.headerFilter && (\"autocomplete\" !== e.definition.editor && \"tickCross\" !== e.definition.editor || !0 !== e.definition.headerFilter) && (n.addEventListener(\"keyup\", l), n.addEventListener(\"search\", l), \"number\" == e.modules.filter.attrType && n.addEventListener(\"change\", function (e) {\n            u(n.value);\n          }), \"text\" == e.modules.filter.attrType && \"ie\" !== this.table.browser && n.setAttribute(\"type\", \"search\")), \"input\" != e.modules.filter.tagType && \"select\" != e.modules.filter.tagType && \"textarea\" != e.modules.filter.tagType || n.addEventListener(\"mousedown\", function (e) {\n            e.stopPropagation();\n          })), s.appendChild(n), e.contentElement.appendChild(s), i || c.headerFilterColumns.push(e), d && d();\n        }\n      } else console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", e.definition.title);\n    }\n    hideHeaderFilterElements() {\n      this.headerFilterColumns.forEach(function (e) {\n        e.modules.filter && e.modules.filter.headerElement && (e.modules.filter.headerElement.style.display = \"none\");\n      });\n    }\n    showHeaderFilterElements() {\n      this.headerFilterColumns.forEach(function (e) {\n        e.modules.filter && e.modules.filter.headerElement && (e.modules.filter.headerElement.style.display = \"\");\n      });\n    }\n    setHeaderFilterFocus(e) {\n      e.modules.filter && e.modules.filter.headerElement ? e.modules.filter.headerElement.focus() : console.warn(\"Column Filter Focus Error - No header filter set on column:\", e.getField());\n    }\n    getHeaderFilterValue(e) {\n      if (e.modules.filter && e.modules.filter.headerElement) return e.modules.filter.value;\n      console.warn(\"Column Filter Error - No header filter set on column:\", e.getField());\n    }\n    setHeaderFilterValue(e, t) {\n      e && (e.modules.filter && e.modules.filter.headerElement ? (this.generateHeaderFilterElement(e, t, !0), e.modules.filter.success(t)) : console.warn(\"Column Filter Error - No header filter set on column:\", e.getField()));\n    }\n    reloadHeaderFilter(e) {\n      e && (e.modules.filter && e.modules.filter.headerElement ? this.generateHeaderFilterElement(e, e.modules.filter.value, !0) : console.warn(\"Column Filter Error - No header filter set on column:\", e.getField()));\n    }\n    refreshFilter() {\n      this.tableInitialized && (\"remote\" === this.table.options.filterMode ? this.reloadData(null, !1, !1) : this.refreshData(!0));\n    }\n    trackChanges() {\n      this.changed = !0, this.dispatch(\"filter-changed\");\n    }\n    hasChanged() {\n      var e = this.changed;\n      return this.changed = !1, e;\n    }\n    setFilter(e, t, i, s) {\n      this.filterList = [], Array.isArray(e) || (e = [{\n        field: e,\n        type: t,\n        value: i,\n        params: s\n      }]), this.addFilter(e);\n    }\n    addFilter(e, t, i, s) {\n      var o = !1;\n      Array.isArray(e) || (e = [{\n        field: e,\n        type: t,\n        value: i,\n        params: s\n      }]), e.forEach(e => {\n        (e = this.findFilter(e)) && (this.filterList.push(e), o = !0);\n      }), o && this.trackChanges();\n    }\n    findFilter(e) {\n      var t;\n      if (Array.isArray(e)) return this.findSubFilters(e);\n      var i = !1;\n      return \"function\" == typeof e.field ? i = function (t) {\n        return e.field(t, e.type || {});\n      } : me.filters[e.type] ? i = (t = this.table.columnManager.getColumnByField(e.field)) ? function (i) {\n        return me.filters[e.type](e.value, t.getFieldValue(i), i, e.params || {});\n      } : function (t) {\n        return me.filters[e.type](e.value, t[e.field], t, e.params || {});\n      } : console.warn(\"Filter Error - No such filter type found, ignoring: \", e.type), e.func = i, !!e.func && e;\n    }\n    findSubFilters(e) {\n      var t = [];\n      return e.forEach(e => {\n        (e = this.findFilter(e)) && t.push(e);\n      }), !!t.length && t;\n    }\n    getFilters(e, t) {\n      var i = [];\n      return e && (i = this.getHeaderFilters()), t && i.forEach(function (e) {\n        \"function\" == typeof e.type && (e.type = \"function\");\n      }), i = i.concat(this.filtersToArray(this.filterList, t));\n    }\n    filtersToArray(e, t) {\n      var i = [];\n      return e.forEach(e => {\n        var s;\n        Array.isArray(e) ? i.push(this.filtersToArray(e, t)) : (s = {\n          field: e.field,\n          type: e.type,\n          value: e.value\n        }, t && \"function\" == typeof s.type && (s.type = \"function\"), i.push(s));\n      }), i;\n    }\n    getHeaderFilters() {\n      var e = [];\n      for (var t in this.headerFilters) e.push({\n        field: t,\n        type: this.headerFilters[t].type,\n        value: this.headerFilters[t].value\n      });\n      return e;\n    }\n    removeFilter(e, t, i) {\n      Array.isArray(e) || (e = [{\n        field: e,\n        type: t,\n        value: i\n      }]), e.forEach(e => {\n        var t = -1;\n        (t = \"object\" == typeof e.field ? this.filterList.findIndex(t => e === t) : this.filterList.findIndex(t => e.field === t.field && e.type === t.type && e.value === t.value)) > -1 ? this.filterList.splice(t, 1) : console.warn(\"Filter Error - No matching filter type found, ignoring: \", e.type);\n      }), this.trackChanges();\n    }\n    clearFilter(e) {\n      this.filterList = [], e && this.clearHeaderFilter(), this.trackChanges();\n    }\n    clearHeaderFilter() {\n      this.headerFilters = {}, this.prevHeaderFilterChangeCheck = \"{}\", this.headerFilterColumns.forEach(e => {\n        void 0 !== e.modules.filter.value && delete e.modules.filter.value, e.modules.filter.prevSuccess = void 0, this.reloadHeaderFilter(e);\n      }), this.trackChanges();\n    }\n    search(e, t, i, s) {\n      var o = [],\n        n = [];\n      return Array.isArray(t) || (t = [{\n        field: t,\n        type: i,\n        value: s\n      }]), t.forEach(e => {\n        (e = this.findFilter(e)) && n.push(e);\n      }), this.table.rowManager.rows.forEach(t => {\n        var i = !0;\n        n.forEach(e => {\n          this.filterRecurse(e, t.getData()) || (i = !1);\n        }), i && o.push(\"data\" === e ? t.getData(\"data\") : t.getComponent());\n      }), o;\n    }\n    filter(e, t) {\n      var i = [],\n        s = [];\n      return this.subscribedExternal(\"dataFiltering\") && this.dispatchExternal(\"dataFiltering\", this.getFilters(!0)), \"remote\" !== this.table.options.filterMode && (this.filterList.length || Object.keys(this.headerFilters).length) ? e.forEach(e => {\n        this.filterRow(e) && i.push(e);\n      }) : i = e.slice(0), this.subscribedExternal(\"dataFiltered\") && (i.forEach(e => {\n        s.push(e.getComponent());\n      }), this.dispatchExternal(\"dataFiltered\", this.getFilters(!0), s)), i;\n    }\n    filterRow(e, t) {\n      var i = !0,\n        s = e.getData();\n      for (var o in this.filterList.forEach(e => {\n        this.filterRecurse(e, s) || (i = !1);\n      }), this.headerFilters) this.headerFilters[o].func(s) || (i = !1);\n      return i;\n    }\n    filterRecurse(e, t) {\n      var i = !1;\n      return Array.isArray(e) ? e.forEach(e => {\n        this.filterRecurse(e, t) && (i = !0);\n      }) : i = e.func(t), i;\n    }\n  }\n  _defineProperty(me, \"moduleName\", \"filter\");\n  _defineProperty(me, \"filters\", ue);\n  var pe = {\n    plaintext: function (e, t, i) {\n      return this.emptyToSpace(this.sanitizeHTML(e.getValue()));\n    },\n    html: function (e, t, i) {\n      return e.getValue();\n    },\n    textarea: function (e, t, i) {\n      return e.getElement().style.whiteSpace = \"pre-wrap\", this.emptyToSpace(this.sanitizeHTML(e.getValue()));\n    },\n    money: function (e, t, i) {\n      var s,\n        o,\n        n,\n        r,\n        a,\n        l = parseFloat(e.getValue()),\n        h = \"\",\n        d = t.decimal || \".\",\n        c = t.thousand || \",\",\n        u = t.negativeSign || \"-\",\n        m = t.symbol || \"\",\n        p = !!t.symbolAfter,\n        g = void 0 !== t.precision ? t.precision : 2;\n      if (isNaN(l)) return this.emptyToSpace(this.sanitizeHTML(e.getValue()));\n      if (l < 0 && (l = Math.abs(l), h = u), s = !1 !== g ? l.toFixed(g) : l, o = (s = String(s).split(\".\"))[0], n = s.length > 1 ? d + s[1] : \"\", !1 !== t.thousand) for (r = /(\\d+)(\\d{3})/; r.test(o);) o = o.replace(r, \"$1\" + c + \"$2\");\n      return a = o + n, !0 === h ? (a = \"(\" + a + \")\", p ? a + m : m + a) : p ? h + a + m : h + m + a;\n    },\n    link: function (e, t, i) {\n      var s,\n        o = e.getValue(),\n        n = t.urlPrefix || \"\",\n        r = t.download,\n        l = o,\n        h = document.createElement(\"a\");\n      if (t.labelField && (s = e.getData(), l = function e(t, i) {\n        var s = i[t.shift()];\n        return t.length && \"object\" == typeof s ? e(t, s) : s;\n      }(t.labelField.split(this.table.options.nestedFieldSeparator), s)), t.label) switch (typeof t.label) {\n        case \"string\":\n          l = t.label;\n          break;\n        case \"function\":\n          l = t.label(e);\n      }\n      if (l) {\n        if (t.urlField && (s = e.getData(), o = a.retrieveNestedData(this.table.options.nestedFieldSeparator, t.urlField, s)), t.url) switch (typeof t.url) {\n          case \"string\":\n            o = t.url;\n            break;\n          case \"function\":\n            o = t.url(e);\n        }\n        return h.setAttribute(\"href\", n + o), t.target && h.setAttribute(\"target\", t.target), t.download && (r = \"function\" == typeof r ? r(e) : !0 === r ? \"\" : r, h.setAttribute(\"download\", r)), h.innerHTML = this.emptyToSpace(this.sanitizeHTML(l)), h;\n      }\n      return \"&nbsp;\";\n    },\n    image: function (e, t, i) {\n      var s = document.createElement(\"img\"),\n        o = e.getValue();\n      switch (t.urlPrefix && (o = t.urlPrefix + e.getValue()), t.urlSuffix && (o += t.urlSuffix), s.setAttribute(\"src\", o), typeof t.height) {\n        case \"number\":\n          s.style.height = t.height + \"px\";\n          break;\n        case \"string\":\n          s.style.height = t.height;\n      }\n      switch (typeof t.width) {\n        case \"number\":\n          s.style.width = t.width + \"px\";\n          break;\n        case \"string\":\n          s.style.width = t.width;\n      }\n      return s.addEventListener(\"load\", function () {\n        e.getRow().normalizeHeight();\n      }), s;\n    },\n    tickCross: function (e, t, i) {\n      var s = e.getValue(),\n        o = e.getElement(),\n        n = t.allowEmpty,\n        r = t.allowTruthy,\n        a = Object.keys(t).includes(\"trueValue\"),\n        l = void 0 !== t.tickElement ? t.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n        h = void 0 !== t.crossElement ? t.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n      return a && s === t.trueValue || !a && (r && s || !0 === s || \"true\" === s || \"True\" === s || 1 === s || \"1\" === s) ? (o.setAttribute(\"aria-checked\", !0), l || \"\") : !n || \"null\" !== s && \"\" !== s && null != s ? (o.setAttribute(\"aria-checked\", !1), h || \"\") : (o.setAttribute(\"aria-checked\", \"mixed\"), \"\");\n    },\n    datetime: function (e, t, i) {\n      var s,\n        o = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\"),\n        n = t.inputFormat || \"yyyy-MM-dd HH:mm:ss\",\n        r = t.outputFormat || \"dd/MM/yyyy HH:mm:ss\",\n        a = void 0 !== t.invalidPlaceholder ? t.invalidPlaceholder : \"\",\n        l = e.getValue();\n      if (void 0 !== o) return (s = o.isDateTime(l) ? l : \"iso\" === n ? o.fromISO(String(l)) : o.fromFormat(String(l), n)).isValid ? (t.timezone && (s = s.setZone(t.timezone)), s.toFormat(r)) : !0 !== a && l ? \"function\" == typeof a ? a(l) : a : l;\n      console.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n    },\n    datetimediff: function (e, t, i) {\n      var s,\n        o = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\"),\n        n = t.inputFormat || \"yyyy-MM-dd HH:mm:ss\",\n        r = void 0 !== t.invalidPlaceholder ? t.invalidPlaceholder : \"\",\n        a = void 0 !== t.suffix && t.suffix,\n        l = void 0 !== t.unit ? t.unit : \"days\",\n        h = void 0 !== t.humanize && t.humanize,\n        d = void 0 !== t.date ? t.date : o.now(),\n        c = e.getValue();\n      if (void 0 !== o) return (s = o.isDateTime(c) ? c : \"iso\" === n ? o.fromISO(String(c)) : o.fromFormat(String(c), n)).isValid ? h ? s.diff(d, l).toHuman() + (a ? \" \" + a : \"\") : parseInt(s.diff(d, l)[l]) + (a ? \" \" + a : \"\") : !0 === r ? c : \"function\" == typeof r ? r(c) : r;\n      console.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n    },\n    lookup: function (e, t, i) {\n      var s = e.getValue();\n      return void 0 === t[s] ? (console.warn(\"Missing display value for \" + s), s) : t[s];\n    },\n    star: function (e, t, i) {\n      var s = e.getValue(),\n        o = e.getElement(),\n        n = t && t.stars ? t.stars : 5,\n        r = document.createElement(\"span\"),\n        a = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      r.style.verticalAlign = \"middle\", a.setAttribute(\"width\", \"14\"), a.setAttribute(\"height\", \"14\"), a.setAttribute(\"viewBox\", \"0 0 512 512\"), a.setAttribute(\"xml:space\", \"preserve\"), a.style.padding = \"0 1px\", s = s && !isNaN(s) ? parseInt(s) : 0, s = Math.max(0, Math.min(s, n));\n      for (var l = 1; l <= n; l++) {\n        var h = a.cloneNode(!0);\n        h.innerHTML = l <= s ? '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>' : '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>', r.appendChild(h);\n      }\n      return o.style.whiteSpace = \"nowrap\", o.style.overflow = \"hidden\", o.style.textOverflow = \"ellipsis\", o.setAttribute(\"aria-label\", s), r;\n    },\n    traffic: function (e, t, i) {\n      var s,\n        o,\n        n = this.sanitizeHTML(e.getValue()) || 0,\n        r = document.createElement(\"span\"),\n        a = t && t.max ? t.max : 100,\n        l = t && t.min ? t.min : 0,\n        h = t && void 0 !== t.color ? t.color : [\"red\", \"orange\", \"green\"],\n        d = \"#666666\";\n      if (!isNaN(n) && void 0 !== e.getValue()) {\n        switch (r.classList.add(\"tabulator-traffic-light\"), o = parseFloat(n) <= a ? parseFloat(n) : a, o = parseFloat(o) >= l ? parseFloat(o) : l, s = (a - l) / 100, o = Math.round((o - l) / s), typeof h) {\n          case \"string\":\n            d = h;\n            break;\n          case \"function\":\n            d = h(n);\n            break;\n          case \"object\":\n            if (Array.isArray(h)) {\n              var c = 100 / h.length,\n                u = Math.floor(o / c);\n              u = Math.min(u, h.length - 1), d = h[u = Math.max(u, 0)];\n              break;\n            }\n        }\n        return r.style.backgroundColor = d, r;\n      }\n    },\n    progress: function (e, t = {}, i) {\n      var s,\n        n,\n        r,\n        a,\n        l,\n        h = this.sanitizeHTML(e.getValue()) || 0,\n        d = e.getElement(),\n        c = t.max ? t.max : 100,\n        u = t.min ? t.min : 0,\n        m = t.legendAlign ? t.legendAlign : \"center\";\n      switch (n = parseFloat(h) <= c ? parseFloat(h) : c, n = parseFloat(n) >= u ? parseFloat(n) : u, s = (c - u) / 100, n = Math.round((n - u) / s), typeof t.color) {\n        case \"string\":\n          r = t.color;\n          break;\n        case \"function\":\n          r = t.color(h);\n          break;\n        case \"object\":\n          if (Array.isArray(t.color)) {\n            let e = 100 / t.color.length,\n              i = Math.floor(n / e);\n            i = Math.min(i, t.color.length - 1), i = Math.max(i, 0), r = t.color[i];\n            break;\n          }\n        default:\n          r = \"#2DC214\";\n      }\n      switch (typeof t.legend) {\n        case \"string\":\n          a = t.legend;\n          break;\n        case \"function\":\n          a = t.legend(h);\n          break;\n        case \"boolean\":\n          a = h;\n          break;\n        default:\n          a = !1;\n      }\n      switch (typeof t.legendColor) {\n        case \"string\":\n          l = t.legendColor;\n          break;\n        case \"function\":\n          l = t.legendColor(h);\n          break;\n        case \"object\":\n          if (Array.isArray(t.legendColor)) {\n            let e = 100 / t.legendColor.length,\n              i = Math.floor(n / e);\n            i = Math.min(i, t.legendColor.length - 1), i = Math.max(i, 0), l = t.legendColor[i];\n          }\n          break;\n        default:\n          l = \"#000\";\n      }\n      d.style.minWidth = \"30px\", d.style.position = \"relative\", d.setAttribute(\"aria-label\", n);\n      var p = document.createElement(\"div\");\n      p.style.display = \"inline-block\", p.style.width = n + \"%\", p.style.backgroundColor = r, p.style.height = \"100%\", p.setAttribute(\"data-max\", c), p.setAttribute(\"data-min\", u);\n      var g = document.createElement(\"div\");\n      if (g.style.position = \"relative\", g.style.width = \"100%\", g.style.height = \"100%\", a) {\n        var b = document.createElement(\"div\");\n        b.style.position = \"absolute\", b.style.top = 0, b.style.left = 0, b.style.textAlign = m, b.style.width = \"100%\", b.style.color = l, b.innerHTML = a;\n      }\n      return i(function () {\n        if (!(e instanceof o)) {\n          var t = document.createElement(\"div\");\n          t.style.position = \"absolute\", t.style.top = \"4px\", t.style.bottom = \"4px\", t.style.left = \"4px\", t.style.right = \"4px\", d.appendChild(t), d = t;\n        }\n        d.appendChild(g), g.appendChild(p), a && g.appendChild(b);\n      }), \"\";\n    },\n    color: function (e, t, i) {\n      return e.getElement().style.backgroundColor = this.sanitizeHTML(e.getValue()), \"\";\n    },\n    buttonTick: function (e, t, i) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n    },\n    buttonCross: function (e, t, i) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n    },\n    toggle: function (e, t, i) {\n      var s,\n        o,\n        n = e.getValue(),\n        r = t.size || 15,\n        a = r + \"px\",\n        l = !t.hasOwnProperty(\"onValue\") || t.onValue,\n        h = !!t.hasOwnProperty(\"offValue\") && t.offValue,\n        d = t.onTruthy ? n : n === l;\n      return (s = document.createElement(\"div\")).classList.add(\"tabulator-toggle\"), d ? (s.classList.add(\"tabulator-toggle-on\"), s.style.flexDirection = \"row-reverse\", t.onColor && (s.style.background = t.onColor)) : t.offColor && (s.style.background = t.offColor), s.style.width = 2.5 * r + \"px\", s.style.borderRadius = a, t.clickable && s.addEventListener(\"click\", t => {\n        e.setValue(d ? h : l);\n      }), (o = document.createElement(\"div\")).classList.add(\"tabulator-toggle-switch\"), o.style.height = a, o.style.width = a, o.style.borderRadius = a, s.appendChild(o), s;\n    },\n    rownum: function (e, t, i) {\n      var s = document.createElement(\"span\"),\n        o = e.getRow(),\n        n = e.getTable();\n      return o.watchPosition(e => {\n        t.relativeToPage && (e += n.modules.page.getPageSize() * (n.modules.page.getPage() - 1)), s.innerText = e;\n      }), s;\n    },\n    handle: function (e, t, i) {\n      return e.getElement().classList.add(\"tabulator-row-handle\"), \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n    },\n    adaptable: function (e, t, i) {\n      var s, o;\n      return s = t.formatterLookup ? t.formatterLookup(e) : function (e) {\n        var t = e.getValue(),\n          i = \"plaintext\";\n        switch (typeof t) {\n          case \"boolean\":\n            i = \"tickCross\";\n            break;\n          case \"string\":\n            t.includes(\"\\n\") && (i = \"textarea\");\n        }\n        return i;\n      }(e), t.paramsLookup && (o = \"function\" == typeof t.paramsLookup ? t.paramsLookup(s, e) : t.paramsLookup[s]), this.table.modules.format.lookupFormatter(s).call(this, e, o || {}, i);\n    },\n    array: function (e, t, i) {\n      var s,\n        o = t.delimiter || \",\",\n        n = e.getValue(),\n        r = this.table;\n      return t.valueMap && (s = \"string\" == typeof t.valueMap ? function (e) {\n        return e.map(e => a.retrieveNestedData(r.options.nestedFieldSeparator, t.valueMap, e));\n      } : t.valueMap), Array.isArray(n) ? (s && (n = s(n)), n.join(o)) : n;\n    },\n    json: function (e, t, i) {\n      var s = t.indent || \"\\t\",\n        o = void 0 === t.multiline || t.multiline,\n        n = t.replacer || null,\n        r = e.getValue();\n      return o && (e.getElement().style.whiteSpace = \"pre-wrap\"), JSON.stringify(r, n, s);\n    }\n  };\n  class ge extends M {\n    constructor(e) {\n      super(e), this.registerColumnOption(\"formatter\"), this.registerColumnOption(\"formatterParams\"), this.registerColumnOption(\"formatterPrint\"), this.registerColumnOption(\"formatterPrintParams\"), this.registerColumnOption(\"formatterClipboard\"), this.registerColumnOption(\"formatterClipboardParams\"), this.registerColumnOption(\"formatterHtmlOutput\"), this.registerColumnOption(\"formatterHtmlOutputParams\"), this.registerColumnOption(\"titleFormatter\"), this.registerColumnOption(\"titleFormatterParams\");\n    }\n    initialize() {\n      this.subscribe(\"cell-format\", this.formatValue.bind(this)), this.subscribe(\"cell-rendered\", this.cellRendered.bind(this)), this.subscribe(\"column-layout\", this.initializeColumn.bind(this)), this.subscribe(\"column-format\", this.formatHeader.bind(this));\n    }\n    initializeColumn(e) {\n      e.modules.format = this.lookupTypeFormatter(e, \"\"), void 0 !== e.definition.formatterPrint && (e.modules.format.print = this.lookupTypeFormatter(e, \"Print\")), void 0 !== e.definition.formatterClipboard && (e.modules.format.clipboard = this.lookupTypeFormatter(e, \"Clipboard\")), void 0 !== e.definition.formatterHtmlOutput && (e.modules.format.htmlOutput = this.lookupTypeFormatter(e, \"HtmlOutput\"));\n    }\n    lookupTypeFormatter(e, t) {\n      var i = {\n          params: e.definition[\"formatter\" + t + \"Params\"] || {}\n        },\n        s = e.definition[\"formatter\" + t];\n      return i.formatter = this.lookupFormatter(s), i;\n    }\n    lookupFormatter(e) {\n      var t;\n      switch (typeof e) {\n        case \"string\":\n          ge.formatters[e] ? t = ge.formatters[e] : (console.warn(\"Formatter Error - No such formatter found: \", e), t = ge.formatters.plaintext);\n          break;\n        case \"function\":\n          t = e;\n          break;\n        default:\n          t = ge.formatters.plaintext;\n      }\n      return t;\n    }\n    cellRendered(e) {\n      e.modules.format && e.modules.format.renderedCallback && !e.modules.format.rendered && (e.modules.format.renderedCallback(), e.modules.format.rendered = !0);\n    }\n    formatHeader(e, t, i) {\n      var s, o, n, r;\n      return e.definition.titleFormatter ? (s = this.lookupFormatter(e.definition.titleFormatter), n = t => {\n        e.titleFormatterRendered = t;\n      }, r = {\n        getValue: function () {\n          return t;\n        },\n        getElement: function () {\n          return i;\n        },\n        getType: function () {\n          return \"header\";\n        },\n        getColumn: function () {\n          return e.getComponent();\n        },\n        getTable: () => this.table\n      }, o = \"function\" == typeof (o = e.definition.titleFormatterParams || {}) ? o() : o, s.call(this, r, o, n)) : t;\n    }\n    formatValue(e) {\n      var t = e.getComponent(),\n        i = \"function\" == typeof e.column.modules.format.params ? e.column.modules.format.params(t) : e.column.modules.format.params;\n      return e.column.modules.format.formatter.call(this, t, i, function (t) {\n        e.modules.format || (e.modules.format = {}), e.modules.format.renderedCallback = t, e.modules.format.rendered = !1;\n      });\n    }\n    formatExportValue(e, t) {\n      var i,\n        s = e.column.modules.format[t];\n      if (s) {\n        function o(t) {\n          e.modules.format || (e.modules.format = {}), e.modules.format.renderedCallback = t, e.modules.format.rendered = !1;\n        }\n        return i = \"function\" == typeof s.params ? s.params(e.getComponent()) : s.params, s.formatter.call(this, e.getComponent(), i, o);\n      }\n      return this.formatValue(e);\n    }\n    sanitizeHTML(e) {\n      if (e) {\n        var t = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#39;\",\n          \"/\": \"&#x2F;\",\n          \"`\": \"&#x60;\",\n          \"=\": \"&#x3D;\"\n        };\n        return String(e).replace(/[&<>\"'`=/]/g, function (e) {\n          return t[e];\n        });\n      }\n      return e;\n    }\n    emptyToSpace(e) {\n      return null == e || \"\" === e ? \"&nbsp;\" : e;\n    }\n  }\n  _defineProperty(ge, \"moduleName\", \"format\");\n  _defineProperty(ge, \"formatters\", pe);\n  class be {\n    constructor(e) {\n      return this._group = e, this.type = \"GroupComponent\", new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._group.groupManager.table.componentFunctionBinder.handle(\"group\", e._group, t);\n        }\n      });\n    }\n    getKey() {\n      return this._group.key;\n    }\n    getField() {\n      return this._group.field;\n    }\n    getElement() {\n      return this._group.element;\n    }\n    getRows() {\n      return this._group.getRows(!0);\n    }\n    getSubGroups() {\n      return this._group.getSubGroups(!0);\n    }\n    getParentGroup() {\n      return !!this._group.parent && this._group.parent.getComponent();\n    }\n    isVisible() {\n      return this._group.visible;\n    }\n    show() {\n      this._group.show();\n    }\n    hide() {\n      this._group.hide();\n    }\n    toggle() {\n      this._group.toggleVisibility();\n    }\n    scrollTo(e, t) {\n      return this._group.groupManager.table.rowManager.scrollToRow(this._group, e, t);\n    }\n    _getSelf() {\n      return this._group;\n    }\n    getTable() {\n      return this._group.groupManager.table;\n    }\n  }\n  class fe {\n    constructor(e, t, i, s, o, n, r) {\n      this.groupManager = e, this.parent = t, this.key = s, this.level = i, this.field = o, this.hasSubGroups = i < e.groupIDLookups.length - 1, this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow, this.type = \"group\", this.old = r, this.rows = [], this.groups = [], this.groupList = [], this.generator = n, this.element = !1, this.elementContents = !1, this.height = 0, this.outerHeight = 0, this.initialized = !1, this.calcs = {}, this.initialized = !1, this.modules = {}, this.arrowElement = !1, this.visible = r ? r.visible : void 0 !== e.startOpen[i] ? e.startOpen[i] : e.startOpen[0], this.component = null, this.createElements(), this.addBindings(), this.createValueGroups();\n    }\n    wipe(e) {\n      e || (this.groupList.length ? this.groupList.forEach(function (e) {\n        e.wipe();\n      }) : this.rows.forEach(e => {\n        e.modules && delete e.modules.group;\n      })), this.element = !1, this.arrowElement = !1, this.elementContents = !1;\n    }\n    createElements() {\n      var e = document.createElement(\"div\");\n      e.classList.add(\"tabulator-arrow\"), this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-row\"), this.element.classList.add(\"tabulator-group\"), this.element.classList.add(\"tabulator-group-level-\" + this.level), this.element.setAttribute(\"role\", \"rowgroup\"), this.arrowElement = document.createElement(\"div\"), this.arrowElement.classList.add(\"tabulator-group-toggle\"), this.arrowElement.appendChild(e), !1 !== this.groupManager.table.options.movableRows && this.groupManager.table.modExists(\"moveRow\") && this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n    }\n    createValueGroups() {\n      var e = this.level + 1;\n      this.groupManager.allowedValues && this.groupManager.allowedValues[e] && this.groupManager.allowedValues[e].forEach(t => {\n        this._createGroup(t, e);\n      });\n    }\n    addBindings() {\n      this.groupManager.table.options.groupToggleElement && (\"arrow\" == this.groupManager.table.options.groupToggleElement ? this.arrowElement : this.element).addEventListener(\"click\", e => {\n        \"arrow\" === this.groupManager.table.options.groupToggleElement && (e.stopPropagation(), e.stopImmediatePropagation()), setTimeout(() => {\n          this.toggleVisibility();\n        });\n      });\n    }\n    _createGroup(e, t) {\n      var i = t + \"_\" + e,\n        s = new fe(this.groupManager, this, t, e, this.groupManager.groupIDLookups[t].field, this.groupManager.headerGenerator[t] || this.groupManager.headerGenerator[0], !!this.old && this.old.groups[i]);\n      this.groups[i] = s, this.groupList.push(s);\n    }\n    _addRowToGroup(e) {\n      var t = this.level + 1;\n      if (this.hasSubGroups) {\n        var i = this.groupManager.groupIDLookups[t].func(e.getData()),\n          s = t + \"_\" + i;\n        this.groupManager.allowedValues && this.groupManager.allowedValues[t] ? this.groups[s] && this.groups[s].addRow(e) : (this.groups[s] || this._createGroup(i, t), this.groups[s].addRow(e));\n      }\n    }\n    _addRow(e) {\n      this.rows.push(e), e.modules.group = this;\n    }\n    insertRow(e, t, i) {\n      var s = this.conformRowData({});\n      e.updateData(s);\n      var o = this.rows.indexOf(t);\n      o > -1 ? i ? this.rows.splice(o + 1, 0, e) : this.rows.splice(o, 0, e) : i ? this.rows.push(e) : this.rows.unshift(e), e.modules.group = this, this.groupManager.table.modExists(\"columnCalcs\") && \"table\" != this.groupManager.table.options.columnCalcs && this.groupManager.table.modules.columnCalcs.recalcGroup(this), this.groupManager.updateGroupRows(!0);\n    }\n    scrollHeader(e) {\n      this.arrowElement && (this.arrowElement.style.marginLeft = e, this.groupList.forEach(function (t) {\n        t.scrollHeader(e);\n      }));\n    }\n    getRowIndex(e) {}\n    conformRowData(e) {\n      return this.field ? e[this.field] = this.key : console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\"), this.parent && (e = this.parent.conformRowData(e)), e;\n    }\n    removeRow(e) {\n      var t = this.rows.indexOf(e),\n        i = e.getElement();\n      t > -1 && this.rows.splice(t, 1), this.groupManager.table.options.groupValues || this.rows.length ? (i.parentNode && i.parentNode.removeChild(i), this.groupManager.blockRedraw || (this.generateGroupHeaderContents(), this.groupManager.table.modExists(\"columnCalcs\") && \"table\" != this.groupManager.table.options.columnCalcs && this.groupManager.table.modules.columnCalcs.recalcGroup(this))) : (this.parent ? this.parent.removeGroup(this) : this.groupManager.removeGroup(this), this.groupManager.updateGroupRows(!0));\n    }\n    removeGroup(e) {\n      var t,\n        i = e.level + \"_\" + e.key;\n      this.groups[i] && (delete this.groups[i], (t = this.groupList.indexOf(e)) > -1 && this.groupList.splice(t, 1), this.groupList.length || (this.parent ? this.parent.removeGroup(this) : this.groupManager.removeGroup(this)));\n    }\n    getHeadersAndRows() {\n      var e = [];\n      return e.push(this), this._visSet(), this.calcs.top && (this.calcs.top.detachElement(), this.calcs.top.deleteCells()), this.calcs.bottom && (this.calcs.bottom.detachElement(), this.calcs.bottom.deleteCells()), this.visible ? this.groupList.length ? this.groupList.forEach(function (t) {\n        e = e.concat(t.getHeadersAndRows());\n      }) : (\"table\" != this.groupManager.table.options.columnCalcs && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs() && (this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows), e.push(this.calcs.top)), e = e.concat(this.rows), \"table\" != this.groupManager.table.options.columnCalcs && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs() && (this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows), e.push(this.calcs.bottom))) : this.groupList.length || \"table\" == this.groupManager.table.options.columnCalcs || this.groupManager.table.modExists(\"columnCalcs\") && (this.groupManager.table.modules.columnCalcs.hasTopCalcs() && this.groupManager.table.options.groupClosedShowCalcs && (this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows), e.push(this.calcs.top)), this.groupManager.table.modules.columnCalcs.hasBottomCalcs() && this.groupManager.table.options.groupClosedShowCalcs && (this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows), e.push(this.calcs.bottom))), e;\n    }\n    getData(e, t) {\n      var i = [];\n      return this._visSet(), (!e || e && this.visible) && this.rows.forEach(e => {\n        i.push(e.getData(t || \"data\"));\n      }), i;\n    }\n    getRowCount() {\n      var e = 0;\n      return this.groupList.length ? this.groupList.forEach(t => {\n        e += t.getRowCount();\n      }) : e = this.rows.length, e;\n    }\n    toggleVisibility() {\n      this.visible ? this.hide() : this.show();\n    }\n    hide() {\n      this.visible = !1, \"basic\" != this.groupManager.table.rowManager.getRenderMode() || this.groupManager.table.options.pagination || (this.element.classList.remove(\"tabulator-group-visible\"), this.groupList.length ? this.groupList.forEach(e => {\n        e.getHeadersAndRows().forEach(e => {\n          e.detachElement();\n        });\n      }) : this.rows.forEach(e => {\n        var t = e.getElement();\n        t.parentNode.removeChild(t);\n      })), this.groupManager.updateGroupRows(!0), this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), !1);\n    }\n    show() {\n      if (this.visible = !0, \"basic\" != this.groupManager.table.rowManager.getRenderMode() || this.groupManager.table.options.pagination) this.groupManager.updateGroupRows(!0);else {\n        this.element.classList.add(\"tabulator-group-visible\");\n        var e = this.generateElement();\n        this.groupList.length ? this.groupList.forEach(t => {\n          t.getHeadersAndRows().forEach(t => {\n            var i = t.getElement();\n            e.parentNode.insertBefore(i, e.nextSibling), t.initialize(), e = i;\n          });\n        }) : this.rows.forEach(t => {\n          var i = t.getElement();\n          e.parentNode.insertBefore(i, e.nextSibling), t.initialize(), e = i;\n        }), this.groupManager.updateGroupRows(!0);\n      }\n      this.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), !0);\n    }\n    _visSet() {\n      var e = [];\n      \"function\" == typeof this.visible && (this.rows.forEach(function (t) {\n        e.push(t.getData());\n      }), this.visible = this.visible(this.key, this.getRowCount(), e, this.getComponent()));\n    }\n    getRowGroup(e) {\n      var t = !1;\n      return this.groupList.length ? this.groupList.forEach(function (i) {\n        var s = i.getRowGroup(e);\n        s && (t = s);\n      }) : this.rows.find(function (t) {\n        return t === e;\n      }) && (t = this), t;\n    }\n    getSubGroups(e) {\n      var t = [];\n      return this.groupList.forEach(function (i) {\n        t.push(e ? i.getComponent() : i);\n      }), t;\n    }\n    getRows(e, t) {\n      var i = [];\n      return t && this.groupList.length ? this.groupList.forEach(s => {\n        i = i.concat(s.getRows(e, t));\n      }) : this.rows.forEach(function (t) {\n        i.push(e ? t.getComponent() : t);\n      }), i;\n    }\n    generateGroupHeaderContents() {\n      var e = [];\n      for (this.getRows(!1, !0).forEach(function (t) {\n        e.push(t.getData());\n      }), this.elementContents = this.generator(this.key, this.getRowCount(), e, this.getComponent()); this.element.firstChild;) this.element.removeChild(this.element.firstChild);\n      \"string\" == typeof this.elementContents ? this.element.innerHTML = this.elementContents : this.element.appendChild(this.elementContents), this.element.insertBefore(this.arrowElement, this.element.firstChild);\n    }\n    getPath(e = []) {\n      return e.unshift(this.key), this.parent && this.parent.getPath(e), e;\n    }\n    getElement() {\n      return this.elementContents ? this.element : this.generateElement();\n    }\n    generateElement() {\n      this.addBindings = !1, this._visSet(), this.visible ? this.element.classList.add(\"tabulator-group-visible\") : this.element.classList.remove(\"tabulator-group-visible\");\n      for (var e = 0; e < this.element.childNodes.length; ++e) this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);\n      return this.generateGroupHeaderContents(), this.element;\n    }\n    detachElement() {\n      this.element && this.element.parentNode && this.element.parentNode.removeChild(this.element);\n    }\n    normalizeHeight() {\n      this.setHeight(this.element.clientHeight);\n    }\n    initialize(e) {\n      this.initialized && !e || (this.normalizeHeight(), this.initialized = !0);\n    }\n    reinitialize() {\n      this.initialized = !1, this.height = 0, a.elVisible(this.element) && this.initialize(!0);\n    }\n    setHeight(e) {\n      this.height != e && (this.height = e, this.outerHeight = this.element.offsetHeight);\n    }\n    getHeight() {\n      return this.outerHeight;\n    }\n    getGroup() {\n      return this;\n    }\n    reinitializeHeight() {}\n    calcHeight() {}\n    setCellHeight() {}\n    clearCellHeight() {}\n    deinitializeHeight() {}\n    rendered() {}\n    getComponent() {\n      return this.component || (this.component = new be(this)), this.component;\n    }\n  }\n  var ve = {\n      cellEdit: function (e) {\n        e.component.setValueProcessData(e.data.oldValue), e.component.cellRendered();\n      },\n      rowAdd: function (e) {\n        e.component.deleteActual(), this.table.rowManager.checkPlaceholder();\n      },\n      rowDelete: function (e) {\n        var t = this.table.rowManager.addRowActual(e.data.data, e.data.pos, e.data.index);\n        this.table.options.groupBy && this.table.modExists(\"groupRows\") && this.table.modules.groupRows.updateGroupRows(!0), this._rebindRow(e.component, t), this.table.rowManager.checkPlaceholder();\n      },\n      rowMove: function (e) {\n        var t = e.data.posFrom - e.data.posTo > 0;\n        this.table.rowManager.moveRowActual(e.component, this.table.rowManager.getRowFromPosition(e.data.posFrom), t), this.table.rowManager.regenerateRowPositions(), this.table.rowManager.reRenderInPosition();\n      }\n    },\n    we = {\n      cellEdit: function (e) {\n        e.component.setValueProcessData(e.data.newValue), e.component.cellRendered();\n      },\n      rowAdd: function (e) {\n        var t = this.table.rowManager.addRowActual(e.data.data, e.data.pos, e.data.index);\n        this.table.options.groupBy && this.table.modExists(\"groupRows\") && this.table.modules.groupRows.updateGroupRows(!0), this._rebindRow(e.component, t), this.table.rowManager.checkPlaceholder();\n      },\n      rowDelete: function (e) {\n        e.component.deleteActual(), this.table.rowManager.checkPlaceholder();\n      },\n      rowMove: function (e) {\n        this.table.rowManager.moveRowActual(e.component, this.table.rowManager.getRowFromPosition(e.data.posTo), e.data.after), this.table.rowManager.regenerateRowPositions(), this.table.rowManager.reRenderInPosition();\n      }\n    },\n    Ce = {\n      keybindings: {\n        bindings: {\n          undo: [\"ctrl + 90\", \"meta + 90\"],\n          redo: [\"ctrl + 89\", \"meta + 89\"]\n        },\n        actions: {\n          undo: function (e) {\n            this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\") && (this.table.modules.edit.currentCell || (e.preventDefault(), this.table.modules.history.undo()));\n          },\n          redo: function (e) {\n            this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\") && (this.table.modules.edit.currentCell || (e.preventDefault(), this.table.modules.history.redo()));\n          }\n        }\n      }\n    };\n  class Ee extends M {\n    constructor(e) {\n      super(e), this.history = [], this.index = -1, this.registerTableOption(\"history\", !1);\n    }\n    initialize() {\n      this.table.options.history && (this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this)), this.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this)), this.subscribe(\"row-delete\", this.rowDeleted.bind(this)), this.subscribe(\"rows-wipe\", this.clear.bind(this)), this.subscribe(\"row-added\", this.rowAdded.bind(this)), this.subscribe(\"row-move\", this.rowMoved.bind(this))), this.registerTableFunction(\"undo\", this.undo.bind(this)), this.registerTableFunction(\"redo\", this.redo.bind(this)), this.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this)), this.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this)), this.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n    }\n    rowMoved(e, t, i) {\n      this.action(\"rowMove\", e, {\n        posFrom: e.getPosition(),\n        posTo: t.getPosition(),\n        to: t,\n        after: i\n      });\n    }\n    rowAdded(e, t, i, s) {\n      this.action(\"rowAdd\", e, {\n        data: t,\n        pos: i,\n        index: s\n      });\n    }\n    rowDeleted(e) {\n      var t, i;\n      this.table.options.groupBy ? (t = (i = e.getComponent().getGroup()._getSelf().rows).indexOf(e)) && (t = i[t - 1]) : (t = e.table.rowManager.getRowIndex(e)) && (t = e.table.rowManager.rows[t - 1]), this.action(\"rowDelete\", e, {\n        data: e.getData(),\n        pos: !t,\n        index: t\n      });\n    }\n    cellUpdated(e) {\n      this.action(\"cellEdit\", e, {\n        oldValue: e.oldValue,\n        newValue: e.value\n      });\n    }\n    clear() {\n      this.history = [], this.index = -1;\n    }\n    action(e, t, i) {\n      this.history = this.history.slice(0, this.index + 1), this.history.push({\n        type: e,\n        component: t,\n        data: i\n      }), this.index++;\n    }\n    getHistoryUndoSize() {\n      return this.index + 1;\n    }\n    getHistoryRedoSize() {\n      return this.history.length - (this.index + 1);\n    }\n    clearComponentHistory(e) {\n      var t = this.history.findIndex(function (t) {\n        return t.component === e;\n      });\n      t > -1 && (this.history.splice(t, 1), t <= this.index && this.index--, this.clearComponentHistory(e));\n    }\n    undo() {\n      if (this.index > -1) {\n        let e = this.history[this.index];\n        return Ee.undoers[e.type].call(this, e), this.index--, this.dispatchExternal(\"historyUndo\", e.type, e.component.getComponent(), e.data), !0;\n      }\n      return console.warn(this.options(\"history\") ? \"History Undo Error - No more history to undo\" : \"History module not enabled\"), !1;\n    }\n    redo() {\n      if (this.history.length - 1 > this.index) {\n        this.index++;\n        let e = this.history[this.index];\n        return Ee.redoers[e.type].call(this, e), this.dispatchExternal(\"historyRedo\", e.type, e.component.getComponent(), e.data), !0;\n      }\n      return console.warn(this.options(\"history\") ? \"History Redo Error - No more history to redo\" : \"History module not enabled\"), !1;\n    }\n    _rebindRow(e, t) {\n      this.history.forEach(function (i) {\n        if (i.component instanceof p) i.component === e && (i.component = t);else if (i.component instanceof n && i.component.row === e) {\n          var s = i.component.column.getField();\n          s && (i.component = t.getCell(s));\n        }\n      });\n    }\n  }\n  _defineProperty(Ee, \"moduleName\", \"history\");\n  _defineProperty(Ee, \"moduleExtensions\", Ce);\n  _defineProperty(Ee, \"undoers\", ve);\n  _defineProperty(Ee, \"redoers\", we);\n  var ye = {\n    csv: function (e) {\n      var t = [],\n        i = 0,\n        s = 0,\n        o = !1;\n      for (let n = 0; n < e.length; n++) {\n        let r = e[n],\n          a = e[n + 1];\n        t[i] || (t[i] = []), t[i][s] || (t[i][s] = \"\"), '\"' == r && o && '\"' == a ? (t[i][s] += r, n++) : '\"' != r ? \",\" != r || o ? \"\\r\" != r || \"\\n\" != a || o ? \"\\r\" != r && \"\\n\" != r || o ? t[i][s] += r : (s = 0, i++) : (s = 0, i++, n++) : s++ : o = !o;\n      }\n      return t;\n    },\n    json: function (e) {\n      try {\n        return JSON.parse(e);\n      } catch (e) {\n        return console.warn(\"JSON Import Error - File contents is invalid JSON\", e), Promise.reject();\n      }\n    },\n    array: function (e) {\n      return e;\n    },\n    xlsx: function (e) {\n      var t = this.dependencyRegistry.lookup(\"XLSX\"),\n        i = t.read(e),\n        s = i.Sheets[i.SheetNames[0]];\n      return t.utils.sheet_to_json(s, {\n        header: 1\n      });\n    }\n  };\n  class Re extends M {\n    constructor(e) {\n      super(e), this.registerTableOption(\"importFormat\"), this.registerTableOption(\"importReader\", \"text\"), this.registerTableOption(\"importHeaderTransform\"), this.registerTableOption(\"importValueTransform\"), this.registerTableOption(\"importDataValidator\"), this.registerTableOption(\"importFileValidator\");\n    }\n    initialize() {\n      this.registerTableFunction(\"import\", this.importFromFile.bind(this)), this.table.options.importFormat && (this.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10), this.subscribe(\"data-load\", this.loadData.bind(this), 10));\n    }\n    loadDataCheck(e) {\n      return this.table.options.importFormat && (\"string\" == typeof e || Array.isArray(e) && e.length && Array.isArray(e));\n    }\n    loadData(e, t, i, s, o) {\n      return this.importData(this.lookupImporter(), e).then(this.structureData.bind(this)).catch(e => (console.error(\"Import Error:\", e || \"Unable to import data\"), Promise.reject(e)));\n    }\n    lookupImporter(e) {\n      var t;\n      return e || (e = this.table.options.importFormat), (t = \"string\" == typeof e ? Re.importers[e] : e) || console.error(\"Import Error - Importer not found:\", e), t;\n    }\n    importFromFile(e, t, i) {\n      var s = this.lookupImporter(e);\n      if (s) return this.pickFile(t, i).then(this.importData.bind(this, s)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(e => (this.dispatch(\"import-error\", e), this.dispatchExternal(\"importError\", e), console.error(\"Import Error:\", e || \"Unable to import file\"), this.table.dataLoader.alertError(), setTimeout(() => {\n        this.table.dataLoader.clearAlert();\n      }, 3e3), Promise.reject(e)));\n    }\n    pickFile(e, t) {\n      return new Promise((i, s) => {\n        var o = document.createElement(\"input\");\n        o.type = \"file\", o.accept = e, o.addEventListener(\"change\", e => {\n          var n = o.files[0],\n            r = new FileReader(),\n            a = this.validateFile(n);\n          if (!0 === a) {\n            switch (this.dispatch(\"import-importing\", o.files), this.dispatchExternal(\"importImporting\", o.files), t || this.table.options.importReader) {\n              case \"buffer\":\n                r.readAsArrayBuffer(n);\n                break;\n              case \"binary\":\n                r.readAsBinaryString(n);\n                break;\n              case \"url\":\n                r.readAsDataURL(n);\n                break;\n              default:\n                r.readAsText(n);\n            }\n            r.onload = e => {\n              i(r.result);\n            }, r.onerror = e => {\n              console.warn(\"File Load Error - Unable to read file\"), s(e);\n            };\n          } else s(a);\n        }), this.dispatch(\"import-choose\"), this.dispatchExternal(\"importChoose\"), o.click();\n      });\n    }\n    importData(e, t) {\n      var i;\n      return this.table.dataLoader.alertLoader(), new Promise((s, o) => {\n        setTimeout(() => {\n          (i = e.call(this.table, t)) instanceof Promise || i ? s(i) : o();\n        }, 10);\n      });\n    }\n    structureData(e) {\n      return Array.isArray(e) && e.length && Array.isArray(e[0]) ? this.table.options.autoColumns ? this.structureArrayToObject(e) : this.structureArrayToColumns(e) : e;\n    }\n    mutateData(e) {\n      var t = [];\n      return Array.isArray(e) ? e.forEach(e => {\n        t.push(this.table.modules.mutator.transformRow(e, \"import\"));\n      }) : t = e, t;\n    }\n    transformHeader(e) {\n      var t = [];\n      return this.table.options.importHeaderTransform ? (e.forEach(i => {\n        t.push(this.table.options.importHeaderTransform.call(this.table, i, e));\n      }), t) : e;\n    }\n    transformData(e) {\n      var t = [];\n      return this.table.options.importValueTransform ? (e.forEach(i => {\n        t.push(this.table.options.importValueTransform.call(this.table, i, e));\n      }), t) : e;\n    }\n    structureArrayToObject(e) {\n      var t = this.transformHeader(e.shift());\n      return e.map(e => {\n        var i = {};\n        return e = this.transformData(e), t.forEach((t, s) => {\n          i[t] = e[s];\n        }), i;\n      });\n    }\n    structureArrayToColumns(e) {\n      var t = [],\n        i = this.transformHeader(e[0]),\n        s = this.table.getColumns();\n      return s[0] && i[0] && s[0].getDefinition().title === i[0] && e.shift(), e.forEach(e => {\n        var i = {};\n        (e = this.transformData(e)).forEach((e, t) => {\n          var o = s[t];\n          o && (i[o.getField()] = e);\n        }), t.push(i);\n      }), t;\n    }\n    validateFile(e) {\n      return !this.table.options.importFileValidator || this.table.options.importFileValidator.call(this.table, e);\n    }\n    validateData(e) {\n      var t;\n      return this.table.options.importDataValidator ? !0 === (t = this.table.options.importDataValidator.call(this.table, e)) ? e : Promise.reject(t) : e;\n    }\n    setData(e) {\n      return this.dispatch(\"import-imported\", e), this.dispatchExternal(\"importImported\", e), this.table.dataLoader.clearAlert(), this.table.setData(e);\n    }\n  }\n  _defineProperty(Re, \"moduleName\", \"import\");\n  _defineProperty(Re, \"importers\", ye);\n  var xe = {\n      navPrev: \"shift + 9\",\n      navNext: 9,\n      navUp: 38,\n      navDown: 40,\n      navLeft: 37,\n      navRight: 39,\n      scrollPageUp: 33,\n      scrollPageDown: 34,\n      scrollToStart: 36,\n      scrollToEnd: 35\n    },\n    Te = {\n      keyBlock: function (e) {\n        e.stopPropagation(), e.preventDefault();\n      },\n      scrollPageUp: function (e) {\n        var t = this.table.rowManager,\n          i = t.scrollTop - t.element.clientHeight;\n        e.preventDefault(), t.displayRowsCount && (i >= 0 ? t.element.scrollTop = i : t.scrollToRow(t.getDisplayRows()[0])), this.table.element.focus();\n      },\n      scrollPageDown: function (e) {\n        var t = this.table.rowManager,\n          i = t.scrollTop + t.element.clientHeight,\n          s = t.element.scrollHeight;\n        e.preventDefault(), t.displayRowsCount && (i <= s ? t.element.scrollTop = i : t.scrollToRow(t.getDisplayRows()[t.displayRowsCount - 1])), this.table.element.focus();\n      },\n      scrollToStart: function (e) {\n        var t = this.table.rowManager;\n        e.preventDefault(), t.displayRowsCount && t.scrollToRow(t.getDisplayRows()[0]), this.table.element.focus();\n      },\n      scrollToEnd: function (e) {\n        var t = this.table.rowManager;\n        e.preventDefault(), t.displayRowsCount && t.scrollToRow(t.getDisplayRows()[t.displayRowsCount - 1]), this.table.element.focus();\n      },\n      navPrev: function (e) {\n        this.dispatch(\"keybinding-nav-prev\", e);\n      },\n      navNext: function (e) {\n        this.dispatch(\"keybinding-nav-next\", e);\n      },\n      navLeft: function (e) {\n        this.dispatch(\"keybinding-nav-left\", e);\n      },\n      navRight: function (e) {\n        this.dispatch(\"keybinding-nav-right\", e);\n      },\n      navUp: function (e) {\n        this.dispatch(\"keybinding-nav-up\", e);\n      },\n      navDown: function (e) {\n        this.dispatch(\"keybinding-nav-down\", e);\n      }\n    };\n  class ke extends M {\n    constructor(e) {\n      super(e), this.watchKeys = null, this.pressedKeys = null, this.keyupBinding = !1, this.keydownBinding = !1, this.registerTableOption(\"keybindings\", {}), this.registerTableOption(\"tabEndNewRow\", !1);\n    }\n    initialize() {\n      var e = this.table.options.keybindings,\n        t = {};\n      this.watchKeys = {}, this.pressedKeys = [], !1 !== e && (Object.assign(t, ke.bindings), Object.assign(t, e), this.mapBindings(t), this.bindEvents()), this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n    }\n    mapBindings(e) {\n      for (let t in e) ke.actions[t] ? e[t] && (\"object\" != typeof e[t] && (e[t] = [e[t]]), e[t].forEach(e => {\n        (Array.isArray(e) ? e : [e]).forEach(e => {\n          this.mapBinding(t, e);\n        });\n      })) : console.warn(\"Key Binding Error - no such action:\", t);\n    }\n    mapBinding(e, t) {\n      var i = {\n        action: ke.actions[e],\n        keys: [],\n        ctrl: !1,\n        shift: !1,\n        meta: !1\n      };\n      t.toString().toLowerCase().split(\" \").join(\"\").split(\"+\").forEach(e => {\n        switch (e) {\n          case \"ctrl\":\n            i.ctrl = !0;\n            break;\n          case \"shift\":\n            i.shift = !0;\n            break;\n          case \"meta\":\n            i.meta = !0;\n            break;\n          default:\n            e = isNaN(e) ? e.toUpperCase().charCodeAt(0) : parseInt(e), i.keys.push(e), this.watchKeys[e] || (this.watchKeys[e] = []), this.watchKeys[e].push(i);\n        }\n      });\n    }\n    bindEvents() {\n      var e = this;\n      this.keyupBinding = function (t) {\n        var i = t.keyCode,\n          s = e.watchKeys[i];\n        s && (e.pressedKeys.push(i), s.forEach(function (i) {\n          e.checkBinding(t, i);\n        }));\n      }, this.keydownBinding = function (t) {\n        var i = t.keyCode;\n        if (e.watchKeys[i]) {\n          var s = e.pressedKeys.indexOf(i);\n          s > -1 && e.pressedKeys.splice(s, 1);\n        }\n      }, this.table.element.addEventListener(\"keydown\", this.keyupBinding), this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n    }\n    clearBindings() {\n      this.keyupBinding && this.table.element.removeEventListener(\"keydown\", this.keyupBinding), this.keydownBinding && this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n    }\n    checkBinding(e, t) {\n      var i = !0;\n      return e.ctrlKey == t.ctrl && e.shiftKey == t.shift && e.metaKey == t.meta && (t.keys.forEach(e => {\n        -1 == this.pressedKeys.indexOf(e) && (i = !1);\n      }), i && t.action.call(this, e), !0);\n    }\n  }\n  _defineProperty(ke, \"moduleName\", \"keybindings\");\n  _defineProperty(ke, \"bindings\", xe);\n  _defineProperty(ke, \"actions\", Te);\n  var Me = {\n      delete: function (e, t, i) {\n        e.delete();\n      }\n    },\n    Le = {\n      insert: function (e, t, i) {\n        return this.table.addRow(e.getData(), void 0, t), !0;\n      },\n      add: function (e, t, i) {\n        return this.table.addRow(e.getData()), !0;\n      },\n      update: function (e, t, i) {\n        return !!t && (t.update(e.getData()), !0);\n      },\n      replace: function (e, t, i) {\n        return !!t && (this.table.addRow(e.getData(), void 0, t), t.delete(), !0);\n      }\n    };\n  class Se extends M {\n    constructor(e) {\n      super(e), this.placeholderElement = this.createPlaceholderElement(), this.hoverElement = !1, this.checkTimeout = !1, this.checkPeriod = 150, this.moving = !1, this.toRow = !1, this.toRowAfter = !1, this.hasHandle = !1, this.startY = 0, this.startX = 0, this.moveHover = this.moveHover.bind(this), this.endMove = this.endMove.bind(this), this.tableRowDropEvent = !1, this.touchMove = !1, this.connection = !1, this.connectionSelectorsTables = !1, this.connectionSelectorsElements = !1, this.connectionElements = [], this.connections = [], this.connectedTable = !1, this.connectedRow = !1, this.registerTableOption(\"movableRows\", !1), this.registerTableOption(\"movableRowsConnectedTables\", !1), this.registerTableOption(\"movableRowsConnectedElements\", !1), this.registerTableOption(\"movableRowsSender\", !1), this.registerTableOption(\"movableRowsReceiver\", \"insert\"), this.registerColumnOption(\"rowHandle\");\n    }\n    createPlaceholderElement() {\n      var e = document.createElement(\"div\");\n      return e.classList.add(\"tabulator-row\"), e.classList.add(\"tabulator-row-placeholder\"), e;\n    }\n    initialize() {\n      this.table.options.movableRows && (this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables, this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements, this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements, this.subscribe(\"cell-init\", this.initializeCell.bind(this)), this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"row-init\", this.initializeRow.bind(this)));\n    }\n    initializeGroupHeader(e) {\n      var t = this,\n        i = {};\n      i.mouseup = function (i) {\n        t.tableRowDrop(i, e);\n      }.bind(t), i.mousemove = function (i) {\n        var s;\n        i.pageY - a.elOffset(e.element).top + t.table.rowManager.element.scrollTop > e.getHeight() / 2 ? t.toRow === e && t.toRowAfter || ((s = e.getElement()).parentNode.insertBefore(t.placeholderElement, s.nextSibling), t.moveRow(e, !0)) : (t.toRow !== e || t.toRowAfter) && (s = e.getElement()).previousSibling && (s.parentNode.insertBefore(t.placeholderElement, s), t.moveRow(e, !1));\n      }.bind(t), e.modules.moveRow = i;\n    }\n    initializeRow(e) {\n      var t,\n        i = this,\n        s = {};\n      s.mouseup = function (t) {\n        i.tableRowDrop(t, e);\n      }.bind(i), s.mousemove = function (t) {\n        var s = e.getElement();\n        t.pageY - a.elOffset(s).top + i.table.rowManager.element.scrollTop > e.getHeight() / 2 ? i.toRow === e && i.toRowAfter || (s.parentNode.insertBefore(i.placeholderElement, s.nextSibling), i.moveRow(e, !0)) : (i.toRow !== e || i.toRowAfter) && (s.parentNode.insertBefore(i.placeholderElement, s), i.moveRow(e, !1));\n      }.bind(i), this.hasHandle || ((t = e.getElement()).addEventListener(\"mousedown\", function (t) {\n        1 === t.which && (i.checkTimeout = setTimeout(function () {\n          i.startMove(t, e);\n        }, i.checkPeriod));\n      }), t.addEventListener(\"mouseup\", function (e) {\n        1 === e.which && i.checkTimeout && clearTimeout(i.checkTimeout);\n      }), this.bindTouchEvents(e, e.getElement())), e.modules.moveRow = s;\n    }\n    initializeColumn(e) {\n      e.definition.rowHandle && !1 !== this.table.options.movableRows && (this.hasHandle = !0);\n    }\n    initializeCell(e) {\n      if (e.column.definition.rowHandle && !1 !== this.table.options.movableRows) {\n        var t = this,\n          i = e.getElement(!0);\n        i.addEventListener(\"mousedown\", function (i) {\n          1 === i.which && (t.checkTimeout = setTimeout(function () {\n            t.startMove(i, e.row);\n          }, t.checkPeriod));\n        }), i.addEventListener(\"mouseup\", function (e) {\n          1 === e.which && t.checkTimeout && clearTimeout(t.checkTimeout);\n        }), this.bindTouchEvents(e.row, i);\n      }\n    }\n    bindTouchEvents(e, t) {\n      var i,\n        s,\n        o,\n        n,\n        r,\n        a,\n        l = !1;\n      t.addEventListener(\"touchstart\", t => {\n        this.checkTimeout = setTimeout(() => {\n          this.touchMove = !0, i = e.nextRow(), o = i ? i.getHeight() / 2 : 0, s = e.prevRow(), n = s ? s.getHeight() / 2 : 0, r = 0, a = 0, l = !1, this.startMove(t, e);\n        }, this.checkPeriod);\n      }, {\n        passive: !0\n      }), this.moving, this.toRow, this.toRowAfter, t.addEventListener(\"touchmove\", t => {\n        var h, d;\n        this.moving && (t.preventDefault(), this.moveHover(t), l || (l = t.touches[0].pageY), (h = t.touches[0].pageY - l) > 0 ? i && h - r > o && (d = i) !== e && (l = t.touches[0].pageY, d.getElement().parentNode.insertBefore(this.placeholderElement, d.getElement().nextSibling), this.moveRow(d, !0)) : s && -h - a > n && (d = s) !== e && (l = t.touches[0].pageY, d.getElement().parentNode.insertBefore(this.placeholderElement, d.getElement()), this.moveRow(d, !1)), d && (i = d.nextRow(), r = o, o = i ? i.getHeight() / 2 : 0, s = d.prevRow(), a = n, n = s ? s.getHeight() / 2 : 0));\n      }), t.addEventListener(\"touchend\", e => {\n        this.checkTimeout && clearTimeout(this.checkTimeout), this.moving && (this.endMove(e), this.touchMove = !1);\n      });\n    }\n    _bindMouseMove() {\n      this.table.rowManager.getDisplayRows().forEach(e => {\n        (\"row\" === e.type || \"group\" === e.type) && e.modules.moveRow && e.modules.moveRow.mousemove && e.getElement().addEventListener(\"mousemove\", e.modules.moveRow.mousemove);\n      });\n    }\n    _unbindMouseMove() {\n      this.table.rowManager.getDisplayRows().forEach(e => {\n        (\"row\" === e.type || \"group\" === e.type) && e.modules.moveRow && e.modules.moveRow.mousemove && e.getElement().removeEventListener(\"mousemove\", e.modules.moveRow.mousemove);\n      });\n    }\n    startMove(e, t) {\n      var i = t.getElement();\n      this.setStartPosition(e, t), this.moving = t, this.table.element.classList.add(\"tabulator-block-select\"), this.placeholderElement.style.width = t.getWidth() + \"px\", this.placeholderElement.style.height = t.getHeight() + \"px\", this.connection ? (this.table.element.classList.add(\"tabulator-movingrow-sending\"), this.connectToTables(t)) : (i.parentNode.insertBefore(this.placeholderElement, i), i.parentNode.removeChild(i)), this.hoverElement = i.cloneNode(!0), this.hoverElement.classList.add(\"tabulator-moving\"), this.connection ? (document.body.appendChild(this.hoverElement), this.hoverElement.style.left = \"0\", this.hoverElement.style.top = \"0\", this.hoverElement.style.width = this.table.element.clientWidth + \"px\", this.hoverElement.style.whiteSpace = \"nowrap\", this.hoverElement.style.overflow = \"hidden\", this.hoverElement.style.pointerEvents = \"none\") : (this.table.rowManager.getTableElement().appendChild(this.hoverElement), this.hoverElement.style.left = \"0\", this.hoverElement.style.top = \"0\", this._bindMouseMove()), document.body.addEventListener(\"mousemove\", this.moveHover), document.body.addEventListener(\"mouseup\", this.endMove), this.dispatchExternal(\"rowMoving\", t.getComponent()), this.moveHover(e);\n    }\n    setStartPosition(e, t) {\n      var i,\n        s,\n        o = this.touchMove ? e.touches[0].pageX : e.pageX,\n        n = this.touchMove ? e.touches[0].pageY : e.pageY;\n      i = t.getElement(), this.connection ? (s = i.getBoundingClientRect(), this.startX = s.left - o + window.pageXOffset, this.startY = s.top - n + window.pageYOffset) : this.startY = n - i.getBoundingClientRect().top;\n    }\n    endMove(e) {\n      e && 1 !== e.which && !this.touchMove || (this._unbindMouseMove(), this.connection || (this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling), this.placeholderElement.parentNode.removeChild(this.placeholderElement)), this.hoverElement.parentNode.removeChild(this.hoverElement), this.table.element.classList.remove(\"tabulator-block-select\"), this.toRow ? this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter) : this.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent()), this.moving = !1, this.toRow = !1, this.toRowAfter = !1, document.body.removeEventListener(\"mousemove\", this.moveHover), document.body.removeEventListener(\"mouseup\", this.endMove), this.connection && (this.table.element.classList.remove(\"tabulator-movingrow-sending\"), this.disconnectFromTables()));\n    }\n    moveRow(e, t) {\n      this.toRow = e, this.toRowAfter = t;\n    }\n    moveHover(e) {\n      this.connection ? this.moveHoverConnections.call(this, e) : this.moveHoverTable.call(this, e);\n    }\n    moveHoverTable(e) {\n      var t = this.table.rowManager.getElement(),\n        i = t.scrollTop,\n        s = (this.touchMove ? e.touches[0].pageY : e.pageY) - t.getBoundingClientRect().top + i;\n      this.hoverElement.style.top = Math.min(s - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n    }\n    moveHoverConnections(e) {\n      this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\", this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n    }\n    elementRowDrop(e, t, i) {\n      this.dispatchExternal(\"movableRowsElementDrop\", e, t, !!i && i.getComponent());\n    }\n    connectToTables(e) {\n      var t;\n      this.connectionSelectorsTables && (t = this.commsConnections(this.connectionSelectorsTables), this.dispatchExternal(\"movableRowsSendingStart\", t), this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n        row: e\n      })), this.connectionSelectorsElements && (this.connectionElements = [], Array.isArray(this.connectionSelectorsElements) || (this.connectionSelectorsElements = [this.connectionSelectorsElements]), this.connectionSelectorsElements.forEach(e => {\n        \"string\" == typeof e ? this.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e))) : this.connectionElements.push(e);\n      }), this.connectionElements.forEach(e => {\n        var t = t => {\n          this.elementRowDrop(t, e, this.moving);\n        };\n        e.addEventListener(\"mouseup\", t), e.tabulatorElementDropEvent = t, e.classList.add(\"tabulator-movingrow-receiving\");\n      }));\n    }\n    disconnectFromTables() {\n      var e;\n      this.connectionSelectorsTables && (e = this.commsConnections(this.connectionSelectorsTables), this.dispatchExternal(\"movableRowsSendingStop\", e), this.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\")), this.connectionElements.forEach(e => {\n        e.classList.remove(\"tabulator-movingrow-receiving\"), e.removeEventListener(\"mouseup\", e.tabulatorElementDropEvent), delete e.tabulatorElementDropEvent;\n      });\n    }\n    connect(e, t) {\n      return this.connectedTable ? (console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable), !1) : (this.connectedTable = e, this.connectedRow = t, this.table.element.classList.add(\"tabulator-movingrow-receiving\"), this.table.rowManager.getDisplayRows().forEach(e => {\n        \"row\" === e.type && e.modules.moveRow && e.modules.moveRow.mouseup && e.getElement().addEventListener(\"mouseup\", e.modules.moveRow.mouseup);\n      }), this.tableRowDropEvent = this.tableRowDrop.bind(this), this.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent), this.dispatchExternal(\"movableRowsReceivingStart\", t, e), !0);\n    }\n    disconnect(e) {\n      e === this.connectedTable ? (this.connectedTable = !1, this.connectedRow = !1, this.table.element.classList.remove(\"tabulator-movingrow-receiving\"), this.table.rowManager.getDisplayRows().forEach(e => {\n        \"row\" === e.type && e.modules.moveRow && e.modules.moveRow.mouseup && e.getElement().removeEventListener(\"mouseup\", e.modules.moveRow.mouseup);\n      }), this.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent), this.dispatchExternal(\"movableRowsReceivingStop\", e)) : console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n    }\n    dropComplete(e, t, i) {\n      var s = !1;\n      if (i) {\n        switch (typeof this.table.options.movableRowsSender) {\n          case \"string\":\n            s = Se.senders[this.table.options.movableRowsSender];\n            break;\n          case \"function\":\n            s = this.table.options.movableRowsSender;\n        }\n        s ? s.call(this, this.moving ? this.moving.getComponent() : void 0, t ? t.getComponent() : void 0, e) : this.table.options.movableRowsSender && console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender), this.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), t ? t.getComponent() : void 0, e);\n      } else this.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), t ? t.getComponent() : void 0, e);\n      this.endMove();\n    }\n    tableRowDrop(e, t) {\n      var i = !1,\n        s = !1;\n      switch (e.stopImmediatePropagation(), typeof this.table.options.movableRowsReceiver) {\n        case \"string\":\n          i = Se.receivers[this.table.options.movableRowsReceiver];\n          break;\n        case \"function\":\n          i = this.table.options.movableRowsReceiver;\n      }\n      i ? s = i.call(this, this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable) : console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver), s ? this.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable) : this.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), t ? t.getComponent() : void 0, this.connectedTable), this.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n        row: t,\n        success: s\n      });\n    }\n    commsReceived(e, t, i) {\n      switch (t) {\n        case \"connect\":\n          return this.connect(e, i.row);\n        case \"disconnect\":\n          return this.disconnect(e);\n        case \"dropcomplete\":\n          return this.dropComplete(e, i.row, i.success);\n      }\n    }\n  }\n  _defineProperty(Se, \"moduleName\", \"moveRow\");\n  _defineProperty(Se, \"senders\", Me);\n  _defineProperty(Se, \"receivers\", Le);\n  var De = {};\n  class ze extends M {\n    constructor(e) {\n      super(e), this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\", \"import\"], this.enabled = !0, this.registerColumnOption(\"mutator\"), this.registerColumnOption(\"mutatorParams\"), this.registerColumnOption(\"mutatorData\"), this.registerColumnOption(\"mutatorDataParams\"), this.registerColumnOption(\"mutatorEdit\"), this.registerColumnOption(\"mutatorEditParams\"), this.registerColumnOption(\"mutatorClipboard\"), this.registerColumnOption(\"mutatorClipboardParams\"), this.registerColumnOption(\"mutatorImport\"), this.registerColumnOption(\"mutatorImportParams\"), this.registerColumnOption(\"mutateLink\");\n    }\n    initialize() {\n      this.subscribe(\"cell-value-changing\", this.transformCell.bind(this)), this.subscribe(\"cell-value-changed\", this.mutateLink.bind(this)), this.subscribe(\"column-layout\", this.initializeColumn.bind(this)), this.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this)), this.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n    }\n    rowDataChanged(e, t, i) {\n      return this.transformRow(t, \"data\", i);\n    }\n    initializeColumn(e) {\n      var t = !1,\n        i = {};\n      this.allowedTypes.forEach(s => {\n        var o,\n          n = \"mutator\" + (s.charAt(0).toUpperCase() + s.slice(1));\n        e.definition[n] && (o = this.lookupMutator(e.definition[n])) && (t = !0, i[n] = {\n          mutator: o,\n          params: e.definition[n + \"Params\"] || {}\n        });\n      }), t && (e.modules.mutate = i);\n    }\n    lookupMutator(e) {\n      var t = !1;\n      switch (typeof e) {\n        case \"string\":\n          ze.mutators[e] ? t = ze.mutators[e] : console.warn(\"Mutator Error - No such mutator found, ignoring: \", e);\n          break;\n        case \"function\":\n          t = e;\n      }\n      return t;\n    }\n    transformRow(e, t, i) {\n      var s,\n        o = \"mutator\" + (t.charAt(0).toUpperCase() + t.slice(1));\n      return this.enabled && this.table.columnManager.traverse(n => {\n        var r, a, l;\n        n.modules.mutate && (r = n.modules.mutate[o] || n.modules.mutate.mutator || !1) && (s = n.getFieldValue(void 0 !== i ? i : e), (\"data\" == t && !i || void 0 !== s) && (l = n.getComponent(), a = \"function\" == typeof r.params ? r.params(s, e, t, l) : r.params, n.setFieldValue(e, r.mutator(s, e, t, a, l))));\n      }), e;\n    }\n    transformCell(e, t) {\n      if (e.column.modules.mutate) {\n        var i = e.column.modules.mutate.mutatorEdit || e.column.modules.mutate.mutator || !1,\n          s = {};\n        if (i) return s = Object.assign(s, e.row.getData()), e.column.setFieldValue(s, t), i.mutator(t, s, \"edit\", i.params, e.getComponent());\n      }\n      return t;\n    }\n    mutateLink(e) {\n      var t = e.column.definition.mutateLink;\n      t && (Array.isArray(t) || (t = [t]), t.forEach(t => {\n        var i = e.row.getCell(t);\n        i && i.setValue(i.getValue(), !0, !0);\n      }));\n    }\n    enable() {\n      this.enabled = !0;\n    }\n    disable() {\n      this.enabled = !1;\n    }\n  }\n  _defineProperty(ze, \"moduleName\", \"mutator\");\n  _defineProperty(ze, \"mutators\", De);\n  var Pe = {\n    rows: function (e, t, i, s, o) {\n      var n = document.createElement(\"span\"),\n        r = document.createElement(\"span\"),\n        a = document.createElement(\"span\"),\n        l = document.createElement(\"span\"),\n        h = document.createElement(\"span\"),\n        d = document.createElement(\"span\");\n      return this.table.modules.localize.langBind(\"pagination|counter|showing\", e => {\n        r.innerHTML = e;\n      }), this.table.modules.localize.langBind(\"pagination|counter|of\", e => {\n        l.innerHTML = e;\n      }), this.table.modules.localize.langBind(\"pagination|counter|rows\", e => {\n        d.innerHTML = e;\n      }), s ? (a.innerHTML = \" \" + t + \"-\" + Math.min(t + e - 1, s) + \" \", h.innerHTML = \" \" + s + \" \", n.appendChild(r), n.appendChild(a), n.appendChild(l), n.appendChild(h), n.appendChild(d)) : (a.innerHTML = \" 0 \", n.appendChild(r), n.appendChild(a), n.appendChild(d)), n;\n    },\n    pages: function (e, t, i, s, o) {\n      var n = document.createElement(\"span\"),\n        r = document.createElement(\"span\"),\n        a = document.createElement(\"span\"),\n        l = document.createElement(\"span\"),\n        h = document.createElement(\"span\"),\n        d = document.createElement(\"span\");\n      return this.table.modules.localize.langBind(\"pagination|counter|showing\", e => {\n        r.innerHTML = e;\n      }), a.innerHTML = \" \" + i + \" \", this.table.modules.localize.langBind(\"pagination|counter|of\", e => {\n        l.innerHTML = e;\n      }), h.innerHTML = \" \" + o + \" \", this.table.modules.localize.langBind(\"pagination|counter|pages\", e => {\n        d.innerHTML = e;\n      }), n.appendChild(r), n.appendChild(a), n.appendChild(l), n.appendChild(h), n.appendChild(d), n;\n    }\n  };\n  class Fe extends M {\n    constructor(e) {\n      super(e), this.mode = \"local\", this.progressiveLoad = !1, this.element = null, this.pageCounterElement = null, this.pageCounter = null, this.size = 0, this.page = 1, this.count = 5, this.max = 1, this.remoteRowCountEstimate = null, this.initialLoad = !0, this.dataChanging = !1, this.pageSizes = [], this.registerTableOption(\"pagination\", !1), this.registerTableOption(\"paginationMode\", \"local\"), this.registerTableOption(\"paginationSize\", !1), this.registerTableOption(\"paginationInitialPage\", 1), this.registerTableOption(\"paginationCounter\", !1), this.registerTableOption(\"paginationCounterElement\", !1), this.registerTableOption(\"paginationButtonCount\", 5), this.registerTableOption(\"paginationSizeSelector\", !1), this.registerTableOption(\"paginationElement\", !1), this.registerTableOption(\"paginationAddRow\", \"page\"), this.registerTableOption(\"paginationOutOfRange\", !1), this.registerTableOption(\"progressiveLoad\", !1), this.registerTableOption(\"progressiveLoadDelay\", 0), this.registerTableOption(\"progressiveLoadScrollMargin\", 0), this.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this)), this.registerTableFunction(\"setPage\", this.setPage.bind(this)), this.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this)), this.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this)), this.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this)), this.registerTableFunction(\"previousPage\", this.previousPage.bind(this)), this.registerTableFunction(\"nextPage\", this.nextPage.bind(this)), this.registerTableFunction(\"getPage\", this.getPage.bind(this)), this.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this)), this.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n    }\n    initialize() {\n      this.table.options.pagination ? (this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this)), this.subscribe(\"row-added\", this.rowsUpdated.bind(this)), this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this)), this.subscribe(\"table-built\", this.calculatePageSizes.bind(this)), this.subscribe(\"footer-redraw\", this.footerRedraw.bind(this)), \"page\" == this.table.options.paginationAddRow && this.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this)), \"remote\" === this.table.options.paginationMode && (this.subscribe(\"data-params\", this.remotePageParams.bind(this)), this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this))), this.table.options.progressiveLoad && console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\"), this.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40), this.registerDisplayHandler(this.getRows.bind(this), 50), this.createElements(), this.initializePageCounter(), this.initializePaginator()) : this.table.options.progressiveLoad && (this.subscribe(\"data-params\", this.remotePageParams.bind(this)), this.subscribe(\"data-loaded\", this._parseRemoteData.bind(this)), this.subscribe(\"table-built\", this.calculatePageSizes.bind(this)), this.subscribe(\"data-processed\", this.initialLoadComplete.bind(this)), this.initializeProgressive(this.table.options.progressiveLoad), \"scroll\" === this.table.options.progressiveLoad && this.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this)));\n    }\n    rowAddingPosition(e, t) {\n      var i,\n        s = this.table.rowManager,\n        o = s.getDisplayRows();\n      return t ? o.length ? i = o[0] : s.activeRows.length && (i = s.activeRows[s.activeRows.length - 1], t = !1) : o.length && (i = o[o.length - 1], t = !(o.length < this.size)), {\n        index: i,\n        top: t\n      };\n    }\n    calculatePageSizes() {\n      var e, t;\n      this.table.options.paginationSize ? this.size = this.table.options.paginationSize : ((e = document.createElement(\"div\")).classList.add(\"tabulator-row\"), e.style.visibility = \"hidden\", (t = document.createElement(\"div\")).classList.add(\"tabulator-cell\"), t.innerHTML = \"Page Row Test\", e.appendChild(t), this.table.rowManager.getTableElement().appendChild(e), this.size = Math.floor(this.table.rowManager.getElement().clientHeight / e.offsetHeight), this.table.rowManager.getTableElement().removeChild(e)), this.dispatchExternal(\"pageSizeChanged\", this.size), this.generatePageSizeSelectList();\n    }\n    initialLoadComplete() {\n      this.initialLoad = !1;\n    }\n    remotePageParams(e, t, i, s) {\n      return this.initialLoad || (this.progressiveLoad && !i || !this.progressiveLoad && !this.dataChanging) && this.reset(!0), s.page = this.page, this.size && (s.size = this.size), s;\n    }\n    userSetPageToRow(e) {\n      return this.table.options.pagination && (e = this.table.rowManager.findRow(e)) ? this.setPageToRow(e) : Promise.reject();\n    }\n    userSetPageSize(e) {\n      return !!this.table.options.pagination && (this.setPageSize(e), this.setPage(1));\n    }\n    scrollVertical(e, t) {\n      var i;\n      t || this.table.dataLoader.loading || (i = this.table.rowManager.getElement()).scrollHeight - i.clientHeight - e < (this.table.options.progressiveLoadScrollMargin || 2 * i.clientHeight) && this.nextPage().catch(() => {});\n    }\n    restOnRenderBefore(e, t) {\n      return t || \"local\" === this.mode && this.reset(), e;\n    }\n    rowsUpdated() {\n      this.refreshData(!0, \"all\");\n    }\n    createElements() {\n      var e;\n      this.element = document.createElement(\"span\"), this.element.classList.add(\"tabulator-paginator\"), this.pagesElement = document.createElement(\"span\"), this.pagesElement.classList.add(\"tabulator-pages\"), (e = document.createElement(\"button\")).classList.add(\"tabulator-page\"), e.setAttribute(\"type\", \"button\"), e.setAttribute(\"role\", \"button\"), e.setAttribute(\"aria-label\", \"\"), e.setAttribute(\"title\", \"\"), this.firstBut = e.cloneNode(!0), this.firstBut.setAttribute(\"data-page\", \"first\"), this.prevBut = e.cloneNode(!0), this.prevBut.setAttribute(\"data-page\", \"prev\"), this.nextBut = e.cloneNode(!0), this.nextBut.setAttribute(\"data-page\", \"next\"), this.lastBut = e.cloneNode(!0), this.lastBut.setAttribute(\"data-page\", \"last\"), this.table.options.paginationSizeSelector && (this.pageSizeSelect = document.createElement(\"select\"), this.pageSizeSelect.classList.add(\"tabulator-page-size\"));\n    }\n    generatePageSizeSelectList() {\n      var e = [];\n      if (this.pageSizeSelect) {\n        if (Array.isArray(this.table.options.paginationSizeSelector)) e = this.table.options.paginationSizeSelector, this.pageSizes = e, -1 == this.pageSizes.indexOf(this.size) && e.unshift(this.size);else if (-1 == this.pageSizes.indexOf(this.size)) {\n          e = [];\n          for (let t = 1; t < 5; t++) e.push(this.size * t);\n          this.pageSizes = e;\n        } else e = this.pageSizes;\n        for (; this.pageSizeSelect.firstChild;) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n        e.forEach(e => {\n          var t = document.createElement(\"option\");\n          t.value = e, !0 === e ? this.langBind(\"pagination|all\", function (e) {\n            t.innerHTML = e;\n          }) : t.innerHTML = e, this.pageSizeSelect.appendChild(t);\n        }), this.pageSizeSelect.value = this.size;\n      }\n    }\n    initializePageCounter() {\n      var e = this.table.options.paginationCounter,\n        t = null;\n      e && ((t = \"function\" == typeof e ? e : Fe.pageCounters[e]) ? (this.pageCounter = t, this.pageCounterElement = document.createElement(\"span\"), this.pageCounterElement.classList.add(\"tabulator-page-counter\")) : console.warn(\"Pagination Error - No such page counter found: \", e));\n    }\n    initializePaginator(e) {\n      var t, i;\n      e || (this.langBind(\"pagination|first\", e => {\n        this.firstBut.innerHTML = e;\n      }), this.langBind(\"pagination|first_title\", e => {\n        this.firstBut.setAttribute(\"aria-label\", e), this.firstBut.setAttribute(\"title\", e);\n      }), this.langBind(\"pagination|prev\", e => {\n        this.prevBut.innerHTML = e;\n      }), this.langBind(\"pagination|prev_title\", e => {\n        this.prevBut.setAttribute(\"aria-label\", e), this.prevBut.setAttribute(\"title\", e);\n      }), this.langBind(\"pagination|next\", e => {\n        this.nextBut.innerHTML = e;\n      }), this.langBind(\"pagination|next_title\", e => {\n        this.nextBut.setAttribute(\"aria-label\", e), this.nextBut.setAttribute(\"title\", e);\n      }), this.langBind(\"pagination|last\", e => {\n        this.lastBut.innerHTML = e;\n      }), this.langBind(\"pagination|last_title\", e => {\n        this.lastBut.setAttribute(\"aria-label\", e), this.lastBut.setAttribute(\"title\", e);\n      }), this.firstBut.addEventListener(\"click\", () => {\n        this.setPage(1);\n      }), this.prevBut.addEventListener(\"click\", () => {\n        this.previousPage();\n      }), this.nextBut.addEventListener(\"click\", () => {\n        this.nextPage();\n      }), this.lastBut.addEventListener(\"click\", () => {\n        this.setPage(this.max);\n      }), this.table.options.paginationElement && (this.element = this.table.options.paginationElement), this.pageSizeSelect && (t = document.createElement(\"label\"), this.langBind(\"pagination|page_size\", e => {\n        this.pageSizeSelect.setAttribute(\"aria-label\", e), this.pageSizeSelect.setAttribute(\"title\", e), t.innerHTML = e;\n      }), this.element.appendChild(t), this.element.appendChild(this.pageSizeSelect), this.pageSizeSelect.addEventListener(\"change\", e => {\n        this.setPageSize(\"true\" == this.pageSizeSelect.value || this.pageSizeSelect.value), this.setPage(1);\n      })), this.element.appendChild(this.firstBut), this.element.appendChild(this.prevBut), this.element.appendChild(this.pagesElement), this.element.appendChild(this.nextBut), this.element.appendChild(this.lastBut), this.table.options.paginationElement || (this.table.options.paginationCounter && (this.table.options.paginationCounterElement ? this.table.options.paginationCounterElement instanceof HTMLElement ? this.table.options.paginationCounterElement.appendChild(this.pageCounterElement) : \"string\" == typeof this.table.options.paginationCounterElement && ((i = document.querySelector(this.table.options.paginationCounterElement)) ? i.appendChild(this.pageCounterElement) : console.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement)) : this.footerAppend(this.pageCounterElement)), this.footerAppend(this.element)), this.page = this.table.options.paginationInitialPage, this.count = this.table.options.paginationButtonCount), this.mode = this.table.options.paginationMode;\n    }\n    initializeProgressive(e) {\n      this.initializePaginator(!0), this.mode = \"progressive_\" + e, this.progressiveLoad = !0;\n    }\n    trackChanges() {\n      this.dispatch(\"page-changed\");\n    }\n    setMaxRows(e) {\n      this.max = e ? !0 === this.size ? 1 : Math.ceil(e / this.size) : 1, this.page > this.max && (this.page = this.max);\n    }\n    reset(e) {\n      this.initialLoad || (\"local\" == this.mode || e) && (this.page = 1, this.trackChanges());\n    }\n    setMaxPage(e) {\n      e = parseInt(e), this.max = e || 1, this.page > this.max && (this.page = this.max, this.trigger());\n    }\n    setPage(e) {\n      switch (e) {\n        case \"first\":\n          return this.setPage(1);\n        case \"prev\":\n          return this.previousPage();\n        case \"next\":\n          return this.nextPage();\n        case \"last\":\n          return this.setPage(this.max);\n      }\n      return (e = parseInt(e)) > 0 && e <= this.max || \"local\" !== this.mode ? (this.page = e, this.trackChanges(), this.trigger()) : (console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", e), Promise.reject());\n    }\n    setPageToRow(e) {\n      var t = this.displayRows(-1).indexOf(e);\n      if (t > -1) {\n        var i = !0 === this.size ? 1 : Math.ceil((t + 1) / this.size);\n        return this.setPage(i);\n      }\n      return console.warn(\"Pagination Error - Requested row is not visible\"), Promise.reject();\n    }\n    setPageSize(e) {\n      !0 !== e && (e = parseInt(e)), e > 0 && (this.size = e, this.dispatchExternal(\"pageSizeChanged\", e)), this.pageSizeSelect && this.generatePageSizeSelectList(), this.trackChanges();\n    }\n    _setPageCounter(e, t, i) {\n      var s;\n      if (this.pageCounter) switch (\"remote\" === this.mode && (t = this.size, i = (this.page - 1) * this.size + 1, e = this.remoteRowCountEstimate), typeof (s = this.pageCounter.call(this, t, i, this.page, e, this.max))) {\n        case \"object\":\n          if (s instanceof Node) {\n            for (; this.pageCounterElement.firstChild;) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n            this.pageCounterElement.appendChild(s);\n          } else this.pageCounterElement.innerHTML = \"\", null != s && console.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", s);\n          break;\n        case \"undefined\":\n          this.pageCounterElement.innerHTML = \"\";\n          break;\n        default:\n          this.pageCounterElement.innerHTML = s;\n      }\n    }\n    _setPageButtons() {\n      let e = Math.floor((this.count - 1) / 2),\n        t = Math.ceil((this.count - 1) / 2),\n        i = this.max - this.page + e + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - e, 1),\n        s = this.page <= t ? Math.min(this.count, this.max) : Math.min(this.page + t, this.max);\n      for (; this.pagesElement.firstChild;) this.pagesElement.removeChild(this.pagesElement.firstChild);\n      1 == this.page ? (this.firstBut.disabled = !0, this.prevBut.disabled = !0) : (this.firstBut.disabled = !1, this.prevBut.disabled = !1), this.page == this.max ? (this.lastBut.disabled = !0, this.nextBut.disabled = !0) : (this.lastBut.disabled = !1, this.nextBut.disabled = !1);\n      for (let e = i; e <= s; e++) e > 0 && e <= this.max && this.pagesElement.appendChild(this._generatePageButton(e));\n      this.footerRedraw();\n    }\n    _generatePageButton(e) {\n      var t = document.createElement(\"button\");\n      return t.classList.add(\"tabulator-page\"), e == this.page && t.classList.add(\"active\"), t.setAttribute(\"type\", \"button\"), t.setAttribute(\"role\", \"button\"), this.langBind(\"pagination|page_title\", i => {\n        t.setAttribute(\"aria-label\", i + \" \" + e), t.setAttribute(\"title\", i + \" \" + e);\n      }), t.setAttribute(\"data-page\", e), t.textContent = e, t.addEventListener(\"click\", t => {\n        this.setPage(e);\n      }), t;\n    }\n    previousPage() {\n      return this.page > 1 ? (this.page--, this.trackChanges(), this.trigger()) : (console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0), Promise.reject());\n    }\n    nextPage() {\n      return this.page < this.max ? (this.page++, this.trackChanges(), this.trigger()) : (this.progressiveLoad || console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1), Promise.reject());\n    }\n    getPage() {\n      return this.page;\n    }\n    getPageMax() {\n      return this.max;\n    }\n    getPageSize(e) {\n      return this.size;\n    }\n    getMode() {\n      return this.mode;\n    }\n    getRows(e) {\n      var t,\n        i,\n        s,\n        o,\n        n = 0,\n        r = e.filter(e => \"row\" === e.type);\n      if (\"local\" == this.mode) {\n        t = [], this.setMaxRows(e.length), !0 === this.size ? (i = 0, s = e.length) : s = (i = this.size * (this.page - 1)) + parseInt(this.size), this._setPageButtons();\n        for (let r = i; r < s; r++) {\n          let i = e[r];\n          i && (t.push(i), \"row\" === i.type && (o || (o = i), n++));\n        }\n        return this._setPageCounter(r.length, n, o ? r.indexOf(o) + 1 : 0), t;\n      }\n      return this._setPageButtons(), this._setPageCounter(r.length), e.slice(0);\n    }\n    trigger() {\n      var e;\n      switch (this.mode) {\n        case \"local\":\n          return e = this.table.rowManager.scrollLeft, this.refreshData(), this.table.rowManager.scrollHorizontal(e), this.dispatchExternal(\"pageLoaded\", this.getPage()), Promise.resolve();\n        case \"remote\":\n          return this.dataChanging = !0, this.reloadData(null).finally(() => {\n            this.dataChanging = !1;\n          });\n        case \"progressive_load\":\n        case \"progressive_scroll\":\n          return this.reloadData(null, !0);\n        default:\n          return console.warn(\"Pagination Error - no such pagination mode:\", this.mode), Promise.reject();\n      }\n    }\n    _parseRemoteData(e) {\n      var t, i;\n      if (void 0 === e.last_page && console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\"), e.data) {\n        if (this.max = parseInt(e.last_page) || 1, this.remoteRowCountEstimate = void 0 !== e.last_row ? e.last_row : e.last_page * this.size - (this.page == e.last_page ? this.size - e.data.length : 0), this.progressiveLoad) {\n          switch (this.mode) {\n            case \"progressive_load\":\n              1 == this.page ? this.table.rowManager.setData(e.data, !1, 1 == this.page) : this.table.rowManager.addRows(e.data), this.page < this.max && setTimeout(() => {\n                this.nextPage();\n              }, this.table.options.progressiveLoadDelay);\n              break;\n            case \"progressive_scroll\":\n              e = 1 === this.page ? e.data : this.table.rowManager.getData().concat(e.data), this.table.rowManager.setData(e, 1 !== this.page, 1 == this.page), t = this.table.options.progressiveLoadScrollMargin || 2 * this.table.rowManager.element.clientHeight, this.table.rowManager.element.scrollHeight <= this.table.rowManager.element.clientHeight + t && this.page < this.max && setTimeout(() => {\n                this.nextPage();\n              });\n          }\n          return !1;\n        }\n        if (this.page > this.max && (console.warn(\"Remote Pagination Error - Server returned last page value lower than the current page\"), i = this.options(\"paginationOutOfRange\"))) return this.setPage(\"function\" == typeof i ? i.call(this, this.page, this.max) : i);\n        this.dispatchExternal(\"pageLoaded\", this.getPage());\n      } else console.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n      return e.data;\n    }\n    footerRedraw() {\n      var e = this.table.footerManager.containerElement;\n      Math.ceil(e.clientWidth) - e.scrollWidth < 0 ? this.pagesElement.style.display = \"none\" : (this.pagesElement.style.display = \"\", Math.ceil(e.clientWidth) - e.scrollWidth < 0 && (this.pagesElement.style.display = \"none\"));\n    }\n  }\n  _defineProperty(Fe, \"moduleName\", \"page\");\n  _defineProperty(Fe, \"pageCounters\", Pe);\n  var He = {\n      local: function (e, t) {\n        var i = localStorage.getItem(e + \"-\" + t);\n        return !!i && JSON.parse(i);\n      },\n      cookie: function (e, t) {\n        var i,\n          s,\n          o = document.cookie,\n          n = e + \"-\" + t,\n          r = o.indexOf(n + \"=\");\n        return r > -1 && ((i = (o = o.slice(r)).indexOf(\";\")) > -1 && (o = o.slice(0, i)), s = o.replace(n + \"=\", \"\")), !!s && JSON.parse(s);\n      }\n    },\n    _e = {\n      local: function (e, t, i) {\n        localStorage.setItem(e + \"-\" + t, JSON.stringify(i));\n      },\n      cookie: function (e, t, i) {\n        var s = new Date();\n        s.setDate(s.getDate() + 1e4), document.cookie = e + \"-\" + t + \"=\" + JSON.stringify(i) + \"; expires=\" + s.toUTCString();\n      }\n    };\n  class Oe extends M {\n    constructor(e) {\n      super(e), this.mode = \"\", this.id = \"\", this.defWatcherBlock = !1, this.config = {}, this.readFunc = !1, this.writeFunc = !1, this.registerTableOption(\"persistence\", !1), this.registerTableOption(\"persistenceID\", \"\"), this.registerTableOption(\"persistenceMode\", !0), this.registerTableOption(\"persistenceReaderFunc\", !1), this.registerTableOption(\"persistenceWriterFunc\", !1);\n    }\n    localStorageTest() {\n      var e = \"_tabulator_test\";\n      try {\n        return window.localStorage.setItem(e, e), window.localStorage.removeItem(e), !0;\n      } catch (e) {\n        return !1;\n      }\n    }\n    initialize() {\n      if (this.table.options.persistence) {\n        var e,\n          t = this.table.options.persistenceMode,\n          i = this.table.options.persistenceID;\n        this.mode = !0 !== t ? t : this.localStorageTest() ? \"local\" : \"cookie\", this.table.options.persistenceReaderFunc ? \"function\" == typeof this.table.options.persistenceReaderFunc ? this.readFunc = this.table.options.persistenceReaderFunc : Oe.readers[this.table.options.persistenceReaderFunc] ? this.readFunc = Oe.readers[this.table.options.persistenceReaderFunc] : console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc) : Oe.readers[this.mode] ? this.readFunc = Oe.readers[this.mode] : console.warn(\"Persistence Read Error - invalid reader set\", this.mode), this.table.options.persistenceWriterFunc ? \"function\" == typeof this.table.options.persistenceWriterFunc ? this.writeFunc = this.table.options.persistenceWriterFunc : Oe.writers[this.table.options.persistenceWriterFunc] ? this.writeFunc = Oe.writers[this.table.options.persistenceWriterFunc] : console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc) : Oe.writers[this.mode] ? this.writeFunc = Oe.writers[this.mode] : console.warn(\"Persistence Write Error - invalid writer set\", this.mode), this.id = \"tabulator-\" + (i || this.table.element.getAttribute(\"id\") || \"\"), this.config = {\n          sort: !0 === this.table.options.persistence || this.table.options.persistence.sort,\n          filter: !0 === this.table.options.persistence || this.table.options.persistence.filter,\n          headerFilter: !0 === this.table.options.persistence || this.table.options.persistence.headerFilter,\n          group: !0 === this.table.options.persistence || this.table.options.persistence.group,\n          page: !0 === this.table.options.persistence || this.table.options.persistence.page,\n          columns: !0 === this.table.options.persistence ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n        }, this.config.page && (e = this.retrieveData(\"page\")) && (void 0 === e.paginationSize || !0 !== this.config.page && !this.config.page.size || (this.table.options.paginationSize = e.paginationSize), void 0 === e.paginationInitialPage || !0 !== this.config.page && !this.config.page.page || (this.table.options.paginationInitialPage = e.paginationInitialPage)), this.config.group && (e = this.retrieveData(\"group\")) && (void 0 === e.groupBy || !0 !== this.config.group && !this.config.group.groupBy || (this.table.options.groupBy = e.groupBy), void 0 === e.groupStartOpen || !0 !== this.config.group && !this.config.group.groupStartOpen || (this.table.options.groupStartOpen = e.groupStartOpen), void 0 === e.groupHeader || !0 !== this.config.group && !this.config.group.groupHeader || (this.table.options.groupHeader = e.groupHeader)), this.config.columns && (this.table.options.columns = this.load(\"columns\", this.table.options.columns), this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"column-show\", this.save.bind(this, \"columns\")), this.subscribe(\"column-hide\", this.save.bind(this, \"columns\")), this.subscribe(\"column-moved\", this.save.bind(this, \"columns\"))), this.subscribe(\"table-built\", this.tableBuilt.bind(this), 0), this.subscribe(\"table-redraw\", this.tableRedraw.bind(this)), this.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\")), this.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\")), this.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\")), this.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\")), this.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\")), this.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\")), this.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\")), this.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n      }\n      this.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this)), this.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n    }\n    eventSave(e) {\n      this.config[e] && this.save(e);\n    }\n    tableBuilt() {\n      var e, t, i;\n      this.config.sort && !1 == !(e = this.load(\"sort\")) && (this.table.options.initialSort = e), this.config.filter && !1 == !(t = this.load(\"filter\")) && (this.table.options.initialFilter = t), this.config.headerFilter && !1 == !(i = this.load(\"headerFilter\")) && (this.table.options.initialHeaderFilter = i);\n    }\n    tableRedraw(e) {\n      e && this.config.columns && this.save(\"columns\");\n    }\n    getColumnLayout() {\n      return this.parseColumns(this.table.columnManager.getColumns());\n    }\n    setColumnLayout(e) {\n      return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, e, !0)), !0;\n    }\n    initializeColumn(e) {\n      var t;\n      this.config.columns && (this.defWatcherBlock = !0, t = e.getDefinition(), (!0 === this.config.columns ? Object.keys(t) : this.config.columns).forEach(e => {\n        var i = Object.getOwnPropertyDescriptor(t, e),\n          s = t[e];\n        i && Object.defineProperty(t, e, {\n          set: e => {\n            s = e, this.defWatcherBlock || this.save(\"columns\"), i.set && i.set(e);\n          },\n          get: () => (i.get && i.get(), s)\n        });\n      }), this.defWatcherBlock = !1);\n    }\n    load(e, t) {\n      var i = this.retrieveData(e);\n      return t && (i = i ? this.mergeDefinition(t, i) : t), i;\n    }\n    retrieveData(e) {\n      return !!this.readFunc && this.readFunc(this.id, e);\n    }\n    mergeDefinition(e, t, i) {\n      var s = [];\n      return (t = t || []).forEach((t, o) => {\n        var n,\n          r = this._findColumn(e, t);\n        r && (i ? n = Object.keys(t) : !0 === this.config.columns || null == this.config.columns ? (n = Object.keys(r)).push(\"width\") : n = this.config.columns, n.forEach(e => {\n          \"columns\" !== e && void 0 !== t[e] && (r[e] = t[e]);\n        }), r.columns && (r.columns = this.mergeDefinition(r.columns, t.columns)), s.push(r));\n      }), e.forEach((e, i) => {\n        this._findColumn(t, e) || (s.length > i ? s.splice(i, 0, e) : s.push(e));\n      }), s;\n    }\n    _findColumn(e, t) {\n      var i = t.columns ? \"group\" : t.field ? \"field\" : \"object\";\n      return e.find(function (e) {\n        switch (i) {\n          case \"group\":\n            return e.title === t.title && e.columns.length === t.columns.length;\n          case \"field\":\n            return e.field === t.field;\n          case \"object\":\n            return e === t;\n        }\n      });\n    }\n    save(e) {\n      var t = {};\n      switch (e) {\n        case \"columns\":\n          t = this.parseColumns(this.table.columnManager.getColumns());\n          break;\n        case \"filter\":\n          t = this.table.modules.filter.getFilters();\n          break;\n        case \"headerFilter\":\n          t = this.table.modules.filter.getHeaderFilters();\n          break;\n        case \"sort\":\n          t = this.validateSorters(this.table.modules.sort.getSort());\n          break;\n        case \"group\":\n          t = this.getGroupConfig();\n          break;\n        case \"page\":\n          t = this.getPageConfig();\n      }\n      this.writeFunc && this.writeFunc(this.id, e, t);\n    }\n    validateSorters(e) {\n      return e.forEach(function (e) {\n        e.column = e.field, delete e.field;\n      }), e;\n    }\n    getGroupConfig() {\n      var e = {};\n      return this.config.group && ((!0 === this.config.group || this.config.group.groupBy) && (e.groupBy = this.table.options.groupBy), (!0 === this.config.group || this.config.group.groupStartOpen) && (e.groupStartOpen = this.table.options.groupStartOpen), (!0 === this.config.group || this.config.group.groupHeader) && (e.groupHeader = this.table.options.groupHeader)), e;\n    }\n    getPageConfig() {\n      var e = {};\n      return this.config.page && ((!0 === this.config.page || this.config.page.size) && (e.paginationSize = this.table.modules.page.getPageSize()), (!0 === this.config.page || this.config.page.page) && (e.paginationInitialPage = this.table.modules.page.getPage())), e;\n    }\n    parseColumns(e) {\n      var t = [],\n        i = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n      return e.forEach(e => {\n        var s,\n          o = {},\n          n = e.getDefinition();\n        e.isGroup ? (o.title = n.title, o.columns = this.parseColumns(e.getColumns())) : (o.field = e.getField(), !0 === this.config.columns || null == this.config.columns ? ((s = Object.keys(n)).push(\"width\"), s.push(\"visible\")) : s = this.config.columns, s.forEach(t => {\n          switch (t) {\n            case \"width\":\n              o.width = e.getWidth();\n              break;\n            case \"visible\":\n              o.visible = e.visible;\n              break;\n            default:\n              \"function\" != typeof n[t] && -1 === i.indexOf(t) && (o[t] = n[t]);\n          }\n        })), t.push(o);\n      }), t;\n    }\n  }\n  _defineProperty(Oe, \"moduleName\", \"persistence\");\n  _defineProperty(Oe, \"moduleInitOrder\", -10);\n  _defineProperty(Oe, \"readers\", He);\n  _defineProperty(Oe, \"writers\", _e);\n  var Ae = {\n    format: {\n      formatters: {\n        responsiveCollapse: function (e, t, i) {\n          var s = document.createElement(\"div\"),\n            o = e.getRow()._row.modules.responsiveLayout;\n          function n(e) {\n            var t = o.element;\n            o.open = e, t && (o.open ? (s.classList.add(\"open\"), t.style.display = \"\") : (s.classList.remove(\"open\"), t.style.display = \"none\"));\n          }\n          return s.classList.add(\"tabulator-responsive-collapse-toggle\"), s.innerHTML = '<svg class=\\'tabulator-responsive-collapse-toggle-open\\' viewbox=\"0 0 24 24\">\\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\\n</svg>\\n\\n<svg class=\\'tabulator-responsive-collapse-toggle-close\\' viewbox=\"0 0 24 24\">\\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\\n</svg>', e.getElement().classList.add(\"tabulator-row-handle\"), s.addEventListener(\"click\", function (t) {\n            t.stopImmediatePropagation(), n(!o.open), e.getTable().rowManager.adjustTableSize();\n          }), n(o.open), s;\n        }\n      }\n    }\n  };\n  var Be = {\n    format: {\n      formatters: {\n        rowSelection: function (e, t, i) {\n          var s = document.createElement(\"input\"),\n            o = !1;\n          if (s.type = \"checkbox\", s.setAttribute(\"aria-label\", \"Select Row\"), this.table.modExists(\"selectRow\", !0)) if (s.addEventListener(\"click\", e => {\n            e.stopPropagation();\n          }), \"function\" == typeof e.getRow) {\n            var n = e.getRow();\n            n instanceof m ? (s.addEventListener(\"change\", e => {\n              \"click\" === this.table.options.selectableRowsRangeMode && o ? o = !1 : n.toggleSelect();\n            }), \"click\" === this.table.options.selectableRowsRangeMode && s.addEventListener(\"click\", e => {\n              o = !0, this.table.modules.selectRow.handleComplexRowClick(n._row, e);\n            }), s.checked = n.isSelected && n.isSelected(), this.table.modules.selectRow.registerRowSelectCheckbox(n, s)) : s = \"\";\n          } else s.addEventListener(\"change\", e => {\n            this.table.modules.selectRow.selectedRows.length ? this.table.deselectRow() : this.table.selectRow(t.rowRange);\n          }), this.table.modules.selectRow.registerHeaderSelectCheckbox(s);\n          return s;\n        }\n      }\n    }\n  };\n  class Ve {\n    constructor(e) {\n      return this._range = e, new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._range.table.componentFunctionBinder.handle(\"range\", e._range, t);\n        }\n      });\n    }\n    getElement() {\n      return this._range.element;\n    }\n    getData() {\n      return this._range.getData();\n    }\n    getCells() {\n      return this._range.getCells(!0, !0);\n    }\n    getStructuredCells() {\n      return this._range.getStructuredCells();\n    }\n    getRows() {\n      return this._range.getRows().map(e => e.getComponent());\n    }\n    getColumns() {\n      return this._range.getColumns().map(e => e.getComponent());\n    }\n    getBounds() {\n      return this._range.getBounds();\n    }\n    getTopEdge() {\n      return this._range.top;\n    }\n    getBottomEdge() {\n      return this._range.bottom;\n    }\n    getLeftEdge() {\n      return this._range.left;\n    }\n    getRightEdge() {\n      return this._range.right;\n    }\n    setBounds(e, t) {\n      this._range.destroyedGuard(\"setBounds\") && this._range.setBounds(e ? e._cell : e, t ? t._cell : t);\n    }\n    setStartBound(e) {\n      this._range.destroyedGuard(\"setStartBound\") && (this._range.setEndBound(e ? e._cell : e), this._range.rangeManager.layoutElement());\n    }\n    setEndBound(e) {\n      this._range.destroyedGuard(\"setEndBound\") && (this._range.setEndBound(e ? e._cell : e), this._range.rangeManager.layoutElement());\n    }\n    clearValues() {\n      this._range.destroyedGuard(\"clearValues\") && this._range.clearValues();\n    }\n    remove() {\n      this._range.destroyedGuard(\"remove\") && this._range.destroy(!0);\n    }\n  }\n  class Ie extends t {\n    constructor(e, t, i, s) {\n      super(e), this.rangeManager = t, this.element = null, this.initialized = !1, this.initializing = {\n        start: !1,\n        end: !1\n      }, this.destroyed = !1, this.top = 0, this.bottom = 0, this.left = 0, this.right = 0, this.table = e, this.start = {\n        row: 0,\n        col: 0\n      }, this.end = {\n        row: 0,\n        col: 0\n      }, this.rangeManager.rowHeader && (this.left = 1, this.right = 1, this.start.col = 1, this.end.col = 1), this.initElement(), setTimeout(() => {\n        this.initBounds(i, s);\n      });\n    }\n    initElement() {\n      this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-range\");\n    }\n    initBounds(e, t) {\n      this._updateMinMax(), e && this.setBounds(e, t || e);\n    }\n    setStart(e, t) {\n      this.start.row === e && this.start.col === t || (this.start.row = e, this.start.col = t, this.initializing.start = !0, this._updateMinMax());\n    }\n    setEnd(e, t) {\n      this.end.row === e && this.end.col === t || (this.end.row = e, this.end.col = t, this.initializing.end = !0, this._updateMinMax());\n    }\n    setBounds(e, t, i) {\n      e && this.setStartBound(e), this.setEndBound(t || e), this.rangeManager.layoutElement(i);\n    }\n    setStartBound(e) {\n      var t, i;\n      \"column\" === e.type ? this.rangeManager.columnSelection && this.setStart(0, e.getPosition() - 1) : (t = e.row.position - 1, i = e.column.getPosition() - 1, e.column === this.rangeManager.rowHeader ? this.setStart(t, 1) : this.setStart(t, i));\n    }\n    setEndBound(e) {\n      var t,\n        i,\n        s,\n        o = this._getTableRows().length;\n      \"column\" === e.type ? this.rangeManager.columnSelection && (\"column\" === this.rangeManager.selecting ? this.setEnd(o - 1, e.getPosition() - 1) : \"cell\" === this.rangeManager.selecting && this.setEnd(0, e.getPosition() - 1)) : (t = e.row.position - 1, i = e.column.getPosition() - 1, s = e.column === this.rangeManager.rowHeader, \"row\" === this.rangeManager.selecting ? this.setEnd(t, this._getTableColumns().length - 1) : \"row\" !== this.rangeManager.selecting && s ? this.setEnd(t, 0) : \"column\" === this.rangeManager.selecting ? this.setEnd(o - 1, i) : this.setEnd(t, i));\n    }\n    _updateMinMax() {\n      this.top = Math.min(this.start.row, this.end.row), this.bottom = Math.max(this.start.row, this.end.row), this.left = Math.min(this.start.col, this.end.col), this.right = Math.max(this.start.col, this.end.col), this.initialized ? this.dispatchExternal(\"rangeChanged\", this.getComponent()) : this.initializing.start && this.initializing.end && (this.initialized = !0, this.dispatchExternal(\"rangeAdded\", this.getComponent()));\n    }\n    _getTableColumns() {\n      return this.table.columnManager.getVisibleColumnsByIndex();\n    }\n    _getTableRows() {\n      return this.table.rowManager.getDisplayRows().filter(e => \"row\" === e.type);\n    }\n    layout() {\n      var e,\n        t,\n        i,\n        s,\n        o,\n        n,\n        r,\n        a,\n        l,\n        h,\n        d = this.table.rowManager.renderer.vDomTop,\n        c = this.table.rowManager.renderer.vDomBottom,\n        u = this.table.columnManager.renderer.leftCol,\n        m = this.table.columnManager.renderer.rightCol;\n      \"virtual\" === this.table.options.renderHorizontal && this.rangeManager.rowHeader && (m += 1), null == d && (d = 0), null == c && (c = 1 / 0), null == u && (u = 0), null == m && (m = 1 / 0), this.overlaps(u, d, m, c) && (e = Math.max(this.top, d), t = Math.min(this.bottom, c), i = Math.max(this.left, u), s = Math.min(this.right, m), o = this.rangeManager.getCell(e, i), n = this.rangeManager.getCell(t, s), r = o.getElement(), a = n.getElement(), l = o.row.getElement(), h = n.row.getElement(), this.element.classList.add(\"tabulator-range-active\"), this.table.rtl ? (this.element.style.right = l.offsetWidth - r.offsetLeft - r.offsetWidth + \"px\", this.element.style.width = r.offsetLeft + r.offsetWidth - a.offsetLeft + \"px\") : (this.element.style.left = l.offsetLeft + r.offsetLeft + \"px\", this.element.style.width = a.offsetLeft + a.offsetWidth - r.offsetLeft + \"px\"), this.element.style.top = l.offsetTop + \"px\", this.element.style.height = h.offsetTop + h.offsetHeight - l.offsetTop + \"px\");\n    }\n    atTopLeft(e) {\n      return e.row.position - 1 === this.top && e.column.getPosition() - 1 === this.left;\n    }\n    atBottomRight(e) {\n      return e.row.position - 1 === this.bottom && e.column.getPosition() - 1 === this.right;\n    }\n    occupies(e) {\n      return this.occupiesRow(e.row) && this.occupiesColumn(e.column);\n    }\n    occupiesRow(e) {\n      return this.top <= e.position - 1 && e.position - 1 <= this.bottom;\n    }\n    occupiesColumn(e) {\n      return this.left <= e.getPosition() - 1 && e.getPosition() - 1 <= this.right;\n    }\n    overlaps(e, t, i, s) {\n      return !(this.left > i || e > this.right || this.top > s || t > this.bottom);\n    }\n    getData() {\n      var e = [],\n        t = this.getRows(),\n        i = this.getColumns();\n      return t.forEach(t => {\n        var s = t.getData(),\n          o = {};\n        i.forEach(e => {\n          o[e.field] = s[e.field];\n        }), e.push(o);\n      }), e;\n    }\n    getCells(e, t) {\n      var i = [],\n        s = this.getRows(),\n        o = this.getColumns();\n      return e ? i = s.map(e => {\n        var i = [];\n        return e.getCells().forEach(e => {\n          o.includes(e.column) && i.push(t ? e.getComponent() : e);\n        }), i;\n      }) : s.forEach(e => {\n        e.getCells().forEach(e => {\n          o.includes(e.column) && i.push(t ? e.getComponent() : e);\n        });\n      }), i;\n    }\n    getStructuredCells() {\n      return this.getCells(!0, !0);\n    }\n    getRows() {\n      return this._getTableRows().slice(this.top, this.bottom + 1);\n    }\n    getColumns() {\n      return this._getTableColumns().slice(this.left, this.right + 1);\n    }\n    clearValues() {\n      var e = this.getCells(),\n        t = this.table.options.selectableRangeClearCellsValue;\n      this.table.blockRedraw(), e.forEach(e => {\n        e.setValue(t);\n      }), this.table.restoreRedraw();\n    }\n    getBounds(e) {\n      var t = this.getCells(!1, e),\n        i = {\n          start: null,\n          end: null\n        };\n      return t.length ? (i.start = t[0], i.end = t[t.length - 1]) : console.warn(\"No bounds defined on range\"), i;\n    }\n    getComponent() {\n      return this.component || (this.component = new Ve(this)), this.component;\n    }\n    destroy(e) {\n      this.destroyed = !0, this.element.remove(), e && this.rangeManager.rangeRemoved(this), this.initialized && this.dispatchExternal(\"rangeRemoved\", this.getComponent());\n    }\n    destroyedGuard(e) {\n      return this.destroyed && console.warn(\"You cannot call the \" + e + \" function on a destroyed range\"), !this.destroyed;\n    }\n  }\n  var Ne = {\n    keybindings: {\n      bindings: {\n        rangeJumpUp: [\"ctrl + 38\", \"meta + 38\"],\n        rangeJumpDown: [\"ctrl + 40\", \"meta + 40\"],\n        rangeJumpLeft: [\"ctrl + 37\", \"meta + 37\"],\n        rangeJumpRight: [\"ctrl + 39\", \"meta + 39\"],\n        rangeExpandUp: \"shift + 38\",\n        rangeExpandDown: \"shift + 40\",\n        rangeExpandLeft: \"shift + 37\",\n        rangeExpandRight: \"shift + 39\",\n        rangeExpandJumpUp: [\"ctrl + shift + 38\", \"meta + shift + 38\"],\n        rangeExpandJumpDown: [\"ctrl + shift + 40\", \"meta + shift + 40\"],\n        rangeExpandJumpLeft: [\"ctrl + shift + 37\", \"meta + shift + 37\"],\n        rangeExpandJumpRight: [\"ctrl + shift + 39\", \"meta + shift + 39\"]\n      },\n      actions: {\n        rangeJumpLeft: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"left\", !0, !1);\n        },\n        rangeJumpRight: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"right\", !0, !1);\n        },\n        rangeJumpUp: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"up\", !0, !1);\n        },\n        rangeJumpDown: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"down\", !0, !1);\n        },\n        rangeExpandLeft: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"left\", !1, !0);\n        },\n        rangeExpandRight: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"right\", !1, !0);\n        },\n        rangeExpandUp: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"up\", !1, !0);\n        },\n        rangeExpandDown: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"down\", !1, !0);\n        },\n        rangeExpandJumpLeft: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"left\", !0, !0);\n        },\n        rangeExpandJumpRight: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"right\", !0, !0);\n        },\n        rangeExpandJumpUp: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"up\", !0, !0);\n        },\n        rangeExpandJumpDown: function (e) {\n          this.dispatch(\"keybinding-nav-range\", e, \"down\", !0, !0);\n        }\n      }\n    },\n    clipboard: {\n      pasteActions: {\n        range: function (e) {\n          var t,\n            i,\n            s,\n            o,\n            n,\n            r = [],\n            a = this.table.modules.selectRange.activeRange,\n            l = !1;\n          return n = e.length, a && (i = (t = a.getBounds()).start, t.start === t.end && (l = !0), i && (s = (r = this.table.rowManager.activeRows.slice()).indexOf(i.row), o = l ? e.length : r.indexOf(t.end.row) - s + 1, s > -1 && (this.table.blockRedraw(), (r = r.slice(s, s + o)).forEach((t, i) => {\n            t.updateData(e[i % n]);\n          }), this.table.restoreRedraw()))), r;\n        }\n      },\n      pasteParsers: {\n        range: function (e) {\n          var t,\n            i,\n            s,\n            o,\n            n,\n            r = [],\n            a = [],\n            l = this.table.modules.selectRange.activeRange,\n            h = !1;\n          return !!(l && (i = (t = l.getBounds()).start, t.start === t.end && (h = !0), i && ((e = e.split(\"\\n\")).forEach(function (e) {\n            r.push(e.split(\"\\t\"));\n          }), r.length && (n = (o = this.table.columnManager.getVisibleColumnsByIndex()).indexOf(i.column)) > -1))) && (s = h ? r[0].length : o.indexOf(t.end.column) - n + 1, o = o.slice(n, n + s), r.forEach(e => {\n            var t = {},\n              i = e.length;\n            o.forEach(function (s, o) {\n              t[s.field] = e[o % i];\n            }), a.push(t);\n          }), a);\n        }\n      }\n    },\n    export: {\n      columnLookups: {\n        range: function () {\n          var e = this.modules.selectRange.selectedColumns();\n          return this.columnManager.rowHeader && e.unshift(this.columnManager.rowHeader), e;\n        }\n      },\n      rowLookups: {\n        range: function () {\n          return this.modules.selectRange.selectedRows();\n        }\n      }\n    }\n  };\n  function We(e, t, i, s, o, n, r) {\n    var a = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\"),\n      l = r.format || \"dd/MM/yyyy HH:mm:ss\",\n      h = r.alignEmptyValues,\n      d = 0;\n    if (void 0 !== a) {\n      if (a.isDateTime(e) || (e = \"iso\" === l ? a.fromISO(String(e)) : a.fromFormat(String(e), l)), a.isDateTime(t) || (t = \"iso\" === l ? a.fromISO(String(t)) : a.fromFormat(String(t), l)), e.isValid) {\n        if (t.isValid) return e - t;\n        d = 1;\n      } else d = t.isValid ? -1 : 0;\n      return (\"top\" === h && \"desc\" === n || \"bottom\" === h && \"asc\" === n) && (d *= -1), d;\n    }\n    console.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n  }\n  var je = {\n    number: function (e, t, i, s, o, n, r) {\n      var a = r.alignEmptyValues,\n        l = r.decimalSeparator,\n        h = r.thousandSeparator,\n        d = 0;\n      if (e = String(e), t = String(t), h && (e = e.split(h).join(\"\"), t = t.split(h).join(\"\")), l && (e = e.split(l).join(\".\"), t = t.split(l).join(\".\")), e = parseFloat(e), t = parseFloat(t), isNaN(e)) d = isNaN(t) ? 0 : -1;else {\n        if (!isNaN(t)) return e - t;\n        d = 1;\n      }\n      return (\"top\" === a && \"desc\" === n || \"bottom\" === a && \"asc\" === n) && (d *= -1), d;\n    },\n    string: function (e, t, i, s, o, n, r) {\n      var a,\n        l = r.alignEmptyValues,\n        h = 0;\n      if (e) {\n        if (t) {\n          switch (typeof r.locale) {\n            case \"boolean\":\n              r.locale && (a = this.langLocale());\n              break;\n            case \"string\":\n              a = r.locale;\n          }\n          return String(e).toLowerCase().localeCompare(String(t).toLowerCase(), a);\n        }\n        h = 1;\n      } else h = t ? -1 : 0;\n      return (\"top\" === l && \"desc\" === n || \"bottom\" === l && \"asc\" === n) && (h *= -1), h;\n    },\n    date: function (e, t, i, s, o, n, r) {\n      return r.format || (r.format = \"dd/MM/yyyy\"), We.call(this, e, t, i, s, o, n, r);\n    },\n    time: function (e, t, i, s, o, n, r) {\n      return r.format || (r.format = \"HH:mm\"), We.call(this, e, t, i, s, o, n, r);\n    },\n    datetime: We,\n    boolean: function (e, t, i, s, o, n, r) {\n      return (!0 === e || \"true\" === e || \"True\" === e || 1 === e ? 1 : 0) - (!0 === t || \"true\" === t || \"True\" === t || 1 === t ? 1 : 0);\n    },\n    array: function (e, t, i, s, o, n, r) {\n      var l,\n        h = r.type || \"length\",\n        d = r.alignEmptyValues,\n        c = 0,\n        u = this.table;\n      function m(e) {\n        var t;\n        switch (l && (e = l(e)), h) {\n          case \"length\":\n            t = e.length;\n            break;\n          case \"sum\":\n            t = e.reduce(function (e, t) {\n              return e + t;\n            });\n            break;\n          case \"max\":\n            t = Math.max.apply(null, e);\n            break;\n          case \"min\":\n            t = Math.min.apply(null, e);\n            break;\n          case \"avg\":\n            t = e.reduce(function (e, t) {\n              return e + t;\n            }) / e.length;\n            break;\n          case \"string\":\n            t = e.join(\"\");\n        }\n        return t;\n      }\n      if (r.valueMap && (l = \"string\" == typeof r.valueMap ? function (e) {\n        return e.map(e => a.retrieveNestedData(u.options.nestedFieldSeparator, r.valueMap, e));\n      } : r.valueMap), Array.isArray(e)) {\n        if (Array.isArray(t)) return \"string\" === h ? String(m(e)).toLowerCase().localeCompare(String(m(t)).toLowerCase()) : m(t) - m(e);\n        c = 1;\n      } else c = Array.isArray(t) ? -1 : 0;\n      return (\"top\" === d && \"desc\" === n || \"bottom\" === d && \"asc\" === n) && (c *= -1), c;\n    },\n    exists: function (e, t, i, s, o, n, r) {\n      return (void 0 === e ? 0 : 1) - (void 0 === t ? 0 : 1);\n    },\n    alphanum: function (e, t, i, s, o, n, r) {\n      var a,\n        l,\n        h,\n        d,\n        c,\n        u = 0,\n        m = /(\\d+)|(\\D+)/g,\n        p = /\\d/,\n        g = r.alignEmptyValues,\n        b = 0;\n      if (e || 0 === e) {\n        if (t || 0 === t) {\n          if (isFinite(e) && isFinite(t)) return e - t;\n          if ((a = String(e).toLowerCase()) === (l = String(t).toLowerCase())) return 0;\n          if (!p.test(a) || !p.test(l)) return a > l ? 1 : -1;\n          for (a = a.match(m), l = l.match(m), c = a.length > l.length ? l.length : a.length; u < c;) if ((h = a[u]) !== (d = l[u++])) return isFinite(h) && isFinite(d) ? (\"0\" === h.charAt(0) && (h = \".\" + h), \"0\" === d.charAt(0) && (d = \".\" + d), h - d) : h > d ? 1 : -1;\n          return a.length > l.length;\n        }\n        b = 1;\n      } else b = t || 0 === t ? -1 : 0;\n      return (\"top\" === g && \"desc\" === n || \"bottom\" === g && \"asc\" === n) && (b *= -1), b;\n    }\n  };\n  class Ge extends M {\n    constructor(e) {\n      super(e), this.sortList = [], this.changed = !1, this.registerTableOption(\"sortMode\", \"local\"), this.registerTableOption(\"initialSort\", !1), this.registerTableOption(\"columnHeaderSortMulti\", !0), this.registerTableOption(\"sortOrderReverse\", !1), this.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"), this.registerTableOption(\"headerSortClickElement\", \"header\"), this.registerColumnOption(\"sorter\"), this.registerColumnOption(\"sorterParams\"), this.registerColumnOption(\"headerSort\", !0), this.registerColumnOption(\"headerSortStartingDir\"), this.registerColumnOption(\"headerSortTristate\");\n    }\n    initialize() {\n      this.subscribe(\"column-layout\", this.initializeColumn.bind(this)), this.subscribe(\"table-built\", this.tableBuilt.bind(this)), this.registerDataHandler(this.sort.bind(this), 20), this.registerTableFunction(\"setSort\", this.userSetSort.bind(this)), this.registerTableFunction(\"getSorters\", this.getSort.bind(this)), this.registerTableFunction(\"clearSort\", this.clearSort.bind(this)), \"remote\" === this.table.options.sortMode && this.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n    }\n    tableBuilt() {\n      this.table.options.initialSort && this.setSort(this.table.options.initialSort);\n    }\n    remoteSortParams(e, t, i, s) {\n      var o = this.getSort();\n      return o.forEach(e => {\n        delete e.column;\n      }), s.sort = o, s;\n    }\n    userSetSort(e, t) {\n      this.setSort(e, t), this.refreshSort();\n    }\n    clearSort() {\n      this.clear(), this.refreshSort();\n    }\n    initializeColumn(e) {\n      var t,\n        i,\n        s = !1;\n      switch (typeof e.definition.sorter) {\n        case \"string\":\n          Ge.sorters[e.definition.sorter] ? s = Ge.sorters[e.definition.sorter] : console.warn(\"Sort Error - No such sorter found: \", e.definition.sorter);\n          break;\n        case \"function\":\n          s = e.definition.sorter;\n      }\n      if (e.modules.sort = {\n        sorter: s,\n        dir: \"none\",\n        params: e.definition.sorterParams || {},\n        startingDir: e.definition.headerSortStartingDir || \"asc\",\n        tristate: e.definition.headerSortTristate\n      }, !1 !== e.definition.headerSort) {\n        if ((t = e.getElement()).classList.add(\"tabulator-sortable\"), (i = document.createElement(\"div\")).classList.add(\"tabulator-col-sorter\"), \"icon\" === this.table.options.headerSortClickElement) i.classList.add(\"tabulator-col-sorter-element\");else t.classList.add(\"tabulator-col-sorter-element\");\n        switch (this.table.options.headerSortElement) {\n          case \"function\":\n            break;\n          case \"object\":\n            i.appendChild(this.table.options.headerSortElement);\n            break;\n          default:\n            i.innerHTML = this.table.options.headerSortElement;\n        }\n        e.titleHolderElement.appendChild(i), e.modules.sort.element = i, this.setColumnHeaderSortIcon(e, \"none\"), \"icon\" === this.table.options.headerSortClickElement && i.addEventListener(\"mousedown\", e => {\n          e.stopPropagation();\n        }), (\"icon\" === this.table.options.headerSortClickElement ? i : t).addEventListener(\"click\", t => {\n          var i = \"\",\n            s = [],\n            o = !1;\n          if (e.modules.sort) {\n            if (e.modules.sort.tristate) i = \"none\" == e.modules.sort.dir ? e.modules.sort.startingDir : e.modules.sort.dir == e.modules.sort.startingDir ? \"asc\" == e.modules.sort.dir ? \"desc\" : \"asc\" : \"none\";else switch (e.modules.sort.dir) {\n              case \"asc\":\n                i = \"desc\";\n                break;\n              case \"desc\":\n                i = \"asc\";\n                break;\n              default:\n                i = e.modules.sort.startingDir;\n            }\n            this.table.options.columnHeaderSortMulti && (t.shiftKey || t.ctrlKey) ? (o = (s = this.getSort()).findIndex(t => t.field === e.getField()), o > -1 ? (s[o].dir = i, o = s.splice(o, 1)[0], \"none\" != i && s.push(o)) : \"none\" != i && s.push({\n              column: e,\n              dir: i\n            }), this.setSort(s)) : \"none\" == i ? this.clear() : this.setSort(e, i), this.refreshSort();\n          }\n        });\n      }\n    }\n    refreshSort() {\n      \"remote\" === this.table.options.sortMode ? this.reloadData(null, !1, !1) : this.refreshData(!0);\n    }\n    hasChanged() {\n      var e = this.changed;\n      return this.changed = !1, e;\n    }\n    getSort() {\n      var e = [];\n      return this.sortList.forEach(function (t) {\n        t.column && e.push({\n          column: t.column.getComponent(),\n          field: t.column.getField(),\n          dir: t.dir\n        });\n      }), e;\n    }\n    setSort(e, t) {\n      var i = this,\n        s = [];\n      Array.isArray(e) || (e = [{\n        column: e,\n        dir: t\n      }]), e.forEach(function (e) {\n        var t;\n        (t = i.table.columnManager.findColumn(e.column)) ? (e.column = t, s.push(e), i.changed = !0) : console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", e.column);\n      }), i.sortList = s, this.dispatch(\"sort-changed\");\n    }\n    clear() {\n      this.setSort([]);\n    }\n    findSorter(e) {\n      var t,\n        i = this.table.rowManager.activeRows[0],\n        s = \"string\";\n      if (i && (i = i.getData(), e.getField())) switch (typeof (t = e.getFieldValue(i))) {\n        case \"undefined\":\n          s = \"string\";\n          break;\n        case \"boolean\":\n          s = \"boolean\";\n          break;\n        default:\n          isNaN(t) || \"\" === t ? t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i) && (s = \"alphanum\") : s = \"number\";\n      }\n      return Ge.sorters[s];\n    }\n    sort(e, t) {\n      var i = this,\n        s = this.table.options.sortOrderReverse ? i.sortList.slice().reverse() : i.sortList,\n        o = [],\n        n = [];\n      return this.subscribedExternal(\"dataSorting\") && this.dispatchExternal(\"dataSorting\", i.getSort()), t || i.clearColumnHeaders(), \"remote\" !== this.table.options.sortMode ? (s.forEach(function (e, s) {\n        var n;\n        e.column && ((n = e.column.modules.sort) && (n.sorter || (n.sorter = i.findSorter(e.column)), e.params = \"function\" == typeof n.params ? n.params(e.column.getComponent(), e.dir) : n.params, o.push(e)), t || i.setColumnHeader(e.column, e.dir));\n      }), o.length && i._sortItems(e, o)) : t || s.forEach(function (e, t) {\n        i.setColumnHeader(e.column, e.dir);\n      }), this.subscribedExternal(\"dataSorted\") && (e.forEach(e => {\n        n.push(e.getComponent());\n      }), this.dispatchExternal(\"dataSorted\", i.getSort(), n)), e;\n    }\n    clearColumnHeaders() {\n      this.table.columnManager.getRealColumns().forEach(e => {\n        e.modules.sort && (e.modules.sort.dir = \"none\", e.getElement().setAttribute(\"aria-sort\", \"none\"), this.setColumnHeaderSortIcon(e, \"none\"));\n      });\n    }\n    setColumnHeader(e, t) {\n      e.modules.sort.dir = t, e.getElement().setAttribute(\"aria-sort\", \"asc\" === t ? \"ascending\" : \"descending\"), this.setColumnHeaderSortIcon(e, t);\n    }\n    setColumnHeaderSortIcon(e, t) {\n      var i,\n        s = e.modules.sort.element;\n      if (e.definition.headerSort && \"function\" == typeof this.table.options.headerSortElement) {\n        for (; s.firstChild;) s.removeChild(s.firstChild);\n        \"object\" == typeof (i = this.table.options.headerSortElement.call(this.table, e.getComponent(), t)) ? s.appendChild(i) : s.innerHTML = i;\n      }\n    }\n    _sortItems(e, t) {\n      var i = t.length - 1;\n      e.sort((e, s) => {\n        for (var o, n = i; n >= 0; n--) {\n          let i = t[n];\n          if (0 !== (o = this._sortRow(e, s, i.column, i.dir, i.params))) break;\n        }\n        return o;\n      });\n    }\n    _sortRow(e, t, i, s, o) {\n      var n,\n        r,\n        a = \"asc\" == s ? e : t,\n        l = \"asc\" == s ? t : e;\n      return e = void 0 !== (e = i.getFieldValue(a.getData())) ? e : \"\", t = void 0 !== (t = i.getFieldValue(l.getData())) ? t : \"\", n = a.getComponent(), r = l.getComponent(), i.modules.sort.sorter.call(this, e, t, n, r, i.getComponent(), s, o);\n    }\n  }\n  _defineProperty(Ge, \"moduleName\", \"sort\");\n  _defineProperty(Ge, \"sorters\", je);\n  class Ue {\n    constructor(e, t) {\n      this.columnCount = e, this.rowCount = t, this.columnString = [], this.columns = [], this.rows = [];\n    }\n    genColumns(e) {\n      var t = Math.max(this.columnCount, Math.max(...e.map(e => e.length)));\n      this.columnString = [], this.columns = [];\n      for (let e = 1; e <= t; e++) this.incrementChar(this.columnString.length - 1), this.columns.push(this.columnString.join(\"\"));\n      return this.columns;\n    }\n    genRows(e) {\n      var t = Math.max(this.rowCount, e.length);\n      this.rows = [];\n      for (let e = 1; e <= t; e++) this.rows.push(e);\n      return this.rows;\n    }\n    incrementChar(e) {\n      let t = this.columnString[e];\n      t ? \"Z\" !== t ? this.columnString[e] = String.fromCharCode(this.columnString[e].charCodeAt(0) + 1) : (this.columnString[e] = \"A\", e ? this.incrementChar(e - 1) : this.columnString.push(\"A\")) : this.columnString.push(\"A\");\n    }\n    setRowCount(e) {\n      this.rowCount = e;\n    }\n    setColumnCount(e) {\n      this.columnCount = e;\n    }\n  }\n  class Je {\n    constructor(e) {\n      return this._sheet = e, new Proxy(this, {\n        get: function (e, t, i) {\n          return void 0 !== e[t] ? e[t] : e._sheet.table.componentFunctionBinder.handle(\"sheet\", e._sheet, t);\n        }\n      });\n    }\n    getTitle() {\n      return this._sheet.title;\n    }\n    getKey() {\n      return this._sheet.key;\n    }\n    getDefinition() {\n      return this._sheet.getDefinition();\n    }\n    getData() {\n      return this._sheet.getData();\n    }\n    setData(e) {\n      return this._sheet.setData(e);\n    }\n    clear() {\n      return this._sheet.clear();\n    }\n    remove() {\n      return this._sheet.remove();\n    }\n    active() {\n      return this._sheet.active();\n    }\n    setTitle(e) {\n      return this._sheet.setTitle(e);\n    }\n    setRows(e) {\n      return this._sheet.setRows(e);\n    }\n    setColumns(e) {\n      return this._sheet.setColumns(e);\n    }\n  }\n  class Xe extends t {\n    constructor(e, t) {\n      super(e.table), this.spreadsheetManager = e, this.definition = t, this.title = this.definition.title || \"\", this.key = this.definition.key || this.definition.title, this.rowCount = this.definition.rows, this.columnCount = this.definition.columns, this.data = this.definition.data || [], this.element = null, this.isActive = !1, this.grid = new Ue(this.columnCount, this.rowCount), this.defaultColumnDefinition = {\n        width: 100,\n        headerHozAlign: \"center\",\n        headerSort: !1\n      }, this.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options(\"spreadsheetColumnDefinition\")), this.columnDefs = [], this.rowDefs = [], this.columnFields = [], this.columns = [], this.rows = [], this.scrollTop = null, this.scrollLeft = null, this.initialize(), this.dispatchExternal(\"sheetAdded\", this.getComponent());\n    }\n    initialize() {\n      this.initializeElement(), this.initializeColumns(), this.initializeRows();\n    }\n    reinitialize() {\n      this.initializeColumns(), this.initializeRows();\n    }\n    initializeElement() {\n      this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-spreadsheet-tab\"), this.element.innerText = this.title, this.element.addEventListener(\"click\", () => {\n        this.spreadsheetManager.loadSheet(this);\n      });\n    }\n    initializeColumns() {\n      this.grid.setColumnCount(this.columnCount), this.columnFields = this.grid.genColumns(this.data), this.columnDefs = [], this.columnFields.forEach(e => {\n        var t = Object.assign({}, this.columnDefinition);\n        t.field = e, t.title = e, this.columnDefs.push(t);\n      });\n    }\n    initializeRows() {\n      var e;\n      this.grid.setRowCount(this.rowCount), e = this.grid.genRows(this.data), this.rowDefs = [], e.forEach((e, t) => {\n        var i = {\n            _id: e\n          },\n          s = this.data[t];\n        s && s.forEach((e, t) => {\n          var s = this.columnFields[t];\n          s && (i[s] = e);\n        }), this.rowDefs.push(i);\n      });\n    }\n    unload() {\n      this.isActive = !1, this.scrollTop = this.table.rowManager.scrollTop, this.scrollLeft = this.table.rowManager.scrollLeft, this.data = this.getData(!0), this.element.classList.remove(\"tabulator-spreadsheet-tab-active\");\n    }\n    load() {\n      var e = !this.isActive;\n      this.isActive = !0, this.table.blockRedraw(), this.table.setData([]), this.table.setColumns(this.columnDefs), this.table.setData(this.rowDefs), this.table.restoreRedraw(), e && null !== this.scrollTop && (this.table.rowManager.element.scrollLeft = this.scrollLeft, this.table.rowManager.element.scrollTop = this.scrollTop), this.element.classList.add(\"tabulator-spreadsheet-tab-active\"), this.dispatchExternal(\"sheetLoaded\", this.getComponent());\n    }\n    getComponent() {\n      return new Je(this);\n    }\n    getDefinition() {\n      return {\n        title: this.title,\n        key: this.key,\n        rows: this.rowCount,\n        columns: this.columnCount,\n        data: this.getData()\n      };\n    }\n    getData(e) {\n      var t,\n        i,\n        s,\n        o = [];\n      return this.rowDefs.forEach(e => {\n        var t = [];\n        this.columnFields.forEach(i => {\n          t.push(e[i]);\n        }), o.push(t);\n      }), e || this.options(\"spreadsheetOutputFull\") || (t = o.map(e => e.findLastIndex(e => void 0 !== e) + 1), i = Math.max(...t), s = t.findLastIndex(e => e > 0) + 1, o = (o = o.slice(0, s)).map(e => e.slice(0, i))), o;\n    }\n    setData(e) {\n      this.data = e, this.reinitialize(), this.dispatchExternal(\"sheetUpdated\", this.getComponent()), this.isActive && this.load();\n    }\n    clear() {\n      this.setData([]);\n    }\n    setTitle(e) {\n      this.title = e, this.element.innerText = e, this.dispatchExternal(\"sheetUpdated\", this.getComponent());\n    }\n    setRows(e) {\n      this.rowCount = e, this.initializeRows(), this.dispatchExternal(\"sheetUpdated\", this.getComponent()), this.isActive && this.load();\n    }\n    setColumns(e) {\n      this.columnCount = e, this.reinitialize(), this.dispatchExternal(\"sheetUpdated\", this.getComponent()), this.isActive && this.load();\n    }\n    remove() {\n      this.spreadsheetManager.removeSheet(this);\n    }\n    destroy() {\n      this.element.parentNode && this.element.parentNode.removeChild(this.element), this.dispatchExternal(\"sheetRemoved\", this.getComponent());\n    }\n    active() {\n      this.spreadsheetManager.loadSheet(this);\n    }\n  }\n  var qe = {\n    integer: function (e, t, i) {\n      return \"\" === t || null == t || (t = Number(t), !isNaN(t) && isFinite(t) && Math.floor(t) === t);\n    },\n    float: function (e, t, i) {\n      return \"\" === t || null == t || (t = Number(t), !isNaN(t) && isFinite(t) && t % 1 != 0);\n    },\n    numeric: function (e, t, i) {\n      return \"\" === t || null == t || !isNaN(t);\n    },\n    string: function (e, t, i) {\n      return \"\" === t || null == t || isNaN(t);\n    },\n    alphanumeric: function (e, t, i) {\n      return \"\" === t || null == t || new RegExp(/^[a-z0-9]+$/i).test(t);\n    },\n    max: function (e, t, i) {\n      return \"\" === t || null == t || parseFloat(t) <= i;\n    },\n    min: function (e, t, i) {\n      return \"\" === t || null == t || parseFloat(t) >= i;\n    },\n    starts: function (e, t, i) {\n      return \"\" === t || null == t || String(t).toLowerCase().startsWith(String(i).toLowerCase());\n    },\n    ends: function (e, t, i) {\n      return \"\" === t || null == t || String(t).toLowerCase().endsWith(String(i).toLowerCase());\n    },\n    minLength: function (e, t, i) {\n      return \"\" === t || null == t || String(t).length >= i;\n    },\n    maxLength: function (e, t, i) {\n      return \"\" === t || null == t || String(t).length <= i;\n    },\n    in: function (e, t, i) {\n      return \"\" === t || null == t || (\"string\" == typeof i && (i = i.split(\"|\")), i.indexOf(t) > -1);\n    },\n    regex: function (e, t, i) {\n      return \"\" === t || null == t || new RegExp(i).test(t);\n    },\n    unique: function (e, t, i) {\n      if (\"\" === t || null == t) return !0;\n      var s = !0,\n        o = e.getData(),\n        n = e.getColumn()._getSelf();\n      return this.table.rowManager.rows.forEach(function (e) {\n        var i = e.getData();\n        i !== o && t == n.getFieldValue(i) && (s = !1);\n      }), s;\n    },\n    required: function (e, t, i) {\n      return \"\" !== t && null != t;\n    }\n  };\n  class Ke extends M {\n    constructor(e) {\n      super(e), this.invalidCells = [], this.registerTableOption(\"validationMode\", \"blocking\"), this.registerColumnOption(\"validator\"), this.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this)), this.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this)), this.registerTableFunction(\"validate\", this.userValidate.bind(this)), this.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this)), this.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this)), this.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this)), this.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this)), this.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n    }\n    initialize() {\n      this.subscribe(\"cell-delete\", this.clearValidation.bind(this)), this.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this)), this.subscribe(\"edit-success\", this.editValidate.bind(this)), this.subscribe(\"edit-editor-clear\", this.editorClear.bind(this)), this.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n    }\n    editValidate(e, t, i) {\n      var s = \"manual\" === this.table.options.validationMode || this.validate(e.column.modules.validate, e, t);\n      return !0 !== s && setTimeout(() => {\n        e.getElement().classList.add(\"tabulator-validation-fail\"), this.dispatchExternal(\"validationFailed\", e.getComponent(), t, s);\n      }), s;\n    }\n    editorClear(e, t) {\n      t && e.column.modules.validate && this.cellValidate(e), e.getElement().classList.remove(\"tabulator-validation-fail\");\n    }\n    editedClear(e) {\n      e.modules.validate && (e.modules.validate.invalid = !1);\n    }\n    cellIsValid(e) {\n      return e.modules.validate && e.modules.validate.invalid || !0;\n    }\n    cellValidate(e) {\n      return this.validate(e.column.modules.validate, e, e.getValue());\n    }\n    columnValidate(e) {\n      var t = [];\n      return e.cells.forEach(e => {\n        !0 !== this.cellValidate(e) && t.push(e.getComponent());\n      }), !t.length || t;\n    }\n    rowValidate(e) {\n      var t = [];\n      return e.cells.forEach(e => {\n        !0 !== this.cellValidate(e) && t.push(e.getComponent());\n      }), !t.length || t;\n    }\n    userClearCellValidation(e) {\n      e || (e = this.getInvalidCells()), Array.isArray(e) || (e = [e]), e.forEach(e => {\n        this.clearValidation(e._getSelf());\n      });\n    }\n    userValidate(e) {\n      var t = [];\n      return this.table.rowManager.rows.forEach(e => {\n        var i = (e = e.getComponent()).validate();\n        !0 !== i && (t = t.concat(i));\n      }), !t.length || t;\n    }\n    initializeColumnCheck(e) {\n      void 0 !== e.definition.validator && this.initializeColumn(e);\n    }\n    initializeColumn(e) {\n      var t,\n        i = this,\n        s = [];\n      e.definition.validator && (Array.isArray(e.definition.validator) ? e.definition.validator.forEach(e => {\n        (t = i._extractValidator(e)) && s.push(t);\n      }) : (t = this._extractValidator(e.definition.validator)) && s.push(t), e.modules.validate = !!s.length && s);\n    }\n    _extractValidator(e) {\n      var t, i, s;\n      switch (typeof e) {\n        case \"string\":\n          return (s = e.indexOf(\":\")) > -1 ? (t = e.substring(0, s), i = e.substring(s + 1)) : t = e, this._buildValidator(t, i);\n        case \"function\":\n          return this._buildValidator(e);\n        case \"object\":\n          return this._buildValidator(e.type, e.parameters);\n      }\n    }\n    _buildValidator(e, t) {\n      var i = \"function\" == typeof e ? e : Ke.validators[e];\n      return i ? {\n        type: \"function\" == typeof e ? \"function\" : e,\n        func: i,\n        params: t\n      } : (console.warn(\"Validator Setup Error - No matching validator found:\", e), !1);\n    }\n    validate(e, t, i) {\n      var s = this,\n        o = [],\n        n = this.invalidCells.indexOf(t);\n      return e && e.forEach(e => {\n        e.func.call(s, t.getComponent(), i, e.params) || o.push({\n          type: e.type,\n          parameters: e.params\n        });\n      }), t.modules.validate || (t.modules.validate = {}), o.length ? (t.modules.validate.invalid = o, \"manual\" !== this.table.options.validationMode && t.getElement().classList.add(\"tabulator-validation-fail\"), -1 == n && this.invalidCells.push(t)) : (t.modules.validate.invalid = !1, t.getElement().classList.remove(\"tabulator-validation-fail\"), n > -1 && this.invalidCells.splice(n, 1)), !o.length || o;\n    }\n    getInvalidCells() {\n      var e = [];\n      return this.invalidCells.forEach(t => {\n        e.push(t.getComponent());\n      }), e;\n    }\n    clearValidation(e) {\n      var t;\n      e.modules.validate && e.modules.validate.invalid && (e.getElement().classList.remove(\"tabulator-validation-fail\"), e.modules.validate.invalid = !1, (t = this.invalidCells.indexOf(e)) > -1 && this.invalidCells.splice(t, 1));\n    }\n  }\n  _defineProperty(Ke, \"moduleName\", \"validate\");\n  _defineProperty(Ke, \"validators\", qe);\n  var Ye = Object.freeze({\n    __proto__: null,\n    AccessorModule: V,\n    AjaxModule: X,\n    ClipboardModule: $,\n    ColumnCalcsModule: ee,\n    DataTreeModule: (_Class2 = class DataTreeModule extends M {\n      constructor(e) {\n        super(e), this.indent = 10, this.field = \"\", this.collapseEl = null, this.expandEl = null, this.branchEl = null, this.elementField = !1, this.startOpen = function () {}, this.registerTableOption(\"dataTree\", !1), this.registerTableOption(\"dataTreeFilter\", !0), this.registerTableOption(\"dataTreeSort\", !0), this.registerTableOption(\"dataTreeElementColumn\", !1), this.registerTableOption(\"dataTreeBranchElement\", !0), this.registerTableOption(\"dataTreeChildIndent\", 9), this.registerTableOption(\"dataTreeChildField\", \"_children\"), this.registerTableOption(\"dataTreeCollapseElement\", !1), this.registerTableOption(\"dataTreeExpandElement\", !1), this.registerTableOption(\"dataTreeStartExpanded\", !1), this.registerTableOption(\"dataTreeChildColumnCalcs\", !1), this.registerTableOption(\"dataTreeSelectPropagate\", !1), this.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this)), this.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this)), this.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this)), this.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this)), this.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this)), this.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this)), this.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n      }\n      initialize() {\n        if (this.table.options.dataTree) {\n          var e = null,\n            t = this.table.options;\n          switch (this.field = t.dataTreeChildField, this.indent = t.dataTreeChildIndent, this.options(\"movableRows\") && console.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\"), t.dataTreeBranchElement ? !0 === t.dataTreeBranchElement ? (this.branchEl = document.createElement(\"div\"), this.branchEl.classList.add(\"tabulator-data-tree-branch\")) : \"string\" == typeof t.dataTreeBranchElement ? ((e = document.createElement(\"div\")).innerHTML = t.dataTreeBranchElement, this.branchEl = e.firstChild) : this.branchEl = t.dataTreeBranchElement : (this.branchEl = document.createElement(\"div\"), this.branchEl.classList.add(\"tabulator-data-tree-branch-empty\")), t.dataTreeCollapseElement ? \"string\" == typeof t.dataTreeCollapseElement ? ((e = document.createElement(\"div\")).innerHTML = t.dataTreeCollapseElement, this.collapseEl = e.firstChild) : this.collapseEl = t.dataTreeCollapseElement : (this.collapseEl = document.createElement(\"div\"), this.collapseEl.classList.add(\"tabulator-data-tree-control\"), this.collapseEl.tabIndex = 0, this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\"), t.dataTreeExpandElement ? \"string\" == typeof t.dataTreeExpandElement ? ((e = document.createElement(\"div\")).innerHTML = t.dataTreeExpandElement, this.expandEl = e.firstChild) : this.expandEl = t.dataTreeExpandElement : (this.expandEl = document.createElement(\"div\"), this.expandEl.classList.add(\"tabulator-data-tree-control\"), this.expandEl.tabIndex = 0, this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\"), typeof t.dataTreeStartExpanded) {\n            case \"boolean\":\n              this.startOpen = function (e, i) {\n                return t.dataTreeStartExpanded;\n              };\n              break;\n            case \"function\":\n              this.startOpen = t.dataTreeStartExpanded;\n              break;\n            default:\n              this.startOpen = function (e, i) {\n                return t.dataTreeStartExpanded[i];\n              };\n          }\n          this.subscribe(\"row-init\", this.initializeRow.bind(this)), this.subscribe(\"row-layout-after\", this.layoutRow.bind(this)), this.subscribe(\"row-deleted\", this.rowDelete.bind(this), 0), this.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10), this.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this)), this.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this)), this.subscribe(\"column-moving-rows\", this.columnMoving.bind(this)), this.subscribe(\"table-built\", this.initializeElementField.bind(this)), this.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this)), this.registerDisplayHandler(this.getRows.bind(this), 30);\n        }\n      }\n      tableRedrawing(e) {\n        e && this.table.rowManager.getRows().forEach(e => {\n          this.reinitializeRowChildren(e);\n        });\n      }\n      initializeElementField() {\n        var e = this.table.columnManager.getFirstVisibleColumn();\n        this.elementField = this.table.options.dataTreeElementColumn || !!e && e.field;\n      }\n      getRowChildren(e) {\n        return this.getTreeChildren(e, !0);\n      }\n      columnMoving() {\n        var e = [];\n        return this.table.rowManager.rows.forEach(t => {\n          e = e.concat(this.getTreeChildren(t, !1, !0));\n        }), e;\n      }\n      rowDataChanged(e, t, i) {\n        this.redrawNeeded(i) && (this.initializeRow(e), t && (this.layoutRow(e), this.refreshData(!0)));\n      }\n      cellValueChanged(e) {\n        e.column.getField() === this.elementField && this.layoutRow(e.row);\n      }\n      initializeRow(e) {\n        var t = e.getData()[this.field],\n          i = Array.isArray(t),\n          s = i || !i && \"object\" == typeof t && null !== t;\n        !s && e.modules.dataTree && e.modules.dataTree.branchEl && e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl), !s && e.modules.dataTree && e.modules.dataTree.controlEl && e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl), e.modules.dataTree = {\n          index: e.modules.dataTree ? e.modules.dataTree.index : 0,\n          open: !!s && (e.modules.dataTree ? e.modules.dataTree.open : this.startOpen(e.getComponent(), 0)),\n          controlEl: !(!e.modules.dataTree || !s) && e.modules.dataTree.controlEl,\n          branchEl: !(!e.modules.dataTree || !s) && e.modules.dataTree.branchEl,\n          parent: !!e.modules.dataTree && e.modules.dataTree.parent,\n          children: s\n        };\n      }\n      reinitializeRowChildren(e) {\n        this.getTreeChildren(e, !1, !0).forEach(function (e) {\n          e.reinitialize(!0);\n        });\n      }\n      layoutRow(e) {\n        var t = (this.elementField ? e.getCell(this.elementField) : e.getCells()[0]).getElement(),\n          i = e.modules.dataTree;\n        i.branchEl && (i.branchEl.parentNode && i.branchEl.parentNode.removeChild(i.branchEl), i.branchEl = !1), i.controlEl && (i.controlEl.parentNode && i.controlEl.parentNode.removeChild(i.controlEl), i.controlEl = !1), this.generateControlElement(e, t), e.getElement().classList.add(\"tabulator-tree-level-\" + i.index), i.index && (this.branchEl ? (i.branchEl = this.branchEl.cloneNode(!0), t.insertBefore(i.branchEl, t.firstChild), this.table.rtl ? i.branchEl.style.marginRight = (i.branchEl.offsetWidth + i.branchEl.style.marginLeft) * (i.index - 1) + i.index * this.indent + \"px\" : i.branchEl.style.marginLeft = (i.branchEl.offsetWidth + i.branchEl.style.marginRight) * (i.index - 1) + i.index * this.indent + \"px\") : this.table.rtl ? t.style.paddingRight = parseInt(window.getComputedStyle(t, null).getPropertyValue(\"padding-right\")) + i.index * this.indent + \"px\" : t.style.paddingLeft = parseInt(window.getComputedStyle(t, null).getPropertyValue(\"padding-left\")) + i.index * this.indent + \"px\");\n      }\n      generateControlElement(e, t) {\n        var i = e.modules.dataTree,\n          s = i.controlEl;\n        t = t || e.getCells()[0].getElement(), !1 !== i.children && (i.open ? (i.controlEl = this.collapseEl.cloneNode(!0), i.controlEl.addEventListener(\"click\", t => {\n          t.stopPropagation(), this.collapseRow(e);\n        })) : (i.controlEl = this.expandEl.cloneNode(!0), i.controlEl.addEventListener(\"click\", t => {\n          t.stopPropagation(), this.expandRow(e);\n        })), i.controlEl.addEventListener(\"mousedown\", e => {\n          e.stopPropagation();\n        }), s && s.parentNode === t ? s.parentNode.replaceChild(i.controlEl, s) : t.insertBefore(i.controlEl, t.firstChild));\n      }\n      getRows(e) {\n        var t = [];\n        return e.forEach((e, i) => {\n          var s;\n          t.push(e), e instanceof p && (e.create(), (s = e.modules.dataTree).index || !1 === s.children || this.getChildren(e, !1, !0).forEach(e => {\n            e.create(), t.push(e);\n          }));\n        }), t;\n      }\n      getChildren(e, t, i) {\n        var s = e.modules.dataTree,\n          o = [],\n          n = [];\n        return !1 !== s.children && (s.open || t) && (Array.isArray(s.children) || (s.children = this.generateChildren(e)), o = this.table.modExists(\"filter\") && this.table.options.dataTreeFilter ? this.table.modules.filter.filter(s.children) : s.children, this.table.modExists(\"sort\") && this.table.options.dataTreeSort && this.table.modules.sort.sort(o, i), o.forEach(e => {\n          n.push(e), this.getChildren(e, !1, !0).forEach(e => {\n            n.push(e);\n          });\n        })), n;\n      }\n      generateChildren(e) {\n        var t = [],\n          i = e.getData()[this.field];\n        return Array.isArray(i) || (i = [i]), i.forEach(i => {\n          var s = new p(i || {}, this.table.rowManager);\n          s.create(), s.modules.dataTree.index = e.modules.dataTree.index + 1, s.modules.dataTree.parent = e, s.modules.dataTree.children && (s.modules.dataTree.open = this.startOpen(s.getComponent(), s.modules.dataTree.index)), t.push(s);\n        }), t;\n      }\n      expandRow(e, t) {\n        var i = e.modules.dataTree;\n        !1 !== i.children && (i.open = !0, e.reinitialize(), this.refreshData(!0), this.dispatchExternal(\"dataTreeRowExpanded\", e.getComponent(), e.modules.dataTree.index));\n      }\n      collapseRow(e) {\n        var t = e.modules.dataTree;\n        !1 !== t.children && (t.open = !1, e.reinitialize(), this.refreshData(!0), this.dispatchExternal(\"dataTreeRowCollapsed\", e.getComponent(), e.modules.dataTree.index));\n      }\n      toggleRow(e) {\n        var t = e.modules.dataTree;\n        !1 !== t.children && (t.open ? this.collapseRow(e) : this.expandRow(e));\n      }\n      isRowExpanded(e) {\n        return e.modules.dataTree.open;\n      }\n      getTreeParent(e) {\n        return !!e.modules.dataTree.parent && e.modules.dataTree.parent.getComponent();\n      }\n      getTreeParentRoot(e) {\n        return e.modules.dataTree && e.modules.dataTree.parent ? this.getTreeParentRoot(e.modules.dataTree.parent) : e;\n      }\n      getFilteredTreeChildren(e) {\n        var t = e.modules.dataTree,\n          i = [];\n        return t.children && (Array.isArray(t.children) || (t.children = this.generateChildren(e)), (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter ? this.table.modules.filter.filter(t.children) : t.children).forEach(e => {\n          e instanceof p && i.push(e);\n        })), i;\n      }\n      rowDelete(e) {\n        var t,\n          i = e.modules.dataTree.parent;\n        i && (!1 !== (t = this.findChildIndex(e, i)) && i.data[this.field].splice(t, 1), i.data[this.field].length || delete i.data[this.field], this.initializeRow(i), this.layoutRow(i)), this.refreshData(!0);\n      }\n      addTreeChildRow(e, t, i, s) {\n        var o = !1;\n        \"string\" == typeof t && (t = JSON.parse(t)), Array.isArray(e.data[this.field]) || (e.data[this.field] = [], e.modules.dataTree.open = this.startOpen(e.getComponent(), e.modules.dataTree.index)), void 0 !== s && !1 !== (o = this.findChildIndex(s, e)) && e.data[this.field].splice(i ? o : o + 1, 0, t), !1 === o && (i ? e.data[this.field].unshift(t) : e.data[this.field].push(t)), this.initializeRow(e), this.layoutRow(e), this.refreshData(!0);\n      }\n      findChildIndex(e, t) {\n        var i = !1;\n        return \"object\" == typeof e ? e instanceof p ? i = e.data : e instanceof m ? i = e._getSelf().data : \"undefined\" != typeof HTMLElement && e instanceof HTMLElement ? t.modules.dataTree && (i = t.modules.dataTree.children.find(t => t instanceof p && t.element === e)) && (i = i.data) : null === e && (i = !1) : i = void 0 !== e && t.data[this.field].find(t => t.data[this.table.options.index] == e), i && (Array.isArray(t.data[this.field]) && (i = t.data[this.field].indexOf(i)), -1 == i && (i = !1)), i;\n      }\n      getTreeChildren(e, t, i) {\n        var s = e.modules.dataTree,\n          o = [];\n        return s && s.children && (Array.isArray(s.children) || (s.children = this.generateChildren(e)), s.children.forEach(e => {\n          e instanceof p && (o.push(t ? e.getComponent() : e), i && this.getTreeChildren(e, t, i).forEach(e => {\n            o.push(e);\n          }));\n        })), o;\n      }\n      getChildField() {\n        return this.field;\n      }\n      redrawNeeded(e) {\n        return !!this.field && void 0 !== e[this.field] || !!this.elementField && void 0 !== e[this.elementField];\n      }\n    }, _defineProperty(_Class2, \"moduleName\", \"dataTree\"), _Class2),\n    DownloadModule: ie,\n    EditModule: re,\n    ExportModule: ce,\n    FilterModule: me,\n    FormatModule: ge,\n    FrozenColumnsModule: (_Class3 = class FrozenColumnsModule extends M {\n      constructor(e) {\n        super(e), this.leftColumns = [], this.rightColumns = [], this.initializationMode = \"left\", this.active = !1, this.blocked = !0, this.registerColumnOption(\"frozen\");\n      }\n      reset() {\n        this.initializationMode = \"left\", this.leftColumns = [], this.rightColumns = [], this.active = !1;\n      }\n      initialize() {\n        this.subscribe(\"cell-layout\", this.layoutCell.bind(this)), this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"column-width\", this.layout.bind(this)), this.subscribe(\"row-layout-after\", this.layoutRow.bind(this)), this.subscribe(\"table-layout\", this.layout.bind(this)), this.subscribe(\"columns-loading\", this.reset.bind(this)), this.subscribe(\"column-add\", this.reinitializeColumns.bind(this)), this.subscribe(\"column-deleted\", this.reinitializeColumns.bind(this)), this.subscribe(\"column-hide\", this.reinitializeColumns.bind(this)), this.subscribe(\"column-show\", this.reinitializeColumns.bind(this)), this.subscribe(\"columns-loaded\", this.reinitializeColumns.bind(this)), this.subscribe(\"table-redraw\", this.layout.bind(this)), this.subscribe(\"layout-refreshing\", this.blockLayout.bind(this)), this.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this)), this.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n      }\n      blockLayout() {\n        this.blocked = !0;\n      }\n      unblockLayout() {\n        this.blocked = !1;\n      }\n      layoutCell(e) {\n        this.layoutElement(e.element, e.column);\n      }\n      reinitializeColumns() {\n        this.reset(), this.table.columnManager.columnsByIndex.forEach(e => {\n          this.initializeColumn(e);\n        }), this.layout();\n      }\n      initializeColumn(e) {\n        var t = {\n          margin: 0,\n          edge: !1\n        };\n        e.isGroup || (this.frozenCheck(e) ? (t.position = this.initializationMode, \"left\" == this.initializationMode ? this.leftColumns.push(e) : this.rightColumns.unshift(e), this.active = !0, e.modules.frozen = t) : this.initializationMode = \"right\");\n      }\n      frozenCheck(e) {\n        return e.parent.isGroup && e.definition.frozen && console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\"), e.parent.isGroup ? this.frozenCheck(e.parent) : e.definition.frozen;\n      }\n      layoutCalcRows() {\n        this.table.modExists(\"columnCalcs\") && (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow && this.layoutRow(this.table.modules.columnCalcs.topRow), this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow && this.layoutRow(this.table.modules.columnCalcs.botRow), this.table.modExists(\"groupRows\") && this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()));\n      }\n      layoutGroupCalcs(e) {\n        e.forEach(e => {\n          e.calcs.top && this.layoutRow(e.calcs.top), e.calcs.bottom && this.layoutRow(e.calcs.bottom), e.groupList && e.groupList.length && this.layoutGroupCalcs(e.groupList);\n        });\n      }\n      layoutColumnPosition(e) {\n        var t = [],\n          i = 0,\n          s = 0;\n        this.leftColumns.forEach((s, o) => {\n          if (s.modules.frozen.marginValue = i, s.modules.frozen.margin = s.modules.frozen.marginValue + \"px\", s.visible && (i += s.getWidth()), o == this.leftColumns.length - 1 ? s.modules.frozen.edge = !0 : s.modules.frozen.edge = !1, s.parent.isGroup) {\n            var n = this.getColGroupParentElement(s);\n            t.includes(n) || (this.layoutElement(n, s), t.push(n)), n.classList.toggle(\"tabulator-frozen-left\", s.modules.frozen.edge && \"left\" === s.modules.frozen.position), n.classList.toggle(\"tabulator-frozen-right\", s.modules.frozen.edge && \"right\" === s.modules.frozen.position);\n          } else this.layoutElement(s.getElement(), s);\n          e && s.cells.forEach(e => {\n            this.layoutElement(e.getElement(!0), s);\n          });\n        }), this.rightColumns.forEach((t, i) => {\n          t.modules.frozen.marginValue = s, t.modules.frozen.margin = t.modules.frozen.marginValue + \"px\", t.visible && (s += t.getWidth()), i == this.rightColumns.length - 1 ? t.modules.frozen.edge = !0 : t.modules.frozen.edge = !1, t.parent.isGroup ? this.layoutElement(this.getColGroupParentElement(t), t) : this.layoutElement(t.getElement(), t), e && t.cells.forEach(e => {\n            this.layoutElement(e.getElement(!0), t);\n          });\n        });\n      }\n      getColGroupParentElement(e) {\n        return e.parent.isGroup ? this.getColGroupParentElement(e.parent) : e.getElement();\n      }\n      layout() {\n        this.active && !this.blocked && (this.layoutColumnPosition(), this.reinitializeRows(), this.layoutCalcRows());\n      }\n      reinitializeRows() {\n        var e = this.table.rowManager.getVisibleRows(!0);\n        this.table.rowManager.getRows().filter(t => !e.includes(t)).forEach(e => {\n          e.deinitialize();\n        }), e.forEach(e => {\n          \"row\" === e.type && this.layoutRow(e);\n        });\n      }\n      layoutRow(e) {\n        \"fitDataFill\" === this.table.options.layout && this.rightColumns.length && (this.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\"), this.leftColumns.forEach(t => {\n          var i = e.getCell(t);\n          i && this.layoutElement(i.getElement(!0), t);\n        }), this.rightColumns.forEach(t => {\n          var i = e.getCell(t);\n          i && this.layoutElement(i.getElement(!0), t);\n        });\n      }\n      layoutElement(e, t) {\n        var i;\n        t.modules.frozen && e && (e.style.position = \"sticky\", i = this.table.rtl ? \"left\" === t.modules.frozen.position ? \"right\" : \"left\" : t.modules.frozen.position, e.style[i] = t.modules.frozen.margin, e.classList.add(\"tabulator-frozen\"), e.classList.toggle(\"tabulator-frozen-left\", t.modules.frozen.edge && \"left\" === t.modules.frozen.position), e.classList.toggle(\"tabulator-frozen-right\", t.modules.frozen.edge && \"right\" === t.modules.frozen.position));\n      }\n      adjustForScrollbar(e) {\n        this.rightColumns.length && (this.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + e + \"px)\");\n      }\n      getFrozenColumns() {\n        return this.leftColumns.concat(this.rightColumns);\n      }\n      _calcSpace(e, t) {\n        var i = 0;\n        for (let s = 0; s < t; s++) e[s].visible && (i += e[s].getWidth());\n        return i;\n      }\n    }, _defineProperty(_Class3, \"moduleName\", \"frozenColumns\"), _Class3),\n    FrozenRowsModule: (_Class4 = class FrozenRowsModule extends M {\n      constructor(e) {\n        super(e), this.topElement = document.createElement(\"div\"), this.rows = [], this.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this)), this.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this)), this.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this)), this.registerTableOption(\"frozenRowsField\", \"id\"), this.registerTableOption(\"frozenRows\", !1);\n      }\n      initialize() {\n        var e = document.createDocumentFragment();\n        this.rows = [], this.topElement.classList.add(\"tabulator-frozen-rows-holder\"), e.appendChild(document.createElement(\"br\")), e.appendChild(this.topElement), this.table.columnManager.getContentsElement().insertBefore(e, this.table.columnManager.headersElement.nextSibling), this.subscribe(\"row-deleting\", this.detachRow.bind(this)), this.subscribe(\"rows-visible\", this.visibleRows.bind(this)), this.registerDisplayHandler(this.getRows.bind(this), 10), this.table.options.frozenRows && (this.subscribe(\"data-processed\", this.initializeRows.bind(this)), this.subscribe(\"row-added\", this.initializeRow.bind(this)), this.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-show\", this.resizeHolderWidth.bind(this)), this.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this))), this.resizeHolderWidth();\n      }\n      resizeHolderWidth() {\n        this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n      }\n      initializeRows() {\n        this.table.rowManager.getRows().forEach(e => {\n          this.initializeRow(e);\n        });\n      }\n      initializeRow(e) {\n        var t = this.table.options.frozenRows,\n          i = typeof t;\n        \"number\" === i ? e.getPosition() && e.getPosition() + this.rows.length <= t && this.freezeRow(e) : \"function\" === i ? t.call(this.table, e.getComponent()) && this.freezeRow(e) : Array.isArray(t) && t.includes(e.data[this.options(\"frozenRowsField\")]) && this.freezeRow(e);\n      }\n      isRowFrozen(e) {\n        return this.rows.indexOf(e) > -1;\n      }\n      isFrozen() {\n        return !!this.rows.length;\n      }\n      visibleRows(e, t) {\n        return this.rows.forEach(e => {\n          t.push(e);\n        }), t;\n      }\n      getRows(e) {\n        var t = e.slice(0);\n        return this.rows.forEach(function (e) {\n          var i = t.indexOf(e);\n          i > -1 && t.splice(i, 1);\n        }), t;\n      }\n      freezeRow(e) {\n        e.modules.frozen ? console.warn(\"Freeze Error - Row is already frozen\") : (e.modules.frozen = !0, this.topElement.appendChild(e.getElement()), e.initialize(), e.normalizeHeight(), this.rows.push(e), this.refreshData(!1, \"display\"), this.table.rowManager.adjustTableSize(), this.styleRows());\n      }\n      unfreezeRow(e) {\n        e.modules.frozen ? (e.modules.frozen = !1, this.detachRow(e), this.table.rowManager.adjustTableSize(), this.refreshData(!1, \"display\"), this.rows.length && this.styleRows()) : console.warn(\"Freeze Error - Row is already unfrozen\");\n      }\n      detachRow(e) {\n        var t = this.rows.indexOf(e);\n        if (t > -1) {\n          var i = e.getElement();\n          i.parentNode && i.parentNode.removeChild(i), this.rows.splice(t, 1);\n        }\n      }\n      styleRows(e) {\n        this.rows.forEach((e, t) => {\n          this.table.rowManager.styleRow(e, t);\n        });\n      }\n    }, _defineProperty(_Class4, \"moduleName\", \"frozenRows\"), _Class4),\n    GroupRowsModule: (_Class5 = class GroupRowsModule extends M {\n      constructor(e) {\n        super(e), this.groupIDLookups = !1, this.startOpen = [function () {\n          return !1;\n        }], this.headerGenerator = [function () {\n          return \"\";\n        }], this.groupList = [], this.allowedValues = !1, this.groups = {}, this.displayHandler = this.getRows.bind(this), this.blockRedraw = !1, this.registerTableOption(\"groupBy\", !1), this.registerTableOption(\"groupStartOpen\", !0), this.registerTableOption(\"groupValues\", !1), this.registerTableOption(\"groupUpdateOnCellEdit\", !1), this.registerTableOption(\"groupHeader\", !1), this.registerTableOption(\"groupHeaderPrint\", null), this.registerTableOption(\"groupHeaderClipboard\", null), this.registerTableOption(\"groupHeaderHtmlOutput\", null), this.registerTableOption(\"groupHeaderDownload\", null), this.registerTableOption(\"groupToggleElement\", \"arrow\"), this.registerTableOption(\"groupClosedShowCalcs\", !1), this.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this)), this.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this)), this.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this)), this.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this)), this.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this)), this.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this)), this.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n      }\n      initialize() {\n        this.subscribe(\"table-destroy\", this._blockRedrawing.bind(this)), this.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this)), this.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this)), this.table.options.groupBy && (this.table.options.groupUpdateOnCellEdit && (this.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this)), this.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0)), this.subscribe(\"table-built\", this.configureGroupSetup.bind(this)), this.subscribe(\"row-deleting\", this.rowDeleting.bind(this)), this.subscribe(\"row-deleted\", this.rowsUpdated.bind(this)), this.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this)), this.subscribe(\"rows-wipe\", this.wipe.bind(this)), this.subscribe(\"rows-added\", this.rowsUpdated.bind(this)), this.subscribe(\"row-moving\", this.rowMoving.bind(this)), this.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this)), this.subscribe(\"rows-sample\", this.rowSample.bind(this)), this.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this)), this.registerDisplayHandler(this.displayHandler, 20), this.initialized = !0);\n      }\n      _blockRedrawing() {\n        this.blockRedraw = !0;\n      }\n      _restore_redrawing() {\n        this.blockRedraw = !1;\n      }\n      configureGroupSetup() {\n        if (this.table.options.groupBy) {\n          var e = this.table.options.groupBy,\n            t = this.table.options.groupStartOpen,\n            i = this.table.options.groupHeader;\n          if (this.allowedValues = this.table.options.groupValues, Array.isArray(e) && Array.isArray(i) && e.length > i.length && console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\"), this.headerGenerator = [function () {\n            return \"\";\n          }], this.startOpen = [function () {\n            return !1;\n          }], this.langBind(\"groups|item\", (e, t) => {\n            this.headerGenerator[0] = (i, s, o) => (void 0 === i ? \"\" : i) + \"<span>(\" + s + \" \" + (1 === s ? e : t.groups.items) + \")</span>\";\n          }), this.groupIDLookups = [], e) this.table.modExists(\"columnCalcs\") && \"table\" != this.table.options.columnCalcs && \"both\" != this.table.options.columnCalcs && this.table.modules.columnCalcs.removeCalcs();else if (this.table.modExists(\"columnCalcs\") && \"group\" != this.table.options.columnCalcs) this.table.columnManager.getRealColumns().forEach(e => {\n            e.definition.topCalc && this.table.modules.columnCalcs.initializeTopRow(), e.definition.bottomCalc && this.table.modules.columnCalcs.initializeBottomRow();\n          });\n          Array.isArray(e) || (e = [e]), e.forEach((e, t) => {\n            var i, s;\n            i = \"function\" == typeof e ? e : (s = this.table.columnManager.getColumnByField(e)) ? function (e) {\n              return s.getFieldValue(e);\n            } : function (t) {\n              return t[e];\n            }, this.groupIDLookups.push({\n              field: \"function\" != typeof e && e,\n              func: i,\n              values: !!this.allowedValues && this.allowedValues[t]\n            });\n          }), t && (Array.isArray(t) || (t = [t]), t.forEach(e => {}), this.startOpen = t), i && (this.headerGenerator = Array.isArray(i) ? i : [i]);\n        } else this.groupList = [], this.groups = {};\n      }\n      rowSample(e, t) {\n        if (this.table.options.groupBy) {\n          var i = this.getGroups(!1)[0];\n          t.push(i.getRows(!1)[0]);\n        }\n        return t;\n      }\n      virtualRenderFill() {\n        var e = this.table.rowManager.tableElement,\n          t = this.table.rowManager.getVisibleRows();\n        if (!this.table.options.groupBy) return t;\n        t = t.filter(e => \"group\" !== e.type), e.style.minWidth = t.length ? \"\" : this.table.columnManager.getWidth() + \"px\";\n      }\n      rowAddingIndex(e, t, i) {\n        if (this.table.options.groupBy) {\n          this.assignRowToGroup(e);\n          var s = e.modules.group.rows;\n          return s.length > 1 && (!t || t && -1 == s.indexOf(t) ? i ? s[0] !== e && (t = s[0], this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)) : s[s.length - 1] !== e && (t = s[s.length - 1], this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)) : this.table.rowManager.moveRowInArray(e.modules.group.rows, e, t, !i)), t;\n        }\n      }\n      trackChanges() {\n        this.dispatch(\"group-changed\");\n      }\n      setGroupBy(e) {\n        this.table.options.groupBy = e, this.initialized || this.initialize(), this.configureGroupSetup(), !e && this.table.modExists(\"columnCalcs\") && !0 === this.table.options.columnCalcs && this.table.modules.columnCalcs.reinitializeCalcs(), this.refreshData(), this.trackChanges();\n      }\n      setGroupValues(e) {\n        this.table.options.groupValues = e, this.configureGroupSetup(), this.refreshData(), this.trackChanges();\n      }\n      setGroupStartOpen(e) {\n        this.table.options.groupStartOpen = e, this.configureGroupSetup(), this.table.options.groupBy ? (this.refreshData(), this.trackChanges()) : console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n      setGroupHeader(e) {\n        this.table.options.groupHeader = e, this.configureGroupSetup(), this.table.options.groupBy ? (this.refreshData(), this.trackChanges()) : console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n      userGetGroups(e) {\n        return this.getGroups(!0);\n      }\n      userGetGroupedData() {\n        return this.table.options.groupBy ? this.getGroupedData() : this.getData();\n      }\n      rowGetGroup(e) {\n        return !!e.modules.group && e.modules.group.getComponent();\n      }\n      rowMoving(e, t, i) {\n        if (this.table.options.groupBy) {\n          !i && t instanceof fe && (t = this.table.rowManager.prevDisplayRow(e) || t);\n          var s = t instanceof fe ? t : t.modules.group,\n            o = e instanceof fe ? e : e.modules.group;\n          s === o ? this.table.rowManager.moveRowInArray(s.rows, e, t, i) : (o && o.removeRow(e), s.insertRow(e, t, i));\n        }\n      }\n      rowDeleting(e) {\n        this.table.options.groupBy && e.modules.group && e.modules.group.removeRow(e);\n      }\n      rowsUpdated(e) {\n        this.table.options.groupBy && this.updateGroupRows(!0);\n      }\n      cellUpdated(e) {\n        this.table.options.groupBy && this.reassignRowToGroup(e.row);\n      }\n      getRows(e) {\n        return this.table.options.groupBy && this.groupIDLookups.length ? (this.dispatchExternal(\"dataGrouping\"), this.generateGroups(e), this.subscribedExternal(\"dataGrouped\") && this.dispatchExternal(\"dataGrouped\", this.getGroups(!0)), this.updateGroupRows()) : e.slice(0);\n      }\n      getGroups(e) {\n        var t = [];\n        return this.groupList.forEach(function (i) {\n          t.push(e ? i.getComponent() : i);\n        }), t;\n      }\n      getChildGroups(e) {\n        var t = [];\n        return e || (e = this), e.groupList.forEach(e => {\n          e.groupList.length ? t = t.concat(this.getChildGroups(e)) : t.push(e);\n        }), t;\n      }\n      wipe() {\n        this.table.options.groupBy && (this.groupList.forEach(function (e) {\n          e.wipe();\n        }), this.groupList = [], this.groups = {});\n      }\n      pullGroupListData(e) {\n        var t = [];\n        return e.forEach(e => {\n          var i = {\n              level: 0,\n              rowCount: 0,\n              headerContent: \"\"\n            },\n            s = [];\n          e.hasSubGroups ? (s = this.pullGroupListData(e.groupList), i.level = e.level, i.rowCount = s.length - e.groupList.length, i.headerContent = e.generator(e.key, i.rowCount, e.rows, e), t.push(i), t = t.concat(s)) : (i.level = e.level, i.headerContent = e.generator(e.key, e.rows.length, e.rows, e), i.rowCount = e.getRows().length, t.push(i), e.getRows().forEach(e => {\n            t.push(e.getData(\"data\"));\n          }));\n        }), t;\n      }\n      getGroupedData() {\n        return this.pullGroupListData(this.groupList);\n      }\n      getRowGroup(e) {\n        var t = !1;\n        return this.options(\"dataTree\") && (e = this.table.modules.dataTree.getTreeParentRoot(e)), this.groupList.forEach(i => {\n          var s = i.getRowGroup(e);\n          s && (t = s);\n        }), t;\n      }\n      countGroups() {\n        return this.groupList.length;\n      }\n      generateGroups(e) {\n        var t = this.groups;\n        this.groups = {}, this.groupList = [], this.allowedValues && this.allowedValues[0] ? (this.allowedValues[0].forEach(e => {\n          this.createGroup(e, 0, t);\n        }), e.forEach(e => {\n          this.assignRowToExistingGroup(e, t);\n        })) : e.forEach(e => {\n          this.assignRowToGroup(e, t);\n        }), Object.values(t).forEach(e => {\n          e.wipe(!0);\n        });\n      }\n      createGroup(e, t, i) {\n        var s,\n          o = t + \"_\" + e;\n        i = i || [], s = new fe(this, !1, t, e, this.groupIDLookups[0].field, this.headerGenerator[0], i[o]), this.groups[o] = s, this.groupList.push(s);\n      }\n      assignRowToExistingGroup(e, t) {\n        var i = \"0_\" + this.groupIDLookups[0].func(e.getData());\n        this.groups[i] && this.groups[i].addRow(e);\n      }\n      assignRowToGroup(e, t) {\n        var i = this.groupIDLookups[0].func(e.getData()),\n          s = !this.groups[\"0_\" + i];\n        return s && this.createGroup(i, 0, t), this.groups[\"0_\" + i].addRow(e), !s;\n      }\n      reassignRowToGroup(e) {\n        if (\"row\" === e.type) {\n          var t = e.modules.group,\n            i = t.getPath(),\n            s = this.getExpectedPath(e);\n          i.length == s.length && i.every((e, t) => e === s[t]) || (t.removeRow(e), this.assignRowToGroup(e, this.groups), this.refreshData(!0));\n        }\n      }\n      getExpectedPath(e) {\n        var t = [],\n          i = e.getData();\n        return this.groupIDLookups.forEach(e => {\n          t.push(e.func(i));\n        }), t;\n      }\n      updateGroupRows(e) {\n        var t = [];\n        return this.blockRedraw || (this.groupList.forEach(e => {\n          t = t.concat(e.getHeadersAndRows());\n        }), e && this.refreshData(!0)), t;\n      }\n      scrollHeaders(e) {\n        this.table.options.groupBy && (\"virtual\" === this.table.options.renderHorizontal && (e -= this.table.columnManager.renderer.vDomPadLeft), e += \"px\", this.groupList.forEach(t => {\n          t.scrollHeader(e);\n        }));\n      }\n      removeGroup(e) {\n        var t,\n          i = e.level + \"_\" + e.key;\n        this.groups[i] && (delete this.groups[i], (t = this.groupList.indexOf(e)) > -1 && this.groupList.splice(t, 1));\n      }\n      checkBasicModeGroupHeaderWidth() {\n        var e = this.table.rowManager.tableElement,\n          t = !0;\n        this.table.rowManager.getDisplayRows().forEach((i, s) => {\n          this.table.rowManager.styleRow(i, s), e.appendChild(i.getElement()), i.initialize(!0), \"group\" !== i.type && (t = !1);\n        }), e.style.minWidth = t ? this.table.columnManager.getWidth() + \"px\" : \"\";\n      }\n    }, _defineProperty(_Class5, \"moduleName\", \"groupRows\"), _Class5),\n    HistoryModule: Ee,\n    HtmlTableImportModule: (_Class6 = class HtmlTableImportModule extends M {\n      constructor(e) {\n        super(e), this.fieldIndex = [], this.hasIndex = !1;\n      }\n      initialize() {\n        this.tableElementCheck();\n      }\n      tableElementCheck() {\n        this.table.originalElement && \"TABLE\" === this.table.originalElement.tagName && (this.table.originalElement.childNodes.length ? this.parseTable() : console.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\"));\n      }\n      parseTable() {\n        var e = this.table.originalElement,\n          t = this.table.options,\n          i = e.getElementsByTagName(\"th\"),\n          s = e.getElementsByTagName(\"tbody\")[0],\n          o = [];\n        this.hasIndex = !1, this.dispatchExternal(\"htmlImporting\"), s = s ? s.getElementsByTagName(\"tr\") : [], this._extractOptions(e, t), i.length ? this._extractHeaders(i, s) : this._generateBlankHeaders(i, s);\n        for (var n = 0; n < s.length; n++) {\n          var r = s[n].getElementsByTagName(\"td\"),\n            a = {};\n          this.hasIndex || (a[t.index] = n);\n          for (var l = 0; l < r.length; l++) {\n            var h = r[l];\n            void 0 !== this.fieldIndex[l] && (a[this.fieldIndex[l]] = h.innerHTML);\n          }\n          o.push(a);\n        }\n        t.data = o, this.dispatchExternal(\"htmlImported\");\n      }\n      _extractOptions(e, t, i) {\n        var s = e.attributes,\n          o = i ? Object.keys(i) : Object.keys(t),\n          n = {};\n        for (var r in o.forEach(e => {\n          n[e.toLowerCase()] = e;\n        }), s) {\n          var a,\n            l = s[r];\n          l && \"object\" == typeof l && l.name && 0 === l.name.indexOf(\"tabulator-\") && (a = l.name.replace(\"tabulator-\", \"\"), void 0 !== n[a] && (t[n[a]] = this._attribValue(l.value)));\n        }\n      }\n      _attribValue(e) {\n        return \"true\" === e || \"false\" !== e && e;\n      }\n      _findCol(e) {\n        return this.table.options.columns.find(t => t.title === e) || !1;\n      }\n      _extractHeaders(e, t) {\n        for (var i = 0; i < e.length; i++) {\n          var s,\n            o = e[i],\n            n = !1,\n            r = this._findCol(o.textContent);\n          r ? n = !0 : r = {\n            title: o.textContent.trim()\n          }, r.field || (r.field = o.textContent.trim().toLowerCase().replaceAll(\" \", \"_\")), (s = o.getAttribute(\"width\")) && !r.width && (r.width = s), this._extractOptions(o, r, this.table.columnManager.optionsList.registeredDefaults), this.fieldIndex[i] = r.field, r.field == this.table.options.index && (this.hasIndex = !0), n || this.table.options.columns.push(r);\n        }\n      }\n      _generateBlankHeaders(e, t) {\n        for (var i = 0; i < e.length; i++) {\n          var s = e[i],\n            o = {\n              title: \"\",\n              field: \"col\" + i\n            };\n          this.fieldIndex[i] = o.field;\n          var n = s.getAttribute(\"width\");\n          n && (o.width = n), this.table.options.columns.push(o);\n        }\n      }\n    }, _defineProperty(_Class6, \"moduleName\", \"htmlTableImport\"), _Class6),\n    ImportModule: Re,\n    InteractionModule: (_Class7 = class InteractionModule extends M {\n      constructor(e) {\n        super(e), this.eventMap = {\n          rowClick: \"row-click\",\n          rowDblClick: \"row-dblclick\",\n          rowContext: \"row-contextmenu\",\n          rowMouseEnter: \"row-mouseenter\",\n          rowMouseLeave: \"row-mouseleave\",\n          rowMouseOver: \"row-mouseover\",\n          rowMouseOut: \"row-mouseout\",\n          rowMouseMove: \"row-mousemove\",\n          rowMouseDown: \"row-mousedown\",\n          rowMouseUp: \"row-mouseup\",\n          rowTap: \"row\",\n          rowDblTap: \"row\",\n          rowTapHold: \"row\",\n          cellClick: \"cell-click\",\n          cellDblClick: \"cell-dblclick\",\n          cellContext: \"cell-contextmenu\",\n          cellMouseEnter: \"cell-mouseenter\",\n          cellMouseLeave: \"cell-mouseleave\",\n          cellMouseOver: \"cell-mouseover\",\n          cellMouseOut: \"cell-mouseout\",\n          cellMouseMove: \"cell-mousemove\",\n          cellMouseDown: \"cell-mousedown\",\n          cellMouseUp: \"cell-mouseup\",\n          cellTap: \"cell\",\n          cellDblTap: \"cell\",\n          cellTapHold: \"cell\",\n          headerClick: \"column-click\",\n          headerDblClick: \"column-dblclick\",\n          headerContext: \"column-contextmenu\",\n          headerMouseEnter: \"column-mouseenter\",\n          headerMouseLeave: \"column-mouseleave\",\n          headerMouseOver: \"column-mouseover\",\n          headerMouseOut: \"column-mouseout\",\n          headerMouseMove: \"column-mousemove\",\n          headerMouseDown: \"column-mousedown\",\n          headerMouseUp: \"column-mouseup\",\n          headerTap: \"column\",\n          headerDblTap: \"column\",\n          headerTapHold: \"column\",\n          groupClick: \"group-click\",\n          groupDblClick: \"group-dblclick\",\n          groupContext: \"group-contextmenu\",\n          groupMouseEnter: \"group-mouseenter\",\n          groupMouseLeave: \"group-mouseleave\",\n          groupMouseOver: \"group-mouseover\",\n          groupMouseOut: \"group-mouseout\",\n          groupMouseMove: \"group-mousemove\",\n          groupMouseDown: \"group-mousedown\",\n          groupMouseUp: \"group-mouseup\",\n          groupTap: \"group\",\n          groupDblTap: \"group\",\n          groupTapHold: \"group\"\n        }, this.subscribers = {}, this.touchSubscribers = {}, this.columnSubscribers = {}, this.touchWatchers = {\n          row: {\n            tap: null,\n            tapDbl: null,\n            tapHold: null\n          },\n          cell: {\n            tap: null,\n            tapDbl: null,\n            tapHold: null\n          },\n          column: {\n            tap: null,\n            tapDbl: null,\n            tapHold: null\n          },\n          group: {\n            tap: null,\n            tapDbl: null,\n            tapHold: null\n          }\n        }, this.registerColumnOption(\"headerClick\"), this.registerColumnOption(\"headerDblClick\"), this.registerColumnOption(\"headerContext\"), this.registerColumnOption(\"headerMouseEnter\"), this.registerColumnOption(\"headerMouseLeave\"), this.registerColumnOption(\"headerMouseOver\"), this.registerColumnOption(\"headerMouseOut\"), this.registerColumnOption(\"headerMouseMove\"), this.registerColumnOption(\"headerMouseDown\"), this.registerColumnOption(\"headerMouseUp\"), this.registerColumnOption(\"headerTap\"), this.registerColumnOption(\"headerDblTap\"), this.registerColumnOption(\"headerTapHold\"), this.registerColumnOption(\"cellClick\"), this.registerColumnOption(\"cellDblClick\"), this.registerColumnOption(\"cellContext\"), this.registerColumnOption(\"cellMouseEnter\"), this.registerColumnOption(\"cellMouseLeave\"), this.registerColumnOption(\"cellMouseOver\"), this.registerColumnOption(\"cellMouseOut\"), this.registerColumnOption(\"cellMouseMove\"), this.registerColumnOption(\"cellMouseDown\"), this.registerColumnOption(\"cellMouseUp\"), this.registerColumnOption(\"cellTap\"), this.registerColumnOption(\"cellDblTap\"), this.registerColumnOption(\"cellTapHold\");\n      }\n      initialize() {\n        this.initializeExternalEvents(), this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this)), this.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this)), this.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n      }\n      clearTouchWatchers() {\n        Object.values(this.touchWatchers).forEach(e => {\n          for (let t in e) e[t] = null;\n        });\n      }\n      cellContentsSelectionFixer(e, t) {\n        var i;\n        if (!this.table.modExists(\"edit\") || this.table.modules.edit.currentCell !== t) {\n          e.preventDefault();\n          try {\n            document.selection ? ((i = document.body.createTextRange()).moveToElementText(t.getElement()), i.select()) : window.getSelection && ((i = document.createRange()).selectNode(t.getElement()), window.getSelection().removeAllRanges(), window.getSelection().addRange(i));\n          } catch (e) {}\n        }\n      }\n      initializeExternalEvents() {\n        for (let e in this.eventMap) this.subscriptionChangeExternal(e, this.subscriptionChanged.bind(this, e));\n      }\n      subscriptionChanged(e, t) {\n        t ? this.subscribers[e] || (this.eventMap[e].includes(\"-\") ? (this.subscribers[e] = this.handle.bind(this, e), this.subscribe(this.eventMap[e], this.subscribers[e])) : this.subscribeTouchEvents(e)) : this.eventMap[e].includes(\"-\") ? !this.subscribers[e] || this.columnSubscribers[e] || this.subscribedExternal(e) || (this.unsubscribe(this.eventMap[e], this.subscribers[e]), delete this.subscribers[e]) : this.unsubscribeTouchEvents(e);\n      }\n      subscribeTouchEvents(e) {\n        var t = this.eventMap[e];\n        this.touchSubscribers[t + \"-touchstart\"] || (this.touchSubscribers[t + \"-touchstart\"] = this.handleTouch.bind(this, t, \"start\"), this.touchSubscribers[t + \"-touchend\"] = this.handleTouch.bind(this, t, \"end\"), this.subscribe(t + \"-touchstart\", this.touchSubscribers[t + \"-touchstart\"]), this.subscribe(t + \"-touchend\", this.touchSubscribers[t + \"-touchend\"])), this.subscribers[e] = !0;\n      }\n      unsubscribeTouchEvents(e) {\n        var t = !0,\n          i = this.eventMap[e];\n        if (this.subscribers[e] && !this.subscribedExternal(e)) {\n          delete this.subscribers[e];\n          for (let e in this.eventMap) this.eventMap[e] === i && this.subscribers[e] && (t = !1);\n          t && (this.unsubscribe(i + \"-touchstart\", this.touchSubscribers[i + \"-touchstart\"]), this.unsubscribe(i + \"-touchend\", this.touchSubscribers[i + \"-touchend\"]), delete this.touchSubscribers[i + \"-touchstart\"], delete this.touchSubscribers[i + \"-touchend\"]);\n        }\n      }\n      initializeColumn(e) {\n        var t = e.definition;\n        for (let i in this.eventMap) t[i] && (this.subscriptionChanged(i, !0), this.columnSubscribers[i] || (this.columnSubscribers[i] = []), this.columnSubscribers[i].push(e));\n      }\n      handle(e, t, i) {\n        this.dispatchEvent(e, t, i);\n      }\n      handleTouch(e, t, i, s) {\n        var o = this.touchWatchers[e];\n        switch (\"column\" === e && (e = \"header\"), t) {\n          case \"start\":\n            o.tap = !0, clearTimeout(o.tapHold), o.tapHold = setTimeout(() => {\n              clearTimeout(o.tapHold), o.tapHold = null, o.tap = null, clearTimeout(o.tapDbl), o.tapDbl = null, this.dispatchEvent(e + \"TapHold\", i, s);\n            }, 1e3);\n            break;\n          case \"end\":\n            o.tap && (o.tap = null, this.dispatchEvent(e + \"Tap\", i, s)), o.tapDbl ? (clearTimeout(o.tapDbl), o.tapDbl = null, this.dispatchEvent(e + \"DblTap\", i, s)) : o.tapDbl = setTimeout(() => {\n              clearTimeout(o.tapDbl), o.tapDbl = null;\n            }, 300), clearTimeout(o.tapHold), o.tapHold = null;\n        }\n      }\n      dispatchEvent(e, t, i) {\n        var s,\n          o = i.getComponent();\n        this.columnSubscribers[e] && (i instanceof n ? s = i.column.definition[e] : i instanceof r && (s = i.definition[e]), s && s(t, o)), this.dispatchExternal(e, t, o);\n      }\n    }, _defineProperty(_Class7, \"moduleName\", \"interaction\"), _Class7),\n    KeybindingsModule: ke,\n    MenuModule: (_Class8 = class MenuModule extends M {\n      constructor(e) {\n        super(e), this.menuContainer = null, this.nestedMenuBlock = !1, this.currentComponent = null, this.rootPopup = null, this.columnSubscribers = {}, this.registerTableOption(\"rowContextMenu\", !1), this.registerTableOption(\"rowClickMenu\", !1), this.registerTableOption(\"rowDblClickMenu\", !1), this.registerTableOption(\"groupContextMenu\", !1), this.registerTableOption(\"groupClickMenu\", !1), this.registerTableOption(\"groupDblClickMenu\", !1), this.registerColumnOption(\"headerContextMenu\"), this.registerColumnOption(\"headerClickMenu\"), this.registerColumnOption(\"headerDblClickMenu\"), this.registerColumnOption(\"headerMenu\"), this.registerColumnOption(\"headerMenuIcon\"), this.registerColumnOption(\"contextMenu\"), this.registerColumnOption(\"clickMenu\"), this.registerColumnOption(\"dblClickMenu\");\n      }\n      initialize() {\n        this.deprecatedOptionsCheck(), this.initializeRowWatchers(), this.initializeGroupWatchers(), this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      }\n      deprecatedOptionsCheck() {}\n      initializeRowWatchers() {\n        this.table.options.rowContextMenu && (this.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu)), this.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu))), this.table.options.rowClickMenu && this.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu)), this.table.options.rowDblClickMenu && this.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n      }\n      initializeGroupWatchers() {\n        this.table.options.groupContextMenu && (this.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu)), this.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu))), this.table.options.groupClickMenu && this.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu)), this.table.options.groupDblClickMenu && this.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n      }\n      initializeColumn(e) {\n        var t = e.definition;\n        t.headerContextMenu && !this.columnSubscribers.headerContextMenu && (this.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"), this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu), this.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"))), t.headerClickMenu && !this.columnSubscribers.headerClickMenu && (this.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\"), this.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu)), t.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu && (this.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\"), this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu)), t.headerMenu && this.initializeColumnHeaderMenu(e), t.contextMenu && !this.columnSubscribers.contextMenu && (this.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\"), this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu), this.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"))), t.clickMenu && !this.columnSubscribers.clickMenu && (this.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\"), this.subscribe(\"cell-click\", this.columnSubscribers.clickMenu)), t.dblClickMenu && !this.columnSubscribers.dblClickMenu && (this.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\"), this.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu));\n      }\n      initializeColumnHeaderMenu(e) {\n        var t,\n          i = e.definition.headerMenuIcon;\n        (t = document.createElement(\"span\")).classList.add(\"tabulator-header-popup-button\"), i ? (\"function\" == typeof i && (i = i(e.getComponent())), i instanceof HTMLElement ? t.appendChild(i) : t.innerHTML = i) : t.innerHTML = \"&vellip;\", t.addEventListener(\"click\", t => {\n          t.stopPropagation(), t.preventDefault(), this.loadMenuEvent(e.definition.headerMenu, t, e);\n        }), e.titleElement.insertBefore(t, e.titleElement.firstChild);\n      }\n      loadMenuTableCellEvent(e, t, i) {\n        i._cell && (i = i._cell), i.column.definition[e] && this.loadMenuEvent(i.column.definition[e], t, i);\n      }\n      loadMenuTableColumnEvent(e, t, i) {\n        i._column && (i = i._column), i.definition[e] && this.loadMenuEvent(i.definition[e], t, i);\n      }\n      loadMenuEvent(e, t, i) {\n        i._group ? i = i._group : i._row && (i = i._row), e = \"function\" == typeof e ? e.call(this.table, t, i.getComponent()) : e, this.loadMenu(t, i, e);\n      }\n      loadMenu(e, t, i, s, o) {\n        var n,\n          r = !(e instanceof MouseEvent),\n          a = document.createElement(\"div\");\n        if (a.classList.add(\"tabulator-menu\"), r || e.preventDefault(), i && i.length) {\n          if (s) n = o.child(a);else {\n            if (this.nestedMenuBlock) {\n              if (this.rootPopup) return;\n            } else this.nestedMenuBlock = setTimeout(() => {\n              this.nestedMenuBlock = !1;\n            }, 100);\n            this.rootPopup && this.rootPopup.hide(), this.rootPopup = n = this.popup(a);\n          }\n          i.forEach(e => {\n            var i = document.createElement(\"div\"),\n              s = e.label,\n              o = e.disabled;\n            e.separator ? i.classList.add(\"tabulator-menu-separator\") : (i.classList.add(\"tabulator-menu-item\"), \"function\" == typeof s && (s = s.call(this.table, t.getComponent())), s instanceof Node ? i.appendChild(s) : i.innerHTML = s, \"function\" == typeof o && (o = o.call(this.table, t.getComponent())), o ? (i.classList.add(\"tabulator-menu-item-disabled\"), i.addEventListener(\"click\", e => {\n              e.stopPropagation();\n            })) : e.menu && e.menu.length ? i.addEventListener(\"click\", s => {\n              s.stopPropagation(), this.loadMenu(s, t, e.menu, i, n);\n            }) : e.action && i.addEventListener(\"click\", i => {\n              e.action(i, t.getComponent());\n            }), e.menu && e.menu.length && i.classList.add(\"tabulator-menu-item-submenu\")), a.appendChild(i);\n          }), a.addEventListener(\"click\", e => {\n            this.rootPopup && this.rootPopup.hide();\n          }), n.show(s || e), n === this.rootPopup && (this.rootPopup.hideOnBlur(() => {\n            this.rootPopup = null, this.currentComponent && (this.dispatch(\"menu-closed\", i, n), this.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent()), this.currentComponent = null);\n          }), this.currentComponent = t, this.dispatch(\"menu-opened\", i, n), this.dispatchExternal(\"menuOpened\", t.getComponent()));\n        }\n      }\n    }, _defineProperty(_Class8, \"moduleName\", \"menu\"), _Class8),\n    MoveColumnsModule: (_Class9 = class MoveColumnsModule extends M {\n      constructor(e) {\n        super(e), this.placeholderElement = this.createPlaceholderElement(), this.hoverElement = !1, this.checkTimeout = !1, this.checkPeriod = 250, this.moving = !1, this.toCol = !1, this.toColAfter = !1, this.startX = 0, this.autoScrollMargin = 40, this.autoScrollStep = 5, this.autoScrollTimeout = !1, this.touchMove = !1, this.moveHover = this.moveHover.bind(this), this.endMove = this.endMove.bind(this), this.registerTableOption(\"movableColumns\", !1);\n      }\n      createPlaceholderElement() {\n        var e = document.createElement(\"div\");\n        return e.classList.add(\"tabulator-col\"), e.classList.add(\"tabulator-col-placeholder\"), e;\n      }\n      initialize() {\n        this.table.options.movableColumns && (this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"alert-show\", this.abortMove.bind(this)));\n      }\n      abortMove() {\n        clearTimeout(this.checkTimeout);\n      }\n      initializeColumn(e) {\n        var t,\n          i = this,\n          s = {};\n        e.modules.frozen || e.isGroup || e.isRowHeader || (t = e.getElement(), s.mousemove = function (s) {\n          e.parent === i.moving.parent && ((i.touchMove ? s.touches[0].pageX : s.pageX) - a.elOffset(t).left + i.table.columnManager.contentsElement.scrollLeft > e.getWidth() / 2 ? i.toCol === e && i.toColAfter || (t.parentNode.insertBefore(i.placeholderElement, t.nextSibling), i.moveColumn(e, !0)) : (i.toCol !== e || i.toColAfter) && (t.parentNode.insertBefore(i.placeholderElement, t), i.moveColumn(e, !1)));\n        }.bind(i), t.addEventListener(\"mousedown\", function (t) {\n          i.touchMove = !1, 1 === t.which && (i.checkTimeout = setTimeout(function () {\n            i.startMove(t, e);\n          }, i.checkPeriod));\n        }), t.addEventListener(\"mouseup\", function (e) {\n          1 === e.which && i.checkTimeout && clearTimeout(i.checkTimeout);\n        }), i.bindTouchEvents(e)), e.modules.moveColumn = s;\n      }\n      bindTouchEvents(e) {\n        var t,\n          i,\n          s,\n          o,\n          n,\n          r,\n          a = e.getElement(),\n          l = !1;\n        a.addEventListener(\"touchstart\", a => {\n          this.checkTimeout = setTimeout(() => {\n            this.touchMove = !0, t = e.nextColumn(), s = t ? t.getWidth() / 2 : 0, i = e.prevColumn(), o = i ? i.getWidth() / 2 : 0, n = 0, r = 0, l = !1, this.startMove(a, e);\n          }, this.checkPeriod);\n        }, {\n          passive: !0\n        }), a.addEventListener(\"touchmove\", a => {\n          var h, d;\n          this.moving && (this.moveHover(a), l || (l = a.touches[0].pageX), (h = a.touches[0].pageX - l) > 0 ? t && h - n > s && (d = t) !== e && (l = a.touches[0].pageX, d.getElement().parentNode.insertBefore(this.placeholderElement, d.getElement().nextSibling), this.moveColumn(d, !0)) : i && -h - r > o && (d = i) !== e && (l = a.touches[0].pageX, d.getElement().parentNode.insertBefore(this.placeholderElement, d.getElement()), this.moveColumn(d, !1)), d && (t = d.nextColumn(), n = s, s = t ? t.getWidth() / 2 : 0, i = d.prevColumn(), r = o, o = i ? i.getWidth() / 2 : 0));\n        }, {\n          passive: !0\n        }), a.addEventListener(\"touchend\", e => {\n          this.checkTimeout && clearTimeout(this.checkTimeout), this.moving && this.endMove(e);\n        });\n      }\n      startMove(e, t) {\n        var i = t.getElement(),\n          s = this.table.columnManager.getContentsElement(),\n          o = this.table.columnManager.getHeadersElement();\n        this.table.modules.selectRange && this.table.modules.selectRange.columnSelection && this.table.modules.selectRange.mousedown && \"column\" === this.table.modules.selectRange.selecting || (this.moving = t, this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - a.elOffset(i).left, this.table.element.classList.add(\"tabulator-block-select\"), this.placeholderElement.style.width = t.getWidth() + \"px\", this.placeholderElement.style.height = t.getHeight() + \"px\", i.parentNode.insertBefore(this.placeholderElement, i), i.parentNode.removeChild(i), this.hoverElement = i.cloneNode(!0), this.hoverElement.classList.add(\"tabulator-moving\"), s.appendChild(this.hoverElement), this.hoverElement.style.left = \"0\", this.hoverElement.style.bottom = s.clientHeight - o.offsetHeight + \"px\", this.touchMove || (this._bindMouseMove(), document.body.addEventListener(\"mousemove\", this.moveHover), document.body.addEventListener(\"mouseup\", this.endMove)), this.moveHover(e), this.dispatch(\"column-moving\", e, this.moving));\n      }\n      _bindMouseMove() {\n        this.table.columnManager.columnsByIndex.forEach(function (e) {\n          e.modules.moveColumn.mousemove && e.getElement().addEventListener(\"mousemove\", e.modules.moveColumn.mousemove);\n        });\n      }\n      _unbindMouseMove() {\n        this.table.columnManager.columnsByIndex.forEach(function (e) {\n          e.modules.moveColumn.mousemove && e.getElement().removeEventListener(\"mousemove\", e.modules.moveColumn.mousemove);\n        });\n      }\n      moveColumn(e, t) {\n        var i = this.moving.getCells();\n        this.toCol = e, this.toColAfter = t, t ? e.getCells().forEach(function (e, t) {\n          var s = e.getElement(!0);\n          s.parentNode && i[t] && s.parentNode.insertBefore(i[t].getElement(), s.nextSibling);\n        }) : e.getCells().forEach(function (e, t) {\n          var s = e.getElement(!0);\n          s.parentNode && i[t] && s.parentNode.insertBefore(i[t].getElement(), s);\n        });\n      }\n      endMove(e) {\n        (1 === e.which || this.touchMove) && (this._unbindMouseMove(), this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling), this.placeholderElement.parentNode.removeChild(this.placeholderElement), this.hoverElement.parentNode.removeChild(this.hoverElement), this.table.element.classList.remove(\"tabulator-block-select\"), this.toCol && this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter), this.moving = !1, this.toCol = !1, this.toColAfter = !1, this.touchMove || (document.body.removeEventListener(\"mousemove\", this.moveHover), document.body.removeEventListener(\"mouseup\", this.endMove)));\n      }\n      moveHover(e) {\n        var t,\n          i = this.table.columnManager.getContentsElement(),\n          s = i.scrollLeft,\n          o = (this.touchMove ? e.touches[0].pageX : e.pageX) - a.elOffset(i).left + s;\n        this.hoverElement.style.left = o - this.startX + \"px\", o - s < this.autoScrollMargin && (this.autoScrollTimeout || (this.autoScrollTimeout = setTimeout(() => {\n          t = Math.max(0, s - 5), this.table.rowManager.getElement().scrollLeft = t, this.autoScrollTimeout = !1;\n        }, 1))), s + i.clientWidth - o < this.autoScrollMargin && (this.autoScrollTimeout || (this.autoScrollTimeout = setTimeout(() => {\n          t = Math.min(i.clientWidth, s + 5), this.table.rowManager.getElement().scrollLeft = t, this.autoScrollTimeout = !1;\n        }, 1)));\n      }\n    }, _defineProperty(_Class9, \"moduleName\", \"moveColumn\"), _Class9),\n    MoveRowsModule: Se,\n    MutatorModule: ze,\n    PageModule: Fe,\n    PersistenceModule: Oe,\n    PopupModule: (_Class10 = class PopupModule extends M {\n      constructor(e) {\n        super(e), this.columnSubscribers = {}, this.registerTableOption(\"rowContextPopup\", !1), this.registerTableOption(\"rowClickPopup\", !1), this.registerTableOption(\"rowDblClickPopup\", !1), this.registerTableOption(\"groupContextPopup\", !1), this.registerTableOption(\"groupClickPopup\", !1), this.registerTableOption(\"groupDblClickPopup\", !1), this.registerColumnOption(\"headerContextPopup\"), this.registerColumnOption(\"headerClickPopup\"), this.registerColumnOption(\"headerDblClickPopup\"), this.registerColumnOption(\"headerPopup\"), this.registerColumnOption(\"headerPopupIcon\"), this.registerColumnOption(\"contextPopup\"), this.registerColumnOption(\"clickPopup\"), this.registerColumnOption(\"dblClickPopup\"), this.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this)), this.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this)), this.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this)), this.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n      }\n      initialize() {\n        this.initializeRowWatchers(), this.initializeGroupWatchers(), this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      }\n      _componentPopupCall(e, t, i) {\n        this.loadPopupEvent(t, null, e, i);\n      }\n      initializeRowWatchers() {\n        this.table.options.rowContextPopup && (this.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup)), this.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup))), this.table.options.rowClickPopup && this.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup)), this.table.options.rowDblClickPopup && this.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n      }\n      initializeGroupWatchers() {\n        this.table.options.groupContextPopup && (this.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup)), this.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup))), this.table.options.groupClickPopup && this.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup)), this.table.options.groupDblClickPopup && this.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n      }\n      initializeColumn(e) {\n        var t = e.definition;\n        t.headerContextPopup && !this.columnSubscribers.headerContextPopup && (this.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"), this.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup), this.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"))), t.headerClickPopup && !this.columnSubscribers.headerClickPopup && (this.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\"), this.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup)), t.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup && (this.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\"), this.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup)), t.headerPopup && this.initializeColumnHeaderPopup(e), t.contextPopup && !this.columnSubscribers.contextPopup && (this.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\"), this.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup), this.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"))), t.clickPopup && !this.columnSubscribers.clickPopup && (this.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\"), this.subscribe(\"cell-click\", this.columnSubscribers.clickPopup)), t.dblClickPopup && !this.columnSubscribers.dblClickPopup && (this.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\"), this.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup));\n      }\n      initializeColumnHeaderPopup(e) {\n        var t,\n          i = e.definition.headerPopupIcon;\n        (t = document.createElement(\"span\")).classList.add(\"tabulator-header-popup-button\"), i ? (\"function\" == typeof i && (i = i(e.getComponent())), i instanceof HTMLElement ? t.appendChild(i) : t.innerHTML = i) : t.innerHTML = \"&vellip;\", t.addEventListener(\"click\", t => {\n          t.stopPropagation(), t.preventDefault(), this.loadPopupEvent(e.definition.headerPopup, t, e);\n        }), e.titleElement.insertBefore(t, e.titleElement.firstChild);\n      }\n      loadPopupTableCellEvent(e, t, i) {\n        i._cell && (i = i._cell), i.column.definition[e] && this.loadPopupEvent(i.column.definition[e], t, i);\n      }\n      loadPopupTableColumnEvent(e, t, i) {\n        i._column && (i = i._column), i.definition[e] && this.loadPopupEvent(i.definition[e], t, i);\n      }\n      loadPopupEvent(e, t, i, s) {\n        var o;\n        i._group ? i = i._group : i._row && (i = i._row), e = \"function\" == typeof e ? e.call(this.table, t, i.getComponent(), function (e) {\n          o = e;\n        }) : e, this.loadPopup(t, i, e, o, s);\n      }\n      loadPopup(e, t, i, s, o) {\n        var n,\n          r,\n          a = !(e instanceof MouseEvent);\n        i instanceof HTMLElement ? n = i : (n = document.createElement(\"div\")).innerHTML = i, n.classList.add(\"tabulator-popup\"), n.addEventListener(\"click\", e => {\n          e.stopPropagation();\n        }), a || e.preventDefault(), r = this.popup(n), \"function\" == typeof s && r.renderCallback(s), e ? r.show(e) : r.show(t.getElement(), o || \"center\"), r.hideOnBlur(() => {\n          this.dispatchExternal(\"popupClosed\", t.getComponent());\n        }), this.dispatchExternal(\"popupOpened\", t.getComponent());\n      }\n    }, _defineProperty(_Class10, \"moduleName\", \"popup\"), _Class10),\n    PrintModule: (_Class11 = class PrintModule extends M {\n      constructor(e) {\n        super(e), this.element = !1, this.manualBlock = !1, this.beforeprintEventHandler = null, this.afterprintEventHandler = null, this.registerTableOption(\"printAsHtml\", !1), this.registerTableOption(\"printFormatter\", !1), this.registerTableOption(\"printHeader\", !1), this.registerTableOption(\"printFooter\", !1), this.registerTableOption(\"printStyled\", !0), this.registerTableOption(\"printRowRange\", \"visible\"), this.registerTableOption(\"printConfig\", {}), this.registerColumnOption(\"print\"), this.registerColumnOption(\"titlePrint\");\n      }\n      initialize() {\n        this.table.options.printAsHtml && (this.beforeprintEventHandler = this.replaceTable.bind(this), this.afterprintEventHandler = this.cleanup.bind(this), window.addEventListener(\"beforeprint\", this.beforeprintEventHandler), window.addEventListener(\"afterprint\", this.afterprintEventHandler), this.subscribe(\"table-destroy\", this.destroy.bind(this))), this.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n      }\n      destroy() {\n        this.table.options.printAsHtml && (window.removeEventListener(\"beforeprint\", this.beforeprintEventHandler), window.removeEventListener(\"afterprint\", this.afterprintEventHandler));\n      }\n      replaceTable() {\n        this.manualBlock || (this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-print-table\"), this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\")), this.table.element.style.display = \"none\", this.table.element.parentNode.insertBefore(this.element, this.table.element));\n      }\n      cleanup() {\n        document.body.classList.remove(\"tabulator-print-fullscreen-hide\"), this.element && this.element.parentNode && (this.element.parentNode.removeChild(this.element), this.table.element.style.display = \"\");\n      }\n      printFullscreen(e, t, i) {\n        var s,\n          o,\n          n = window.scrollX,\n          r = window.scrollY,\n          a = document.createElement(\"div\"),\n          l = document.createElement(\"div\"),\n          h = this.table.modules.export.generateTable(void 0 !== i ? i : this.table.options.printConfig, void 0 !== t ? t : this.table.options.printStyled, e || this.table.options.printRowRange, \"print\");\n        this.manualBlock = !0, this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-print-fullscreen\"), this.table.options.printHeader && (a.classList.add(\"tabulator-print-header\"), \"string\" == typeof (s = \"function\" == typeof this.table.options.printHeader ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader) ? a.innerHTML = s : a.appendChild(s), this.element.appendChild(a)), this.element.appendChild(h), this.table.options.printFooter && (l.classList.add(\"tabulator-print-footer\"), \"string\" == typeof (o = \"function\" == typeof this.table.options.printFooter ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter) ? l.innerHTML = o : l.appendChild(o), this.element.appendChild(l)), document.body.classList.add(\"tabulator-print-fullscreen-hide\"), document.body.appendChild(this.element), this.table.options.printFormatter && this.table.options.printFormatter(this.element, h), window.print(), this.cleanup(), window.scrollTo(n, r), this.manualBlock = !1;\n      }\n    }, _defineProperty(_Class11, \"moduleName\", \"print\"), _Class11),\n    ReactiveDataModule: (_Class12 = class ReactiveDataModule extends M {\n      constructor(e) {\n        super(e), this.data = !1, this.blocked = !1, this.origFuncs = {}, this.currentVersion = 0, this.registerTableOption(\"reactiveData\", !1);\n      }\n      initialize() {\n        this.table.options.reactiveData && (this.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\")), this.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\")), this.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\")), this.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\")), this.subscribe(\"row-data-init-after\", this.watchRow.bind(this)), this.subscribe(\"data-processing\", this.watchData.bind(this)), this.subscribe(\"table-destroy\", this.unwatchData.bind(this)));\n      }\n      watchData(e) {\n        var t,\n          i = this;\n        this.currentVersion++, t = this.currentVersion, this.unwatchData(), this.data = e, this.origFuncs.push = e.push, Object.defineProperty(this.data, \"push\", {\n          enumerable: !1,\n          configurable: !0,\n          value: function () {\n            var s,\n              o = Array.from(arguments);\n            return i.blocked || t !== i.currentVersion || (i.block(\"data-push\"), o.forEach(e => {\n              i.table.rowManager.addRowActual(e, !1);\n            }), s = i.origFuncs.push.apply(e, arguments), i.unblock(\"data-push\")), s;\n          }\n        }), this.origFuncs.unshift = e.unshift, Object.defineProperty(this.data, \"unshift\", {\n          enumerable: !1,\n          configurable: !0,\n          value: function () {\n            var s,\n              o = Array.from(arguments);\n            return i.blocked || t !== i.currentVersion || (i.block(\"data-unshift\"), o.forEach(e => {\n              i.table.rowManager.addRowActual(e, !0);\n            }), s = i.origFuncs.unshift.apply(e, arguments), i.unblock(\"data-unshift\")), s;\n          }\n        }), this.origFuncs.shift = e.shift, Object.defineProperty(this.data, \"shift\", {\n          enumerable: !1,\n          configurable: !0,\n          value: function () {\n            var s, o;\n            return i.blocked || t !== i.currentVersion || (i.block(\"data-shift\"), i.data.length && (s = i.table.rowManager.getRowFromDataObject(i.data[0])) && s.deleteActual(), o = i.origFuncs.shift.call(e), i.unblock(\"data-shift\")), o;\n          }\n        }), this.origFuncs.pop = e.pop, Object.defineProperty(this.data, \"pop\", {\n          enumerable: !1,\n          configurable: !0,\n          value: function () {\n            var s, o;\n            return i.blocked || t !== i.currentVersion || (i.block(\"data-pop\"), i.data.length && (s = i.table.rowManager.getRowFromDataObject(i.data[i.data.length - 1])) && s.deleteActual(), o = i.origFuncs.pop.call(e), i.unblock(\"data-pop\")), o;\n          }\n        }), this.origFuncs.splice = e.splice, Object.defineProperty(this.data, \"splice\", {\n          enumerable: !1,\n          configurable: !0,\n          value: function () {\n            var s,\n              o,\n              n = Array.from(arguments),\n              r = n[0] < 0 ? e.length + n[0] : n[0],\n              a = n[1],\n              l = !!n[2] && n.slice(2);\n            if (!i.blocked && t === i.currentVersion) {\n              if (i.block(\"data-splice\"), l && ((s = !!e[r] && i.table.rowManager.getRowFromDataObject(e[r])) ? l.forEach(e => {\n                i.table.rowManager.addRowActual(e, !0, s, !0);\n              }) : (l = l.slice().reverse()).forEach(e => {\n                i.table.rowManager.addRowActual(e, !0, !1, !0);\n              })), 0 !== a) {\n                var h = e.slice(r, void 0 === n[1] ? n[1] : r + a);\n                h.forEach((e, t) => {\n                  var s = i.table.rowManager.getRowFromDataObject(e);\n                  s && s.deleteActual(t !== h.length - 1);\n                });\n              }\n              (l || 0 !== a) && i.table.rowManager.reRenderInPosition(), o = i.origFuncs.splice.apply(e, arguments), i.unblock(\"data-splice\");\n            }\n            return o;\n          }\n        });\n      }\n      unwatchData() {\n        if (!1 !== this.data) for (var e in this.origFuncs) Object.defineProperty(this.data, e, {\n          enumerable: !0,\n          configurable: !0,\n          writable: !0,\n          value: this.origFuncs.key\n        });\n      }\n      watchRow(e) {\n        var t = e.getData();\n        for (var i in t) this.watchKey(e, t, i);\n        this.table.options.dataTree && this.watchTreeChildren(e);\n      }\n      watchTreeChildren(e) {\n        var t = this,\n          i = e.getData()[this.table.options.dataTreeChildField],\n          s = {};\n        i && (s.push = i.push, Object.defineProperty(i, \"push\", {\n          enumerable: !1,\n          configurable: !0,\n          value: () => {\n            if (!t.blocked) {\n              t.block(\"tree-push\");\n              var o = s.push.apply(i, arguments);\n              this.rebuildTree(e), t.unblock(\"tree-push\");\n            }\n            return o;\n          }\n        }), s.unshift = i.unshift, Object.defineProperty(i, \"unshift\", {\n          enumerable: !1,\n          configurable: !0,\n          value: () => {\n            if (!t.blocked) {\n              t.block(\"tree-unshift\");\n              var o = s.unshift.apply(i, arguments);\n              this.rebuildTree(e), t.unblock(\"tree-unshift\");\n            }\n            return o;\n          }\n        }), s.shift = i.shift, Object.defineProperty(i, \"shift\", {\n          enumerable: !1,\n          configurable: !0,\n          value: () => {\n            if (!t.blocked) {\n              t.block(\"tree-shift\");\n              var o = s.shift.call(i);\n              this.rebuildTree(e), t.unblock(\"tree-shift\");\n            }\n            return o;\n          }\n        }), s.pop = i.pop, Object.defineProperty(i, \"pop\", {\n          enumerable: !1,\n          configurable: !0,\n          value: () => {\n            if (!t.blocked) {\n              t.block(\"tree-pop\");\n              var o = s.pop.call(i);\n              this.rebuildTree(e), t.unblock(\"tree-pop\");\n            }\n            return o;\n          }\n        }), s.splice = i.splice, Object.defineProperty(i, \"splice\", {\n          enumerable: !1,\n          configurable: !0,\n          value: () => {\n            if (!t.blocked) {\n              t.block(\"tree-splice\");\n              var o = s.splice.apply(i, arguments);\n              this.rebuildTree(e), t.unblock(\"tree-splice\");\n            }\n            return o;\n          }\n        }));\n      }\n      rebuildTree(e) {\n        this.table.modules.dataTree.initializeRow(e), this.table.modules.dataTree.layoutRow(e), this.table.rowManager.refreshActiveData(\"tree\", !1, !0);\n      }\n      watchKey(e, t, i) {\n        var s = this,\n          o = Object.getOwnPropertyDescriptor(t, i),\n          n = t[i],\n          r = this.currentVersion;\n        Object.defineProperty(t, i, {\n          set: t => {\n            if (n = t, !s.blocked && r === s.currentVersion) {\n              s.block(\"key\");\n              var a = {};\n              a[i] = t, e.updateData(a), s.unblock(\"key\");\n            }\n            o.set && o.set(t);\n          },\n          get: () => (o.get && o.get(), n)\n        });\n      }\n      unwatchRow(e) {\n        var t = e.getData();\n        for (var i in t) Object.defineProperty(t, i, {\n          value: t[i]\n        });\n      }\n      block(e) {\n        this.blocked || (this.blocked = e);\n      }\n      unblock(e) {\n        this.blocked === e && (this.blocked = !1);\n      }\n    }, _defineProperty(_Class12, \"moduleName\", \"reactiveData\"), _Class12),\n    ResizeColumnsModule: (_Class13 = class ResizeColumnsModule extends M {\n      constructor(e) {\n        super(e), this.startColumn = !1, this.startX = !1, this.startWidth = !1, this.latestX = !1, this.handle = null, this.initialNextColumn = null, this.nextColumn = null, this.initialized = !1, this.registerColumnOption(\"resizable\", !0), this.registerTableOption(\"resizableColumnFit\", !1), this.registerTableOption(\"resizableColumnGuide\", !1);\n      }\n      initialize() {\n        this.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n      }\n      initializeEventWatchers() {\n        this.initialized || (this.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this)), this.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this)), this.subscribe(\"cell-height\", this.resizeHandle.bind(this)), this.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this)), this.subscribe(\"column-hide\", this.deInitializeColumn.bind(this)), this.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this)), this.subscribe(\"column-width\", this.columnWidthUpdated.bind(this)), this.subscribe(\"column-delete\", this.deInitializeComponent.bind(this)), this.subscribe(\"column-height\", this.resizeHandle.bind(this)), this.initialized = !0);\n      }\n      layoutCellHandles(e) {\n        \"row\" === e.row.type && (this.deInitializeComponent(e), this.initializeColumn(\"cell\", e, e.column, e.element));\n      }\n      layoutColumnHeader(e) {\n        e.definition.resizable && (this.initializeEventWatchers(), this.deInitializeComponent(e), this.initializeColumn(\"header\", e, e, e.element));\n      }\n      columnLayoutUpdated(e) {\n        var t = e.prevColumn();\n        this.reinitializeColumn(e), t && this.reinitializeColumn(t);\n      }\n      columnWidthUpdated(e) {\n        e.modules.frozen && (this.table.modules.frozenColumns.leftColumns.includes(e) ? this.table.modules.frozenColumns.leftColumns.forEach(e => {\n          this.reinitializeColumn(e);\n        }) : this.table.modules.frozenColumns.rightColumns.includes(e) && this.table.modules.frozenColumns.rightColumns.forEach(e => {\n          this.reinitializeColumn(e);\n        }));\n      }\n      frozenColumnOffset(e) {\n        var t = !1;\n        return e.modules.frozen && (t = e.modules.frozen.marginValue, \"left\" === e.modules.frozen.position ? t += e.getWidth() - 3 : t && (t -= 3)), !1 !== t && t + \"px\";\n      }\n      reinitializeColumn(e) {\n        var t = this.frozenColumnOffset(e);\n        e.cells.forEach(i => {\n          i.modules.resize && i.modules.resize.handleEl && (t && (i.modules.resize.handleEl.style[e.modules.frozen.position] = t, i.modules.resize.handleEl.style[\"z-index\"] = 11), i.element.after(i.modules.resize.handleEl));\n        }), e.modules.resize && e.modules.resize.handleEl && (t && (e.modules.resize.handleEl.style[e.modules.frozen.position] = t), e.element.after(e.modules.resize.handleEl));\n      }\n      initializeColumn(e, t, i, s) {\n        var o = this,\n          n = i.definition.resizable,\n          r = {},\n          a = i.getLastColumn();\n        if (\"header\" === e && (r = {\n          variableHeight: \"textarea\" == i.definition.formatter || i.definition.variableHeight\n        }), (!0 === n || n == e) && this._checkResizability(a)) {\n          var l = document.createElement(\"span\");\n          l.className = \"tabulator-col-resize-handle\", l.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n          });\n          var h = function (e) {\n            o.startColumn = i, o.initialNextColumn = o.nextColumn = a.nextColumn(), o._mouseDown(e, a, l);\n          };\n          l.addEventListener(\"mousedown\", h), l.addEventListener(\"touchstart\", h, {\n            passive: !0\n          }), l.addEventListener(\"dblclick\", e => {\n            var t = a.getWidth();\n            e.stopPropagation(), a.reinitializeWidth(!0), t !== a.getWidth() && (o.dispatch(\"column-resized\", a), o.dispatchExternal(\"columnResized\", a.getComponent()));\n          }), i.modules.frozen && (l.style.position = \"sticky\", l.style[i.modules.frozen.position] = this.frozenColumnOffset(i)), r.handleEl = l, s.parentNode && i.visible && s.after(l);\n        }\n        t.modules.resize = r;\n      }\n      deInitializeColumn(e) {\n        this.deInitializeComponent(e), e.cells.forEach(e => {\n          this.deInitializeComponent(e);\n        });\n      }\n      deInitializeComponent(e) {\n        var t;\n        e.modules.resize && (t = e.modules.resize.handleEl) && t.parentElement && t.parentElement.removeChild(t);\n      }\n      resizeHandle(e, t) {\n        e.modules.resize && e.modules.resize.handleEl && (e.modules.resize.handleEl.style.height = t);\n      }\n      resize(e, t) {\n        var i,\n          s,\n          o = void 0 === e.clientX ? e.touches[0].clientX : e.clientX,\n          n = o - this.startX,\n          r = o - this.latestX;\n        if (this.latestX = o, this.table.rtl && (n = -n, r = -r), i = t.width == t.minWidth || t.width == t.maxWidth, t.setWidth(this.startWidth + n), s = t.width == t.minWidth || t.width == t.maxWidth, r < 0 && (this.nextColumn = this.initialNextColumn), this.table.options.resizableColumnFit && this.nextColumn && (!i || !s)) {\n          let e = this.nextColumn.getWidth();\n          r > 0 && e <= this.nextColumn.minWidth && (this.nextColumn = this.nextColumn.nextColumn()), this.nextColumn && this.nextColumn.setWidth(this.nextColumn.getWidth() - r);\n        }\n        this.table.columnManager.rerenderColumns(!0), !this.table.browserSlow && t.modules.resize && t.modules.resize.variableHeight && t.checkCellHeights();\n      }\n      calcGuidePosition(e, t, i) {\n        var s = void 0 === e.clientX ? e.touches[0].clientX : e.clientX,\n          o = i.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x,\n          n = this.table.element.getBoundingClientRect().x,\n          r = t.element.getBoundingClientRect().left - n,\n          a = s - this.startX,\n          l = Math.max(o + a, r + t.minWidth);\n        return t.maxWidth && (l = Math.min(l, r + t.maxWidth)), l;\n      }\n      _checkResizability(e) {\n        return e.definition.resizable;\n      }\n      _mouseDown(e, t, i) {\n        var s,\n          o = this;\n        function n(e) {\n          o.table.options.resizableColumnGuide ? s.style.left = o.calcGuidePosition(e, t, i) + \"px\" : o.resize(e, t);\n        }\n        function r(e) {\n          o.table.options.resizableColumnGuide && (o.resize(e, t), s.remove()), o.startColumn.modules.edit && (o.startColumn.modules.edit.blocked = !1), o.table.browserSlow && t.modules.resize && t.modules.resize.variableHeight && t.checkCellHeights(), document.body.removeEventListener(\"mouseup\", r), document.body.removeEventListener(\"mousemove\", n), i.removeEventListener(\"touchmove\", n), i.removeEventListener(\"touchend\", r), o.table.element.classList.remove(\"tabulator-block-select\"), o.startWidth !== t.getWidth() && (o.table.columnManager.verticalAlignHeaders(), o.dispatch(\"column-resized\", t), o.dispatchExternal(\"columnResized\", t.getComponent()));\n        }\n        this.dispatchExternal(\"columnResizing\", t.getComponent()), o.table.options.resizableColumnGuide && ((s = document.createElement(\"span\")).classList.add(\"tabulator-col-resize-guide\"), o.table.element.appendChild(s), setTimeout(() => {\n          s.style.left = o.calcGuidePosition(e, t, i) + \"px\";\n        })), o.table.element.classList.add(\"tabulator-block-select\"), e.stopPropagation(), o.startColumn.modules.edit && (o.startColumn.modules.edit.blocked = !0), o.startX = void 0 === e.clientX ? e.touches[0].clientX : e.clientX, o.latestX = o.startX, o.startWidth = t.getWidth(), document.body.addEventListener(\"mousemove\", n), document.body.addEventListener(\"mouseup\", r), i.addEventListener(\"touchmove\", n, {\n          passive: !0\n        }), i.addEventListener(\"touchend\", r);\n      }\n    }, _defineProperty(_Class13, \"moduleName\", \"resizeColumns\"), _Class13),\n    ResizeRowsModule: (_Class14 = class ResizeRowsModule extends M {\n      constructor(e) {\n        super(e), this.startColumn = !1, this.startY = !1, this.startHeight = !1, this.handle = null, this.prevHandle = null, this.registerTableOption(\"resizableRows\", !1), this.registerTableOption(\"resizableRowGuide\", !1);\n      }\n      initialize() {\n        this.table.options.resizableRows && this.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n      }\n      initializeRow(e) {\n        var t = this,\n          i = e.getElement(),\n          s = document.createElement(\"div\");\n        s.className = \"tabulator-row-resize-handle\";\n        var o = document.createElement(\"div\");\n        o.className = \"tabulator-row-resize-handle prev\", s.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n        var n = function (i) {\n          t.startRow = e, t._mouseDown(i, e, s);\n        };\n        s.addEventListener(\"mousedown\", n), s.addEventListener(\"touchstart\", n, {\n          passive: !0\n        }), o.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n        var r = function (i) {\n          var s = t.table.rowManager.prevDisplayRow(e);\n          s && (t.startRow = s, t._mouseDown(i, s, o));\n        };\n        o.addEventListener(\"mousedown\", r), o.addEventListener(\"touchstart\", r, {\n          passive: !0\n        }), i.appendChild(s), i.appendChild(o);\n      }\n      resize(e, t) {\n        t.setHeight(this.startHeight + ((void 0 === e.screenY ? e.touches[0].screenY : e.screenY) - this.startY));\n      }\n      calcGuidePosition(e, t, i) {\n        var s = void 0 === e.screenY ? e.touches[0].screenY : e.screenY,\n          o = i.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y,\n          n = this.table.element.getBoundingClientRect().y,\n          r = t.element.getBoundingClientRect().top - n,\n          a = s - this.startY;\n        return Math.max(o + a, r);\n      }\n      _mouseDown(e, t, i) {\n        var s,\n          o = this;\n        function n(e) {\n          o.table.options.resizableRowGuide ? s.style.top = o.calcGuidePosition(e, t, i) + \"px\" : o.resize(e, t);\n        }\n        function r(e) {\n          o.table.options.resizableRowGuide && (o.resize(e, t), s.remove()), document.body.removeEventListener(\"mouseup\", n), document.body.removeEventListener(\"mousemove\", n), i.removeEventListener(\"touchmove\", n), i.removeEventListener(\"touchend\", r), o.table.element.classList.remove(\"tabulator-block-select\"), o.dispatchExternal(\"rowResized\", t.getComponent());\n        }\n        o.dispatchExternal(\"rowResizing\", t.getComponent()), o.table.options.resizableRowGuide && ((s = document.createElement(\"span\")).classList.add(\"tabulator-row-resize-guide\"), o.table.element.appendChild(s), setTimeout(() => {\n          s.style.top = o.calcGuidePosition(e, t, i) + \"px\";\n        })), o.table.element.classList.add(\"tabulator-block-select\"), e.stopPropagation(), o.startY = void 0 === e.screenY ? e.touches[0].screenY : e.screenY, o.startHeight = t.getHeight(), document.body.addEventListener(\"mousemove\", n), document.body.addEventListener(\"mouseup\", r), i.addEventListener(\"touchmove\", n, {\n          passive: !0\n        }), i.addEventListener(\"touchend\", r);\n      }\n    }, _defineProperty(_Class14, \"moduleName\", \"resizeRows\"), _Class14),\n    ResizeTableModule: (_Class15 = class ResizeTableModule extends M {\n      constructor(e) {\n        super(e), this.binding = !1, this.visibilityObserver = !1, this.resizeObserver = !1, this.containerObserver = !1, this.tableHeight = 0, this.tableWidth = 0, this.containerHeight = 0, this.containerWidth = 0, this.autoResize = !1, this.visible = !1, this.initialized = !1, this.initialRedraw = !1, this.registerTableOption(\"autoResize\", !0);\n      }\n      initialize() {\n        if (this.table.options.autoResize) {\n          var e,\n            t = this.table;\n          this.tableHeight = t.element.clientHeight, this.tableWidth = t.element.clientWidth, t.element.parentNode && (this.containerHeight = t.element.parentNode.clientHeight, this.containerWidth = t.element.parentNode.clientWidth), \"undefined\" != typeof IntersectionObserver && \"undefined\" != typeof ResizeObserver && \"virtual\" === t.rowManager.getRenderMode() ? (this.initializeVisibilityObserver(), this.autoResize = !0, this.resizeObserver = new ResizeObserver(e => {\n            if (!t.browserMobile || t.browserMobile && (!t.modules.edit || t.modules.edit && !t.modules.edit.currentCell)) {\n              var i = Math.floor(e[0].contentRect.height),\n                s = Math.floor(e[0].contentRect.width);\n              this.tableHeight == i && this.tableWidth == s || (this.tableHeight = i, this.tableWidth = s, t.element.parentNode && (this.containerHeight = t.element.parentNode.clientHeight, this.containerWidth = t.element.parentNode.clientWidth), this.redrawTable());\n            }\n          }), this.resizeObserver.observe(t.element), e = window.getComputedStyle(t.element), this.table.element.parentNode && !this.table.rowManager.fixedHeight && (e.getPropertyValue(\"max-height\") || e.getPropertyValue(\"min-height\")) && (this.containerObserver = new ResizeObserver(e => {\n            if (!t.browserMobile || t.browserMobile && (!t.modules.edit || t.modules.edit && !t.modules.edit.currentCell)) {\n              var i = Math.floor(e[0].contentRect.height),\n                s = Math.floor(e[0].contentRect.width);\n              this.containerHeight == i && this.containerWidth == s || (this.containerHeight = i, this.containerWidth = s, this.tableHeight = t.element.clientHeight, this.tableWidth = t.element.clientWidth), this.redrawTable();\n            }\n          }), this.containerObserver.observe(this.table.element.parentNode)), this.subscribe(\"table-resize\", this.tableResized.bind(this))) : (this.binding = function () {\n            (!t.browserMobile || t.browserMobile && (!t.modules.edit || t.modules.edit && !t.modules.edit.currentCell)) && (t.columnManager.rerenderColumns(!0), t.redraw());\n          }, window.addEventListener(\"resize\", this.binding)), this.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n        }\n      }\n      initializeVisibilityObserver() {\n        this.visibilityObserver = new IntersectionObserver(e => {\n          this.visible = e[0].isIntersecting, this.initialized ? this.visible && (this.redrawTable(this.initialRedraw), this.initialRedraw = !1) : (this.initialized = !0, this.initialRedraw = !this.visible);\n        }), this.visibilityObserver.observe(this.table.element);\n      }\n      redrawTable(e) {\n        this.initialized && this.visible && (this.table.columnManager.rerenderColumns(!0), this.table.redraw(e));\n      }\n      tableResized() {\n        this.table.rowManager.redraw();\n      }\n      clearBindings() {\n        this.binding && window.removeEventListener(\"resize\", this.binding), this.resizeObserver && this.resizeObserver.unobserve(this.table.element), this.visibilityObserver && this.visibilityObserver.unobserve(this.table.element), this.containerObserver && this.containerObserver.unobserve(this.table.element.parentNode);\n      }\n    }, _defineProperty(_Class15, \"moduleName\", \"resizeTable\"), _Class15),\n    ResponsiveLayoutModule: (_Class16 = class ResponsiveLayoutModule extends M {\n      constructor(e) {\n        super(e), this.columns = [], this.hiddenColumns = [], this.mode = \"\", this.index = 0, this.collapseFormatter = [], this.collapseStartOpen = !0, this.collapseHandleColumn = !1, this.registerTableOption(\"responsiveLayout\", !1), this.registerTableOption(\"responsiveLayoutCollapseStartOpen\", !0), this.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", !0), this.registerTableOption(\"responsiveLayoutCollapseFormatter\", !1), this.registerColumnOption(\"responsive\");\n      }\n      initialize() {\n        this.table.options.responsiveLayout && (this.subscribe(\"column-layout\", this.initializeColumn.bind(this)), this.subscribe(\"column-show\", this.updateColumnVisibility.bind(this)), this.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this)), this.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this)), this.subscribe(\"column-moved\", this.initializeResponsivity.bind(this)), this.subscribe(\"column-add\", this.initializeResponsivity.bind(this)), this.subscribe(\"column-delete\", this.initializeResponsivity.bind(this)), this.subscribe(\"table-redrawing\", this.tableRedraw.bind(this)), \"collapse\" === this.table.options.responsiveLayout && (this.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this)), this.subscribe(\"row-init\", this.initializeRow.bind(this)), this.subscribe(\"row-layout\", this.layoutRow.bind(this))));\n      }\n      tableRedraw(e) {\n        -1 === [\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) && (e || this.update());\n      }\n      initializeResponsivity() {\n        var e = [];\n        this.mode = this.table.options.responsiveLayout, this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData, this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen, this.hiddenColumns = [], this.collapseFormatter && (this.collapseFormatter = this.collapseFormatter.bind(this.table)), this.table.columnManager.columnsByIndex.forEach((t, i) => {\n          t.modules.responsive && t.modules.responsive.order && t.modules.responsive.visible && (t.modules.responsive.index = i, e.push(t), t.visible || \"collapse\" !== this.mode || this.hiddenColumns.push(t));\n        }), e = (e = e.reverse()).sort((e, t) => t.modules.responsive.order - e.modules.responsive.order || t.modules.responsive.index - e.modules.responsive.index), this.columns = e, \"collapse\" === this.mode && this.generateCollapsedContent();\n        for (let e of this.table.columnManager.columnsByIndex) if (\"responsiveCollapse\" == e.definition.formatter) {\n          this.collapseHandleColumn = e;\n          break;\n        }\n        this.collapseHandleColumn && (this.hiddenColumns.length ? this.collapseHandleColumn.show() : this.collapseHandleColumn.hide());\n      }\n      initializeColumn(e) {\n        var t = e.getDefinition();\n        e.modules.responsive = {\n          order: void 0 === t.responsive ? 1 : t.responsive,\n          visible: !1 !== t.visible\n        };\n      }\n      initializeRow(e) {\n        var t;\n        \"calc\" !== e.type && ((t = document.createElement(\"div\")).classList.add(\"tabulator-responsive-collapse\"), e.modules.responsiveLayout = {\n          element: t,\n          open: this.collapseStartOpen\n        }, this.collapseStartOpen || (t.style.display = \"none\"));\n      }\n      layoutRow(e) {\n        var t = e.getElement();\n        e.modules.responsiveLayout && (t.appendChild(e.modules.responsiveLayout.element), this.generateCollapsedRowContent(e));\n      }\n      updateColumnVisibility(e, t) {\n        !t && e.modules.responsive && (e.modules.responsive.visible = e.visible, this.initializeResponsivity());\n      }\n      hideColumn(e) {\n        var t = this.hiddenColumns.length;\n        e.hide(!1, !0), \"collapse\" === this.mode && (this.hiddenColumns.unshift(e), this.generateCollapsedContent(), this.collapseHandleColumn && !t && this.collapseHandleColumn.show());\n      }\n      showColumn(e) {\n        var t;\n        e.show(!1, !0), e.setWidth(e.getWidth()), \"collapse\" === this.mode && ((t = this.hiddenColumns.indexOf(e)) > -1 && this.hiddenColumns.splice(t, 1), this.generateCollapsedContent(), this.collapseHandleColumn && !this.hiddenColumns.length && this.collapseHandleColumn.hide());\n      }\n      update() {\n        for (var e = !0; e;) {\n          let t = \"fitColumns\" == this.table.modules.layout.getMode() ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth(),\n            i = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - t;\n          if (i < 0) {\n            let t = this.columns[this.index];\n            t ? (this.hideColumn(t), this.index++) : e = !1;\n          } else {\n            let t = this.columns[this.index - 1];\n            t && i > 0 && i >= t.getWidth() ? (this.showColumn(t), this.index--) : e = !1;\n          }\n          this.table.rowManager.activeRowsCount || this.table.rowManager.renderEmptyScroll();\n        }\n      }\n      generateCollapsedContent() {\n        this.table.rowManager.getDisplayRows().forEach(e => {\n          this.generateCollapsedRowContent(e);\n        });\n      }\n      generateCollapsedRowContent(e) {\n        var t, i;\n        if (e.modules.responsiveLayout) {\n          for (t = e.modules.responsiveLayout.element; t.firstChild;) t.removeChild(t.firstChild);\n          (i = this.collapseFormatter(this.generateCollapsedRowData(e))) && t.appendChild(i), e.calcHeight(!0);\n        }\n      }\n      generateCollapsedRowData(e) {\n        var t,\n          i = e.getData(),\n          s = [];\n        return this.hiddenColumns.forEach(o => {\n          var n = o.getFieldValue(i);\n          if (o.definition.title && o.field) if (o.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters) {\n            function r(e) {\n              e();\n            }\n            t = {\n              value: !1,\n              data: {},\n              getValue: function () {\n                return n;\n              },\n              getData: function () {\n                return i;\n              },\n              getType: function () {\n                return \"cell\";\n              },\n              getElement: function () {\n                return document.createElement(\"div\");\n              },\n              getRow: function () {\n                return e.getComponent();\n              },\n              getColumn: function () {\n                return o.getComponent();\n              },\n              getTable: () => this.table\n            }, s.push({\n              field: o.field,\n              title: o.definition.title,\n              value: o.modules.format.formatter.call(this.table.modules.format, t, o.modules.format.params, r)\n            });\n          } else s.push({\n            field: o.field,\n            title: o.definition.title,\n            value: n\n          });\n        }), s;\n      }\n      formatCollapsedData(e) {\n        var t = document.createElement(\"table\");\n        return e.forEach(e => {\n          var i,\n            s = document.createElement(\"tr\"),\n            o = document.createElement(\"td\"),\n            n = document.createElement(\"td\"),\n            r = document.createElement(\"strong\");\n          o.appendChild(r), this.modules.localize.bind(\"columns|\" + e.field, function (t) {\n            r.innerHTML = t || e.title;\n          }), e.value instanceof Node ? ((i = document.createElement(\"div\")).appendChild(e.value), n.appendChild(i)) : n.innerHTML = e.value, s.appendChild(o), s.appendChild(n), t.appendChild(s);\n        }), Object.keys(e).length ? t : \"\";\n      }\n    }, _defineProperty(_Class16, \"moduleName\", \"responsiveLayout\"), _defineProperty(_Class16, \"moduleExtensions\", Ae), _Class16),\n    SelectRangeModule: (_Class17 = class SelectRangeModule extends M {\n      constructor(e) {\n        super(e), this.selecting = \"cell\", this.mousedown = !1, this.ranges = [], this.overlay = null, this.rowHeader = null, this.layoutChangeTimeout = null, this.columnSelection = !1, this.rowSelection = !1, this.maxRanges = 0, this.activeRange = !1, this.blockKeydown = !1, this.keyDownEvent = this._handleKeyDown.bind(this), this.mouseUpEvent = this._handleMouseUp.bind(this), this.registerTableOption(\"selectableRange\", !1), this.registerTableOption(\"selectableRangeColumns\", !1), this.registerTableOption(\"selectableRangeRows\", !1), this.registerTableOption(\"selectableRangeClearCells\", !1), this.registerTableOption(\"selectableRangeClearCellsValue\", void 0), this.registerTableOption(\"selectableRangeAutoFocus\", !0), this.registerTableFunction(\"getRangesData\", this.getRangesData.bind(this)), this.registerTableFunction(\"getRanges\", this.getRanges.bind(this)), this.registerTableFunction(\"addRange\", this.addRangeFromComponent.bind(this)), this.registerComponentFunction(\"cell\", \"getRanges\", this.cellGetRanges.bind(this)), this.registerComponentFunction(\"row\", \"getRanges\", this.rowGetRanges.bind(this)), this.registerComponentFunction(\"column\", \"getRanges\", this.colGetRanges.bind(this));\n      }\n      initialize() {\n        this.options(\"selectableRange\") && (this.options(\"selectableRows\") ? console.warn(\"SelectRange functionality cannot be used in conjunction with row selection\") : (this.maxRanges = this.options(\"selectableRange\"), this.initializeTable(), this.initializeWatchers()), this.options(\"columns\").findIndex(e => e.frozen) > 0 && console.warn(\"Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.\"), this.options(\"columns\").filter(e => e.frozen) > 1 && console.warn(\"Having multiple frozen columns with selectRange option may result in unpredictable behavior.\"));\n      }\n      initializeTable() {\n        this.overlay = document.createElement(\"div\"), this.overlay.classList.add(\"tabulator-range-overlay\"), this.rangeContainer = document.createElement(\"div\"), this.rangeContainer.classList.add(\"tabulator-range-container\"), this.activeRangeCellElement = document.createElement(\"div\"), this.activeRangeCellElement.classList.add(\"tabulator-range-cell-active\"), this.overlay.appendChild(this.rangeContainer), this.overlay.appendChild(this.activeRangeCellElement), this.table.rowManager.element.addEventListener(\"keydown\", this.keyDownEvent), this.resetRanges(), this.table.rowManager.element.appendChild(this.overlay), this.table.columnManager.element.setAttribute(\"tabindex\", 0), this.table.element.classList.add(\"tabulator-ranges\");\n      }\n      initializeWatchers() {\n        this.columnSelection = this.options(\"selectableRangeColumns\"), this.rowSelection = this.options(\"selectableRangeRows\"), this.subscribe(\"column-init\", this.initializeColumn.bind(this)), this.subscribe(\"column-mousedown\", this.handleColumnMouseDown.bind(this)), this.subscribe(\"column-mousemove\", this.handleColumnMouseMove.bind(this)), this.subscribe(\"column-resized\", this.handleColumnResized.bind(this)), this.subscribe(\"column-moving\", this.handleColumnMoving.bind(this)), this.subscribe(\"column-moved\", this.handleColumnMoved.bind(this)), this.subscribe(\"column-width\", this.layoutChange.bind(this)), this.subscribe(\"column-height\", this.layoutChange.bind(this)), this.subscribe(\"column-resized\", this.layoutChange.bind(this)), this.subscribe(\"columns-loaded\", this.updateHeaderColumn.bind(this)), this.subscribe(\"cell-height\", this.layoutChange.bind(this)), this.subscribe(\"cell-rendered\", this.renderCell.bind(this)), this.subscribe(\"cell-mousedown\", this.handleCellMouseDown.bind(this)), this.subscribe(\"cell-mousemove\", this.handleCellMouseMove.bind(this)), this.subscribe(\"cell-click\", this.handleCellClick.bind(this)), this.subscribe(\"cell-editing\", this.handleEditingCell.bind(this)), this.subscribe(\"page-changed\", this.redraw.bind(this)), this.subscribe(\"scroll-vertical\", this.layoutChange.bind(this)), this.subscribe(\"scroll-horizontal\", this.layoutChange.bind(this)), this.subscribe(\"data-destroy\", this.tableDestroyed.bind(this)), this.subscribe(\"data-processed\", this.resetRanges.bind(this)), this.subscribe(\"table-layout\", this.layoutElement.bind(this)), this.subscribe(\"table-redraw\", this.redraw.bind(this)), this.subscribe(\"table-destroy\", this.tableDestroyed.bind(this)), this.subscribe(\"edit-editor-clear\", this.finishEditingCell.bind(this)), this.subscribe(\"edit-blur\", this.restoreFocus.bind(this)), this.subscribe(\"keybinding-nav-prev\", this.keyNavigate.bind(this, \"left\")), this.subscribe(\"keybinding-nav-next\", this.keyNavigate.bind(this, \"right\")), this.subscribe(\"keybinding-nav-left\", this.keyNavigate.bind(this, \"left\")), this.subscribe(\"keybinding-nav-right\", this.keyNavigate.bind(this, \"right\")), this.subscribe(\"keybinding-nav-up\", this.keyNavigate.bind(this, \"up\")), this.subscribe(\"keybinding-nav-down\", this.keyNavigate.bind(this, \"down\")), this.subscribe(\"keybinding-nav-range\", this.keyNavigateRange.bind(this));\n      }\n      initializeColumn(e) {\n        this.columnSelection && e.definition.headerSort && \"icon\" !== this.options(\"headerSortClickElement\") && console.warn(\"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\"), e.modules.edit;\n      }\n      updateHeaderColumn() {\n        var e;\n        this.rowSelection && (this.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0], this.rowHeader && (this.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + \" tabulator-range-row-header\", this.rowHeader.definition.headerSort && console.warn(\"Using column headerSort with selectableRangeRows option may result in unpredictable behavior\"), this.rowHeader.definition.editor && console.warn(\"Using column editor with selectableRangeRows option may result in unpredictable behavior\"))), this.table.modules.frozenColumns && this.table.modules.frozenColumns.active && ((e = this.table.modules.frozenColumns.getFrozenColumns()).length > 1 || 1 === e.length && e[0] !== this.rowHeader) && console.warn(\"Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior\");\n      }\n      getRanges() {\n        return this.ranges.map(e => e.getComponent());\n      }\n      getRangesData() {\n        return this.ranges.map(e => e.getData());\n      }\n      addRangeFromComponent(e, t) {\n        return e = e ? e._cell : null, t = t ? t._cell : null, this.addRange(e, t);\n      }\n      cellGetRanges(e) {\n        var t = [];\n        return t = e.column === this.rowHeader ? this.ranges.filter(t => t.occupiesRow(e.row)) : this.ranges.filter(t => t.occupies(e)), t.map(e => e.getComponent());\n      }\n      rowGetRanges(e) {\n        var t = this.ranges.filter(t => t.occupiesRow(e));\n        return t.map(e => e.getComponent());\n      }\n      colGetRanges(e) {\n        var t = this.ranges.filter(t => t.occupiesColumn(e));\n        return t.map(e => e.getComponent());\n      }\n      _handleMouseUp(e) {\n        this.mousedown = !1, document.removeEventListener(\"mouseup\", this.mouseUpEvent);\n      }\n      _handleKeyDown(e) {\n        if (!this.blockKeydown && (!this.table.modules.edit || this.table.modules.edit && !this.table.modules.edit.currentCell)) {\n          if (\"Enter\" === e.key) {\n            if (this.table.modules.edit && this.table.modules.edit.currentCell) return;\n            this.table.modules.edit.editCell(this.getActiveCell()), e.preventDefault();\n          }\n          \"Backspace\" !== e.key && \"Delete\" !== e.key || !this.options(\"selectableRangeClearCells\") || this.activeRange && this.activeRange.clearValues();\n        }\n      }\n      initializeFocus(e) {\n        var t;\n        this.restoreFocus();\n        try {\n          document.selection ? ((t = document.body.createTextRange()).moveToElementText(e.getElement()), t.select()) : window.getSelection && ((t = document.createRange()).selectNode(e.getElement()), window.getSelection().removeAllRanges(), window.getSelection().addRange(t));\n        } catch (e) {}\n      }\n      restoreFocus(e) {\n        return this.table.rowManager.element.focus(), !0;\n      }\n      handleColumnResized(e) {\n        var t;\n        \"column\" !== this.selecting && \"all\" !== this.selecting || (t = this.ranges.some(t => t.occupiesColumn(e)), t && this.ranges.forEach(t => {\n          t.getColumns(!0).forEach(t => {\n            t !== e && t.setWidth(e.width);\n          });\n        }));\n      }\n      handleColumnMoving(e, t) {\n        this.resetRanges().setBounds(t), this.overlay.style.visibility = \"hidden\";\n      }\n      handleColumnMoved(e, t, i) {\n        this.activeRange.setBounds(e), this.layoutElement();\n      }\n      handleColumnMouseDown(e, t) {\n        (2 !== e.button || \"column\" !== this.selecting && \"all\" !== this.selecting || !this.activeRange.occupiesColumn(t)) && (this.table.options.movableColumns && \"column\" === this.selecting && this.activeRange.occupiesColumn(t) || (this.mousedown = !0, document.addEventListener(\"mouseup\", this.mouseUpEvent), this.newSelection(e, t)));\n      }\n      handleColumnMouseMove(e, t) {\n        t !== this.rowHeader && this.mousedown && \"all\" !== this.selecting && this.activeRange.setBounds(!1, t, !0);\n      }\n      renderCell(e) {\n        var t = e.getElement(),\n          i = this.ranges.findIndex(t => t.occupies(e));\n        t.classList.toggle(\"tabulator-range-selected\", -1 !== i), t.classList.toggle(\"tabulator-range-only-cell-selected\", 1 === this.ranges.length && this.ranges[0].atTopLeft(e) && this.ranges[0].atBottomRight(e)), t.dataset.range = i;\n      }\n      handleCellMouseDown(e, t) {\n        2 === e.button && (this.activeRange.occupies(t) || (\"row\" === this.selecting || \"all\" === this.selecting) && this.activeRange.occupiesRow(t.row)) || (this.mousedown = !0, document.addEventListener(\"mouseup\", this.mouseUpEvent), this.newSelection(e, t));\n      }\n      handleCellMouseMove(e, t) {\n        this.mousedown && \"all\" !== this.selecting && this.activeRange.setBounds(!1, t, !0);\n      }\n      handleCellClick(e, t) {\n        this.initializeFocus(t);\n      }\n      handleEditingCell(e) {\n        this.activeRange && this.activeRange.setBounds(e);\n      }\n      finishEditingCell() {\n        this.blockKeydown = !0, this.table.rowManager.element.focus(), setTimeout(() => {\n          this.blockKeydown = !1;\n        }, 10);\n      }\n      keyNavigate(e, t) {\n        this.navigate(!1, !1, e), t.preventDefault();\n      }\n      keyNavigateRange(e, t, i, s) {\n        this.navigate(i, s, t), e.preventDefault();\n      }\n      navigate(e, t, i) {\n        var s, o, n, r, a, l, h, d, c, u, m;\n        if (this.table.modules.edit && this.table.modules.edit.currentCell) return !1;\n        if (this.ranges.length > 1 && (this.ranges = this.ranges.filter(e => e === this.activeRange ? (e.setEnd(e.start.row, e.start.col), !0) : (e.destroy(), !1))), n = {\n          top: (s = this.activeRange).top,\n          bottom: s.bottom,\n          left: s.left,\n          right: s.right\n        }, r = (o = t ? s.end : s.start).row, a = o.col, e) switch (i) {\n          case \"left\":\n            a = this.findJumpCellLeft(s.start.row, o.col);\n            break;\n          case \"right\":\n            a = this.findJumpCellRight(s.start.row, o.col);\n            break;\n          case \"up\":\n            r = this.findJumpCellUp(o.row, s.start.col);\n            break;\n          case \"down\":\n            r = this.findJumpCellDown(o.row, s.start.col);\n        } else {\n          if (t && (\"row\" === this.selecting && (\"left\" === i || \"right\" === i) || \"column\" === this.selecting && (\"up\" === i || \"down\" === i))) return;\n          switch (i) {\n            case \"left\":\n              a = Math.max(a - 1, 0);\n              break;\n            case \"right\":\n              a = Math.min(a + 1, this.getTableColumns().length - 1);\n              break;\n            case \"up\":\n              r = Math.max(r - 1, 0);\n              break;\n            case \"down\":\n              r = Math.min(r + 1, this.getTableRows().length - 1);\n          }\n        }\n        return this.rowHeader && 0 === a && (a = 1), t || s.setStart(r, a), s.setEnd(r, a), t || (this.selecting = \"cell\"), n.top !== s.top || n.bottom !== s.bottom || n.left !== s.left || n.right !== s.right ? (l = this.getRowByRangePos(s.end.row), h = this.getColumnByRangePos(s.end.col), d = l.getElement().getBoundingClientRect(), u = h.getElement().getBoundingClientRect(), c = this.table.rowManager.getElement().getBoundingClientRect(), m = this.table.columnManager.getElement().getBoundingClientRect(), d.top >= c.top && d.bottom <= c.bottom || (l.getElement().parentNode && h.getElement().parentNode ? this.autoScroll(s, l.getElement(), h.getElement()) : l.getComponent().scrollTo(void 0, !1)), u.left >= m.left + this.getRowHeaderWidth() && u.right <= m.right || (l.getElement().parentNode && h.getElement().parentNode ? this.autoScroll(s, l.getElement(), h.getElement()) : h.getComponent().scrollTo(void 0, !1)), this.layoutElement(), !0) : void 0;\n      }\n      rangeRemoved(e) {\n        this.ranges = this.ranges.filter(t => t !== e), this.activeRange === e && (this.ranges.length ? this.activeRange = this.ranges[this.ranges.length - 1] : this.addRange()), this.layoutElement();\n      }\n      findJumpRow(e, t, i, s, o) {\n        return i && (t = t.reverse()), this.findJumpItem(s, o, t, function (t) {\n          return t.getData()[e.getField()];\n        });\n      }\n      findJumpCol(e, t, i, s, o) {\n        return i && (t = t.reverse()), this.findJumpItem(s, o, t, function (t) {\n          return e.getData()[t.getField()];\n        });\n      }\n      findJumpItem(e, t, i, s) {\n        var o;\n        for (let n of i) {\n          let i = s(n);\n          if (e) {\n            if (o = n, i) break;\n          } else if (t) {\n            if (o = n, i) break;\n          } else {\n            if (!i) break;\n            o = n;\n          }\n        }\n        return o;\n      }\n      findJumpCellLeft(e, t) {\n        var i = this.getRowByRangePos(e),\n          s = this.getTableColumns(),\n          o = this.isEmpty(i.getData()[s[t].getField()]),\n          n = !!s[t - 1] && this.isEmpty(i.getData()[s[t - 1].getField()]),\n          r = this.rowHeader ? s.slice(1, t) : s.slice(0, t),\n          a = this.findJumpCol(i, r, !0, o, n);\n        return a ? a.getPosition() - 1 : t;\n      }\n      findJumpCellRight(e, t) {\n        var i = this.getRowByRangePos(e),\n          s = this.getTableColumns(),\n          o = this.isEmpty(i.getData()[s[t].getField()]),\n          n = !!s[t + 1] && this.isEmpty(i.getData()[s[t + 1].getField()]),\n          r = this.findJumpCol(i, s.slice(t + 1, s.length), !1, o, n);\n        return r ? r.getPosition() - 1 : t;\n      }\n      findJumpCellUp(e, t) {\n        var i = this.getColumnByRangePos(t),\n          s = this.getTableRows(),\n          o = this.isEmpty(s[e].getData()[i.getField()]),\n          n = !!s[e - 1] && this.isEmpty(s[e - 1].getData()[i.getField()]),\n          r = this.findJumpRow(i, s.slice(0, e), !0, o, n);\n        return r ? r.position - 1 : e;\n      }\n      findJumpCellDown(e, t) {\n        var i = this.getColumnByRangePos(t),\n          s = this.getTableRows(),\n          o = this.isEmpty(s[e].getData()[i.getField()]),\n          n = !!s[e + 1] && this.isEmpty(s[e + 1].getData()[i.getField()]),\n          r = this.findJumpRow(i, s.slice(e + 1, s.length), !1, o, n);\n        return r ? r.position - 1 : e;\n      }\n      newSelection(e, t) {\n        var i;\n        if (\"column\" === t.type) {\n          if (!this.columnSelection) return;\n          if (t === this.rowHeader) {\n            i = this.resetRanges(), this.selecting = \"all\";\n            var s,\n              o = this.getCell(-1, -1);\n            return s = this.rowHeader ? this.getCell(0, 1) : this.getCell(0, 0), void i.setBounds(s, o);\n          }\n          this.selecting = \"column\";\n        } else t.column === this.rowHeader ? this.selecting = \"row\" : this.selecting = \"cell\";\n        e.shiftKey ? this.activeRange.setBounds(!1, t) : e.ctrlKey ? this.addRange().setBounds(t) : this.resetRanges().setBounds(t);\n      }\n      autoScroll(e, t, i) {\n        var s,\n          o,\n          n,\n          r = this.table.rowManager.element;\n        void 0 === t && (t = this.getRowByRangePos(e.end.row).getElement()), void 0 === i && (i = this.getColumnByRangePos(e.end.col).getElement()), s = {\n          left: i.offsetLeft,\n          right: i.offsetLeft + i.offsetWidth,\n          top: t.offsetTop,\n          bottom: t.offsetTop + t.offsetHeight\n        }, n = (o = {\n          left: r.scrollLeft + this.getRowHeaderWidth(),\n          right: Math.ceil(r.scrollLeft + r.clientWidth),\n          top: r.scrollTop,\n          bottom: r.scrollTop + r.offsetHeight - this.table.rowManager.scrollbarWidth\n        }).top < s.top && s.top < o.bottom && o.top < s.bottom && s.bottom < o.bottom, o.left < s.left && s.left < o.right && o.left < s.right && s.right < o.right || (s.left < o.left ? r.scrollLeft = s.left - this.getRowHeaderWidth() : s.right > o.right && (r.scrollLeft = Math.min(s.right - r.clientWidth, s.left - this.getRowHeaderWidth()))), n || (s.top < o.top ? r.scrollTop = s.top : s.bottom > o.bottom && (r.scrollTop = s.bottom - r.clientHeight));\n      }\n      layoutChange() {\n        this.overlay.style.visibility = \"hidden\", clearTimeout(this.layoutChangeTimeout), this.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);\n      }\n      redraw(e) {\n        e && (this.selecting = \"cell\", this.resetRanges(), this.layoutElement());\n      }\n      layoutElement(e) {\n        (e ? this.table.rowManager.getVisibleRows(!0) : this.table.rowManager.getRows()).forEach(e => {\n          \"row\" === e.type && (this.layoutRow(e), e.cells.forEach(e => this.renderCell(e)));\n        }), this.getTableColumns().forEach(e => {\n          this.layoutColumn(e);\n        }), this.layoutRanges();\n      }\n      layoutRow(e) {\n        var t = e.getElement(),\n          i = !1,\n          s = this.ranges.some(t => t.occupiesRow(e));\n        \"row\" === this.selecting ? i = s : \"all\" === this.selecting && (i = !0), t.classList.toggle(\"tabulator-range-selected\", i), t.classList.toggle(\"tabulator-range-highlight\", s);\n      }\n      layoutColumn(e) {\n        var t = e.getElement(),\n          i = !1,\n          s = this.ranges.some(t => t.occupiesColumn(e));\n        \"column\" === this.selecting ? i = s : \"all\" === this.selecting && (i = !0), t.classList.toggle(\"tabulator-range-selected\", i), t.classList.toggle(\"tabulator-range-highlight\", s);\n      }\n      layoutRanges() {\n        var e, t, i;\n        this.table.initialized && (e = this.getActiveCell()) && (t = e.getElement(), i = e.row.getElement(), this.table.rtl ? this.activeRangeCellElement.style.right = i.offsetWidth - t.offsetLeft - t.offsetWidth + \"px\" : this.activeRangeCellElement.style.left = i.offsetLeft + t.offsetLeft + \"px\", this.activeRangeCellElement.style.top = i.offsetTop + \"px\", this.activeRangeCellElement.style.width = t.offsetWidth + \"px\", this.activeRangeCellElement.style.height = i.offsetHeight + \"px\", this.ranges.forEach(e => e.layout()), this.overlay.style.visibility = \"visible\");\n      }\n      getCell(e, t) {\n        var i;\n        return t < 0 && (t = this.getTableColumns().length + t) < 0 ? null : (e < 0 && (e = this.getTableRows().length + e), (i = this.table.rowManager.getRowFromPosition(e + 1)) ? i.getCells(!1, !0).filter(e => e.column.visible)[t] : null);\n      }\n      getActiveCell() {\n        return this.getCell(this.activeRange.start.row, this.activeRange.start.col);\n      }\n      getRowByRangePos(e) {\n        return this.getTableRows()[e];\n      }\n      getColumnByRangePos(e) {\n        return this.getTableColumns()[e];\n      }\n      getTableRows() {\n        return this.table.rowManager.getDisplayRows().filter(e => \"row\" === e.type);\n      }\n      getTableColumns() {\n        return this.table.columnManager.getVisibleColumnsByIndex();\n      }\n      addRange(e, t) {\n        var i;\n        return !0 !== this.maxRanges && this.ranges.length >= this.maxRanges && this.ranges.shift().destroy(), i = new Ie(this.table, this, e, t), this.activeRange = i, this.ranges.push(i), this.rangeContainer.appendChild(i.element), i;\n      }\n      resetRanges() {\n        var e, t, i;\n        return this.ranges.forEach(e => e.destroy()), this.ranges = [], e = this.addRange(), this.table.rowManager.activeRows.length && (i = this.table.rowManager.activeRows[0].cells.filter(e => e.column.visible), (t = i[this.rowHeader ? 1 : 0]) && (e.setBounds(t), this.options(\"selectableRangeAutoFocus\") && this.initializeFocus(t))), e;\n      }\n      tableDestroyed() {\n        document.removeEventListener(\"mouseup\", this.mouseUpEvent), this.table.rowManager.element.removeEventListener(\"keydown\", this.keyDownEvent);\n      }\n      selectedRows(e) {\n        return e ? this.activeRange.getRows().map(e => e.getComponent()) : this.activeRange.getRows();\n      }\n      selectedColumns(e) {\n        return e ? this.activeRange.getColumns().map(e => e.getComponent()) : this.activeRange.getColumns();\n      }\n      getRowHeaderWidth() {\n        return this.rowHeader ? this.rowHeader.getElement().offsetWidth : 0;\n      }\n      isEmpty(e) {\n        return null == e || \"\" === e;\n      }\n    }, _defineProperty(_Class17, \"moduleName\", \"selectRange\"), _defineProperty(_Class17, \"moduleInitOrder\", 1), _defineProperty(_Class17, \"moduleExtensions\", Ne), _Class17),\n    SelectRowModule: (_Class18 = class SelectRowModule extends M {\n      constructor(e) {\n        super(e), this.selecting = !1, this.lastClickedRow = !1, this.selectPrev = [], this.selectedRows = [], this.headerCheckboxElement = null, this.registerTableOption(\"selectableRows\", \"highlight\"), this.registerTableOption(\"selectableRowsRangeMode\", \"drag\"), this.registerTableOption(\"selectableRowsRollingSelection\", !0), this.registerTableOption(\"selectableRowsPersistence\", !0), this.registerTableOption(\"selectableRowsCheck\", function (e, t) {\n          return !0;\n        }), this.registerTableFunction(\"selectRow\", this.selectRows.bind(this)), this.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this)), this.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this)), this.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this)), this.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this)), this.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this)), this.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this)), this.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this)), this.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n      }\n      initialize() {\n        this.deprecatedOptionsCheck(), \"highlight\" === this.table.options.selectableRows && this.table.options.selectableRange && (this.table.options.selectableRows = !1), !1 !== this.table.options.selectableRows && (this.subscribe(\"row-init\", this.initializeRow.bind(this)), this.subscribe(\"row-deleting\", this.rowDeleted.bind(this)), this.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this)), this.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this)), this.table.options.selectableRows && !this.table.options.selectableRowsPersistence && this.subscribe(\"data-refreshing\", this.deselectRows.bind(this)));\n      }\n      deprecatedOptionsCheck() {}\n      rowRetrieve(e, t) {\n        return \"selected\" === e ? this.selectedRows : t;\n      }\n      rowDeleted(e) {\n        this._deselectRow(e, !0);\n      }\n      clearSelectionData(e) {\n        var t = this.selectedRows.length;\n        this.selecting = !1, this.lastClickedRow = !1, this.selectPrev = [], this.selectedRows = [], t && !0 !== e && this._rowSelectionChanged();\n      }\n      initializeRow(e) {\n        var t = this,\n          i = t.checkRowSelectability(e),\n          s = e.getElement(),\n          o = function () {\n            setTimeout(function () {\n              t.selecting = !1;\n            }, 50), document.body.removeEventListener(\"mouseup\", o);\n          };\n        e.modules.select = {\n          selected: !1\n        }, s.classList.toggle(\"tabulator-selectable\", i), s.classList.toggle(\"tabulator-unselectable\", !i), t.checkRowSelectability(e) && t.table.options.selectableRows && \"highlight\" != t.table.options.selectableRows && (\"click\" === t.table.options.selectableRowsRangeMode ? s.addEventListener(\"click\", this.handleComplexRowClick.bind(this, e)) : (s.addEventListener(\"click\", function (i) {\n          t.table.modExists(\"edit\") && t.table.modules.edit.getCurrentCell() || t.table._clearSelection(), t.selecting || t.toggleRow(e);\n        }), s.addEventListener(\"mousedown\", function (i) {\n          if (i.shiftKey) return t.table._clearSelection(), t.selecting = !0, t.selectPrev = [], document.body.addEventListener(\"mouseup\", o), document.body.addEventListener(\"keyup\", o), t.toggleRow(e), !1;\n        }), s.addEventListener(\"mouseenter\", function (i) {\n          t.selecting && (t.table._clearSelection(), t.toggleRow(e), t.selectPrev[1] == e && t.toggleRow(t.selectPrev[0]));\n        }), s.addEventListener(\"mouseout\", function (i) {\n          t.selecting && (t.table._clearSelection(), t.selectPrev.unshift(e));\n        })));\n      }\n      handleComplexRowClick(e, t) {\n        if (t.shiftKey) {\n          this.table._clearSelection(), this.lastClickedRow = this.lastClickedRow || e;\n          var i = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),\n            s = this.table.rowManager.getDisplayRowIndex(e),\n            o = i <= s ? i : s,\n            n = i >= s ? i : s,\n            r = this.table.rowManager.getDisplayRows().slice(0).splice(o, n - o + 1);\n          t.ctrlKey || t.metaKey ? (r.forEach(t => {\n            t !== this.lastClickedRow && (!0 === this.table.options.selectableRows || this.isRowSelected(e) || this.selectedRows.length < this.table.options.selectableRows) && this.toggleRow(t);\n          }), this.lastClickedRow = e) : (this.deselectRows(void 0, !0), !0 !== this.table.options.selectableRows && r.length > this.table.options.selectableRows && (r = r.slice(0, this.table.options.selectableRows)), this.selectRows(r)), this.table._clearSelection();\n        } else t.ctrlKey || t.metaKey ? (this.toggleRow(e), this.lastClickedRow = e) : (this.deselectRows(void 0, !0), this.selectRows(e), this.lastClickedRow = e);\n      }\n      checkRowSelectability(e) {\n        return !(!e || \"row\" !== e.type) && this.table.options.selectableRowsCheck.call(this.table, e.getComponent());\n      }\n      toggleRow(e) {\n        this.checkRowSelectability(e) && (e.modules.select && e.modules.select.selected ? this._deselectRow(e) : this._selectRow(e));\n      }\n      selectRows(e) {\n        var t,\n          i,\n          s = [];\n        switch (typeof e) {\n          case \"undefined\":\n            t = this.table.rowManager.rows;\n            break;\n          case \"number\":\n            t = this.table.rowManager.findRow(e);\n            break;\n          case \"string\":\n            (t = this.table.rowManager.findRow(e)) || (t = this.table.rowManager.getRows(e));\n            break;\n          default:\n            t = e;\n        }\n        Array.isArray(t) ? t.length && (t.forEach(e => {\n          (i = this._selectRow(e, !0, !0)) && s.push(i);\n        }), this._rowSelectionChanged(!1, s)) : t && this._selectRow(t, !1, !0);\n      }\n      _selectRow(e, t, i) {\n        if (!isNaN(this.table.options.selectableRows) && !0 !== this.table.options.selectableRows && !i && this.selectedRows.length >= this.table.options.selectableRows) {\n          if (!this.table.options.selectableRowsRollingSelection) return !1;\n          this._deselectRow(this.selectedRows[0]);\n        }\n        var s = this.table.rowManager.findRow(e);\n        if (s) {\n          if (-1 == this.selectedRows.indexOf(s)) return s.getElement().classList.add(\"tabulator-selected\"), s.modules.select || (s.modules.select = {}), s.modules.select.selected = !0, s.modules.select.checkboxEl && (s.modules.select.checkboxEl.checked = !0), this.selectedRows.push(s), this.table.options.dataTreeSelectPropagate && this.childRowSelection(s, !0), this.dispatchExternal(\"rowSelected\", s.getComponent()), this._rowSelectionChanged(t, s), s;\n        } else t || console.warn(\"Selection Error - No such row found, ignoring selection:\" + e);\n      }\n      isRowSelected(e) {\n        return -1 !== this.selectedRows.indexOf(e);\n      }\n      deselectRows(e, t) {\n        var i,\n          s,\n          o = [];\n        switch (typeof e) {\n          case \"undefined\":\n            i = Object.assign([], this.selectedRows);\n            break;\n          case \"number\":\n            i = this.table.rowManager.findRow(e);\n            break;\n          case \"string\":\n            (i = this.table.rowManager.findRow(e)) || (i = this.table.rowManager.getRows(e));\n            break;\n          default:\n            i = e;\n        }\n        Array.isArray(i) ? i.length && (i.forEach(e => {\n          (s = this._deselectRow(e, !0, !0)) && o.push(s);\n        }), this._rowSelectionChanged(t, [], o)) : i && this._deselectRow(i, t, !0);\n      }\n      _deselectRow(e, t) {\n        var i,\n          s,\n          o = this,\n          n = o.table.rowManager.findRow(e);\n        if (n) {\n          if ((i = o.selectedRows.findIndex(function (e) {\n            return e == n;\n          })) > -1) return (s = n.getElement()) && s.classList.remove(\"tabulator-selected\"), n.modules.select || (n.modules.select = {}), n.modules.select.selected = !1, n.modules.select.checkboxEl && (n.modules.select.checkboxEl.checked = !1), o.selectedRows.splice(i, 1), this.table.options.dataTreeSelectPropagate && this.childRowSelection(n, !1), this.dispatchExternal(\"rowDeselected\", n.getComponent()), o._rowSelectionChanged(t, void 0, n), n;\n        } else t || console.warn(\"Deselection Error - No such row found, ignoring selection:\" + e);\n      }\n      getSelectedData() {\n        var e = [];\n        return this.selectedRows.forEach(function (t) {\n          e.push(t.getData());\n        }), e;\n      }\n      getSelectedRows() {\n        var e = [];\n        return this.selectedRows.forEach(function (t) {\n          e.push(t.getComponent());\n        }), e;\n      }\n      _rowSelectionChanged(e, t = [], i = []) {\n        this.headerCheckboxElement && (0 === this.selectedRows.length ? (this.headerCheckboxElement.checked = !1, this.headerCheckboxElement.indeterminate = !1) : this.table.rowManager.rows.length === this.selectedRows.length ? (this.headerCheckboxElement.checked = !0, this.headerCheckboxElement.indeterminate = !1) : (this.headerCheckboxElement.indeterminate = !0, this.headerCheckboxElement.checked = !1)), e || (Array.isArray(t) || (t = [t]), t = t.map(e => e.getComponent()), Array.isArray(i) || (i = [i]), i = i.map(e => e.getComponent()), this.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), t, i));\n      }\n      registerRowSelectCheckbox(e, t) {\n        e._row.modules.select || (e._row.modules.select = {}), e._row.modules.select.checkboxEl = t;\n      }\n      registerHeaderSelectCheckbox(e) {\n        this.headerCheckboxElement = e;\n      }\n      childRowSelection(e, t) {\n        var i = this.table.modules.dataTree.getChildren(e, !0, !0);\n        if (t) for (let e of i) this._selectRow(e, !0);else for (let e of i) this._deselectRow(e, !0);\n      }\n    }, _defineProperty(_Class18, \"moduleName\", \"selectRow\"), _defineProperty(_Class18, \"moduleExtensions\", Be), _Class18),\n    SortModule: Ge,\n    SpreadsheetModule: (_Class19 = class SpreadsheetModule extends M {\n      constructor(e) {\n        super(e), this.sheets = [], this.element = null, this.registerTableOption(\"spreadsheet\", !1), this.registerTableOption(\"spreadsheetRows\", 50), this.registerTableOption(\"spreadsheetColumns\", 50), this.registerTableOption(\"spreadsheetColumnDefinition\", {}), this.registerTableOption(\"spreadsheetOutputFull\", !1), this.registerTableOption(\"spreadsheetData\", !1), this.registerTableOption(\"spreadsheetSheets\", !1), this.registerTableOption(\"spreadsheetSheetTabs\", !1), this.registerTableOption(\"spreadsheetSheetTabsElement\", !1), this.registerTableFunction(\"setSheets\", this.setSheets.bind(this)), this.registerTableFunction(\"addSheet\", this.addSheet.bind(this)), this.registerTableFunction(\"getSheets\", this.getSheets.bind(this)), this.registerTableFunction(\"getSheetDefinitions\", this.getSheetDefinitions.bind(this)), this.registerTableFunction(\"setSheetData\", this.setSheetData.bind(this)), this.registerTableFunction(\"getSheet\", this.getSheet.bind(this)), this.registerTableFunction(\"getSheetData\", this.getSheetData.bind(this)), this.registerTableFunction(\"clearSheet\", this.clearSheet.bind(this)), this.registerTableFunction(\"removeSheet\", this.removeSheetFunc.bind(this)), this.registerTableFunction(\"activeSheet\", this.activeSheetFunc.bind(this));\n      }\n      initialize() {\n        this.options(\"spreadsheet\") && (this.subscribe(\"table-initialized\", this.tableInitialized.bind(this)), this.subscribe(\"data-loaded\", this.loadRemoteData.bind(this)), this.table.options.index = \"_id\", this.options(\"spreadsheetData\") && this.options(\"spreadsheetSheets\") && (console.warn(\"You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData\"), this.table.options.spreadsheetData = !1), this.compatibilityCheck(), this.options(\"spreadsheetSheetTabs\") && this.initializeTabset());\n      }\n      compatibilityCheck() {\n        this.options(\"data\") && console.warn(\"Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table\"), this.options(\"pagination\") && console.warn(\"The spreadsheet module is not compatible with the pagination module\"), this.options(\"groupBy\") && console.warn(\"The spreadsheet module is not compatible with the row grouping module\"), this.options(\"responsiveCollapse\") && console.warn(\"The spreadsheet module is not compatible with the responsive collapse module\");\n      }\n      initializeTabset() {\n        this.element = document.createElement(\"div\"), this.element.classList.add(\"tabulator-spreadsheet-tabs\");\n        var e = this.options(\"spreadsheetSheetTabsElement\");\n        !e || e instanceof HTMLElement || (e = document.querySelector(e)) || console.warn(\"Unable to find element matching spreadsheetSheetTabsElement selector:\", this.options(\"spreadsheetSheetTabsElement\")), e ? e.appendChild(this.element) : this.footerAppend(this.element);\n      }\n      tableInitialized() {\n        this.sheets.length ? this.loadSheet(this.sheets[0]) : this.options(\"spreadsheetSheets\") ? this.loadSheets(this.options(\"spreadsheetSheets\")) : this.options(\"spreadsheetData\") && this.loadData(this.options(\"spreadsheetData\"));\n      }\n      loadRemoteData(e, t, i) {\n        return console.log(\"data\", e, t, i), Array.isArray(e) ? (this.table.dataLoader.clearAlert(), this.dispatchExternal(\"dataLoaded\", e), !e.length || Array.isArray(e[0]) ? this.loadData(e) : this.loadSheets(e)) : console.error(\"Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: \", typeof e, \"\\nData:     \", e), !1;\n      }\n      loadData(e) {\n        var t = {\n          data: e\n        };\n        this.loadSheet(this.newSheet(t));\n      }\n      destroySheets() {\n        this.sheets.forEach(e => {\n          e.destroy();\n        }), this.sheets = [], this.activeSheet = null;\n      }\n      loadSheets(e) {\n        Array.isArray(e) || (e = []), this.destroySheets(), e.forEach(e => {\n          this.newSheet(e);\n        }), this.loadSheet(this.sheets[0]);\n      }\n      loadSheet(e) {\n        this.activeSheet !== e && (this.activeSheet && this.activeSheet.unload(), this.activeSheet = e, e.load());\n      }\n      newSheet(e = {}) {\n        var t;\n        return e.rows || (e.rows = this.options(\"spreadsheetRows\")), e.columns || (e.columns = this.options(\"spreadsheetColumns\")), t = new Xe(this, e), this.sheets.push(t), this.element && this.element.appendChild(t.element), t;\n      }\n      removeSheet(e) {\n        var t,\n          i = this.sheets.indexOf(e);\n        this.sheets.length > 1 ? i > -1 && (this.sheets.splice(i, 1), e.destroy(), this.activeSheet === e && ((t = this.sheets[i - 1] || this.sheets[0]) ? this.loadSheet(t) : this.activeSheet = null)) : console.warn(\"Unable to remove sheet, at least one sheet must be active\");\n      }\n      lookupSheet(e) {\n        return e ? e instanceof Xe ? e : e instanceof Je ? e._sheet : this.sheets.find(t => t.key === e) || !1 : this.activeSheet;\n      }\n      setSheets(e) {\n        return this.loadSheets(e), this.getSheets();\n      }\n      addSheet(e) {\n        return this.newSheet(e).getComponent();\n      }\n      getSheetDefinitions() {\n        return this.sheets.map(e => e.getDefinition());\n      }\n      getSheets() {\n        return this.sheets.map(e => e.getComponent());\n      }\n      getSheet(e) {\n        var t = this.lookupSheet(e);\n        return !!t && t.getComponent();\n      }\n      setSheetData(e, t) {\n        e && !t && (t = e, e = !1);\n        var i = this.lookupSheet(e);\n        return !!i && i.setData(t);\n      }\n      getSheetData(e) {\n        var t = this.lookupSheet(e);\n        return !!t && t.getData();\n      }\n      clearSheet(e) {\n        var t = this.lookupSheet(e);\n        return !!t && t.clear();\n      }\n      removeSheetFunc(e) {\n        var t = this.lookupSheet(e);\n        t && this.removeSheet(t);\n      }\n      activeSheetFunc(e) {\n        var t = this.lookupSheet(e);\n        return !!t && this.loadSheet(t);\n      }\n    }, _defineProperty(_Class19, \"moduleName\", \"spreadsheet\"), _Class19),\n    TooltipModule: (_Class20 = class TooltipModule extends M {\n      constructor(e) {\n        super(e), this.tooltipSubscriber = null, this.headerSubscriber = null, this.timeout = null, this.popupInstance = null, this.registerTableOption(\"tooltipDelay\", 300), this.registerColumnOption(\"tooltip\"), this.registerColumnOption(\"headerTooltip\");\n      }\n      initialize() {\n        this.deprecatedOptionsCheck(), this.subscribe(\"column-init\", this.initializeColumn.bind(this));\n      }\n      deprecatedOptionsCheck() {}\n      initializeColumn(e) {\n        e.definition.headerTooltip && !this.headerSubscriber && (this.headerSubscriber = !0, this.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\")), this.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"))), e.definition.tooltip && !this.tooltipSubscriber && (this.tooltipSubscriber = !0, this.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\")), this.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\")));\n      }\n      mousemoveCheck(e, t, i) {\n        var s = \"tooltip\" === e ? i.column.definition.tooltip : i.definition.headerTooltip;\n        s && (this.clearPopup(), this.timeout = setTimeout(this.loadTooltip.bind(this, t, i, s), this.table.options.tooltipDelay));\n      }\n      mouseoutCheck(e, t, i) {\n        this.popupInstance || this.clearPopup();\n      }\n      clearPopup(e, t, i) {\n        clearTimeout(this.timeout), this.timeout = null, this.popupInstance && this.popupInstance.hide();\n      }\n      loadTooltip(e, t, i) {\n        var s, o, r;\n        \"function\" == typeof i && (i = i(e, t.getComponent(), function (e) {\n          o = e;\n        })), i instanceof HTMLElement ? s = i : (s = document.createElement(\"div\"), !0 === i && (t instanceof n ? i = t.value : t.definition.field ? this.langBind(\"columns|\" + t.definition.field, e => {\n          s.innerHTML = i = e || t.definition.title;\n        }) : i = t.definition.title), s.innerHTML = i), (i || 0 === i || !1 === i) && (s.classList.add(\"tabulator-tooltip\"), s.addEventListener(\"mousemove\", e => e.preventDefault()), this.popupInstance = this.popup(s), \"function\" == typeof o && this.popupInstance.renderCallback(o), r = this.popupInstance.containerEventCoords(e), this.popupInstance.show(r.x + 15, r.y + 15).hideOnBlur(() => {\n          this.dispatchExternal(\"TooltipClosed\", t.getComponent()), this.popupInstance = null;\n        }), this.dispatchExternal(\"TooltipOpened\", t.getComponent()));\n      }\n    }, _defineProperty(_Class20, \"moduleName\", \"tooltip\"), _Class20),\n    ValidateModule: Ke\n  });\n  var $e = class extends A {\n    static extendModule() {\n      A.initializeModuleBinder(Ye), A._extendModule(...arguments);\n    }\n    static registerModule() {\n      A.initializeModuleBinder(Ye), A._registerModule(...arguments);\n    }\n    constructor(e, t, i) {\n      super(e, t, Ye);\n    }\n  };\n  return $e;\n});","map":{"version":3,"names":["_Class","_H","_Class2","_Class3","_Class4","_Class5","_Class6","_Class7","_Class8","_Class9","_Class10","_Class11","_Class12","_Class13","_Class14","_Class15","_Class16","_Class17","_Class18","_Class19","_Class20","e","debugEventsExternal","debugEventsInternal","debugInvalidOptions","debugInvalidComponentFuncs","debugInitialization","debugDeprecation","height","minHeight","maxHeight","columnHeaderVertAlign","popupContainer","columns","columnDefaults","rowHeader","data","autoColumns","autoColumnsDefinitions","nestedFieldSeparator","footerElement","index","textDirection","addRowPos","headerVisible","renderVertical","renderHorizontal","renderVerticalBuffer","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatter","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","rowHeight","placeholder","dataLoader","dataLoaderLoading","dataLoaderError","dataLoaderErrorTimeout","dataSendParams","dataReceiveParams","dependencies","t","constructor","table","reloadData","i","load","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","subscribe","eventBus","unsubscribe","subscribed","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","deprecationCheck","deprecationAdvisor","check","deprecationCheckMsg","checkMsg","deprecationMsg","msg","module","_column","type","Proxy","get","componentFunctionBinder","handle","getElement","getDefinition","getField","getTitleDownload","getCells","cells","forEach","push","getComponent","isVisible","visible","show","isGroup","hide","toggle","delete","getSubColumns","length","getParentColumn","getParentComponent","_getSelf","scrollTo","columnManager","scrollToColumn","getTable","move","findColumn","moveColumn","console","warn","getNextColumn","nextColumn","getPrevColumn","prevColumn","updateDefinition","getWidth","setWidth","reinitializeWidth","rerenderColumns","s","title","field","hozAlign","vertAlign","width","minWidth","maxWidth","maxInitialWidth","cssClass","variableHeight","headerVertical","headerHozAlign","headerWordWrap","editableTitle","o","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","row","getData","getType","column","getColumn","setValue","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","n","element","value","oldValue","component","loaded","build","generateElement","_configureCell","getFieldValue","document","createElement","className","setAttribute","isRowHeader","classList","add","style","textAlign","display","alignItems","top","bottom","middle","justifyContent","left","right","center","definition","split","_generateContents","innerHTML","Node","firstChild","removeChild","appendChild","cellRendered","layoutElement","setValueProcessData","cellEdited","call","rowManager","setFieldValue","widthStyled","clearWidth","offsetWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","offsetHeight","redrawBlock","parentNode","deleteCell","calcs","getIndex","getCellIndex","r","parent","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","widthFixed","attachColumn","checkColumnVisibility","registerColumnField","_initialize","optionsList","generate","defaultOptionList","checkDefinition","Object","keys","indexOf","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","parseInt","_buildColumnHeaderTitle","addEventListener","stopPropagation","focus","_formatColumnHeaderTitle","columnRendered","verticalAlign","getGroupElement","clientHeight","getHeadersElement","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","concat","getTopColumn","verticalAlignHeaders","matchChildWidths","silent","initialized","splice","setWidthActual","isNaN","Math","floor","clientWidth","max","min","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offsetLeft","ceil","getBoundingClientRect","Promise","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","error","reject","assign","addColumn","then","getPosition","getVisibleColumnsByIndex","_defineProperty","a","elVisible","elOffset","window","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","retrieveNestedData","deepClone","__proto__","Array","isArray","l","findIndex","subject","copy","unshift","msgType","registeredDefaults","register","hasOwnProperty","key","h","elementVertical","elementHorizontal","tableElement","verticalFillMode","initialize","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","renderRowCells","rerenderRowCells","scrollColumns","scrollRows","resize","scrollToRow","scrollToRowNearestTop","visibleRows","rows","getDisplayRows","styleRow","remove","clear","render","rerender","scrollHeight","scrollTop","offsetTop","d","createDocumentFragment","c","leftCol","rightCol","scrollLeft","vDomScrollPosLeft","vDomScrollPosRight","vDomPadLeft","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","startsWith","clearVisRowCache","dataChange","scroll","calcWindowBuffer","columnsByIndex","cols","frozen","leftPos","rightPos","fitDataCheck","vdomHoz","paddingLeft","paddingRight","reinitChanged","reinitializeRows","initializeRow","reinitializeRow","deinitialize","generateCells","getVisibleRows","getRows","filter","includes","abs","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","getCell","insertBefore","nextSibling","fitDataColActualWidthCheck","message","frozenColumns","leftColumns","appendCell","rightColumns","u","blockHozScrollEvent","headersElement","contentsElement","columnsByField","redrawBlockUpdate","renderer","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","initializeScrollWheelWatcher","scrollHorizontal","padVerticalScrollbar","rtl","marginLeft","marginRight","virtual","basic","getContentsElement","deltaX","generateColumnsFromRowData","sorter","calculateSorterFromValue","find","setColumns","match","_addColumn","_reIndexColumns","getComponents","redraw","adjustTableSize","HTMLElement","getColumnByField","getColumnsByFieldRoot","getFirstVisibleColumn","getRealColumns","traverse","getDefinitions","getDefinitionTree","moveColumnActual","reinitialize","_moveColumnInArray","scrollWidth","getFlexBaseWidth","blockRedraw","restoreRedraw","resetScroll","footerManager","m","_row","watchPosition","moveToRow","update","updateData","normalizeHeight","reformat","getNextRow","nextRow","getPrevRow","prevRow","p","manualHeight","outerHeight","position","positionWatchers","created","setData","create","detachElement","deleteCells","rendered","deinitializeHeight","calcMinHeight","calcMaxHeight","resizableRows","JSON","parse","findCell","nextDisplayRow","prevDisplayRow","findRow","moveRowActual","refreshActiveData","deleteActual","resolve","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","g","visibility","tableEmpty","b","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","slice","f","v","w","C","fixedHeight","E","y","R","_quickNormalizeRowHeight","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","activeRows","activeRowsCount","displayRows","displayRowsCount","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","displayPipeline","scrollbarWidth","initializePlaceholder","el","getTableElement","_positionPlaceholder","getRowFromDataObject","getRowFromPosition","pagination","_setDataActual","reRenderInPosition","_wipeElements","destroy","setActiveRows","displayRowIterator","regenerateRowPositions","addRow","addRowActual","addRows","findAddRowPos","reverse","_clearPlaceholder","moveRow","moveRowInArray","clearData","getRowIndex","findRowIndex","getDisplayRowIndex","getDataCount","registerDataPipelineHandler","handler","priority","sort","registerDisplayPipelineHandler","destroyed","stage","skipStage","renderInPosition","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","scrollBarCheck","getRenderMode","_clearTable","renderEmptyScroll","_showPlaceholder","checkPlaceholder","active","external","tableWidth","browser","createEvent","initEvent","dispatchEvent","Event","containerElement","createContainerElement","initializeElement","querySelector","append","activate","prepend","deactivate","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","target","cell","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","values","subscriptionChanged","clearWatchers","updateEventListeners","track","removeEventListener","composedPath","path","findTargets","bindComponents","triggerEvents","closest","bindings","requestOrder","loading","alertLoader","mapParams","objectInvert","clearAlert","catch","alertError","setTimeout","finally","blockActiveLoad","alertManager","alert","events","subscriptionNotifiers","_debugDispatch","_dispatch","debug","_notifySubscriptionChange","from","shift","apply","log","_debugChain","_chain","_debugConfirm","_confirm","callback","x","_warnUser","T","deps","props","lookup","lookupProp","lookupKey","k","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","hideable","blurEvent","escEvent","_escapeCheck","destroyBinding","tableDestroyed","_checkContainerIsParent","body","renderCallback","containerEventCoords","MouseEvent","touches","pageX","pageY","elementPositionCoords","offset","_fitToScreen","hideOnBlur","keyCode","blockHide","restoreHide","child","M","_handler","registerTableOption","registerColumnOption","registerTableFunction","initGuard","registerComponentFunction","registerDataHandler","registerDisplayHandler","refreshData","footerAppend","footerPrepend","footerRemove","popup","L","responsiveLayout","modExists","S","fitData","fitDataFill","fitDataTable","fitDataStretch","responsive","fitColumns","widthGrow","widthShrink","D","mode","modes","initializeColumn","Number","formatter","z","default","groups","item","items","page_size","page_title","first","first_title","last","last_title","prev","prev_title","next","next_title","all","counter","showing","of","pages","headerFilters","P","locale","lang","langList","langs","headerFilterPlaceholder","setHeaderFilterPlaceholder","installLang","setLocale","getLang","_setLangProp","navigator","language","toLowerCase","_executeBindings","_getLangElement","F","freeze","CommsModule","receive","registry","lookupTable","tableComms","commsReceived","LayoutModule","LocalizeModule","H","findTable","tables","deregister","querySelectorAll","matchElement","_","initializeModuleBinder","modulesRegistered","_registerModules","_extendModule","moduleBindings","prototype","moduleCore","_registerModule","_registerModuleBinding","_registerModuleExtensions","moduleName","moduleExtensions","_extendModuleFromQueue","_bindModules","modulesCore","moduleInitOrder","modulesRegular","O","_createAlertElement","msgElement","_createMsgElement","_typeClass","A","extendModule","registerModule","interactionMonitor","browserSlow","browserMobile","originalElement","dependencyRegistry","initializeCoreSystems","_create","defaultOptions","_clearObjectPointers","_mapDeprecatedFunctionality","_clearSelection","getSelection","empty","removeAllRanges","selection","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","getComputedStyle","direction","reactiveData","tagName","attributes","name","replaceChild","_detectBrowser","userAgent","vendor","opera","test","Error","stack","trim","replaceData","addData","updateOrAddData","updateOrAddRow","updateRow","getRowPosition","getColumnDefinitions","showColumn","hideColumn","toggleColumn","deleteColumn","updateColumnDefinition","on","off","B","rownum","V","allowedTypes","transformRow","charAt","toUpperCase","lookupAccessor","accessor","params","accessors","I","method","N","W","encodeURIComponent","join","j","G","urlGenerator","ajaxContentType","contentTypeFormatters","headers","Accept","Origin","location","origin","credentials","fetch","ok","json","status","statusText","U","J","stringify","form","FormData","X","config","url","loaderPromise","ajaxRequestFunc","defaultLoaderPromise","ajaxURLGenerator","defaultURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","generateConfig","sendRequest","defaultConfig","ajaxRequesting","ajaxResponse","q","replace","insert","K","Y","keybindings","copyToClipboard","actions","edit","currentCell","clipboard","$","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboardCopyRowRange","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","getKey","createRange","selectNodeContents","toString","addRange","createTextRange","moveToElementText","select","execCommand","pasteActions","pasteParsers","checkPasteOrigin","getPasteData","mutateData","mutator","Q","Z","avg","precision","reduce","toFixed","parseFloat","sum","String","count","unique","ee","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","adjustForScrollbar","resizeHolderWidth","getResults","userRecalc","recalc","blockCheck","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","reinitializeCalcs","rowsToData","generateRow","recalcGroup","groupRows","getRowGroup","getChildGroups","generateRowData","generateTopRow","generateBottomRow","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","disable","enable","format","lookupFormatter","hasTopCalcs","hasBottomCalcs","getGroups","getGroupResults","getSubGroups","te","csv","delimiter","depth","bom","jsonLines","pdf","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDF","content","colSpan","rowSpan","styles","orientation","unit","autoTable","didDrawPage","text","head","documentProcessing","output","xlsx","sheetName","utils","book_new","compress","writeOptions","bookType","bookSST","compression","generateSheet","Date","sheet_add_aoa","encode_range","SheetNames","Sheets","sheetOnly","sheets","intercept","ArrayBuffer","Uint8Array","charCodeAt","write","html","ie","Blob","deprecatedOptionsCheck","download","downloadToTab","downloaders","triggerDownload","downloadConfig","downloadRowRange","groupHeaderDownload","indent","_group","getRowCount","downloadEncoder","URL","createObjectURL","msSaveOrOpenBlob","click","se","mask","maskLetterChar","maskNumberChar","maskWildcardChar","ctrlKey","metaKey","maskAutoFill","oe","_initializeParams","displayItems","currentItems","focusedItem","input","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","success","cancel","_deprecatedOptionsCheck","_initializeValue","_onRendered","defaultValue","multiselect","headerFilterInitialListGen","preventScroll","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","elementAttributes","clearable","padding","boxSizing","autocomplete","cursor","caretColor","getAttribute","_bindInputEvents","verticalNavigation","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keyTab","_keySelectLetter","_keyAutoCompLetter","_chooseItem","stopImmediatePropagation","_focusItem","_cancel","_scrollToValue","fromCharCode","label","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","_parseList","_clearList","term","_emptyValueCheck","entries","map","_parseListItem","_parseListGroup","itemParams","selected","level","original","_defaultSortFunction","_sortGroup","isFinite","_defaultFilterFunc","_filterItem","_buildItem","tabIndex","itemFormatter","_groupClick","_itemClick","_styleItem","ne","search","selectContents","textarea","whiteSpace","shiftKey","shiftEnterSubmit","selectionStart","number","step","blurFunc","range","date","DateTime","luxon","isDateTime","fromISO","fromFormat","toFormat","onChange","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time","datetime","list","star","getElementsByTagName","createElementNS","cloneNode","blur","overflow","textOverflow","progress","updateValue","round","getPropertyValue","backgroundColor","screenX","tickCross","tristate","indeterminateValue","marginTop","checked","trueValue","falseValue","indeterminate","adaptable","editorLookup","paramsLookup","lookupEditor","re","mouseClick","recursionBlock","invalidEdit","editedCells","convertEmptyValues","editors","emptyValueCheck","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","pasteBlocker","keybindingNavigateNext","edited","allowEdit","findPrevEditableCell","findNextEditableCell","editor","editable","editorParams","editorEmptyValue","editorEmptyValueFunc","getCurrentCell","clearEditor","cellEditCancelled","button","contains","focusCellNoEvent","focusScrollAdjust","leftMargin","rightMargin","cellClick","cellEditing","validationMode","transformEmptyValues","children","ae","le","he","de","selectRow","selectedRows","ce","cloneTableStyle","colVisProp","colVisPropAttach","getHtml","columnLookups","columnVisCheck","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","rowLookups","columnGroups","processColumnGroup","subGroups","rowHeaders","rowGroups","lookupTableStyles","treeElementField","elementField","groupHeader","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","styleRowHeader","firstCell","lastCell","generator","formatCells","formatExportValue","align","controlEl","branchEl","htmlOutputConfig","color","ue","=","<","<=",">",">=","!=","regex","RegExp","like","keywords","separator","matchAll","starts","ends","endsWith","in","me","filterList","headerFilterColumns","prevHeaderFilterChangeCheck","changed","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","generatePlaceholder","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","placeholderHeaderFilter","refreshFilter","addFilter","removeFilter","clearFilter","clearHeaderFilter","headerFilter","tagType","attrType","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","func","trackChanges","generateHeaderFilterElement","headerElement","headerFilterEmptyCheck","headerFilterParams","searchTrigger","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","filtersToArray","filterRecurse","filterRow","pe","plaintext","emptyToSpace","sanitizeHTML","money","decimal","thousand","negativeSign","symbol","symbolAfter","link","urlPrefix","labelField","urlField","image","urlSuffix","allowTruthy","tickElement","crossElement","inputFormat","outputFormat","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","diff","toHuman","stars","traffic","legendAlign","legend","legendColor","buttonTick","buttonCross","size","onValue","offValue","onTruthy","flexDirection","onColor","background","offColor","borderRadius","clickable","relativeToPage","page","getPageSize","getPage","innerText","formatterLookup","array","valueMap","multiline","replacer","ge","formatValue","formatHeader","lookupTypeFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","titleFormatter","titleFormatterParams","be","groupManager","getParentGroup","toggleVisibility","fe","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","groupList","elementContents","arrowElement","startOpen","createElements","addBindings","createValueGroups","movableRows","initializeGroupHeader","allowedValues","_createGroup","groupToggleElement","headerGenerator","insertRow","conformRowData","updateGroupRows","scrollHeader","removeRow","groupValues","generateGroupHeaderContents","removeGroup","getHeadersAndRows","_visSet","groupClosedShowCalcs","getPath","childNodes","ve","cellEdit","rowAdd","rowDelete","pos","_rebindRow","rowMove","posFrom","posTo","we","newValue","after","Ce","undo","redo","history","Ee","cellUpdated","clearComponentHistory","rowDeleted","rowAdded","rowMoved","getHistoryUndoSize","getHistoryRedoSize","action","to","undoers","redoers","ye","read","sheet_to_json","header","Re","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","importers","pickFile","validateData","accept","files","FileReader","validateFile","importReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","result","onerror","structureArrayToObject","structureArrayToColumns","transformHeader","importHeaderTransform","transformData","importValueTransform","importFileValidator","importDataValidator","xe","navPrev","navNext","navUp","navDown","navLeft","navRight","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","Te","keyBlock","ke","watchKeys","pressedKeys","keyupBinding","keydownBinding","mapBindings","bindEvents","clearBindings","mapBinding","ctrl","meta","checkBinding","Me","Le","Se","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toRow","toRowAfter","hasHandle","startY","startX","moveHover","endMove","tableRowDropEvent","touchMove","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","mousemove","previousSibling","which","startMove","bindTouchEvents","rowHandle","passive","_bindMouseMove","_unbindMouseMove","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","elementRowDrop","tabulatorElementDropEvent","connect","disconnect","dropComplete","movableRowsSender","senders","movableRowsReceiver","receivers","De","ze","enabled","transformCell","mutateLink","rowDataChanged","lookupMutator","mutate","mutators","mutatorEdit","Pe","Fe","progressiveLoad","pageCounterElement","pageCounter","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","previousPage","nextPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","paginationSize","generatePageSizeSelectList","setPageSize","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","paginationCounter","pageCounters","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","trigger","_setPageCounter","_setPageButtons","disabled","_generatePageButton","textContent","last_page","last_row","progressiveLoadDelay","He","local","localStorage","getItem","cookie","_e","setItem","setDate","getDate","toUTCString","Oe","id","defWatcherBlock","readFunc","writeFunc","localStorageTest","removeItem","persistence","persistenceMode","persistenceID","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retrieveData","groupStartOpen","save","eventSave","getColumnLayout","setColumnLayout","initialSort","parseColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","Ae","responsiveCollapse","Be","rowSelection","selectableRowsRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","Ve","_range","getStructuredCells","getBounds","getTopEdge","getBottomEdge","getLeftEdge","getRightEdge","setBounds","destroyedGuard","setStartBound","setEndBound","rangeManager","clearValues","Ie","initializing","start","end","col","initElement","initBounds","_updateMinMax","setStart","setEnd","columnSelection","_getTableRows","selecting","_getTableColumns","overlaps","atTopLeft","atBottomRight","occupies","occupiesRow","occupiesColumn","selectableRangeClearCellsValue","rangeRemoved","Ne","rangeJumpUp","rangeJumpDown","rangeJumpLeft","rangeJumpRight","rangeExpandUp","rangeExpandDown","rangeExpandLeft","rangeExpandRight","rangeExpandJumpUp","rangeExpandJumpDown","rangeExpandJumpLeft","rangeExpandJumpRight","selectRange","activeRange","selectedColumns","We","alignEmptyValues","je","decimalSeparator","thousandSeparator","string","localeCompare","boolean","exists","alphanum","Ge","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","sorters","dir","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","findSorter","sortOrderReverse","clearColumnHeaders","setColumnHeader","_sortItems","_sortRow","Ue","columnCount","rowCount","columnString","genColumns","incrementChar","genRows","setRowCount","setColumnCount","Je","_sheet","getTitle","setTitle","setRows","Xe","spreadsheetManager","isActive","grid","defaultColumnDefinition","columnDefinition","columnDefs","rowDefs","columnFields","initializeColumns","initializeRows","loadSheet","_id","unload","findLastIndex","removeSheet","qe","integer","float","numeric","alphanumeric","minLength","maxLength","required","Ke","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","validate","invalid","validator","_extractValidator","substring","_buildValidator","parameters","validators","Ye","AccessorModule","AjaxModule","ClipboardModule","ColumnCalcsModule","DataTreeModule","collapseEl","expandEl","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","dataTreeExpandElement","layoutRow","columnMoving","initializeElementField","tableRedrawing","reinitializeRowChildren","dataTreeElementColumn","getTreeChildren","redrawNeeded","generateControlElement","getChildren","generateChildren","dataTreeFilter","dataTreeSort","getTreeParentRoot","findChildIndex","getChildField","DownloadModule","EditModule","ExportModule","FilterModule","FormatModule","FrozenColumnsModule","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","margin","edge","frozenCheck","layoutCalcRows","layoutGroupCalcs","layoutColumnPosition","marginValue","getColGroupParentElement","getFrozenColumns","_calcSpace","FrozenRowsModule","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","isFrozen","styleRows","GroupRowsModule","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","assignRowToGroup","getGroupedData","generateGroups","pullGroupListData","headerContent","countGroups","createGroup","assignRowToExistingGroup","getExpectedPath","every","checkBasicModeGroupHeaderWidth","HistoryModule","HtmlTableImportModule","fieldIndex","hasIndex","tableElementCheck","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","_attribValue","_findCol","replaceAll","ImportModule","InteractionModule","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","clearTouchWatchers","selectNode","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","KeybindingsModule","MenuModule","menuContainer","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","headerMenuIcon","loadMenu","menu","MoveColumnsModule","toCol","toColAfter","autoScrollMargin","autoScrollStep","autoScrollTimeout","movableColumns","abortMove","mousedown","MoveRowsModule","MutatorModule","PageModule","PersistenceModule","PopupModule","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupIcon","loadPopup","PrintModule","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","printFullscreen","printConfig","printStyled","printRowRange","scrollX","scrollY","printHeader","printFooter","printFormatter","ReactiveDataModule","origFuncs","currentVersion","unblock","watchRow","watchData","unwatchData","enumerable","configurable","pop","writable","watchKey","watchTreeChildren","rebuildTree","unwatchRow","ResizeColumnsModule","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","handleEl","_checkResizability","handleDown","_mouseDown","parentElement","clientX","resizableColumnFit","calcGuidePosition","resizableColumnGuide","ResizeRowsModule","startHeight","prevHandle","startRow","prevHandleDown","screenY","resizableRowGuide","ResizeTableModule","binding","visibilityObserver","resizeObserver","containerObserver","tableHeight","containerHeight","containerWidth","autoResize","initialRedraw","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","contentRect","redrawTable","observe","tableResized","isIntersecting","unobserve","ResponsiveLayoutModule","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","order","generateCollapsedContent","generateCollapsedRowData","responsiveLayoutCollapseUseFormatters","SelectRangeModule","ranges","overlay","layoutChangeTimeout","maxRanges","blockKeydown","keyDownEvent","_handleKeyDown","mouseUpEvent","_handleMouseUp","getRangesData","getRanges","addRangeFromComponent","cellGetRanges","rowGetRanges","colGetRanges","initializeTable","initializeWatchers","rangeContainer","activeRangeCellElement","resetRanges","handleColumnMouseDown","handleColumnMouseMove","handleColumnResized","handleColumnMoving","handleColumnMoved","layoutChange","updateHeaderColumn","renderCell","handleCellMouseDown","handleCellMouseMove","handleCellClick","handleEditingCell","finishEditingCell","restoreFocus","keyNavigate","keyNavigateRange","getActiveCell","initializeFocus","some","newSelection","dataset","navigate","findJumpCellLeft","findJumpCellRight","findJumpCellUp","findJumpCellDown","getTableColumns","getTableRows","getRowByRangePos","getColumnByRangePos","autoScroll","getRowHeaderWidth","findJumpRow","findJumpItem","findJumpCol","isEmpty","layoutRanges","layoutColumn","SelectRowModule","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectableRows","selectableRange","clearSelectionData","rowRetrieve","selectableRowsPersistence","_deselectRow","_rowSelectionChanged","checkRowSelectability","endSelect","selectableRowsCheck","_selectRow","selectableRowsRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","SortModule","SpreadsheetModule","setSheets","addSheet","getSheets","getSheetDefinitions","setSheetData","getSheet","getSheetData","clearSheet","removeSheetFunc","activeSheetFunc","loadRemoteData","spreadsheetData","initializeTabset","loadSheets","newSheet","destroySheets","activeSheet","lookupSheet","TooltipModule","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","ValidateModule","$e"],"sources":["../../src/js/core/defaults/options.js","../../src/js/core/CoreFeature.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/Column.js","../../src/js/core/tools/Helpers.js","../../src/js/core/tools/OptionsList.js","../../src/js/core/rendering/Renderer.js","../../src/js/core/rendering/renderers/BasicHorizontal.js","../../src/js/core/rendering/renderers/VirtualDomHorizontal.js","../../src/js/core/ColumnManager.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/core/rendering/renderers/BasicVertical.js","../../src/js/core/rendering/renderers/VirtualDomVertical.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/tools/InteractionMonitor.js","../../src/js/core/tools/ComponentFunctionBinder.js","../../src/js/core/tools/DataLoader.js","../../src/js/core/tools/ExternalEventBus.js","../../src/js/core/tools/InternalEventBus.js","../../src/js/core/tools/DeprecationAdvisor.js","../../src/js/core/tools/DependencyRegistry.js","../../src/js/core/tools/Popup.js","../../src/js/core/Module.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/tools/TableRegistry.js","../../src/js/core/tools/ModuleBinder.js","../../src/js/core/tools/Alert.js","../../src/js/core/Tabulator.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/Clipboard/extensions/extensions.js","../../src/js/modules/Clipboard/extensions/keybindings/bindings.js","../../src/js/modules/Clipboard/extensions/keybindings/actions.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/jsonLines.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/inputMask.js","../../src/js/modules/Edit/List.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/date.js","../../src/js/modules/Edit/defaults/editors/time.js","../../src/js/modules/Edit/defaults/editors/datetime.js","../../src/js/modules/Edit/defaults/editors/list.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/defaults/editors/adaptable.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/defaults/columnLookups.js","../../src/js/modules/Export/defaults/rowLookups.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/toggle.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/adaptable.js","../../src/js/modules/Format/defaults/formatters/array.js","../../src/js/modules/Format/defaults/formatters/json.js","../../src/js/modules/Format/Format.js","../../src/js/modules/GroupRows/GroupComponent.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/History/extensions/extensions.js","../../src/js/modules/History/extensions/keybindings/bindings.js","../../src/js/modules/History/extensions/keybindings/actions.js","../../src/js/modules/History/History.js","../../src/js/modules/Import/defaults/importers.js","../../src/js/modules/Import/defaults/importers/csv.js","../../src/js/modules/Import/defaults/importers/json.js","../../src/js/modules/Import/defaults/importers/array.js","../../src/js/modules/Import/defaults/importers/xlsx.js","../../src/js/modules/Import/Import.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/MoveRows/defaults/senders.js","../../src/js/modules/MoveRows/defaults/receivers.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Page/defaults/pageCounters.js","../../src/js/modules/Page/defaults/pageCounters/rows.js","../../src/js/modules/Page/defaults/pageCounters/pages.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/ResponsiveLayout/extensions/extensions.js","../../src/js/modules/ResponsiveLayout/extensions/formatters/responsiveCollapse.js","../../src/js/modules/SelectRow/extensions/extensions.js","../../src/js/modules/SelectRow/extensions/formatters/rowSelection.js","../../src/js/modules/SelectRange/RangeComponent.js","../../src/js/modules/SelectRange/Range.js","../../src/js/modules/SelectRange/extensions/keybindings/bindings.js","../../src/js/modules/SelectRange/extensions/extensions.js","../../src/js/modules/SelectRange/extensions/keybindings/actions.js","../../src/js/modules/SelectRange/extensions/clipboard/pasteActions.js","../../src/js/modules/SelectRange/extensions/clipboard/pasteParsers.js","../../src/js/modules/SelectRange/extensions/export/columnLookups.js","../../src/js/modules/SelectRange/extensions/export/rowLookups.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Spreadsheet/GridCalculator.js","../../src/js/modules/Spreadsheet/SheetComponent.js","../../src/js/modules/Spreadsheet/Sheet.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Interaction/Interaction.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/Popup/Popup.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRange/SelectRange.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Spreadsheet/Spreadsheet.js","../../src/js/modules/Tooltip/Tooltip.js","../../src/js/core/TabulatorFull.js"],"sourcesContent":["export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\trowHeader:false,\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\tdataSendParams:{},\n\tdataReceiveParams:{},\n\n\tdependencies:{},\n};\n","export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption,  convert){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption,  convert);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}","//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.getParentComponent();\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}","export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};","//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\n\t\tif(this.column.isRowHeader){\n\t\t\tthis.element.classList.add(\"tabulator-row-header\");\n\t\t}\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else{\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nexport default class Column extends CoreFeature{\n\t\n\tstatic defaultOptionList = defaultOptions;\n\t\n\tconstructor(def, parent, rowHeader){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.isGroup = false;\n\t\tthis.isRowHeader = rowHeader;\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\t\t\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\t\t\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\t\t\n\t\tthis.mapDefinitions();\n\t\t\n\t\tthis.setField(this.definition.field);\n\t\t\n\t\tthis.modules = {}; //hold module variables;\n\t\t\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\t\t\n\t\tthis.visible = true; //default visible state\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\t\t\t\n\t\t\tthis.isGroup = true;\n\t\t\t\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\t\t\t\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\t\t\n\t\tthis._initialize();\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tif(this.isRowHeader){\n\t\t\tel.classList.add(\"tabulator-row-header\");\n\t\t}\n\t\t\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\t\t\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\t\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\t\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\t\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\t\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\t\t\t\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\t\t\n\t\tthis.element.appendChild(this.contentElement);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\t\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\t\t\n\t\tthis.dispatch(\"column-layout\", this);\n\t\t\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\t\t\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\t\t\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\t\t\n\t\tthis.reinitializeWidth();\n\t\t\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\t\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\t\t\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\t\t\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\t\t\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\t\t\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\t\t\n\t\treturn contentElement;\n\t}\n\t\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\t\t\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\t\t\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\t\t\t\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn titleHolderElement;\n\t}\n\t\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\t\t\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\t\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\t\t\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t\t\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\t\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\t\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t\n\t\t\toutput = dataObj;\n\t\t\t\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\t\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\t\t\n\t\tfor(let i = 0; i < length; i++){\n\t\t\t\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\t\t\t\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\t\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\t\t\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\t\t\n\t\tthis.element.style.height = parentHeight + \"px\";\n\t\t\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\t\t\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\t\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\t\t\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\t\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\t\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\t\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\t\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\t\t\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else{\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\t\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\t\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\t\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\t\t\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\t\t\t\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\t\t\n\t\treturn this.definition;\n\t}\n\t\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\t\t\t\n\t\t\tthis.element.style.display = \"\";\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\t\t\t\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tthis.element.style.display = \"none\";\n\t\t\t\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\t\t\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\t\t\tif (this.table.initialized) {\n\t\t\t\tthis.element.style.width = childWidth + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\t\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\t\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\t\t\n\t\twidth = Math.max(this.minWidth, width);\n\t\t\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\t\t\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.width = this.widthStyled;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width\", this);\n\t\t\n\t\tif(this.subscribedExternal(\"columnWidth\")){\n\t\t\tthis.dispatchExternal(\"columnWidth\", this.getComponent());\n\t\t}\n\t}\n\t\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\t\t\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n\t\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\t\t\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\t\t\n\t\treturn offset;\n\t}\n\t\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\t\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\t\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\t\t\t\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\t\t\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\t\t\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\t\t\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\t\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"column-delete\", this);\n\t\t\t\n\t\t\tvar cellCount = this.cells.length;\n\t\t\t\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\t\t\t\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\t\t\t\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tthis.dispatch(\"column-deleted\", this);\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\t\t\n\t\tthis.cells.push(cell);\n\t\t\n\t\treturn cell;\n\t}\n\t\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\t\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\t\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\t\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\t\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\t\t\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\t\t\n\t\tthis.fitToData(force);\n\t\t\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\t\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\t\t\t\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar maxWidth = this.element.offsetWidth;\n\t\t\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tupdateDefinition(updates){\n\t\tvar definition;\n\t\t\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\t\t\t\t\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\t\t\t\t\t\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\t\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n\t\n\tgetPosition(){\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1;\n\t}\n\t\n\tgetParentComponent(){\n\t\treturn this.parent instanceof Column ? this.parent.getComponent() : false;\n\t}\n}","export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic retrieveNestedData(separator, field, data){\n\t\tvar structure = separator ? field.split(separator) : [field],\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdata = data[structure[i]];\n\n\t\t\toutput = data;\n\n\t\t\tif(!data){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}\n","export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.rowHeader = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\t\t\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\t\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else{\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\t\t\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\t\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\t\t\t\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tcollProgress = {},\n\t\trowSample = this.table.options.autoColumns === \"full\" ? data : [data[0]],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trowSample.forEach((row) => {\n\t\t\t\t\n\t\t\t\tObject.keys(row).forEach((key, index) => {\n\t\t\t\t\tlet value = row[key],\n\t\t\t\t\tcol;\n\t\t\t\t\t\n\t\t\t\t\tif(!collProgress[key]){\n\t\t\t\t\t\tcol = {\n\t\t\t\t\t\t\tfield:key,\n\t\t\t\t\t\t\ttitle:key,\n\t\t\t\t\t\t\tsorter:this.calculateSorterFromValue(value),\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcols.splice(index, 0, col);\n\t\t\t\t\t\tcollProgress[key] = typeof value === \"undefined\" ? col : true;\n\t\t\t\t\t}else if(collProgress[key] !== true){\n\t\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcollProgress[key].sorter = this.calculateSorterFromValue(value);\n\t\t\t\t\t\t\tcollProgress[key] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tcalculateSorterFromValue(value){\n\t\tvar sorter;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"undefined\":\n\t\t\t\tsorter = \"string\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tsorter = \"boolean\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\tsorter = \"number\";\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\tsorter = \"array\";\n\t\t\t\t}else{\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\tsorter = \"number\";\n\t\t\t\t}else{\n\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn sorter;\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\tthis.dispatchExternal(\"columnsLoading\");\n\t\t\n\t\tif(this.table.options.rowHeader){\n\t\t\tthis.rowHeader = new Column(this.table.options.rowHeader === true ? {} : this.table.options.rowHeader, this, true);\n\t\t\tthis.columns.push(this.rowHeader);\n\t\t\tthis.headersElement.appendChild(this.rowHeader.getElement());\n\t\t\tthis.rowHeader.columnRendered();\n\t\t}\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\n\t\tif(this.subscribedExternal(\"columnsLoaded\")){\n\t\t\tthis.dispatchExternal(\"columnsLoaded\", this.getComponents());\n\t\t}\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\t//prevent adding of rows in front of row header\n\t\tif(before && this.rowHeader && (!nextToColumn || nextToColumn === this.rowHeader)){\n\t\t\tbefore = false;\n\t\t\tnextToColumn = this.rowHeader;\n\t\t\tindex = 0;\n\t\t}\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\t\t\t\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\t\t\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tcolumns = [];\n\t\t\t\t\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator)[0] : field;\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetVisibleColumnsByIndex() {\n\t\treturn this.columnsByIndex.filter((col) => col.visible);\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else{\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}","//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0, minHeight  = 0;\n\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.calcMinHeight();\n\t\t\tmaxHeight = this.calcMaxHeight();\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\n\tcalcMinHeight(){\n\t\treturn this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t}\n\n\tcalcMaxHeight(){\n\t\tvar maxHeight = 0;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tvar height = cell.getHeight();\n\n\t\t\tif(height > maxHeight){\n\t\t\t\tmaxHeight = height;\n\t\t\t}\n\t\t});\n\n\t\treturn maxHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\n\t\t\tif(this.subscribedExternal(\"rowHeight\")){\n\t\t\t\tthis.dispatchExternal(\"rowHeight\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\n\t\tif(!this.rows().length){\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else{\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.type === \"row\" && row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(this.displayRowsCount){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else{\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler || !this.activeRowsPipeline[0]){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\n\tcheckPlaceholder(){\n\t\tif(this.displayRowsCount){\n\t\t\tthis._clearPlaceholder();\n\t\t}else{\n\t\t\tthis.tableEmpty();\n\t\t}\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(force){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight(force);\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tthis.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\t\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}\n","export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", [response], null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}","export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}","export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption, convert){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\n\t\t\t\tif(convert){\n\t\t\t\t\tthis.table.options[newOption] = this.table.options[oldOption];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class DependencyRegistry extends CoreFeature{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.deps = {};\r\n\t\t\r\n\t\tthis.props = {\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.deps = Object.assign({}, this.options(\"dependencies\"));\r\n\t}\r\n\t\r\n\tlookup(key, prop, silent){\r\n\t\tif(Array.isArray(key)){\r\n\t\t\tfor (const item of key) {\r\n\t\t\t\tvar match = this.lookup(item, prop, true);\r\n\r\n\t\t\t\tif(match){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(match){\r\n\t\t\t\treturn match;\r\n\t\t\t}else{\r\n\t\t\t\tthis.error(key);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(prop){\r\n\t\t\t\treturn this.lookupProp(key, prop, silent);\r\n\t\t\t}else{\r\n\t\t\t\treturn this.lookupKey(key, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupProp(key, prop, silent){\r\n\t\tvar dependency;\r\n\t\t\r\n\t\tif(this.props[key] && this.props[key][prop]){\r\n\t\t\treturn this.props[key][prop];\r\n\t\t}else{\r\n\t\t\tdependency = this.lookupKey(key, silent);\r\n\t\t\t\r\n\t\t\tif(dependency){\r\n\t\t\t\tif(!this.props[key]){\r\n\t\t\t\t\tthis.props[key] = {};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.props[key][prop] = dependency[prop] || dependency;\r\n\t\t\t\treturn this.props[key][prop];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupKey(key, silent){\r\n\t\tvar dependency;\r\n\t\t\r\n\t\tif(this.deps[key]){\r\n\t\t\tdependency = this.deps[key];\r\n\t\t}else if(window[key]){\r\n\t\t\tthis.deps[key] = window[key];\r\n\t\t\tdependency = this.deps[key];\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.error(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn dependency;\r\n\t}\r\n\r\n\terror(key){\r\n\t\tconsole.error(\"Unable to find dependency\", key, \"Please check documentation and ensure you have imported the required library into your project\");\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else{\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else{\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tlet offsetHeight = Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0);\n\t\tif((y + this.element.offsetHeight) > offsetHeight) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.element.style.height = offsetHeight + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nexport default class Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else{\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};","//resize columns to fit data they contain\nexport default function(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}","//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}","//resize columns to fit\nexport default function(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n","import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nexport default class Layout extends Module{\n\n\tstatic moduleName = \"layout\";\n\n\t//load defaults\n\tstatic modes = defaultModes;\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.widthGrow){\n\t\t\tcolumn.definition.widthGrow = Number(column.definition.widthGrow);\n\t\t}\n\t\tif(column.definition.widthShrink){\n\t\t\tcolumn.definition.widthShrink = Number(column.definition.widthShrink);\n\t\t}\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\n\t\tvar variableHeight = this.table.columnManager.columnsByIndex.find((column) => column.definition.variableHeight || column.definition.formatter === \"textarea\");\n\t\t\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\n\t\tif(variableHeight){\n\t\t\tthis.table.rowManager.normalizeHeight(true);\n\t\t}\n\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}","export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nexport default class Localize extends Module{\n\n\tstatic moduleName = \"localize\";\n\n\t//load defaults\n\tstatic langs = defaultLangs;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Comms extends Module{\n\n\tstatic moduleName = \"comms\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = this.table.constructor.registry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}","export default class TableRegistry {\n\tstatic registry = {\n\t\ttables:[],\n\t\t\n\t\tregister(table){\n\t\t\tTableRegistry.registry.tables.push(table);\n\t\t},\n\t\t\n\t\tderegister(table){\n\t\t\tvar index = TableRegistry.registry.tables.indexOf(table);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tTableRegistry.registry.tables.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\t\n\t\tlookupTable(query, silent){\n\t\t\tvar results = [],\n\t\t\tmatches, match;\n\t\t\t\n\t\t\tif(typeof query === \"string\"){\n\t\t\t\tmatches = document.querySelectorAll(query);\n\t\t\t\t\n\t\t\t\tif(matches.length){\n\t\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\t\tmatch = TableRegistry.registry.matchElement(matches[i]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof TableRegistry){\n\t\t\t\tmatch = TableRegistry.registry.matchElement(query);\n\t\t\t\t\n\t\t\t\tif(match){\n\t\t\t\t\tresults.push(match);\n\t\t\t\t}\n\t\t\t}else if(Array.isArray(query)){\n\t\t\t\tquery.forEach(function(item){\n\t\t\t\t\tresults = results.concat(TableRegistry.registry.lookupTable(item));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tif(!silent){\n\t\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn results;\n\t\t},\n\t\t\n\t\tmatchElement(element){\n\t\t\treturn TableRegistry.registry.tables.find(function(table){\n\t\t\t\treturn element instanceof TableRegistry ? table === element : table.element === element;\n\t\t\t});\n\t\t}\n\t};\n\n\t\t\n\tstatic findTable(query){\n\t\tvar results = TableRegistry.registry.lookupTable(query, true);\n\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t}\n}","import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder extends TableRegistry {\n\t\n\tstatic moduleBindings = {};\n\tstatic moduleExtensions = {};\n\tstatic modulesRegistered = false;\n\t\n\tstatic defaultModules = false;\n\t\n\tconstructor(){\n\t\tsuper();\n\t}\n\t\n\tstatic initializeModuleBinder(defaultModules){\n\t\tif(!ModuleBinder.modulesRegistered){\n\t\t\tModuleBinder.modulesRegistered = true;\n\t\t\tModuleBinder._registerModules(coreModules, true);\n\t\t\t\n\t\t\tif(defaultModules){\n\t\t\t\tModuleBinder._registerModules(defaultModules);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic _extendModule(name, property, values){\n\t\tif(ModuleBinder.moduleBindings[name]){\n\t\t\tvar source = ModuleBinder.moduleBindings[name][property];\n\t\t\t\n\t\t\tif(source){\n\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t}\n\t}\n\t\n\tstatic _registerModules(modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\tModuleBinder._registerModule(mods);\n\t}\n\t\n\tstatic _registerModule(modules){\n\t\tif(!Array.isArray(modules)){\n\t\t\tmodules = [modules];\n\t\t}\n\t\t\n\t\tmodules.forEach((mod) => {\n\t\t\tModuleBinder._registerModuleBinding(mod);\n\t\t\tModuleBinder._registerModuleExtensions(mod);\n\t\t});\n\t}\n\t\n\tstatic _registerModuleBinding(mod){\n\t\tif(mod.moduleName){\n\t\t\tModuleBinder.moduleBindings[mod.moduleName] = mod;\n\t\t}else{\n\t\t\tconsole.error(\"Unable to bind module, no moduleName defined\", mod.moduleName);\n\t\t}\n\t}\n\t\n\tstatic _registerModuleExtensions(mod){\n\t\tvar extensions = mod.moduleExtensions;\n\t\t\n\t\tif(mod.moduleExtensions){\n\t\t\tfor (let modKey in extensions) {\n\t\t\t\tlet ext = extensions[modKey];\n\t\t\t\t\n\t\t\t\tif(ModuleBinder.moduleBindings[modKey]){\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tModuleBinder._extendModule(modKey, propKey, ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey]){\n\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey] = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (let propKey in ext) {\n\t\t\t\t\t\tif(!ModuleBinder.moduleExtensions[modKey][propKey]){\n\t\t\t\t\t\t\tModuleBinder.moduleExtensions[modKey][propKey] = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tObject.assign(ModuleBinder.moduleExtensions[modKey][propKey], ext[propKey]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tModuleBinder._extendModuleFromQueue(mod);\n\t}\n\t\n\tstatic _extendModuleFromQueue(mod){\n\t\tvar extensions = ModuleBinder.moduleExtensions[mod.moduleName];\n\t\t\n\t\tif(extensions){\n\t\t\tfor (let propKey in extensions) {\n\t\t\t\tModuleBinder._extendModule(mod.moduleName, propKey, extensions[propKey]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//ensure that module are bound to instantiated function\n\t_bindModules(){\n\t\tvar orderedStartMods = [],\n\t\torderedEndMods = [],\n\t\tunOrderedMods = [];\n\t\t\n\t\tthis.modules = {};\n\t\t\n\t\tfor(var name in ModuleBinder.moduleBindings){\n\t\t\tlet mod = ModuleBinder.moduleBindings[name];\n\t\t\tlet module = new mod(this);\n\t\t\t\n\t\t\tthis.modules[name] = module;\n\t\t\t\n\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\tthis.modulesCore.push(module);\n\t\t\t}else{\n\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t}else{\n\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\n\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t}\n}","import CoreFeature from '../CoreFeature.js';\n\nexport default class Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n\n\t\t\tthis.dispatch(\"alert-show\", type);\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else{\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tthis.dispatch(\"alert-hide\", this.type);\n\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}","'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\nimport DependencyRegistry from './tools/DependencyRegistry.js';\n\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator extends ModuleBinder{\n\n\t//default setup options\n\tstatic defaultOptions = defaultOptions;\n\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder();\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper();\n\n\t\tTabulator.initializeModuleBinder(modules);\n\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\n\t\tthis.dependencyRegistry = new DependencyRegistry(this);\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.constructor.registry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis._bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\tthis.footerManager.initialize();\n\n\t\tthis.dependencyRegistry.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 6.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\n\t\tthis.initialized = true;\n\t\t\n\t\tthis._loadInitialData()\n\t\t\t.finally(() => {\n\t\t\t\tthis.eventBus.dispatch(\"table-initialized\");\n\t\t\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t\t\t});\t\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\treturn this.dataLoader.load(this.options.data)\n\t\t\t.finally(() => {\n\t\t\t\tthis.columnManager.verticalAlignHeaders();\n\t\t\t});\t\t\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.constructor.registry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw(true);\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\nexport default Tabulator;\n","export default {\r\n\trownum:function(value, data, type, params, column, row){\r\n\t\treturn row.getPosition();\r\n\t}\r\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultAccessors from './defaults/accessors.js';\n\nexport default class Accessor extends Module{\n\t\n\tstatic moduleName = \"accessor\";\n\n\t//load defaults\n\tstatic accessors = defaultAccessors;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}","export default {\n\tmethod: \"GET\",\n};","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}","export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nexport default class Ajax extends Module{\n\n\tstatic moduleName = \"ajax\";\n\n\t//load defaults\n\tstatic defaultConfig = defaultConfig;\n\tstatic defaultURLGenerator = defaultURLGenerator;\n\tstatic defaultLoaderPromise = defaultLoaderPromise;\n\tstatic contentTypeFormatters = defaultContentTypeFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(Object.assign({}, ajaxParams), params);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}","export default {\n\treplace:function(data){\n\t\treturn this.table.setData(data);\n\t},\n\tupdate:function(data){\n\t\treturn this.table.updateOrAddData(data);\n\t},\n\tinsert:function(data){\n\t\treturn this.table.addData(data);\n\t},\n};","export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\t\t\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\t\t\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\t\t\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\t\t\t\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\t\t\t\t\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\t\t\t\t\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\trows.push(row);\n\t\t\t});\n\t\t\t\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t},\n};","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};","export default {\r\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 67\"],\r\n};\r\n","export default {\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class Clipboard extends Module{\n\n\tstatic moduleName = \"clipboard\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic pasteActions = defaultPasteActions;\n\tstatic pasteParsers = defaultPasteParsers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\t\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPasteOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPasteOrigin(e){\n\t\tvar valid = true;\n\t\tvar blocked = this.confirm(\"clipboard-paste\", [e]);\n\n\t\tif(blocked || ![\"DIV\", \"SPAN\"].includes(e.target.tagName)){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}","export default class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}","export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};","import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nexport default class ColumnCalcs extends Module{\n\n\tstatic moduleName = \"columnCalcs\";\n\n\t//load defaults\n\tstatic calculations = defaultCalculations;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tif(!this.topInitialized){\n\n\t\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\t\tfragment.appendChild(this.topElement);\n\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [],\n\t\thasDataTreeColumnCalcs = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs,\n\t\tdataTree = this.table.modules.dataTree;\n\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif(hasDataTreeColumnCalcs && row.modules.dataTree?.open){\n\t\t\t\tthis.rowsToData(dataTree.getFilteredTreeChildren(row)).forEach(dataRow =>{\n\t\t\t\t\tdata.push(row);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.lookupFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.lookupFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}","import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};","export default function(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n","export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}","export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}","export default function(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\",\n\tjspdfLib, doc;\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tjspdfLib = this.dependencyRegistry.lookup(\"jspdf\", \"jsPDF\");\n\tdoc = new jspdfLib(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n","import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tXLSXLib = this.dependencyRegistry.lookup(\"XLSX\"),\n\tworkbook = XLSXLib.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSXLib.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSXLib.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSXLib.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n","export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}","import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nexport default class Download extends Module{\n\n\tstatic moduleName = \"download\";\n\n\t//load defaults\n\tstatic downloaders = defaultDownloaders;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\t// this.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}","import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\t// if(this.params.listItemFormatter){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.sortValuesList){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchFunc){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t\t\n\t\t// if(this.params.searchingPlaceholder){\n\t\t// \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t// }\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else{\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else{\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else{\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else{\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else{\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else{\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else{\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else{\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else{\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(!this._emptyValueCheck(val)){\n\t\t\t\t\tif(this.params.multiselect && Array.isArray(val)){\n\t\t\t\t\t\tval.forEach((item) => {\n\t\t\t\t\t\t\tif(!this._emptyValueCheck(item)){\n\t\t\t\t\t\t\t\toutput[item] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\n\t_emptyValueCheck(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\";\n\t}\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else{\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else{\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else{\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else{\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else{\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else{\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else{\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else{\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else{\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else{\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else{\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else{\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n","import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport date from './editors/date.js';\nimport time from './editors/time.js';\nimport datetime from './editors/datetime.js';\nimport list from './editors/list.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\nimport adaptable from './editors/adaptable.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tlist:list,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n\tadaptable:adaptable,\n};","import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange(e);\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange(e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}","//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"HH:mm\");\n\t\t\t\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\")) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else{\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"HH:mm\");\n\t\t}else{\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}","//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}","//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}","//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}","export default function(cell, onRendered, success, cancel, params){\r\n\tvar column = cell._getSelf().column,\r\n\tlookup, editorFunc, editorParams;\r\n    \r\n\tfunction defaultLookup(cell){\r\n\t\tvar value = cell.getValue(),\r\n\t\teditor = \"input\";\r\n        \r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"number\":\r\n\t\t\t\teditor = \"number\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"boolean\":\r\n\t\t\t\teditor = \"tickCross\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(value.includes(\"\\n\")){\r\n\t\t\t\t\teditor = \"textarea\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n        \r\n\t\treturn editor;\r\n\t}\r\n    \r\n\tlookup = params.editorLookup ? params.editorLookup(cell) : defaultLookup(cell);\r\n\r\n\tif(params.paramsLookup){\r\n\t\teditorParams = typeof params.paramsLookup === \"function\" ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup];\r\n\t}\r\n\r\n\teditorFunc = this.table.modules.edit.lookupEditor(lookup, column);\r\n    \r\n\treturn  editorFunc.call(this, cell, onRendered, success, cancel, editorParams || {});\r\n}","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nexport default class Edit extends Module{\n\n\tstatic moduleName = \"edit\";\n\n\t//load defaults\n\tstatic editors = defaultEditors;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\tthis.convertEmptyValues = false;\n\t\t\n\t\tthis.editors = Edit.editors;\n\t\n\t\tthis.registerTableOption(\"editTriggerEvent\", \"focus\");\n\t\tthis.registerTableOption(\"editorEmptyValue\");\n\t\tthis.registerTableOption(\"editorEmptyValueFunc\", this.emptyValueCheck.bind(this));\n\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\tthis.registerColumnOption(\"editorEmptyValue\");\n\t\tthis.registerColumnOption(\"editorEmptyValueFunc\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\tthis.subscribe(\"clipboard-paste\", this.pasteBlocker.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\t\n\t\t// this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\t// this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\n\t\tif(Object.keys(this.table.options).includes(\"editorEmptyValue\")){\n\t\t\tthis.convertEmptyValues = true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Paste Negation //////////\n\t///////////////////////////////////\n\t\n\tpasteBlocker(e){\n\t\tif(this.currentCell){\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(!this.invalidEdit){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar convertEmpty = Object.keys(column.definition).includes(\"editorEmptyValue\");\n\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {},\n\t\t\tconvertEmptyValues:convertEmpty,\n\t\t\teditorEmptyValue:column.definition.editorEmptyValue,\n\t\t\teditorEmptyValueFunc:column.definition.editorEmptyValueFunc,\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tconfig.editor = this.lookupEditor(column.definition.editor, column);\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\n\tlookupEditor(editor, column){\n\t\tvar editorFunc;\n\n\t\tswitch(typeof editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[editor]){\n\t\t\t\t\teditorFunc = this.editors[editor];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\teditorFunc = editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditorFunc = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditorFunc = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn editorFunc;\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(this.options(\"editTriggerEvent\") === \"dblclick\"){\n\t\t\t\telement.addEventListener(\"dblclick\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\" || this.options(\"editTriggerEvent\") === \"click\"){\n\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif(this.options(\"editTriggerEvent\") === \"focus\"){\n\t\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\t\t\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\teditFinished = false,\n\t\tcellEditor, component, params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\t\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\n\t\t\t\t\teditFinished = true;\n\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = self.transformEmptyValues(value, cell);\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\teditFinished = true;\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\teditFinished = false;\n\t\t\t\t\t}, 10);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\t// editFinished = true;\n\n\t\t\tif(self.currentCell === cell && !editFinished){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\tthis.blur(element);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.blur(element);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\tthis.blur(element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\tthis.blur(element);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\temptyValueCheck(value){\n\t\treturn value === \"\" || value === null || typeof value === \"undefined\";\n\t}\n\n\ttransformEmptyValues(value, cell){\n\t\tvar mod = cell.column.modules.edit, \n\t\tconvert = mod.convertEmptyValues || this.convertEmptyValues,\n\t\tcheckFunc;\n\t\t\n\t\tif(convert){\n\t\t\tcheckFunc = mod.editorEmptyValueFunc || this.options(\"editorEmptyValueFunc\");\n\n\t\t\tif(checkFunc && checkFunc(value)){\n\t\t\t\tvalue = mod.convertEmptyValues ? mod.editorEmptyValue : this.options(\"editorEmptyValue\");\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn value;\n\t}\n\t\n\tblur(element){\n\t\tif(!this.confirm(\"edit-blur\", [element]) ){\n\t\t\telement.blur();\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}","export default class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}","export default class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}","export default {\r\n\r\n};","export default {\r\n\tvisible:function(){\r\n\t\treturn this.rowManager.getVisibleRows(false, true);\r\n\t},\r\n\tall:function(){\r\n\t\treturn this.rowManager.rows;\r\n\t},\r\n\tselected:function(){\r\n\t\treturn this.modules.selectRow.selectedRows;\r\n\t},\r\n\tactive:function(){\r\n\t\tif(this.options.pagination){\r\n\t\t\treturn this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2);\r\n\t\t}else{\r\n\t\t\treturn this.rowManager.getDisplayRows();\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nimport columnLookups from './defaults/columnLookups.js';\nimport rowLookups from './defaults/rowLookups.js';\n\nexport default class Export extends Module{\n\n\tstatic moduleName = \"export\";\n\n\tstatic columnLookups = columnLookups;\n\tstatic rowLookups = rowLookups;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\tthis.colVisPropAttach = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tvar headers, body, columns, colLookup;\n\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\tthis.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1);\n\n\t\tcolLookup = Export.columnLookups[range];\n\n\t\tif(colLookup){\n\t\t\tcolumns = colLookup.call(this.table);\n\t\t\tcolumns = columns.filter(col => this.columnVisCheck(col));\n\t\t}\n\n\t\theaders = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders(columns)) : [];\n\n\t\tif(columns){\n\t\t\tcolumns = columns.map(col => col.getComponent());\n\t\t}\n\t\t\n\t\tbody = this.bodyToExportRows(this.rowLookup(range), columns);\n\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [], \n\t\trowLookup;\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\trowLookup = Export.rowLookups[range] || Export.rowLookups[\"active\"];\n\n\t\t\trows = rowLookup.call(this.table);\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(columns){\n\t\tvar output = [];\n\t\t\n\t\tif (!columns) {\n\t\t\tcolumns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t}\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\n\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisPropAttach)] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\n\t\tif(this.config.rowHeaders === false && column.isRowHeader){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\n\t\tif(visProp === false || visProp === true){\n\t\t\treturn visProp;\n\t\t}\n\n\t\treturn column.visible && column.field;\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows, columns = []){\n\t\tvar exportRows = [];\n\t\t\n\t\tif (columns.length === 0) {\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisPropAttach)],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisPropAttach)];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.styleRowHeader = styles.firstRow.getElementsByClassName(\"tabulator-row-header\")[0];\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-left\", \"border-right\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent && column.component._column.parent.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.isGroup){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.mapElementStyles(this.table.columnManager.getElement(), cellEl, [\"border-bottom\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\ttable =  this.table,\n\t\t\t\tindex = table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle, styleProps;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:function(){\n\t\t\t\t\t\treturn table;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\n\t\t\t\tstyleProps = [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"];\n\n\t\t\t\tif(column.isRowHeader){\n\t\t\t\t\tcellStyle = styles.styleRowHeader;\n\t\t\t\t\tstyleProps.push(\"background-color\");\n\t\t\t\t}else{\n\t\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, styleProps);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nexport default class Filter extends Module{\n\n\tstatic moduleName = \"filter\";\n\n\t//load defaults\n\tstatic filters = defaultFilters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}","import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport toggle from './formatters/toggle.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\nimport adaptable from './formatters/adaptable.js';\nimport array from './formatters/array.js';\nimport json from './formatters/json.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\ttoggle:toggle,\n\trownum:rownum,\n\thandle:handle,\n\tadaptable:adaptable,\n\tarray:array,\n\tjson:json,\n};","export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}","export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else{\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}","import Helpers from '../../../../core/tools/Helpers.js';\n\n\nexport default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\n\t\t\tvalue = Helpers.retrieveNestedData(this.table.options.nestedFieldSeparator, formatterParams.urlField, data);\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else{\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}","export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}","export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}","import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\tsize = formatterParams.size ||15,\r\n\tsizePx = size + \"px\",\r\n\tcontainEl, switchEl,\r\n\tonValue = formatterParams.hasOwnProperty(\"onValue\") ? formatterParams.onValue : true,\r\n\toffValue = formatterParams.hasOwnProperty(\"offValue\") ? formatterParams.offValue : false,\r\n\r\n\r\n\tstate = formatterParams.onTruthy ? value : value === onValue;\r\n\r\n\t\r\n\tcontainEl = document.createElement(\"div\");\r\n\tcontainEl.classList.add(\"tabulator-toggle\");\r\n\r\n\tif(state){\r\n\t\tcontainEl.classList.add(\"tabulator-toggle-on\");\r\n\t\tcontainEl.style.flexDirection = \"row-reverse\";\r\n\r\n\t\tif(formatterParams.onColor){\r\n\t\t\tcontainEl.style.background = formatterParams.onColor;\r\n\t\t}\r\n\t}else{\r\n\t\tif(formatterParams.offColor){\r\n\t\t\tcontainEl.style.background = formatterParams.offColor;\r\n\t\t}\r\n\t}\r\n\r\n\tcontainEl.style.width = (2.5 * size) + \"px\";\r\n\tcontainEl.style.borderRadius = sizePx;\r\n\r\n\tif(formatterParams.clickable){\r\n\t\tcontainEl.addEventListener(\"click\", (e) => {\r\n\t\t\tcell.setValue(state ? offValue : onValue);\r\n\t\t});\r\n\t}\r\n\r\n\tswitchEl = document.createElement(\"div\");\r\n\tswitchEl.classList.add(\"tabulator-toggle-switch\");\r\n\r\n\tswitchEl.style.height = sizePx;\r\n\tswitchEl.style.width = sizePx;\r\n\tswitchEl.style.borderRadius = sizePx;\r\n\t\r\n\tcontainEl.appendChild(switchEl);\r\n\t\r\n\treturn containEl;\r\n}","export default function(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\tvar table = cell.getTable();\n\n\trow.watchPosition((position) => {\n\t\tif (formatterParams.relativeToPage) {\n\t\t\tposition += table.modules.page.getPageSize() * (table.modules.page.getPage() - 1);\n\t\t}\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}\n","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}","export default function(cell, params, onRendered){\r\n\tvar lookup, formatterFunc, formatterParams;\r\n    \r\n\tfunction defaultLookup(cell){\r\n\t\tvar value = cell.getValue(),\r\n\t\tformatter = \"plaintext\";\r\n        \r\n\t\tswitch(typeof value){           \r\n\t\t\tcase \"boolean\":\r\n\t\t\t\tformatter = \"tickCross\";\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(value.includes(\"\\n\")){\r\n\t\t\t\t\tformatter = \"textarea\";\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n        \r\n\t\treturn formatter;\r\n\t}\r\n    \r\n\tlookup = params.formatterLookup ? params.formatterLookup(cell) : defaultLookup(cell);\r\n\r\n\tif(params.paramsLookup){\r\n\t\tformatterParams = typeof params.paramsLookup === \"function\" ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup];\r\n\t}\r\n\r\n\tformatterFunc = this.table.modules.format.lookupFormatter(lookup);\r\n    \r\n\treturn  formatterFunc.call(this, cell, formatterParams || {}, onRendered);\r\n}","import Helpers from '../../../../core/tools/Helpers.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar delimiter = formatterParams.delimiter || \",\",\n\tvalue = cell.getValue(),\n\ttable = this.table,\n\tvalueMap;\n\t\n\tif(formatterParams.valueMap){\n\t\tif(typeof formatterParams.valueMap === \"string\"){\n\t\t\tvalueMap = function(value){\n\t\t\t\treturn value.map((item) => {\n\t\t\t\t\treturn Helpers.retrieveNestedData(table.options.nestedFieldSeparator, formatterParams.valueMap, item);\n\t\t\t\t});\n\t\t\t};\n\t\t}else{\n\t\t\tvalueMap = formatterParams.valueMap;\n\t\t}\n\t}\n\n\tif(Array.isArray(value)){\n\t\tif(valueMap){\n\t\t\tvalue = valueMap(value);\n\t\t}\n\n\t\treturn value.join(delimiter);\n\t}else{\n\t\treturn value;\n\t}\n}","export default function(cell, formatterParams, onRendered){\n\tvar indent = formatterParams.indent || \"\\t\",\n\tmultiline = typeof formatterParams.multiline === \"undefined\" ? true : formatterParams.multiline,\n\treplacer = formatterParams.replacer || null,\n\tvalue = cell.getValue();\n\t\n\tif(multiline){\n\t\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\t}\n\n\treturn JSON.stringify(value, replacer, indent);\n}","import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nexport default class Format extends Module{\n\t\n\tstatic moduleName = \"format\";\n\t\n\t//load defaults\n\tstatic formatters = defaultFormatters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupTypeFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupTypeFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupTypeFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupTypeFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupTypeFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\tconfig.formatter = this.lookupFormatter(formatter);\n\t\t\n\t\treturn config;\n\t}\n\t\n\t\n\tlookupFormatter(formatter){\n\t\tvar formatterFunc;\n\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatterFunc = Format.formatters[formatter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatterFunc = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tformatterFunc = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatterFunc = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatterFunc;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.lookupFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n}","//public group object\nexport default class GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}","import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nexport default class Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else{\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\n\t\tthis.table.rowManager.checkPlaceholder();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n};","export default {\r\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\r\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\r\n};\r\n","export default {\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class History extends Module{\n\n\tstatic moduleName = \"history\";\n\tstatic moduleExtensions = extensions;\n\n\t//load defaults\n\tstatic undoers = defaultUndoers;\n\tstatic redoers = defaultRedoers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Undo Error - No more history to undo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(this.options(\"history\") ? \"History Redo Error - No more history to redo\" : \"History module not enabled\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}","import csv from './importers/csv.js';\nimport json from './importers/json.js';\nimport array from './importers/array.js';\nimport xlsx from './importers/xlsx.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tarray:array,\n\txlsx:xlsx,\n};","export default function(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}","export default function(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}","export default function (input){\n\treturn input;\n}","export default function(input){\r\n\tvar XLSXLib = this.dependencyRegistry.lookup(\"XLSX\"),\r\n\tworkbook2 = XLSXLib.read(input),\r\n\tsheet = workbook2.Sheets[workbook2.SheetNames[0]];\r\n\t\r\n\treturn XLSXLib.utils.sheet_to_json(sheet, {header: 1 });\r\n}","import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nexport default class Import extends Module{\n\t\n\tstatic moduleName = \"import\";\n\t\n\t//load defaults\n\tstatic importers = defaultImporters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t\tthis.registerTableOption(\"importHeaderTransform\");\n\t\tthis.registerTableOption(\"importValueTransform\");\n\t\tthis.registerTableOption(\"importDataValidator\");\n\t\tthis.registerTableOption(\"importFileValidator\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\t\t\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\t\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\t\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\t\n\tlookupImporter(importFormat){\n\t\tvar importer;\n\t\t\n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n\t\t\n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else{\n\t\t\timporter = importFormat;\n\t\t}\n\t\t\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n\t\t\n\t\treturn importer;\n\t}\n\t\n\timportFromFile(importFormat, extension, importReader){\n\t\tvar importer = this.lookupImporter(importFormat);\n\t\t\n\t\tif(importer){\n\t\t\treturn this.pickFile(extension, importReader)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.mutateData.bind(this))\n\t\t\t\t.then(this.validateData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tthis.dispatch(\"import-error\", err);\n\t\t\t\t\tthis.dispatchExternal(\"importError\", err);\n\t\t\t\t\t\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\t\n\t\t\t\t\tthis.table.dataLoader.alertError();\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.table.dataLoader.clearAlert();\n\t\t\t\t\t}, 3000);\n\t\t\t\t\t\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\tpickFile(extensions, importReader){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n\t\t\t\n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader(),\n\t\t\t\tvalid = this.validateFile(file);\n\n\t\t\t\tif(valid === true){\n\t\t\t\t\n\t\t\t\t\tthis.dispatch(\"import-importing\", input.files);\n\t\t\t\t\tthis.dispatchExternal(\"importImporting\", input.files);\n\t\t\t\t\n\t\t\t\t\tswitch(importReader || this.table.options.importReader){\n\t\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treader.onload = (e) => {\n\t\t\t\t\t\tresolve(reader.result);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\treject(valid);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatch(\"import-choose\");\n\t\t\tthis.dispatchExternal(\"importChoose\");\n\t\t\tinput.click();\n\t\t});\n\t}\n\t\n\timportData(importer, fileContents){\n\t\tvar data;\n\t\t\n\t\tthis.table.dataLoader.alertLoader();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tdata = importer.call(this.table, fileContents);\n\t\t\t\t\n\t\t\t\tif(data instanceof Promise){\n\t\t\t\t\tresolve(data);\n\t\t\t\t}else{\n\t\t\t\t\tdata ? resolve(data) : reject();\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t});\n\t}\n\t\n\tstructureData(parsedData){\n\t\tvar data = [];\n\t\t\n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else{\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\t\t\t\n\t\t\treturn data;\n\t\t}else{\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\t\n\tmutateData(data){\n\t\tvar output = [];\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"import\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\ttransformHeader(headers){\n\t\tvar output = [];\n\t\t\n\t\tif(this.table.options.importHeaderTransform){\n\t\t\theaders.forEach((item) => {\n\t\t\t\toutput.push(this.table.options.importHeaderTransform.call(this.table, item, headers));\n\t\t\t});\n\t\t}else{\n\t\t\treturn headers;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\ttransformData(row){\n\t\tvar output = [];\n\n\t\tif(this.table.options.importValueTransform){\n\t\t\trow.forEach((item) => {\n\t\t\t\toutput.push(this.table.options.importValueTransform.call(this.table, item, row));\n\t\t\t});\n\t\t}else{\n\t\t\treturn row;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = this.transformHeader(parsedData.shift());\t\n\t\t\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tvalues = this.transformData(values);\n\t\t\t\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\t\t\t\n\t\t\treturn row;\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tfirstRow = this.transformHeader(parsedData[0]),\n\t\tcolumns = this.table.getColumns();\n\t\t\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && firstRow[0]){\n\t\t\tif(columns[0].getDefinition().title === firstRow[0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n\t\t\n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData = this.transformData(rowData);\n\t\t\t\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\t\t\t\t\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tdata.push(row);\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\n\tvalidateFile(file){\n\t\tif(this.table.options.importFileValidator){\n\t\t\treturn this.table.options.importFileValidator.call(this.table, file);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tvalidateData(data){\n\t\tvar result;\n\n\t\tif(this.table.options.importDataValidator){\n\t\t\tresult = this.table.options.importDataValidator.call(this.table, data);\n\n\t\t\tif(result === true){\n\t\t\t\treturn data;\n\t\t\t}else{\n\t\t\t\treturn Promise.reject(result);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\t\n\tsetData(data){\n\t\tthis.dispatch(\"import-imported\", data);\n\t\tthis.dispatchExternal(\"importImported\", data);\n\t\t\n\t\tthis.table.dataLoader.clearAlert();\n\t\t\n\t\treturn this.table.setData(data);\n\t}\n}","export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tnavLeft:37,\n\tnavRight:39,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n};\n","export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n};\n","import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nexport default class Keybindings extends Module{\n\n\tstatic moduleName = \"keybindings\";\n\n\t//load defaults\n\tstatic bindings = defaultBindings;\n\tstatic actions = defaultActions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}","export default {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};","export default{\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultSenders from './defaults/senders.js';\nimport defaultReceivers from './defaults/receivers.js';\n\nexport default class MoveRows extends Module{\n\n\tstatic moduleName = \"moveRow\";\n\n\t//load defaults\n\tstatic senders = defaultSenders;\n\tstatic receivers = defaultReceivers;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = MoveRows.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = MoveRows.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}","export default {};","import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nexport default class Mutator extends Module{\n\n\tstatic moduleName = \"mutator\";\n\n\t//load defaults\n\tstatic mutators = defaultMutators;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\", \"import\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutatorImport\");\n\t\tthis.registerColumnOption(\"mutatorImportParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\t// console.log(\"key\", key)\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}","import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}","import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nexport default class Page extends Module{\n\n\tstatic moduleName = \"page\";\n\n\t//load defaults\n\tstatic pageCounters = defaultPageCounters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\tthis.registerTableOption(\"paginationOutOfRange\", false); //reset the current page when the last page < this.page, values: false|function|any value accepted by setPage()\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder; \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin, paginationOutOfRange;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\n\t\t\t\tif(this.page > this.max){\n\t\t\t\t\tconsole.warn( \"Remote Pagination Error - Server returned last page value lower than the current page\" );\n\n\t\t\t\t\tpaginationOutOfRange = this.options('paginationOutOfRange');\n\n\t\t\t\t\tif(paginationOutOfRange){\n\t\t\t\t\t\treturn this.setPage(typeof paginationOutOfRange === 'function' ? paginationOutOfRange.call(this, this.page, this.max) :\tpaginationOutOfRange);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}","// read persistance information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n","//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nexport default class Persistence extends Module{\n\n\tstatic moduleName = \"persistence\";\n\n\tstatic moduleInitOrder = -10;\n\n\t//load defaults\n\tstatic readers = defaultReaders;\n\tstatic writers = defaultWriters;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout, true));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols, mergeAllNew){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(mergeAllNew){\n\t\t\t\t\tkeys = Object.keys(column);\n\t\t\t\t}else if(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}","import responsiveCollapse from './formatters/responsiveCollapse.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\tresponsiveCollapse:responsiveCollapse,\r\n\t\t}\r\n\t}\r\n};","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}","import rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tformat:{\r\n\t\tformatters:{\r\n\t\t\trowSelection:rowSelection,\r\n\t\t}\r\n\t}\r\n};","import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}","export default class RangeComponent {\n\tconstructor(range) {\n\t\tthis._range = range;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function (target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t} else {\n\t\t\t\t\treturn target._range.table.componentFunctionBinder.handle(\"range\", target._range, name);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tgetElement() {\n\t\treturn this._range.element;\n\t}\n\n\tgetData() {\n\t\treturn this._range.getData();\n\t}\n\n\tgetCells() {\n\t\treturn this._range.getCells(true, true);\n\t}\n\n\tgetStructuredCells() {\n\t\treturn this._range.getStructuredCells();\n\t}\n\n\tgetRows() {\n\t\treturn this._range.getRows().map((row) => row.getComponent());\n\t}\n\n\tgetColumns() {\n\t\treturn this._range.getColumns().map((column) => column.getComponent());\n\t}\n\t\n\tgetBounds() {\n\t\treturn this._range.getBounds();\n\t}\n\n\tgetTopEdge() {\n\t\treturn this._range.top;\n\t}\n\n\tgetBottomEdge() {\n\t\treturn this._range.bottom;\n\t}\n\n\tgetLeftEdge() {\n\t\treturn this._range.left;\n\t}\n\n\tgetRightEdge() {\n\t\treturn this._range.right;\n\t}\n\n\tsetBounds(start, end){\n\t\tif(this._range.destroyedGuard(\"setBounds\")){\n\t\t\tthis._range.setBounds(start ? start._cell : start, end ? end._cell : end);\n\t\t}\n\t}\n\n\tsetStartBound(start){\n\t\tif(this._range.destroyedGuard(\"setStartBound\")){\n\t\t\tthis._range.setEndBound(start ? start._cell : start);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tsetEndBound(end){\n\t\tif(this._range.destroyedGuard(\"setEndBound\")){\n\t\t\tthis._range.setEndBound(end ? end._cell : end);\n\t\t\tthis._range.rangeManager.layoutElement();\n\t\t}\n\t}\n\n\tclearValues(){\n\t\tif(this._range.destroyedGuard(\"clearValues\")){\n\t\t\tthis._range.clearValues();\n\t\t}\n\t}\n\n\tremove(){\n\t\tif(this._range.destroyedGuard(\"remove\")){\n\t\t\tthis._range.destroy(true);\n\t\t}\n\t}\n}","import CoreFeature from '../../core/CoreFeature.js';\nimport RangeComponent from \"./RangeComponent\";\n\nexport default class Range extends CoreFeature{\n\tconstructor(table, rangeManager, start, end) {\n\t\tsuper(table);\n\t\t\n\t\tthis.rangeManager = rangeManager;\n\t\tthis.element = null;\n\t\tthis.initialized = false;\n\t\tthis.initializing = {\n\t\t\tstart:false,\n\t\t\tend:false,\n\t\t};\n\t\tthis.destroyed = false;\n\t\t\n\t\tthis.top = 0;\n\t\tthis.bottom = 0;\n\t\tthis.left = 0;\n\t\tthis.right = 0;\n\t\t\n\t\tthis.table = table;\n\t\tthis.start = {row:0, col:0};\n\t\tthis.end = {row:0, col:0};\n\n\t\tif(this.rangeManager.rowHeader){\n\t\t\tthis.left = 1;\n\t\t\tthis.right = 1;\n\t\t\tthis.start.col = 1;\n\t\t\tthis.end.col = 1;\n\t\t}\n\t\t\n\t\tthis.initElement();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.initBounds(start, end);\n\t\t});\n\t}\n\t\n\tinitElement(){\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-range\");\n\t}\n\t\n\tinitBounds(start, end){\n\t\tthis._updateMinMax();\n\t\t\n\t\tif(start){\n\t\t\tthis.setBounds(start, end || start);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Boundary Setup    ///////\n\t///////////////////////////////////\n\t\n\tsetStart(row, col) {\n\t\tif(this.start.row !== row || this.start.col !== col){\n\t\t\tthis.start.row = row;\n\t\t\tthis.start.col = col;\n\t\t\t\n\t\t\tthis.initializing.start = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetEnd(row, col) {\n\t\tif(this.end.row !== row || this.end.col !== col){\n\t\t\tthis.end.row = row;\n\t\t\tthis.end.col = col;\n\t\t\t\n\t\t\tthis.initializing.end = true;\n\t\t\tthis._updateMinMax();\n\t\t}\n\t}\n\t\n\tsetBounds(start, end, visibleRows){\n\t\tif(start){\n\t\t\tthis.setStartBound(start);\n\t\t}\n\t\t\n\t\tthis.setEndBound(end || start);\n\t\tthis.rangeManager.layoutElement(visibleRows);\n\t}\n\t\n\tsetStartBound(element){\n\t\tvar row, col;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tthis.setStart(0, element.getPosition() - 1);\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\t\n\t\t\tif (element.column === this.rangeManager.rowHeader) {\n\t\t\t\tthis.setStart(row, 1);\n\t\t\t} else {\n\t\t\t\tthis.setStart(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tsetEndBound(element){\n\t\tvar rowsCount = this._getTableRows().length,\n\t\trow, col, isRowHeader;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(this.rangeManager.columnSelection){\n\t\t\t\tif (this.rangeManager.selecting === \"column\") {\n\t\t\t\t\tthis.setEnd(rowsCount - 1, element.getPosition() - 1);\n\t\t\t\t} else if (this.rangeManager.selecting === \"cell\") {\n\t\t\t\t\tthis.setEnd(0, element.getPosition() - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\trow = element.row.position - 1;\n\t\t\tcol = element.column.getPosition() - 1;\n\t\t\tisRowHeader = element.column === this.rangeManager.rowHeader;\n\t\t\t\n\t\t\tif (this.rangeManager.selecting === \"row\") {\n\t\t\t\tthis.setEnd(row, this._getTableColumns().length - 1);\n\t\t\t} else if (this.rangeManager.selecting !== \"row\" && isRowHeader) {\n\t\t\t\tthis.setEnd(row, 0);\n\t\t\t} else if (this.rangeManager.selecting === \"column\") {\n\t\t\t\tthis.setEnd(rowsCount - 1, col);\n\t\t\t} else {\n\t\t\t\tthis.setEnd(row, col);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_updateMinMax() {\n\t\tthis.top = Math.min(this.start.row, this.end.row);\n\t\tthis.bottom = Math.max(this.start.row, this.end.row);\n\t\tthis.left = Math.min(this.start.col, this.end.col);\n\t\tthis.right = Math.max(this.start.col, this.end.col);\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeChanged\", this.getComponent());\n\t\t}else{\n\t\t\tif(this.initializing.start && this.initializing.end){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.dispatchExternal(\"rangeAdded\", this.getComponent());\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_getTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\t_getTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Rendering      ///////\n\t///////////////////////////////////\n\t\n\tlayout() {\n\t\tvar _vDomTop = this.table.rowManager.renderer.vDomTop,\n\t\t_vDomBottom = this.table.rowManager.renderer.vDomBottom,\n\t\t_vDomLeft = this.table.columnManager.renderer.leftCol,\n\t\t_vDomRight = this.table.columnManager.renderer.rightCol,\t\t\n\t\ttop, bottom, left, right, topLeftCell, bottomRightCell, topLeftCellEl, bottomRightCellEl, topLeftRowEl, bottomRightRowEl;\n\n\t\tif(this.table.options.renderHorizontal === \"virtual\" && this.rangeManager.rowHeader) {\n\t\t\t_vDomRight += 1;\n\t\t}\n\t\t\n\t\tif (_vDomTop == null) {\n\t\t\t_vDomTop = 0;\n\t\t}\n\t\t\n\t\tif (_vDomBottom == null) {\n\t\t\t_vDomBottom = Infinity;\n\t\t}\n\t\t\n\t\tif (_vDomLeft == null) {\n\t\t\t_vDomLeft = 0;\n\t\t}\n\t\t\n\t\tif (_vDomRight == null) {\n\t\t\t_vDomRight = Infinity;\n\t\t}\n\t\t\n\t\tif (this.overlaps(_vDomLeft, _vDomTop, _vDomRight, _vDomBottom)) {\n\t\t\ttop = Math.max(this.top, _vDomTop);\n\t\t\tbottom = Math.min(this.bottom, _vDomBottom);\n\t\t\tleft = Math.max(this.left, _vDomLeft);\n\t\t\tright = Math.min(this.right, _vDomRight);\n\t\t\t\n\t\t\ttopLeftCell = this.rangeManager.getCell(top, left);\n\t\t\tbottomRightCell = this.rangeManager.getCell(bottom, right);\n\t\t\ttopLeftCellEl = topLeftCell.getElement();\n\t\t\tbottomRightCellEl = bottomRightCell.getElement();\n\t\t\ttopLeftRowEl = topLeftCell.row.getElement();\n\t\t\tbottomRightRowEl = bottomRightCell.row.getElement();\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-range-active\");\n\t\t\t// this.element.classList.toggle(\"tabulator-range-active\", this === this.rangeManager.activeRange);\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.element.style.right = topLeftRowEl.offsetWidth - topLeftCellEl.offsetLeft - topLeftCellEl.offsetWidth + \"px\";\n\t\t\t\tthis.element.style.width = topLeftCellEl.offsetLeft + topLeftCellEl.offsetWidth - bottomRightCellEl.offsetLeft + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.left = topLeftRowEl.offsetLeft + topLeftCellEl.offsetLeft + \"px\";\n\t\t\t\tthis.element.style.width = bottomRightCellEl.offsetLeft + bottomRightCellEl.offsetWidth - topLeftCellEl.offsetLeft + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.element.style.top = topLeftRowEl.offsetTop + \"px\";\n\t\t\tthis.element.style.height = bottomRightRowEl.offsetTop + bottomRightRowEl.offsetHeight - topLeftRowEl.offsetTop + \"px\";\n\t\t}\n\t}\n\t\n\tatTopLeft(cell) {\n\t\treturn cell.row.position - 1 === this.top && cell.column.getPosition() - 1 === this.left;\n\t}\n\t\n\tatBottomRight(cell) {\n\t\treturn cell.row.position - 1 === this.bottom && cell.column.getPosition() - 1 === this.right;\n\t}\n\t\n\toccupies(cell) {\n\t\treturn this.occupiesRow(cell.row) && this.occupiesColumn(cell.column);\n\t}\n\t\n\toccupiesRow(row) {\n\t\treturn this.top <= row.position - 1 && row.position - 1 <= this.bottom;\n\t}\n\t\n\toccupiesColumn(col) {\n\t\treturn this.left <= col.getPosition() - 1 && col.getPosition() - 1 <= this.right;\n\t}\n\t\n\toverlaps(left, top, right, bottom) {\n\t\tif ((this.left > right || left > this.right) || (this.top > bottom || top > this.bottom)){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\t\n\tgetData() {\n\t\tvar data = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tvar rowData = row.getData(),\n\t\t\tresult = {};\n\t\t\t\n\t\t\tcolumns.forEach((column) => {\n\t\t\t\tresult[column.field] = rowData[column.field];\n\t\t\t});\n\t\t\t\n\t\t\tdata.push(result);\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetCells(structured, component) {\n\t\tvar cells = [],\n\t\trows = this.getRows(),\n\t\tcolumns = this.getColumns();\n\t\t\n\t\tif (structured) {\n\t\t\tcells = rows.map((row) => {\n\t\t\t\tvar arr = [];\n\t\t\t\t\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tarr.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn arr;\n\t\t\t});\n\t\t} else {\n\t\t\trows.forEach((row) => {\n\t\t\t\trow.getCells().forEach((cell) => {\n\t\t\t\t\tif (columns.includes(cell.column)) {\n\t\t\t\t\t\tcells.push(component ? cell.getComponent() : cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn cells;\n\t}\n\t\n\tgetStructuredCells() {\n\t\treturn this.getCells(true, true);\n\t}\n\t\n\tgetRows() {\n\t\treturn this._getTableRows().slice(this.top, this.bottom + 1);\n\t}\n\t\n\tgetColumns() {\n\t\treturn this._getTableColumns().slice(this.left, this.right + 1);\n\t}\n\t\n\tclearValues(){\n\t\tvar cells = this.getCells();\n\t\tvar clearValue = this.table.options.selectableRangeClearCellsValue;\n\t\t\n\t\tthis.table.blockRedraw();\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tcell.setValue(clearValue);\n\t\t});\n\t\t\n\t\tthis.table.restoreRedraw();\n\t\t\n\t}\n\t\n\tgetBounds(component){\n\t\tvar cells = this.getCells(false, component),\n\t\toutput = {\n\t\t\tstart:null,\n\t\t\tend:null,\n\t\t};\n\t\t\n\t\tif(cells.length){\n\t\t\toutput.start = cells[0];\n\t\t\toutput.end = cells[cells.length - 1];\n\t\t}else{\n\t\t\tconsole.warn(\"No bounds defined on range\");\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponent() {\n\t\tif (!this.component) {\n\t\t\tthis.component = new RangeComponent(this);\n\t\t}\n\t\treturn this.component;\n\t}\n\t\n\tdestroy(notify) {\n\t\tthis.destroyed = true;\n\t\t\n\t\tthis.element.remove();\n\t\t\n\t\tif(notify){\n\t\t\tthis.rangeManager.rangeRemoved(this);\n\t\t}\n\t\t\n\t\tif(this.initialized){\n\t\t\tthis.dispatchExternal(\"rangeRemoved\", this.getComponent());\n\t\t}\n\t}\n\t\n\tdestroyedGuard(func){\n\t\tif(this.destroyed){\n\t\t\tconsole.warn(\"You cannot call the \"  + func + \" function on a destroyed range\");\n\t\t}\n\t\t\n\t\treturn !this.destroyed;\n\t}\n}","export default {\r\n\trangeJumpUp:[\"ctrl + 38\", \"meta + 38\"],\r\n\trangeJumpDown:[\"ctrl + 40\", \"meta + 40\"],\r\n\trangeJumpLeft:[\"ctrl + 37\", \"meta + 37\"],\r\n\trangeJumpRight:[\"ctrl + 39\", \"meta + 39\"],\r\n\trangeExpandUp:\"shift + 38\",\r\n\trangeExpandDown:\"shift + 40\",\r\n\trangeExpandLeft:\"shift + 37\",\r\n\trangeExpandRight:\"shift + 39\",\r\n\trangeExpandJumpUp:[\"ctrl + shift + 38\", \"meta + shift + 38\"],\r\n\trangeExpandJumpDown:[\"ctrl + shift + 40\", \"meta + shift + 40\"],\r\n\trangeExpandJumpLeft:[\"ctrl + shift + 37\", \"meta + shift + 37\"],\r\n\trangeExpandJumpRight:[\"ctrl + shift + 39\", \"meta + shift + 39\"],\r\n};\r\n","import bindings from './keybindings/bindings.js';\r\nimport actions from './keybindings/actions.js';\r\nimport pasteActions from './clipboard/pasteActions.js';\r\nimport pasteParsers from './clipboard/pasteParsers.js';\r\nimport columnLookups from './export/columnLookups.js';\r\nimport rowLookups from './export/rowLookups.js';\r\n\r\nexport default {\r\n\tkeybindings:{\r\n\t\tbindings:bindings,\r\n\t\tactions:actions\r\n\t},\r\n\tclipboard:{\r\n\t\tpasteActions:pasteActions,\r\n\t\tpasteParsers:pasteParsers\r\n\t},\r\n\texport:{\r\n\t\tcolumnLookups:columnLookups,\r\n\t\trowLookups:rowLookups,\r\n\t}\r\n};","export default {\r\n\trangeJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, false);\r\n\t},\r\n\trangeJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, false);\r\n\t},\r\n\trangeJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, false);\r\n\t},\r\n\trangeJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, false);\r\n\t},\r\n\trangeExpandLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", false, true);\r\n\t},\r\n\trangeExpandRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", false, true);\r\n\t},\r\n\trangeExpandUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", false, true);\r\n\t},\r\n\trangeExpandDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", false, true);\r\n\t},\r\n\trangeExpandJumpLeft: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"left\", true, true);\r\n\t},\r\n\trangeExpandJumpRight: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"right\", true, true);\r\n\t},\r\n\trangeExpandJumpUp: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"up\", true, true);\r\n\t},\r\n\trangeExpandJumpDown: function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-range\", e, \"down\", true, true);\r\n\t},\r\n};\r\n","export default {\r\n\trange:function(data){\r\n\t\tvar rows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, startRow, rowWidth, dataLength;\r\n\r\n\t\tdataLength = data.length;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\t\t\t\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\trows = this.table.rowManager.activeRows.slice();\r\n\t\t\t\tstartRow = rows.indexOf(startCell.row);\r\n\r\n\t\t\t\tif(singleCell){\r\n\t\t\t\t\trowWidth = data.length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowWidth = (rows.indexOf(bounds.end.row) - startRow) + 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(startRow >-1){\r\n\t\t\t\t\tthis.table.blockRedraw();\r\n\t\t\t\t\t\r\n\t\t\t\t\trows = rows.slice(startRow, startRow + rowWidth);\r\n\t\t\t\t\t\r\n\t\t\t\t\trows.forEach((row, i) => {\r\n\t\t\t\t\t\trow.updateData(data[i % dataLength]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.table.restoreRedraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n};","export default {\r\n\trange:function(clipboard){\r\n\t\tvar data = [],\r\n\t\trows = [],\r\n\t\trange = this.table.modules.selectRange.activeRange,\r\n\t\tsingleCell = false,\r\n\t\tbounds, startCell, colWidth, columnMap, startCol;\r\n\t\t\r\n\t\tif(range){\r\n\t\t\tbounds = range.getBounds();\r\n\t\t\tstartCell = bounds.start;\r\n\r\n\t\t\tif(bounds.start === bounds.end){\r\n\t\t\t\tsingleCell = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(startCell){\r\n\t\t\t\t//get data from clipboard into array of columns and rows.\r\n\t\t\t\tclipboard = clipboard.split(\"\\n\");\r\n\t\t\t\t\r\n\t\t\t\tclipboard.forEach(function(row){\r\n\t\t\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(data.length){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.getVisibleColumnsByIndex();\r\n\t\t\t\t\tstartCol = columnMap.indexOf(startCell.column);\r\n\r\n\t\t\t\t\tif(startCol > -1){\r\n\t\t\t\t\t\tif(singleCell){\r\n\t\t\t\t\t\t\tcolWidth = data[0].length;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcolWidth = (columnMap.indexOf(bounds.end.column) - startCol) + 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tcolumnMap = columnMap.slice(startCol, startCol + colWidth);\r\n\r\n\t\t\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\t\t\tvar row = {};\r\n\t\t\t\t\t\t\tvar itemLength = item.length;\r\n\r\n\t\t\t\t\t\t\tcolumnMap.forEach(function(col, i){\r\n\t\t\t\t\t\t\t\trow[col.field] = item[i % itemLength];\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trows.push(row);\t\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn rows;\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n};","export default {\r\n\trange:function(){\r\n\t\tvar columns = this.modules.selectRange.selectedColumns();\r\n\r\n\t\tif(this.columnManager.rowHeader){\r\n\t\t\tcolumns.unshift(this.columnManager.rowHeader);\r\n\t\t}\r\n\r\n\t\treturn columns;\r\n\t},\r\n};","export default {\r\n\trange:function(){\r\n\t\treturn this.modules.selectRange.selectedRows();\r\n\t},\r\n};","//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = this.table.dependencyRegistry.lookup([\"luxon\", \"DateTime\"], \"DateTime\");\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else{\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else{\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}","import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};","//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n}","//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}","import Helpers from '../../../../core/tools/Helpers.js';\n\n//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0,\n\ttable = this.table,\n\tvalueMap;\n\n\tif(params.valueMap){\n\t\tif(typeof params.valueMap === \"string\"){\n\t\t\tvalueMap = function(value){\n\t\t\t\treturn value.map((item) => {\n\t\t\t\t\treturn Helpers.retrieveNestedData(table.options.nestedFieldSeparator, params.valueMap, item);\n\t\t\t\t});\n\t\t\t};\n\t\t}else{\n\t\t\tvalueMap = params.valueMap;\n\t\t}\n\t}\n\n\tfunction calc(value){\n\t\tvar result;\n\t\t\n\t\tif(valueMap){\n\t\t\tvalue = valueMap(value);\n\t\t}\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\t\t\t\tresult = value.join(\"\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else{\n\t\tif(type === \"string\"){\n\t\t\treturn String(calc(a)).toLowerCase().localeCompare(String(calc(b)).toLowerCase());\n\t\t}else{\n\t\t\treturn calc(b) - calc(a);\n\t\t}\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}","//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}","import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nexport default class Sort extends Module{\n\n\tstatic moduleName = \"sort\";\n\n\t//load defaults\n\tstatic sorters = defaultSorters;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\t\t\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\t\t\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\t\t\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\t\t\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\t\t\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\t\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\t\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\t\t\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\t\t\n\t\tparams.sort = sorters;\n\t\t\n\t\treturn params;\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\t\t\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\t\t\n\t\tif(column.definition.headerSort !== false){\n\t\t\t\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\t\t\t\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\t\t\t\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\t\t\t\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\t\t\t\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t\n\t\t\tif(this.table.options.headerSortClickElement === \"icon\"){\n\t\t\t\tarrowEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\t\t\t\t\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\t\t\t\t\t\t\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\t\t\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\t\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\t\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\t\t\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn sorters;\n\t}\n\t\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\t\t\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\t\t\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\t\t\t\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\tself.sortList = newSortList;\n\t\t\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\t\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\t\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\t\t\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\t\t\t\n\t\t\tif(field){\n\t\t\t\t\n\t\t\t\tvalue = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Sort.sorters[sorter];\n\t}\n\t\n\t//work through sort list sorting data\n\tsort(data, sortOnly){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\t\t\n\t\tif(!sortOnly) {\n\t\t\tself.clearColumnHeaders();\n\t\t}\n\t\t\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\t\t\t\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\t\t\t\t\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\t\t\t\t\t\n\t\t\t\t\tif(sortObj){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\t\t\t\t\t\t\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!sortOnly) {\n\t\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\t\t\t\n\t\t}else if(!sortOnly) {\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\t\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\t\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\t\t\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\t\t\t\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else{\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\t\t\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\t\t\t\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\t\t\t\t\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\t\t\t\t\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn result;\n\t\t});\n\t}\n\t\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\t\t\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\t\t\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\t\t\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\t\t\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\t\t\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}","export default class GridCalculator{\r\n\tconstructor(columns, rows){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.rowCount = rows;\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t}\r\n\r\n\tgenColumns(data){\r\n\t\tvar colCount = Math.max(this.columnCount, Math.max(...data.map(item => item.length)));\r\n\r\n\t\tthis.columnString = [];\r\n\t\tthis.columns = [];\r\n\r\n\t\tfor(let i = 1; i <= colCount; i++){\r\n\t\t\tthis.incrementChar(this.columnString.length - 1);\r\n\t\t\tthis.columns.push(this.columnString.join(\"\"));\r\n\t\t}\r\n\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tgenRows(data){\r\n\t\tvar rowCount = Math.max(this.rowCount, data.length);\r\n\r\n\t\tthis.rows = [];\r\n\r\n\t\tfor(let i = 1; i <= rowCount; i++){\r\n\t\t\tthis.rows.push(i);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.rows;\r\n\t}\r\n\r\n\tincrementChar(i){\r\n\t\tlet char = this.columnString[i];\r\n\r\n\t\tif(char){\r\n\t\t\tif(char !== \"Z\"){\r\n\t\t\t\tthis.columnString[i] = String.fromCharCode(this.columnString[i].charCodeAt(0) + 1);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columnString[i] = \"A\";\r\n\t\t\t\t\r\n\t\t\t\tif(i){\r\n\t\t\t\t\tthis.incrementChar(i-1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.columnString.push(\"A\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.columnString.push(\"A\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetRowCount(count){\r\n\t\tthis.rowCount = count;\r\n\t}\r\n\r\n\tsetColumnCount(count){\r\n\t\tthis.columnCount = count;\r\n\t}\r\n}","export default class SheetComponent {\r\n\tconstructor(sheet) {\r\n\t\tthis._sheet = sheet;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function (target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn target._sheet.table.componentFunctionBinder.handle(\"sheet\", target._sheet, name);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tgetTitle(){\r\n\t\treturn this._sheet.title;\r\n\t}\r\n\r\n\tgetKey(){\r\n\t\treturn this._sheet.key;\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._sheet.getDefinition();\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this._sheet.getData();\r\n\t}\r\n\r\n\tsetData(data) {\r\n\t\treturn this._sheet.setData(data);\r\n\t}\r\n\r\n\tclear(){\r\n\t\treturn this._sheet.clear();\r\n\t}\r\n\r\n\tremove(){\r\n\t\treturn this._sheet.remove();\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\treturn this._sheet.active();\r\n\t}\r\n\r\n\tsetTitle(title){\r\n\t\treturn this._sheet.setTitle(title);\r\n\t}\r\n\r\n\tsetRows(rows){\r\n\t\treturn this._sheet.setRows(rows);\r\n\t}\r\n\r\n\tsetColumns(columns){\r\n\t\treturn this._sheet.setColumns(columns);\r\n\t}\r\n}","import CoreFeature from '../../core/CoreFeature.js';\r\nimport GridCalculator from \"./GridCalculator\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Sheet extends CoreFeature{\r\n\tconstructor(spreadsheetManager, definition) {\r\n\t\tsuper(spreadsheetManager.table);\r\n\t\t\r\n\t\tthis.spreadsheetManager = spreadsheetManager;\r\n\t\tthis.definition = definition;\r\n\t\t\r\n\t\tthis.title = this.definition.title || \"\";\r\n\t\tthis.key = this.definition.key || this.definition.title;\r\n\t\tthis.rowCount = this.definition.rows;\r\n\t\tthis.columnCount = this.definition.columns;\r\n\t\tthis.data = this.definition.data || [];\r\n\t\tthis.element = null;\r\n\t\tthis.isActive = false;\r\n\t\t\r\n\t\tthis.grid = new GridCalculator(this.columnCount, this.rowCount);\r\n\t\t\r\n\t\tthis.defaultColumnDefinition = {width:100, headerHozAlign:\"center\", headerSort:false};\r\n\t\tthis.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options(\"spreadsheetColumnDefinition\"));\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\tthis.rowDefs = [];\r\n\t\tthis.columnFields = [];\r\n\t\tthis.columns = [];\r\n\t\tthis.rows = [];\r\n\t\t\r\n\t\tthis.scrollTop = null;\r\n\t\tthis.scrollLeft = null;\r\n\t\t\r\n\t\tthis.initialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetAdded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Initialization //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializeElement();\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\treinitialize(){\r\n\t\tthis.initializeColumns();\r\n\t\tthis.initializeRows();\r\n\t}\r\n\t\r\n\tinitializeElement(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab\");\r\n\t\tthis.element.innerText = this.title;\r\n\t\t\r\n\t\tthis.element.addEventListener(\"click\", () => {\r\n\t\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeColumns(){\r\n\t\tthis.grid.setColumnCount(this.columnCount);\r\n\t\tthis.columnFields = this.grid.genColumns(this.data);\r\n\t\t\r\n\t\tthis.columnDefs = [];\r\n\t\t\r\n\t\tthis.columnFields.forEach((ref) => {\r\n\t\t\tvar def = Object.assign({}, this.columnDefinition);\r\n\t\t\tdef.field = ref;\r\n\t\t\tdef.title = ref;\r\n\t\t\t\r\n\t\t\tthis.columnDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tinitializeRows(){\r\n\t\tvar refs;\r\n\t\t\r\n\t\tthis.grid.setRowCount(this.rowCount);\r\n\t\t\r\n\t\trefs = this.grid.genRows(this.data);\r\n\t\t\r\n\t\tthis.rowDefs = [];\r\n\t\t\r\n\t\trefs.forEach((ref, i) => {\r\n\t\t\tvar def = {\"_id\":ref};\r\n\t\t\tvar data = this.data[i];\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((val, j) => {\r\n\t\t\t\t\tvar field = this.columnFields[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\tdef[field] = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.rowDefs.push(def);\r\n\t\t});\r\n\t}\r\n\t\r\n\tunload(){\r\n\t\tthis.isActive = false;\r\n\t\tthis.scrollTop = this.table.rowManager.scrollTop;\r\n\t\tthis.scrollLeft = this.table.rowManager.scrollLeft;\r\n\t\tthis.data = this.getData(true);\r\n\t\tthis.element.classList.remove(\"tabulator-spreadsheet-tab-active\");\r\n\t}\r\n\t\r\n\tload(){\r\n\t\t\r\n\t\tvar wasInactive = !this.isActive;\r\n\t\t\r\n\t\tthis.isActive = true;\r\n\t\tthis.table.blockRedraw();\r\n\t\tthis.table.setData([]);\r\n\t\tthis.table.setColumns(this.columnDefs);\r\n\t\tthis.table.setData(this.rowDefs);\r\n\t\tthis.table.restoreRedraw();\r\n\t\t\r\n\t\tif(wasInactive && this.scrollTop !== null){\r\n\t\t\tthis.table.rowManager.element.scrollLeft = this.scrollLeft;\r\n\t\t\tthis.table.rowManager.element.scrollTop = this.scrollTop;\r\n\t\t}\r\n\t\t\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tab-active\");\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetLoaded\", this.getComponent());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Helper Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tgetComponent(){\r\n\t\treturn new SheetComponent(this);\r\n\t}\r\n\t\r\n\tgetDefinition(){\r\n\t\treturn {\r\n\t\t\ttitle:this.title,\r\n\t\t\tkey:this.key,\r\n\t\t\trows:this.rowCount,\r\n\t\t\tcolumns:this.columnCount,\r\n\t\t\tdata:this.getData(),\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetData(full){\r\n\t\tvar output = [], \r\n\t\trowWidths,\r\n\t\toutputWidth, outputHeight;\r\n\t\t\r\n\t\t//map data to array format\r\n\t\tthis.rowDefs.forEach((rowData) => {\r\n\t\t\tvar row = [];\r\n\t\t\t\r\n\t\t\tthis.columnFields.forEach((field) => {\r\n\t\t\t\trow.push(rowData[field]);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\toutput.push(row);\r\n\t\t});\r\n\t\t\r\n\t\t//trim output\r\n\t\tif(!full && !this.options(\"spreadsheetOutputFull\")){\r\n\t\t\t\r\n\t\t\t//calculate used area of data\r\n\t\t\trowWidths = output.map(row => row.findLastIndex(val => typeof val !== 'undefined') + 1);\r\n\t\t\toutputWidth = Math.max(...rowWidths);\r\n\t\t\toutputHeight = rowWidths.findLastIndex(width => width > 0) + 1;\r\n\t\t\t\r\n\t\t\toutput = output.slice(0, outputHeight);\r\n\t\t\toutput = output.map(row => row.slice(0, outputWidth));\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tsetData(data){\r\n\t\tthis.data = data;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\t\r\n\tsetTitle(title){\r\n\t\tthis.title = title;\r\n\t\tthis.element.innerText = title;\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t}\r\n\t\r\n\tsetRows(rows){\r\n\t\tthis.rowCount = rows;\r\n\t\tthis.initializeRows();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetColumns(columns){\r\n\t\tthis.columnCount = columns;\r\n\t\tthis.reinitialize();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetUpdated\", this.getComponent());\r\n\t\t\r\n\t\tif(this.isActive){\r\n\t\t\tthis.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tthis.spreadsheetManager.removeSheet(this);\r\n\t}\r\n\t\r\n\tdestroy(){\r\n\t\tif(this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatchExternal(\"sheetRemoved\", this.getComponent());\r\n\t}\r\n\t\r\n\tactive(){\r\n\t\tthis.spreadsheetManager.loadSheet(this);\r\n\t}\r\n}","export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//must be alphanumeric\n\talphanumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvar reg = new RegExp(/^[a-z0-9]+$/i);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nexport default class Validate extends Module{\n\n\tstatic moduleName = \"validate\";\n\n\t//load defaults\n\tstatic validators = defaultValidators;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else{\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nimport RowComponent from '../../core/row/RowComponent.js';\n\nexport default class DataTree extends Module{\n\n\tstatic moduleName = \"dataTree\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row, false, true);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren, sortOnly){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children, sortOnly);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child, false, true);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\tthis.getTreeChildren(childRow, component, recurse).forEach(child => {\n\t\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class FrozenColumns extends Module{\n\n\tstatic moduleName = \"frozenColumns\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-deleted\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-show\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\n\t\tthis.layout();\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\t\tparentEl.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else{\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\telement.classList.toggle(\"tabulator-frozen-left\",  column.modules.frozen.edge && column.modules.frozen.position === \"left\");\n\t\t\telement.classList.toggle(\"tabulator-frozen-right\", column.modules.frozen.edge && column.modules.frozen.position === \"right\");\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\n\tgetFrozenColumns(){\n\t\treturn this.leftColumns.concat(this.rightColumns);\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class FrozenRows extends Module{\n\n\tstatic moduleName = \"frozenRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tvar\tfragment = document.createDocumentFragment();\n\t\t\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\t\t\n\t\tfragment.appendChild(document.createElement(\"br\"));\n\t\tfragment.appendChild(this.topElement);\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(fragment, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Group from './Group.js';\n\nexport default class GroupRows extends Module{\n\n\tstatic moduleName = \"groupRows\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else{\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else{\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else{\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}","import Module from '../../core/Module.js';\n\nexport default class HtmlTableImport extends Module{\n\n\tstatic moduleName = \"htmlTableImport\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replaceAll(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\n\nexport default class Interaction extends Module{\n\n\tstatic moduleName = \"interaction\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else{\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Menu extends Module{\n\n\tstatic moduleName = \"menu\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\t// this.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// if(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t// \tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t// }\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatch(\"menu-closed\", menu, popup);\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatch(\"menu-opened\", menu, popup);\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nexport default class MoveColumns extends Module{\n\n\tstatic moduleName = \"moveColumn\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"alert-show\", this.abortMove.bind(this));\n\t\t}\n\t}\n\n\tabortMove(){\n\t\tclearTimeout(this.checkTimeout);\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\n\t\tif(!column.modules.frozen && !column.isGroup && !column.isRowHeader){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\t//Prevent moving columns when range selection is active\n\t\tif(this.table.modules.selectRange && this.table.modules.selectRange.columnSelection){\n\t\t\tif(this.table.modules.selectRange.mousedown && this.table.modules.selectRange.selecting === \"column\"){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\n\t\tthis.dispatch(\"column-moving\", e, this.moving);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Popup extends Module{\n\t\n\tstatic moduleName = \"popup\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else{\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class Print extends Module{\n\n\tstatic moduleName = \"print\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ReactiveData extends Module{\n\n\tstatic moduleName = \"reactiveData\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeColumns extends Module{\n\n\tstatic moduleName = \"resizeColumns\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t\tthis.registerTableOption(\"resizableColumnGuide\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else{\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t\tcell.modules.resize.handleEl.style[\"z-index\"] = 11;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.dispatchExternal(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\tresize(e, column){\n\t\tvar x = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\tstartDiff = x - this.startX,\n\t\tmoveDiff = x - this.latestX,\n\t\tblockedBefore, blockedAfter;\n\n\t\tthis.latestX = x;\n\n\t\tif(this.table.rtl){\n\t\t\tstartDiff = -startDiff;\n\t\t\tmoveDiff = -moveDiff;\n\t\t}\n\n\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tcolumn.setWidth(this.startWidth + startDiff);\n\n\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\tif(moveDiff < 0){\n\t\t\tthis.nextColumn = this.initialNextColumn;\n\t\t}\n\n\t\tif(this.table.options.resizableColumnFit && this.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\tlet colWidth = this.nextColumn.getWidth();\n\n\t\t\tif(moveDiff > 0){\n\t\t\t\tif(colWidth <= this.nextColumn.minWidth){\n\t\t\t\t\tthis.nextColumn = this.nextColumn.nextColumn();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.nextColumn){\n\t\t\t\tthis.nextColumn.setWidth(this.nextColumn.getWidth() - moveDiff);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\tif(!this.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\tcolumn.checkCellHeights();\n\t\t}\n\t}\n\n\tcalcGuidePosition(e, column, handle) {\n\t\tvar mouseX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX,\n\t\thandleX = handle.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x,\n\t\ttableX = this.table.element.getBoundingClientRect().x,\n\t\tcolumnX = column.element.getBoundingClientRect().left - tableX,\n\t\tmouseDiff = mouseX - this.startX,\n\t\tpos = Math.max(handleX + mouseDiff, columnX + column.minWidth);\n\n\t\tif(column.maxWidth){\n\t\t\tpos = Math.min(pos, columnX + column.maxWidth);\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tthis.dispatchExternal(\"columnResizing\", column.getComponent());\n\n\t\tif(self.table.options.resizableColumnGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-col-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tguideEl.style.left = self.calcGuidePosition(e, column, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, column);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableColumnGuide){\n\t\t\t\tself.resize(e, column);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.dispatchExternal(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.clientX === \"undefined\" ? e.touches[0].clientX : e.clientX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeRows extends Module{\n\n\tstatic moduleName = \"resizeRows\";\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t\tthis.registerTableOption(\"resizableRowGuide\", false);\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\tresize(e, row) {\n\t\trow.setHeight(this.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - this.startY));\n\t}\n\n\tcalcGuidePosition(e, row, handle) {\n\t\tvar mouseY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY,\n\t\thandleY = handle.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y,\n\t\ttableY = this.table.element.getBoundingClientRect().y,\n\t\trowY = row.element.getBoundingClientRect().top - tableY,\n\t\tmouseDiff = mouseY - this.startY;\n\n\t\treturn Math.max(handleY + mouseDiff, rowY);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this,\n\t\tguideEl;\n\n\t\tself.dispatchExternal(\"rowResizing\", row.getComponent());\n\n\t\tif(self.table.options.resizableRowGuide){\n\t\t\tguideEl = document.createElement(\"span\");\n\t\t\tguideEl.classList.add('tabulator-row-resize-guide');\n\t\t\tself.table.element.appendChild(guideEl);\n\t\t\tsetTimeout(() => {\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t});\n\t\t}\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tguideEl.style.top = self.calcGuidePosition(e, row, handle) + \"px\";\n\t\t\t}else{\n\t\t\t\tself.resize(e, row);\n\t\t\t}\n\t\t}\n\n\t\tfunction mouseUp(e){\n\t\t\tif(self.table.options.resizableRowGuide){\n\t\t\t\tself.resize(e, row);\n\t\t\t\tguideEl.remove();\n\t\t\t}\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}","import Module from '../../core/Module.js';\n\nexport default class ResizeTable extends Module{\n\n\tstatic moduleName = \"resizeTable\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else{\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class ResponsiveLayout extends Module{\n\n\tstatic moduleName = \"responsiveLayout\";\n\tstatic moduleExtensions = extensions;\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\tif(this.collapseFormatter){\n\t\t\tthis.collapseFormatter = this.collapseFormatter.bind(this.table);\n\t\t}\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t\trow.calcHeight(true);\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach((item) => {\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\t\n\t\t\tthis.modules.localize.bind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t});\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}","import Module from \"../../core/Module.js\";\nimport Range from \"./Range.js\";\nimport extensions from './extensions/extensions.js';\n\n\nexport default class SelectRange extends Module {\n\t\n\tstatic moduleName = \"selectRange\";\n\tstatic moduleInitOrder = 1;\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table) {\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = \"cell\";\n\t\tthis.mousedown = false;\n\t\tthis.ranges = [];\n\t\tthis.overlay = null;\n\t\tthis.rowHeader = null;\n\t\tthis.layoutChangeTimeout = null;\n\t\tthis.columnSelection = false;\n\t\tthis.rowSelection = false;\n\t\tthis.maxRanges = 0;\n\t\tthis.activeRange = false;\n\t\tthis.blockKeydown = false;\n\t\t\n\t\tthis.keyDownEvent = this._handleKeyDown.bind(this);\n\t\tthis.mouseUpEvent = this._handleMouseUp.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"selectableRange\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeColumns\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeRows\", false); //enable selectable range\n\t\tthis.registerTableOption(\"selectableRangeClearCells\", false); //allow clearing of active range\n\t\tthis.registerTableOption(\"selectableRangeClearCellsValue\", undefined); //value for cleared active range\n\t\tthis.registerTableOption(\"selectableRangeAutoFocus\", true); //focus on a cell after resetRanges\n\t\t\n\t\tthis.registerTableFunction(\"getRangesData\", this.getRangesData.bind(this));\n\t\tthis.registerTableFunction(\"getRanges\", this.getRanges.bind(this));\n\t\tthis.registerTableFunction(\"addRange\", this.addRangeFromComponent.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"getRanges\", this.cellGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getRanges\", this.rowGetRanges.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getRanges\", this.colGetRanges.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////    Initialization   ///////\n\t///////////////////////////////////\n\t\n\tinitialize() {\n\t\tif (this.options(\"selectableRange\")) {\t\n\t\t\tif(!this.options(\"selectableRows\")){\n\t\t\t\tthis.maxRanges = this.options(\"selectableRange\");\n\t\t\t\t\n\t\t\t\tthis.initializeTable();\n\t\t\t\tthis.initializeWatchers();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"SelectRange functionality cannot be used in conjunction with row selection\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').findIndex((column) => column.frozen) > 0) {\n\t\t\t\tconsole.warn(\"Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\n\t\t\tif(this.options('columns').filter((column) => column.frozen) > 1) {\n\t\t\t\tconsole.warn(\"Having multiple frozen columns with selectRange option may result in unpredictable behavior.\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tinitializeTable() {\t\t\n\t\tthis.overlay = document.createElement(\"div\");\n\t\tthis.overlay.classList.add(\"tabulator-range-overlay\");\n\t\t\n\t\tthis.rangeContainer = document.createElement(\"div\");\n\t\tthis.rangeContainer.classList.add(\"tabulator-range-container\");\n\t\t\n\t\tthis.activeRangeCellElement = document.createElement(\"div\");\n\t\tthis.activeRangeCellElement.classList.add(\"tabulator-range-cell-active\");\n\t\t\n\t\tthis.overlay.appendChild(this.rangeContainer);\n\t\tthis.overlay.appendChild(this.activeRangeCellElement);\n\t\t\n\t\tthis.table.rowManager.element.addEventListener(\"keydown\", this.keyDownEvent);\n\t\t\n\t\tthis.resetRanges();\n\t\t\n\t\tthis.table.rowManager.element.appendChild(this.overlay);\n\t\tthis.table.columnManager.element.setAttribute(\"tabindex\", 0);\n\t\tthis.table.element.classList.add(\"tabulator-ranges\");\n\t}\n\t\n\tinitializeWatchers() {\n\t\tthis.columnSelection = this.options(\"selectableRangeColumns\");\n\t\tthis.rowSelection = this.options(\"selectableRangeRows\");\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-mousedown\", this.handleColumnMouseDown.bind(this));\n\t\tthis.subscribe(\"column-mousemove\", this.handleColumnMouseMove.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.handleColumnResized.bind(this));\n\t\tthis.subscribe(\"column-moving\", this.handleColumnMoving.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.handleColumnMoved.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"columns-loaded\", this.updateHeaderColumn.bind(this));\n\t\t\n\t\tthis.subscribe(\"cell-height\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.renderCell.bind(this));\n\t\tthis.subscribe(\"cell-mousedown\", this.handleCellMouseDown.bind(this));\n\t\tthis.subscribe(\"cell-mousemove\", this.handleCellMouseMove.bind(this));\n\t\tthis.subscribe(\"cell-click\", this.handleCellClick.bind(this));\n\t\tthis.subscribe(\"cell-editing\", this.handleEditingCell.bind(this));\n\t\t\n\t\tthis.subscribe(\"page-changed\", this.redraw.bind(this));\n\t\t\n\t\tthis.subscribe(\"scroll-vertical\", this.layoutChange.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.layoutChange.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-destroy\", this.tableDestroyed.bind(this));\n\t\tthis.subscribe(\"data-processed\", this.resetRanges.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-layout\", this.layoutElement.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.redraw.bind(this));\n\t\tthis.subscribe(\"table-destroy\", this.tableDestroyed.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-editor-clear\", this.finishEditingCell.bind(this));\n\t\tthis.subscribe(\"edit-blur\", this.restoreFocus.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.keyNavigate.bind(this, \"left\"));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.keyNavigate.bind(this, \"right\"));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.keyNavigate.bind(this, \"up\"));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.keyNavigate.bind(this, \"down\"));\n\t\tthis.subscribe(\"keybinding-nav-range\", this.keyNavigateRange.bind(this));\n\t}\n\t\n\t\n\tinitializeColumn(column) {\n\t\tif(this.columnSelection && column.definition.headerSort && this.options(\"headerSortClickElement\") !== \"icon\"){\n\t\t\tconsole.warn(\"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\");\n\t\t}\n\t\t\n\t\tif (column.modules.edit) {\n\t\t\t// Block editor from taking action so we can trigger edit by\n\t\t\t// double clicking.\n\t\t\t// column.modules.edit.blocked = true;\n\t\t}\n\t}\n\t\n\tupdateHeaderColumn(){\n\t\tvar frozenCols;\n\n\t\tif(this.rowSelection){\n\t\t\tthis.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0];\n\t\t\t\n\t\t\tif(this.rowHeader){\n\t\t\t\tthis.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + \" tabulator-range-row-header\";\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.headerSort){\n\t\t\t\t\tconsole.warn(\"Using column headerSort with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.rowHeader.definition.editor){\n\t\t\t\t\tconsole.warn(\"Using column editor with selectableRangeRows option may result in unpredictable behavior\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//warn if invalid frozen column configuration detected\n\t\tif(this.table.modules.frozenColumns && this.table.modules.frozenColumns.active){\n\t\t\tfrozenCols = this.table.modules.frozenColumns.getFrozenColumns();\n\n\t\t\tif(frozenCols.length > 1 || (frozenCols.length === 1 && frozenCols[0] !== this.rowHeader)){\n\t\t\t\tconsole.warn(\"Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////   Table Functions   ///////\n\t///////////////////////////////////\n\t\n\tgetRanges(){\n\t\treturn this.ranges.map((range) => range.getComponent());\n\t}\n\t\n\tgetRangesData() {\n\t\treturn this.ranges.map((range) => range.getData());\n\t}\n\t\n\taddRangeFromComponent(start, end){\n\t\tstart = start ? start._cell : null;\n\t\tend = end ? end._cell : null;\n\t\t\n\t\treturn this.addRange(start, end);\n\t}\n\t\n\t///////////////////////////////////\n\t/////// Component Functions ///////\n\t///////////////////////////////////\n\t\n\tcellGetRanges(cell){\n\t\tvar ranges = [];\n\t\t\n\t\tif (cell.column === this.rowHeader) {\n\t\t\tranges = this.ranges.filter((range) => range.occupiesRow(cell.row));\n\t\t} else {\n\t\t\tranges = this.ranges.filter((range) => range.occupies(cell));\n\t\t}\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\trowGetRanges(row){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesRow(row));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\tcolGetRanges(col){\n\t\tvar ranges = this.ranges.filter((range) => range.occupiesColumn(col));\n\t\t\n\t\treturn ranges.map((range) => range.getComponent());\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Event Handlers /////////\n\t///////////////////////////////////\n\t\n\t_handleMouseUp(e){\n\t\tthis.mousedown = false;\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t}\n\t\n\t_handleKeyDown(e) {\n\t\tif (!this.blockKeydown && (!this.table.modules.edit || (this.table.modules.edit && !this.table.modules.edit.currentCell))) {\n\t\t\tif (e.key === \"Enter\") {\n\t\t\t\t// is editing a cell?\n\t\t\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.modules.edit.editCell(this.getActiveCell());\n\t\t\t\t\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tif ((e.key === \"Backspace\" || e.key === \"Delete\") && this.options(\"selectableRangeClearCells\")) {\n\t\t\t\tif(this.activeRange){\n\t\t\t\t\tthis.activeRange.clearValues();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeFocus(cell){\n\t\tvar range;\n\n\t\tthis.restoreFocus();\n\t\t\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\t\n\trestoreFocus(element){\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\treturn true;\n\t}\n\t\n\t///////////////////////////////////\n\t////// Column Functionality ///////\n\t///////////////////////////////////\n\t\n\thandleColumnResized(column) {\n\t\tvar selected;\n\t\t\n\t\tif (this.selecting !== \"column\" && this.selecting !== \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tselected = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (!selected) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.ranges.forEach((range) => {\n\t\t\tvar selectedColumns = range.getColumns(true);\n\t\t\t\n\t\t\tselectedColumns.forEach((selectedColumn) => {\n\t\t\t\tif (selectedColumn !== column) {\n\t\t\t\t\tselectedColumn.setWidth(column.width);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t\n\thandleColumnMoving(_event, column) {\n\t\tthis.resetRanges().setBounds(column);\n\t\tthis.overlay.style.visibility = \"hidden\";\n\t}\n\n\thandleColumnMoved(from, _to, _after) {\n\t\tthis.activeRange.setBounds(from);\n\t\tthis.layoutElement();\n\t}\n\n\thandleColumnMouseDown(event, column) {\n\t\tif (event.button === 2 && (this.selecting === \"column\" || this.selecting === \"all\") && this.activeRange.occupiesColumn(column)) {\n\t\t\treturn;\n\t\t}\n\n\t\t//If columns are movable, allow dragging columns only if they are not\n\t\t//selected. Dragging selected columns should move the columns instead.\n\t\tif(this.table.options.movableColumns && this.selecting === \"column\" && this.activeRange.occupiesColumn(column)){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, column);\n\t}\n\t\n\thandleColumnMouseMove(e, column) {\n\t\tif (column === this.rowHeader || !this.mousedown || this.selecting === 'all') {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, column, true);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Cell Functionality ///////\n\t///////////////////////////////////\n\t\n\trenderCell(cell) {\n\t\tvar el = cell.getElement(),\n\t\trangeIdx = this.ranges.findIndex((range) => range.occupies(cell));\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", rangeIdx !== -1);\n\t\tel.classList.toggle(\"tabulator-range-only-cell-selected\", this.ranges.length === 1 && this.ranges[0].atTopLeft(cell) &&\tthis.ranges[0].atBottomRight(cell));\n\t\t\n\t\tel.dataset.range = rangeIdx;\n\t}\n\t\n\thandleCellMouseDown(event, cell) {\n\t\tif (event.button === 2 && (this.activeRange.occupies(cell) || ((this.selecting === \"row\" || this.selecting === \"all\") && this.activeRange.occupiesRow(cell.row)))) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.mousedown = true;\n\t\t\n\t\tdocument.addEventListener(\"mouseup\", this.mouseUpEvent);\n\t\t\n\t\tthis.newSelection(event, cell);\n\t}\n\t\n\thandleCellMouseMove(e, cell) {\n\t\tif (!this.mousedown || this.selecting === \"all\") {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.activeRange.setBounds(false, cell, true);\n\t}\n\t\n\thandleCellClick(e, cell){\n\t\tthis.initializeFocus(cell);\n\t}\n\t\n\thandleEditingCell(cell) {\n\t\tif(this.activeRange){\n\t\t\tthis.activeRange.setBounds(cell);\n\t\t}\n\t}\n\t\n\tfinishEditingCell() {\n\t\tthis.blockKeydown = true;\n\t\tthis.table.rowManager.element.focus();\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.blockKeydown = false;\n\t\t}, 10);\n\t}\n\t\n\t///////////////////////////////////\n\t///////     Navigation      ///////\n\t///////////////////////////////////\n\t\n\tkeyNavigate(dir, e){\n\t\tif(this.navigate(false, false, dir)){\n\t\t\t// e.preventDefault();\n\t\t}\n\t\te.preventDefault();\n\t}\n\t\n\tkeyNavigateRange(e, dir, jump, expand){\n\t\tif(this.navigate(jump, expand, dir)){\n\t\t\t// e.preventDefault();\n\t\t}\n\t\te.preventDefault();\n\t}\n\t\n\tnavigate(jump, expand, dir) {\n\t\tvar moved = false,\n\t\trange, rangeEdge, prevRect, nextRow, nextCol, row, column,\n\t\trowRect, rowManagerRect, columnRect, columnManagerRect;\n\t\t\n\t\t// Don't navigate while editing\n\t\tif (this.table.modules.edit && this.table.modules.edit.currentCell) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// If there are more than 1 range, use the active range and destroy the others\n\t\tif (this.ranges.length > 1) {\n\t\t\tthis.ranges = this.ranges.filter((range) => {\n\t\t\t\tif (range === this.activeRange) {\n\t\t\t\t\trange.setEnd(range.start.row, range.start.col);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\trange.destroy();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\t\n\t\trange = this.activeRange;\n\t\tprevRect = {\n\t\t\ttop: range.top,\n\t\t\tbottom: range.bottom,\n\t\t\tleft: range.left,\n\t\t\tright: range.right\n\t\t};\n\t\t\n\t\trangeEdge = expand ? range.end : range.start;\n\t\tnextRow = rangeEdge.row;\n\t\tnextCol = rangeEdge.col;\n\t\t\n\t\tif(jump){\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = this.findJumpCellLeft(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = this.findJumpCellRight(range.start.row, rangeEdge.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = this.findJumpCellUp(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = this.findJumpCellDown(rangeEdge.row, range.start.col);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}else{\n\t\t\tif(expand){\n\t\t\t\tif ((this.selecting === 'row' && (dir === 'left' || dir === 'right')) || (this.selecting === 'column' && (dir === 'up' || dir === 'down'))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tswitch(dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnextCol = Math.max(nextCol - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnextCol = Math.min(nextCol + 1, this.getTableColumns().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnextRow = Math.max(nextRow - 1, 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnextRow = Math.min(nextRow + 1, this.getTableRows().length - 1);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.rowHeader && nextCol === 0) {\n\t\t\tnextCol = 1;\n\t\t}\n\t\t\n\t\tif(!expand){\n\t\t\trange.setStart(nextRow, nextCol);\n\t\t}\n\t\t\n\t\trange.setEnd(nextRow, nextCol);\n\t\t\n\t\tif(!expand){\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\n\t\tmoved = prevRect.top !== range.top || prevRect.bottom !== range.bottom || prevRect.left !== range.left || prevRect.right !== range.right;\n\n\t\tif (moved) {\n\t\t\trow = this.getRowByRangePos(range.end.row);\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col);\n\t\t\trowRect = row.getElement().getBoundingClientRect();\n\t\t\tcolumnRect = column.getElement().getBoundingClientRect();\n\t\t\trowManagerRect = this.table.rowManager.getElement().getBoundingClientRect();\n\t\t\tcolumnManagerRect = this.table.columnManager.getElement().getBoundingClientRect();\n\t\t\t\n\t\t\tif(!(rowRect.top >= rowManagerRect.top && rowRect.bottom <= rowManagerRect.bottom)){\n\t\t\t\tif(row.getElement().parentNode && column.getElement().parentNode){\n\t\t\t\t\t// Use faster autoScroll when the elements are on the DOM\n\t\t\t\t\tthis.autoScroll(range, row.getElement(), column.getElement());\n\t\t\t\t}else{\n\t\t\t\t\trow.getComponent().scrollTo(undefined, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!(columnRect.left >= columnManagerRect.left + this.getRowHeaderWidth() && columnRect.right <= columnManagerRect.right)){\n\t\t\t\tif(row.getElement().parentNode && column.getElement().parentNode){\n\t\t\t\t\t// Use faster autoScroll when the elements are on the DOM\n\t\t\t\t\tthis.autoScroll(range, row.getElement(), column.getElement());\n\t\t\t\t}else{\n\t\t\t\t\tcolumn.getComponent().scrollTo(undefined, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.layoutElement();\n\t\t\t\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\trangeRemoved(removed){\n\t\tthis.ranges = this.ranges.filter((range) => range !== removed);\n\t\t\n\t\tif(this.activeRange === removed){\n\t\t\tif(this.ranges.length){\n\t\t\t\tthis.activeRange = this.ranges[this.ranges.length - 1];\n\t\t\t}else{\n\t\t\t\tthis.addRange();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.layoutElement();\n\t}\n\t\n\tfindJumpRow(column, rows, reverse, emptyStart, emptySide){\n\t\tif(reverse){\n\t\t\trows = rows.reverse();\n\t\t}\n\n\t\treturn this.findJumpItem(emptyStart, emptySide, rows, function(row){return row.getData()[column.getField()];});\n\t}\n\t\n\tfindJumpCol(row, columns, reverse, emptyStart, emptySide){\n\t\tif(reverse){\n\t\t\tcolumns = columns.reverse();\n\t\t}\n\n\t\treturn this.findJumpItem(emptyStart, emptySide, columns, function(column){return row.getData()[column.getField()];});\n\t}\n\n\tfindJumpItem(emptyStart, emptySide, items, valueResolver){\n\t\tvar nextItem;\n\n\t\tfor(let currentItem of items){\n\t\t\tlet currentValue = valueResolver(currentItem);\n\t\t\t\n\t\t\tif(emptyStart){\n\t\t\t\tnextItem = currentItem;\n\t\t\t\tif(currentValue){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(emptySide){\n\t\t\t\t\tnextItem = currentItem;\n\t\t\t\t\t\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(currentValue){\n\t\t\t\t\t\tnextItem = currentItem;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextItem;\n\t}\n\n\tfindJumpCellLeft(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcolumns = this.getTableColumns(),\n\t\tisStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()]),\n\t\tisLeftOfStartingCellEmpty = columns[colPos - 1] ? this.isEmpty(row.getData()[columns[colPos - 1].getField()]) : false,\n\t\ttargetCols = this.rowHeader ? columns.slice(1, colPos) : columns.slice(0, colPos),\n\t\tjumpCol = this.findJumpCol(row, targetCols, true, isStartingCellEmpty, isLeftOfStartingCellEmpty);\n\t\t\n\t\tif(jumpCol){\n\t\t\treturn jumpCol.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn colPos;\n\t}\n\t\n\tfindJumpCellRight(rowPos, colPos){\n\t\tvar row = this.getRowByRangePos(rowPos),\n\t\tcolumns = this.getTableColumns(),\n\t\tisStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()]),\n\t\tisRightOfStartingCellEmpty = columns[colPos + 1] ? this.isEmpty(row.getData()[columns[colPos + 1].getField()]) : false,\n\t\tjumpCol = this.findJumpCol(row, columns.slice(colPos + 1, columns.length), false, isStartingCellEmpty, isRightOfStartingCellEmpty);\n\t\t\n\t\tif(jumpCol){\n\t\t\treturn jumpCol.getPosition() - 1;\n\t\t}\n\t\t\n\t\treturn colPos;\n\t}\n\t\n\tfindJumpCellUp(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\trows = this.getTableRows(),\n\t\tisStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()]),\n\t\tisTopOfStartingCellEmpty = rows[rowPos - 1] ? this.isEmpty(rows[rowPos - 1].getData()[column.getField()]) : false,\n\t\tjumpRow = this.findJumpRow(column, rows.slice(0, rowPos), true, isStartingCellEmpty, isTopOfStartingCellEmpty);\n\t\t\n\t\tif(jumpRow){\n\t\t\treturn jumpRow.position - 1;\n\t\t}\n\t\t\n\t\treturn rowPos;\n\t}\n\t\n\tfindJumpCellDown(rowPos, colPos) {\n\t\tvar column = this.getColumnByRangePos(colPos),\n\t\trows = this.getTableRows(),\n\t\tisStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()]),\n\t\tisBottomOfStartingCellEmpty = rows[rowPos + 1] ? this.isEmpty(rows[rowPos + 1].getData()[column.getField()]) : false,\n\t\tjumpRow = this.findJumpRow(column, rows.slice(rowPos + 1, rows.length), false, isStartingCellEmpty, isBottomOfStartingCellEmpty);\n\t\t\n\t\tif(jumpRow){\n\t\t\treturn jumpRow.position - 1;\n\t\t}\n\t\t\n\t\treturn rowPos;\n\t}\n\t\n\t///////////////////////////////////\n\t///////      Selection      ///////\n\t///////////////////////////////////\n\tnewSelection(event, element) {\n\t\tvar range;\n\t\t\n\t\tif (element.type === \"column\") {\n\t\t\tif(!this.columnSelection){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (element === this.rowHeader) {\n\t\t\t\trange = this.resetRanges();\n\t\t\t\tthis.selecting = \"all\";\n\t\t\t\t\n\t\t\t\tvar topLeftCell, bottomRightCell = this.getCell(-1, -1);\n\t\t\t\t\n\t\t\t\tif(this.rowHeader){\n\t\t\t\t\ttopLeftCell = this.getCell(0, 1);\n\t\t\t\t}else{\n\t\t\t\t\ttopLeftCell = this.getCell(0, 0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trange.setBounds(topLeftCell, bottomRightCell);\t\t\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selecting = \"column\";\n\t\t\t}\n\t\t} else if (element.column === this.rowHeader) {\n\t\t\tthis.selecting = \"row\";\n\t\t} else {\n\t\t\tthis.selecting = \"cell\";\n\t\t}\n\t\t\n\t\tif (event.shiftKey) {\n\t\t\tthis.activeRange.setBounds(false, element);\n\t\t} else if (event.ctrlKey) {\n\t\t\tthis.addRange().setBounds(element);\n\t\t} else {\n\t\t\tthis.resetRanges().setBounds(element);\n\t\t}\n\t}\n\t\n\tautoScroll(range, row, column) {\n\t\tvar tableHolder = this.table.rowManager.element,\n\t\trect, view, withinHorizontalView, withinVerticalView;\n\t\t\n\t\tif (typeof row === 'undefined') {\n\t\t\trow = this.getRowByRangePos(range.end.row).getElement();\n\t\t}\n\t\t\n\t\tif (typeof column === 'undefined') {\n\t\t\tcolumn = this.getColumnByRangePos(range.end.col).getElement();\n\t\t}\n\t\t\n\t\trect = {\n\t\t\tleft: column.offsetLeft,\n\t\t\tright: column.offsetLeft + column.offsetWidth,\n\t\t\ttop: row.offsetTop,\n\t\t\tbottom: row.offsetTop + row.offsetHeight,\n\t\t};\n\t\t\n\t\tview = {\n\t\t\tleft: tableHolder.scrollLeft + this.getRowHeaderWidth(),\n\t\t\tright: Math.ceil(tableHolder.scrollLeft + tableHolder.clientWidth),\n\t\t\ttop: tableHolder.scrollTop,\n\t\t\tbottom:\ttableHolder.scrollTop +\ttableHolder.offsetHeight - this.table.rowManager.scrollbarWidth,\n\t\t};\n\t\t\n\t\twithinHorizontalView = view.left < rect.left &&\trect.left < view.right && view.left < rect.right &&\trect.right < view.right;\n\t\t\n\t\twithinVerticalView = view.top < rect.top &&\trect.top < view.bottom && view.top < rect.bottom &&\trect.bottom < view.bottom;\n\t\t\n\t\tif (!withinHorizontalView) {\n\t\t\tif (rect.left < view.left) {\n\t\t\t\ttableHolder.scrollLeft = rect.left - this.getRowHeaderWidth();\n\t\t\t} else if (rect.right > view.right) {\n\t\t\t\ttableHolder.scrollLeft = Math.min(rect.right - tableHolder.clientWidth, rect.left - this.getRowHeaderWidth());\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!withinVerticalView) {\n\t\t\tif (rect.top < view.top) {\n\t\t\t\ttableHolder.scrollTop = rect.top;\n\t\t\t} else if (rect.bottom > view.bottom) {\n\t\t\t\ttableHolder.scrollTop = rect.bottom - tableHolder.clientHeight;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////       Layout        ///////\n\t///////////////////////////////////\n\t\n\tlayoutChange(){\n\t\tthis.overlay.style.visibility = \"hidden\";\n\t\tclearTimeout(this.layoutChangeTimeout);\n\t\tthis.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200);\n\t}\n\t\n\tredraw(force) {\n\t\tif (force) {\n\t\t\tthis.selecting = 'cell';\n\t\t\tthis.resetRanges();\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\t\n\tlayoutElement(visibleRows) {\n\t\tvar rows;\n\t\t\n\t\tif (visibleRows) {\n\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t} else {\n\t\t\trows = this.table.rowManager.getRows();\n\t\t}\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\") {\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\trow.cells.forEach((cell) => this.renderCell(cell));\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.getTableColumns().forEach((column) => {\n\t\t\tthis.layoutColumn(column);\n\t\t});\n\t\t\n\t\tthis.layoutRanges();\n\t}\n\t\n\tlayoutRow(row) {\n\t\tvar el = row.getElement(),\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesRow(row));\n\t\t\n\t\tif (this.selecting === \"row\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutColumn(column) {\n\t\tvar el = column.getElement(),\t\t\n\t\tselected = false,\n\t\toccupied = this.ranges.some((range) => range.occupiesColumn(column));\n\t\t\n\t\tif (this.selecting === \"column\") {\n\t\t\tselected = occupied;\n\t\t} else if (this.selecting === \"all\") {\n\t\t\tselected = true;\n\t\t}\n\t\t\n\t\tel.classList.toggle(\"tabulator-range-selected\", selected);\n\t\tel.classList.toggle(\"tabulator-range-highlight\", occupied);\n\t}\n\t\n\tlayoutRanges() {\n\t\tvar activeCell, activeCellEl, activeRowEl;\n\t\t\n\t\tif (!this.table.initialized) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tactiveCell = this.getActiveCell();\n\t\t\n\t\tif (!activeCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tactiveCellEl = activeCell.getElement();\n\t\tactiveRowEl = activeCell.row.getElement();\n\n\t\tif(this.table.rtl){\n\t\t\tthis.activeRangeCellElement.style.right = activeRowEl.offsetWidth - activeCellEl.offsetLeft - activeCellEl.offsetWidth + \"px\";\n\t\t}else{\n\t\t\tthis.activeRangeCellElement.style.left = activeRowEl.offsetLeft + activeCellEl.offsetLeft + \"px\";\n\t\t}\n\n\t\tthis.activeRangeCellElement.style.top =\tactiveRowEl.offsetTop + \"px\";\n\t\tthis.activeRangeCellElement.style.width = activeCellEl.offsetWidth + \"px\";\n\t\tthis.activeRangeCellElement.style.height =  activeRowEl.offsetHeight  + \"px\";\n\t\t\n\t\tthis.ranges.forEach((range) => range.layout());\n\t\t\n\t\tthis.overlay.style.visibility = \"visible\";\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////  Helper Functions   ///////\n\t///////////////////////////////////\t\n\t\n\tgetCell(rowIdx, colIdx) {\n\t\tvar row;\n\t\t\n\t\tif (colIdx < 0) {\n\t\t\tcolIdx = this.getTableColumns().length + colIdx;\n\t\t\tif (colIdx < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (rowIdx < 0) {\n\t\t\trowIdx = this.getTableRows().length + rowIdx;\n\t\t}\n\t\t\n\t\trow = this.table.rowManager.getRowFromPosition(rowIdx + 1);\n\t\t\n\t\treturn row ? row.getCells(false, true).filter((cell) => cell.column.visible)[colIdx] : null;\n\t}\n\t\n\t\n\tgetActiveCell() {\n\t\treturn this.getCell(this.activeRange.start.row, this.activeRange.start.col);\n\t}\n\t\n\tgetRowByRangePos(pos) {\n\t\treturn this.getTableRows()[pos];\n\t}\n\t\n\tgetColumnByRangePos(pos) {\n\t\treturn this.getTableColumns()[pos];\n\t}\n\t\n\tgetTableRows() {\n\t\treturn this.table.rowManager.getDisplayRows().filter(row=> row.type === \"row\");\n\t}\n\t\n\tgetTableColumns() {\n\t\treturn this.table.columnManager.getVisibleColumnsByIndex();\n\t}\n\t\n\taddRange(start, end) {\n\t\tvar  range;\n\t\t\n\t\tif(this.maxRanges !== true && this.ranges.length >= this.maxRanges){\n\t\t\tthis.ranges.shift().destroy();\n\t\t}\n\t\t\n\t\trange = new Range(this.table, this, start, end);\n\t\t\n\t\tthis.activeRange = range;\n\t\tthis.ranges.push(range);\n\t\tthis.rangeContainer.appendChild(range.element);\n\t\t\n\t\treturn range;\n\t}\n\t\n\tresetRanges() {\n\t\tvar range, cell, visibleCells;\n\t\t\n\t\tthis.ranges.forEach((range) => range.destroy());\n\t\tthis.ranges = [];\n\t\t\n\t\trange = this.addRange();\n\t\t\n\t\tif(this.table.rowManager.activeRows.length){\n\t\t\tvisibleCells = this.table.rowManager.activeRows[0].cells.filter((cell) => cell.column.visible);\n\t\t\tcell = visibleCells[this.rowHeader ? 1 : 0];\n\n\t\t\tif(cell){\n\t\t\t\trange.setBounds(cell);\n\t\t\t\tif(this.options(\"selectableRangeAutoFocus\")){\n\t\t\t\t\tthis.initializeFocus(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn range;\n\t}\n\t\n\ttableDestroyed(){\n\t\tdocument.removeEventListener(\"mouseup\", this.mouseUpEvent);\n\t\tthis.table.rowManager.element.removeEventListener(\"keydown\", this.keyDownEvent);\n\t}\n\t\n\tselectedRows(component) {\n\t\treturn component ? this.activeRange.getRows().map((row) => row.getComponent()) : this.activeRange.getRows();\n\t}\n\t\n\tselectedColumns(component) {\n\t\treturn component ? this.activeRange.getColumns().map((col) => col.getComponent()) : this.activeRange.getColumns();\n\t}\n\n\tgetRowHeaderWidth(){\n\t\tif(!this.rowHeader){\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.rowHeader.getElement().offsetWidth;\n\t}\n\n\tisEmpty(value) {\n\t\treturn value === null || value === undefined || value === \"\";\n\t}\n}\n","import Module from '../../core/Module.js';\nimport extensions from './extensions/extensions.js';\n\nexport default class SelectRow extends Module{\n\n\tstatic moduleName = \"selectRow\";\n\tstatic moduleExtensions = extensions;\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectableRows\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRowsRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectableRowsPersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableRowsCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tif(this.table.options.selectableRows === \"highlight\" && this.table.options.selectableRange){\n\t\t\tthis.table.options.selectableRows = false;\n\t\t}\n\n\t\tif(this.table.options.selectableRows !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectableRows && !this.table.options.selectableRowsPersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheck(\"selectable\", \"selectableRows\", true);\n\t\t// this.deprecationCheck(\"selectableRollingSelection\", \"selectableRowsRollingSelection\", true);\n\t\t// this.deprecationCheck(\"selectableRangeMode\", \"selectableRowsRangeMode\", true);\n\t\t// this.deprecationCheck(\"selectablePersistence\", \"selectableRowsPersistence\", true);\n\t\t// this.deprecationCheck(\"selectableCheck\", \"selectableRowsCheck\", true);\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tselectable = self.checkRowSelectability(row),\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\n\t\telement.classList.toggle(\"tabulator-selectable\", selectable);\n\t\telement.classList.toggle(\"tabulator-unselectable\", !selectable);\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\t\t\t\n\t\t\tif(self.table.options.selectableRows && self.table.options.selectableRows != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRowsRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectableRows !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectableRows){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectableRows !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectableRows){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectableRows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableRowsCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectableRows){\n\t\t\t\tif(this.table.options.selectableRowsRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\n\t\t\tcase \"number\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else{\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}","import Module from '../../core/Module.js';\r\nimport Sheet from \"./Sheet\";\r\nimport SheetComponent from \"./SheetComponent\";\r\n\r\nexport default class Spreadsheet extends Module{\r\n\t\r\n\tstatic moduleName = \"spreadsheet\";\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.element = null;\r\n\t\t\r\n\t\tthis.registerTableOption(\"spreadsheet\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetRows\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumns\", 50); \r\n\t\tthis.registerTableOption(\"spreadsheetColumnDefinition\", {}); \r\n\t\tthis.registerTableOption(\"spreadsheetOutputFull\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetData\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheets\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabs\", false); \r\n\t\tthis.registerTableOption(\"spreadsheetSheetTabsElement\", false); \r\n\t\t\r\n\t\tthis.registerTableFunction(\"setSheets\", this.setSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"addSheet\", this.addSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheets\", this.getSheets.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetDefinitions\", this.getSheetDefinitions.bind(this));\r\n\t\tthis.registerTableFunction(\"setSheetData\", this.setSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheet\", this.getSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"getSheetData\", this.getSheetData.bind(this));\r\n\t\tthis.registerTableFunction(\"clearSheet\", this.clearSheet.bind(this));\r\n\t\tthis.registerTableFunction(\"removeSheet\", this.removeSheetFunc.bind(this));\r\n\t\tthis.registerTableFunction(\"activeSheet\", this.activeSheetFunc.bind(this));\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t////// Module Initialization //////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.options(\"spreadsheet\")){\t\r\n\t\t\tthis.subscribe(\"table-initialized\", this.tableInitialized.bind(this));\r\n\t\t\tthis.subscribe(\"data-loaded\", this.loadRemoteData.bind(this));\r\n\t\t\t\r\n\t\t\tthis.table.options.index = \"_id\";\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetData\") && this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tconsole.warn(\"You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData\");\r\n\t\t\t\t\r\n\t\t\t\tthis.table.options.spreadsheetData = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.compatibilityCheck();\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheetTabs\")){\r\n\t\t\t\tthis.initializeTabset();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcompatibilityCheck(){\r\n\t\tif(this.options(\"data\")){\r\n\t\t\tconsole.warn(\"Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"pagination\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the pagination module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"groupBy\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the row grouping module\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"responsiveCollapse\")){\r\n\t\t\tconsole.warn(\"The spreadsheet module is not compatible with the responsive collapse module\");\r\n\t\t}\r\n\t}\r\n\tinitializeTabset(){\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-spreadsheet-tabs\");\r\n\t\tvar altContainer = this.options(\"spreadsheetSheetTabsElement\");\r\n\t\t\r\n\t\tif(altContainer && !(altContainer instanceof HTMLElement)){\r\n\t\t\taltContainer = document.querySelector(altContainer);\r\n\t\t\t\r\n\t\t\tif(!altContainer){\r\n\t\t\t\tconsole.warn(\"Unable to find element matching spreadsheetSheetTabsElement selector:\", this.options(\"spreadsheetSheetTabsElement\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(altContainer){\r\n\t\t\taltContainer.appendChild(this.element);\r\n\t\t}else{\r\n\t\t\tthis.footerAppend(this.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttableInitialized(){\r\n\t\tif(this.sheets.length){\r\n\t\t\tthis.loadSheet(this.sheets[0]);\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(this.options(\"spreadsheetSheets\")){\r\n\t\t\t\tthis.loadSheets(this.options(\"spreadsheetSheets\"));\r\n\t\t\t}else if(this.options(\"spreadsheetData\")){\r\n\t\t\t\tthis.loadData(this.options(\"spreadsheetData\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/////////// Ajax Parsing //////////\r\n\t///////////////////////////////////\r\n\r\n\tloadRemoteData(data, data1, data2){\r\n\t\tconsole.log(\"data\", data, data1, data2);\r\n\r\n\t\tif(Array.isArray(data)){\r\n\r\n\t\t\tthis.table.dataLoader.clearAlert();\r\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\r\n\r\n\t\t\tif(!data.length || Array.isArray(data[0])){\r\n\t\t\t\tthis.loadData(data);\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadSheets(data);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Sheet Management ////////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tloadData(data){\r\n\t\tvar def = {\r\n\t\t\tdata:data,\r\n\t\t};\r\n\t\t\r\n\t\tthis.loadSheet(this.newSheet(def));\r\n\t}\r\n\t\r\n\tdestroySheets(){\r\n\t\tthis.sheets.forEach((sheet) => {\r\n\t\t\tsheet.destroy();\r\n\t\t});\r\n\t\t\r\n\t\tthis.sheets = [];\r\n\t\tthis.activeSheet = null;\r\n\t}\r\n\t\r\n\tloadSheets(sheets){\t\r\n\t\tif(!Array.isArray(sheets)){\r\n\t\t\tsheets = [];\r\n\t\t}\r\n\t\t\r\n\t\tthis.destroySheets();\r\n\t\t\r\n\t\tsheets.forEach((def) => {\r\n\t\t\tthis.newSheet(def);\r\n\t\t});\r\n\t\t\r\n\t\tthis.loadSheet(this.sheets[0]);\r\n\t}\r\n\t\r\n\tloadSheet(sheet){\r\n\t\tif(this.activeSheet !== sheet){\r\n\t\t\tif(this.activeSheet){\r\n\t\t\t\tthis.activeSheet.unload();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.activeSheet = sheet;\r\n\t\t\t\r\n\t\t\tsheet.load();\r\n\t\t}\r\n\t}\r\n\t\r\n\tnewSheet(definition = {}){\r\n\t\tvar sheet;\r\n\t\t\r\n\t\tif(!definition.rows){\r\n\t\t\tdefinition.rows = this.options(\"spreadsheetRows\");\r\n\t\t}\r\n\t\t\r\n\t\tif(!definition.columns){\r\n\t\t\tdefinition.columns = this.options(\"spreadsheetColumns\");\r\n\t\t}\r\n\t\t\r\n\t\tsheet = new Sheet(this, definition);\r\n\t\t\r\n\t\tthis.sheets.push(sheet);\r\n\t\t\r\n\t\tif(this.element){\r\n\t\t\tthis.element.appendChild(sheet.element);\r\n\t\t}\r\n\t\t\r\n\t\treturn sheet;\r\n\t}\r\n\t\r\n\tremoveSheet(sheet){\r\n\t\tvar index = this.sheets.indexOf(sheet),\r\n\t\tprevSheet;\r\n\t\t\r\n\t\tif(this.sheets.length > 1){\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.sheets.splice(index, 1);\r\n\t\t\t\tsheet.destroy();\r\n\t\t\t\t\r\n\t\t\t\tif(this.activeSheet === sheet){\r\n\t\t\t\t\t\r\n\t\t\t\t\tprevSheet = this.sheets[index - 1] || this.sheets[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(prevSheet){\r\n\t\t\t\t\t\tthis.loadSheet(prevSheet);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.activeSheet = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Unable to remove sheet, at least one sheet must be active\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tlookupSheet(key){\r\n\t\tif(!key){\r\n\t\t\treturn this.activeSheet;\r\n\t\t}else if(key instanceof Sheet){\r\n\t\t\treturn key;\r\n\t\t}else if(key instanceof SheetComponent){\r\n\t\t\treturn key._sheet;\r\n\t\t}else{\r\n\t\t\treturn this.sheets.find(sheet => sheet.key === key) || false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t///////////////////////////////////\r\n\t//////// Public Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tsetSheets(sheets){\r\n\t\tthis.loadSheets(sheets);\r\n\r\n\t\treturn this.getSheets();\r\n\t}\r\n\r\n\taddSheet(sheet){\r\n\t\treturn this.newSheet(sheet).getComponent();\r\n\t}\r\n\t\r\n\tgetSheetDefinitions(){\r\n\t\treturn this.sheets.map(sheet => sheet.getDefinition());\r\n\t}\r\n\t\r\n\tgetSheets(){\r\n\t\treturn this.sheets.map(sheet => sheet.getComponent());\r\n\t}\r\n\t\r\n\tgetSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getComponent() : false;\r\n\t}\r\n\t\r\n\tsetSheetData(key, data){\r\n\t\tif (key && !data){\r\n\t\t\tdata = key;\r\n\t\t\tkey = false;\r\n\t\t}\r\n\t\t\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.setData(data) : false;\t\r\n\t}\r\n\t\r\n\tgetSheetData(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.getData() : false;\t\r\n\t}\r\n\t\r\n\tclearSheet(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? sheet.clear() : false;\r\n\t}\r\n\t\r\n\tremoveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\tif(sheet){\r\n\t\t\tthis.removeSheet(sheet);\r\n\t\t}\r\n\t}\r\n\t\r\n\tactiveSheetFunc(key){\r\n\t\tvar sheet = this.lookupSheet(key);\r\n\t\t\r\n\t\treturn sheet ? this.loadSheet(sheet) : false;\r\n\t}\r\n}","import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nexport default class Tooltip extends Module{\n\n\tstatic moduleName = \"tooltip\";\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\t// this.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\t// this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}","//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as allModules from '../core/modules/optional.js';\n\nclass TabulatorFull extends Tabulator {\n\tstatic extendModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._extendModule(...arguments);\n\t}\n\n\tstatic registerModule(){\n\t\tTabulator.initializeModuleBinder(allModules);\n\t\tTabulator._registerModule(...arguments);\n\t}\n\n\tconstructor(element, options, modules){\n\t\tsuper(element, options, allModules);\n\t}\n}\n\nexport default TabulatorFull;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}